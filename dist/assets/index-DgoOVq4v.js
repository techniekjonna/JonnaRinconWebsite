var H_=Object.defineProperty;var W_=(t,e,r)=>e in t?H_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Cn=(t,e,r)=>W_(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var rv={exports:{}},Nu={},sv={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wo=Symbol.for("react.element"),G_=Symbol.for("react.portal"),K_=Symbol.for("react.fragment"),Q_=Symbol.for("react.strict_mode"),Y_=Symbol.for("react.profiler"),J_=Symbol.for("react.provider"),X_=Symbol.for("react.context"),Z_=Symbol.for("react.forward_ref"),e1=Symbol.for("react.suspense"),t1=Symbol.for("react.memo"),r1=Symbol.for("react.lazy"),sx=Symbol.iterator;function s1(t){return t===null||typeof t!="object"?null:(t=sx&&t[sx]||t["@@iterator"],typeof t=="function"?t:null)}var nv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iv=Object.assign,av={};function na(t,e,r){this.props=t,this.context=e,this.refs=av,this.updater=r||nv}na.prototype.isReactComponent={};na.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};na.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ov(){}ov.prototype=na.prototype;function Km(t,e,r){this.props=t,this.context=e,this.refs=av,this.updater=r||nv}var Qm=Km.prototype=new ov;Qm.constructor=Km;iv(Qm,na.prototype);Qm.isPureReactComponent=!0;var nx=Array.isArray,lv=Object.prototype.hasOwnProperty,Ym={current:null},cv={key:!0,ref:!0,__self:!0,__source:!0};function uv(t,e,r){var s,i={},a=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)lv.call(e,s)&&!cv.hasOwnProperty(s)&&(i[s]=e[s]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:Wo,type:t,key:a,ref:o,props:i,_owner:Ym.current}}function n1(t,e){return{$$typeof:Wo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wo}function i1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ix=/\/+/g;function Vd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?i1(""+t.key):e.toString(36)}function tc(t,e,r,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wo:case G_:o=!0}}if(o)return o=t,i=i(o),t=s===""?"."+Vd(o,0):s,nx(i)?(r="",t!=null&&(r=t.replace(ix,"$&/")+"/"),tc(i,e,r,"",function(d){return d})):i!=null&&(Jm(i)&&(i=n1(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ix,"$&/")+"/")+t)),e.push(i)),1;if(o=0,s=s===""?".":s+":",nx(t))for(var l=0;l<t.length;l++){a=t[l];var c=s+Vd(a,l);o+=tc(a,e,r,c,i)}else if(c=s1(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=s+Vd(a,l++),o+=tc(a,e,r,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Il(t,e,r){if(t==null)return t;var s=[],i=0;return tc(t,s,"","",function(a){return e.call(r,a,i++)}),s}function a1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},rc={transition:null},o1={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:rc,ReactCurrentOwner:Ym};function dv(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Il,forEach:function(t,e,r){Il(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Il(t,function(){e++}),e},toArray:function(t){return Il(t,function(e){return e})||[]},only:function(t){if(!Jm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=na;pe.Fragment=K_;pe.Profiler=Y_;pe.PureComponent=Km;pe.StrictMode=Q_;pe.Suspense=e1;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o1;pe.act=dv;pe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=iv({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Ym.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)lv.call(e,c)&&!cv.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Wo,type:t.type,key:i,ref:a,props:s,_owner:o}};pe.createContext=function(t){return t={$$typeof:X_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:J_,_context:t},t.Consumer=t};pe.createElement=uv;pe.createFactory=function(t){var e=uv.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:Z_,render:t}};pe.isValidElement=Jm;pe.lazy=function(t){return{$$typeof:r1,_payload:{_status:-1,_result:t},_init:a1}};pe.memo=function(t,e){return{$$typeof:t1,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=rc.transition;rc.transition={};try{t()}finally{rc.transition=e}};pe.unstable_act=dv;pe.useCallback=function(t,e){return Vt.current.useCallback(t,e)};pe.useContext=function(t){return Vt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Vt.current.useEffect(t,e)};pe.useId=function(){return Vt.current.useId()};pe.useImperativeHandle=function(t,e,r){return Vt.current.useImperativeHandle(t,e,r)};pe.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Vt.current.useMemo(t,e)};pe.useReducer=function(t,e,r){return Vt.current.useReducer(t,e,r)};pe.useRef=function(t){return Vt.current.useRef(t)};pe.useState=function(t){return Vt.current.useState(t)};pe.useSyncExternalStore=function(t,e,r){return Vt.current.useSyncExternalStore(t,e,r)};pe.useTransition=function(){return Vt.current.useTransition()};pe.version="18.3.1";sv.exports=pe;var w=sv.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1=w,c1=Symbol.for("react.element"),u1=Symbol.for("react.fragment"),d1=Object.prototype.hasOwnProperty,h1=l1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m1={key:!0,ref:!0,__self:!0,__source:!0};function hv(t,e,r){var s,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)d1.call(e,s)&&!m1.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:c1,type:t,key:a,ref:o,props:i,_owner:h1.current}}Nu.Fragment=u1;Nu.jsx=hv;Nu.jsxs=hv;rv.exports=Nu;var n=rv.exports,mv={exports:{}},nr={},pv={exports:{}},fv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,B){var ee=q.length;q.push(B);e:for(;0<ee;){var de=ee-1>>>1,Se=q[de];if(0<i(Se,B))q[de]=B,q[ee]=Se,ee=de;else break e}}function r(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var B=q[0],ee=q.pop();if(ee!==B){q[0]=ee;e:for(var de=0,Se=q.length,Q=Se>>>1;de<Q;){var X=2*(de+1)-1,Ue=q[X],ht=X+1,bt=q[ht];if(0>i(Ue,ee))ht<Se&&0>i(bt,Ue)?(q[de]=bt,q[ht]=ee,de=ht):(q[de]=Ue,q[X]=ee,de=X);else if(ht<Se&&0>i(bt,ee))q[de]=bt,q[ht]=ee,de=ht;else break e}}return B}function i(q,B){var ee=q.sortIndex-B.sortIndex;return ee!==0?ee:q.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,m=null,p=3,v=!1,S=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(q){for(var B=r(d);B!==null;){if(B.callback===null)s(d);else if(B.startTime<=q)s(d),B.sortIndex=B.expirationTime,e(c,B);else break;B=r(d)}}function R(q){if(b=!1,j(q),!S)if(r(c)!==null)S=!0,oe(M);else{var B=r(d);B!==null&&we(R,B.startTime-q)}}function M(q,B){S=!1,b&&(b=!1,g(_),_=-1),v=!0;var ee=p;try{for(j(B),m=r(c);m!==null&&(!(m.expirationTime>B)||q&&!P());){var de=m.callback;if(typeof de=="function"){m.callback=null,p=m.priorityLevel;var Se=de(m.expirationTime<=B);B=t.unstable_now(),typeof Se=="function"?m.callback=Se:m===r(c)&&s(c),j(B)}else s(c);m=r(c)}if(m!==null)var Q=!0;else{var X=r(d);X!==null&&we(R,X.startTime-B),Q=!1}return Q}finally{m=null,p=ee,v=!1}}var D=!1,T=null,_=-1,k=5,I=-1;function P(){return!(t.unstable_now()-I<k)}function A(){if(T!==null){var q=t.unstable_now();I=q;var B=!0;try{B=T(!0,q)}finally{B?C():(D=!1,T=null)}}else D=!1}var C;if(typeof y=="function")C=function(){y(A)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,U=me.port2;me.port1.onmessage=A,C=function(){U.postMessage(null)}}else C=function(){N(A,0)};function oe(q){T=q,D||(D=!0,C())}function we(q,B){_=N(function(){q(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){S||v||(S=!0,oe(M))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var ee=p;p=B;try{return q()}finally{p=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,B){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ee=p;p=q;try{return B()}finally{p=ee}},t.unstable_scheduleCallback=function(q,B,ee){var de=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?de+ee:de):ee=de,q){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=ee+Se,q={id:h++,callback:B,priorityLevel:q,startTime:ee,expirationTime:Se,sortIndex:-1},ee>de?(q.sortIndex=ee,e(d,q),r(c)===null&&q===r(d)&&(b?(g(_),_=-1):b=!0,we(R,ee-de))):(q.sortIndex=Se,e(c,q),S||v||(S=!0,oe(M))),q},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(q){var B=p;return function(){var ee=p;p=B;try{return q.apply(this,arguments)}finally{p=ee}}}})(fv);pv.exports=fv;var p1=pv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1=w,tr=p1;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gv=new Set,go={};function ri(t,e){Bi(t,e),Bi(t+"Capture",e)}function Bi(t,e){for(go[t]=e,t=0;t<e.length;t++)gv.add(e[t])}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Th=Object.prototype.hasOwnProperty,g1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ax={},ox={};function x1(t){return Th.call(ox,t)?!0:Th.call(ax,t)?!1:g1.test(t)?ox[t]=!0:(ax[t]=!0,!1)}function y1(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function v1(t,e,r,s){if(e===null||typeof e>"u"||y1(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ft(t,e,r,s,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xt[t]=new Ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xt[e]=new Ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xt[t]=new Ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xt[t]=new Ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xt[t]=new Ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xt[t]=new Ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xt[t]=new Ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xt[t]=new Ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xt[t]=new Ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xm=/[\-:]([a-z])/g;function Zm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xm,Zm);xt[e]=new Ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xm,Zm);xt[e]=new Ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xm,Zm);xt[e]=new Ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xt[t]=new Ft(t,1,!1,t.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xt[t]=new Ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function ep(t,e,r,s){var i=xt.hasOwnProperty(e)?xt[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(v1(e,r,i,s)&&(r=null),s||i===null?x1(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,s=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Is=f1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cl=Symbol.for("react.element"),yi=Symbol.for("react.portal"),vi=Symbol.for("react.fragment"),tp=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),xv=Symbol.for("react.provider"),yv=Symbol.for("react.context"),rp=Symbol.for("react.forward_ref"),Ih=Symbol.for("react.suspense"),Ch=Symbol.for("react.suspense_list"),sp=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),vv=Symbol.for("react.offscreen"),lx=Symbol.iterator;function Ra(t){return t===null||typeof t!="object"?null:(t=lx&&t[lx]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,Fd;function za(t){if(Fd===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Fd=e&&e[1]||""}return`
`+Fd+t}var Ud=!1;function zd(t,e){if(!t||Ud)return"";Ud=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ud=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?za(t):""}function b1(t){switch(t.tag){case 5:return za(t.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return t=zd(t.type,!1),t;case 11:return t=zd(t.type.render,!1),t;case 1:return t=zd(t.type,!0),t;default:return""}}function Ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vi:return"Fragment";case yi:return"Portal";case kh:return"Profiler";case tp:return"StrictMode";case Ih:return"Suspense";case Ch:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yv:return(t.displayName||"Context")+".Consumer";case xv:return(t._context.displayName||"Context")+".Provider";case rp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sp:return e=t.displayName||null,e!==null?e:Ah(t.type)||"Memo";case Fs:e=t._payload,t=t._init;try{return Ah(t(e))}catch{}}return null}function w1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ah(e);case 8:return e===tp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function N1(t){var e=bv(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Al(t){t._valueTracker||(t._valueTracker=N1(t))}function wv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=bv(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function Sc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rh(t,e){var r=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cx(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=cn(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Nv(t,e){e=e.checked,e!=null&&ep(t,"checked",e,!1)}function Ph(t,e){Nv(t,e);var r=cn(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dh(t,e.type,r):e.hasOwnProperty("defaultValue")&&Dh(t,e.type,cn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ux(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Dh(t,e,r){(e!=="number"||Sc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ba=Array.isArray;function Ai(t,e,r,s){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&s&&(t[r].defaultSelected=!0)}else{for(r=""+cn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Mh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dx(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(z(92));if(Ba(r)){if(1<r.length)throw Error(z(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:cn(r)}}function jv(t,e){var r=cn(e.value),s=cn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function hx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _v(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_v(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rl,Ev=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rl=Rl||document.createElement("div"),Rl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xo(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j1=["Webkit","ms","Moz","O"];Object.keys(Xa).forEach(function(t){j1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xa[e]=Xa[t]})});function Sv(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Xa.hasOwnProperty(t)&&Xa[t]?(""+e).trim():e+"px"}function Tv(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,i=Sv(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,i):t[r]=i}}var _1=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oh(t,e){if(e){if(_1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Vh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fh=null;function np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uh=null,Ri=null,Pi=null;function mx(t){if(t=Qo(t)){if(typeof Uh!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Tu(e),Uh(t.stateNode,t.type,e))}}function kv(t){Ri?Pi?Pi.push(t):Pi=[t]:Ri=t}function Iv(){if(Ri){var t=Ri,e=Pi;if(Pi=Ri=null,mx(t),e)for(t=0;t<e.length;t++)mx(e[t])}}function Cv(t,e){return t(e)}function Av(){}var Bd=!1;function Rv(t,e,r){if(Bd)return t(e,r);Bd=!0;try{return Cv(t,e,r)}finally{Bd=!1,(Ri!==null||Pi!==null)&&(Av(),Iv())}}function yo(t,e){var r=t.stateNode;if(r===null)return null;var s=Tu(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(z(231,e,typeof r));return r}var zh=!1;if(ys)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){zh=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{zh=!1}function E1(t,e,r,s,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var Za=!1,Tc=null,kc=!1,Bh=null,S1={onError:function(t){Za=!0,Tc=t}};function T1(t,e,r,s,i,a,o,l,c){Za=!1,Tc=null,E1.apply(S1,arguments)}function k1(t,e,r,s,i,a,o,l,c){if(T1.apply(this,arguments),Za){if(Za){var d=Tc;Za=!1,Tc=null}else throw Error(z(198));kc||(kc=!0,Bh=d)}}function si(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Pv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function px(t){if(si(t)!==t)throw Error(z(188))}function I1(t){var e=t.alternate;if(!e){if(e=si(t),e===null)throw Error(z(188));return e!==t?null:t}for(var r=t,s=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){r=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return px(i),t;if(a===s)return px(i),e;a=a.sibling}throw Error(z(188))}if(r.return!==s.return)r=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o)throw Error(z(189))}}if(r.alternate!==s)throw Error(z(190))}if(r.tag!==3)throw Error(z(188));return r.stateNode.current===r?t:e}function Dv(t){return t=I1(t),t!==null?Mv(t):null}function Mv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mv(t);if(e!==null)return e;t=t.sibling}return null}var Lv=tr.unstable_scheduleCallback,fx=tr.unstable_cancelCallback,C1=tr.unstable_shouldYield,A1=tr.unstable_requestPaint,Je=tr.unstable_now,R1=tr.unstable_getCurrentPriorityLevel,ip=tr.unstable_ImmediatePriority,Ov=tr.unstable_UserBlockingPriority,Ic=tr.unstable_NormalPriority,P1=tr.unstable_LowPriority,Vv=tr.unstable_IdlePriority,ju=null,Fr=null;function D1(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(ju,t,void 0,(t.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:O1,M1=Math.log,L1=Math.LN2;function O1(t){return t>>>=0,t===0?32:31-(M1(t)/L1|0)|0}var Pl=64,Dl=4194304;function $a(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cc(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?s=$a(l):(a&=o,a!==0&&(s=$a(a)))}else o=r&~i,o!==0?s=$a(o):a!==0&&(s=$a(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-Sr(e),i=1<<r,s|=t[r],e&=~i;return s}function V1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F1(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Sr(a),l=1<<o,c=i[o];c===-1?(!(l&r)||l&s)&&(i[o]=V1(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function $h(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fv(){var t=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),t}function $d(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Go(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sr(e),t[e]=r}function U1(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Sr(r),a=1<<i;e[i]=0,s[i]=-1,t[i]=-1,r&=~a}}function ap(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-Sr(r),i=1<<s;i&e|t[s]&e&&(t[s]|=e),r&=~i}}var Ee=0;function Uv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zv,op,Bv,$v,qv,qh=!1,Ml=[],Ys=null,Js=null,Xs=null,vo=new Map,bo=new Map,zs=[],z1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gx(t,e){switch(t){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":vo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(e.pointerId)}}function Da(t,e,r,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Qo(e),e!==null&&op(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function B1(t,e,r,s,i){switch(e){case"focusin":return Ys=Da(Ys,t,e,r,s,i),!0;case"dragenter":return Js=Da(Js,t,e,r,s,i),!0;case"mouseover":return Xs=Da(Xs,t,e,r,s,i),!0;case"pointerover":var a=i.pointerId;return vo.set(a,Da(vo.get(a)||null,t,e,r,s,i)),!0;case"gotpointercapture":return a=i.pointerId,bo.set(a,Da(bo.get(a)||null,t,e,r,s,i)),!0}return!1}function Hv(t){var e=Dn(t.target);if(e!==null){var r=si(e);if(r!==null){if(e=r.tag,e===13){if(e=Pv(r),e!==null){t.blockedOn=e,qv(t.priority,function(){Bv(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);Fh=s,r.target.dispatchEvent(s),Fh=null}else return e=Qo(r),e!==null&&op(e),t.blockedOn=r,!1;e.shift()}return!0}function xx(t,e,r){sc(t)&&r.delete(e)}function $1(){qh=!1,Ys!==null&&sc(Ys)&&(Ys=null),Js!==null&&sc(Js)&&(Js=null),Xs!==null&&sc(Xs)&&(Xs=null),vo.forEach(xx),bo.forEach(xx)}function Ma(t,e){t.blockedOn===e&&(t.blockedOn=null,qh||(qh=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,$1)))}function wo(t){function e(i){return Ma(i,t)}if(0<Ml.length){Ma(Ml[0],t);for(var r=1;r<Ml.length;r++){var s=Ml[r];s.blockedOn===t&&(s.blockedOn=null)}}for(Ys!==null&&Ma(Ys,t),Js!==null&&Ma(Js,t),Xs!==null&&Ma(Xs,t),vo.forEach(e),bo.forEach(e),r=0;r<zs.length;r++)s=zs[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<zs.length&&(r=zs[0],r.blockedOn===null);)Hv(r),r.blockedOn===null&&zs.shift()}var Di=Is.ReactCurrentBatchConfig,Ac=!0;function q1(t,e,r,s){var i=Ee,a=Di.transition;Di.transition=null;try{Ee=1,lp(t,e,r,s)}finally{Ee=i,Di.transition=a}}function H1(t,e,r,s){var i=Ee,a=Di.transition;Di.transition=null;try{Ee=4,lp(t,e,r,s)}finally{Ee=i,Di.transition=a}}function lp(t,e,r,s){if(Ac){var i=Hh(t,e,r,s);if(i===null)Zd(t,e,s,Rc,r),gx(t,s);else if(B1(i,t,e,r,s))s.stopPropagation();else if(gx(t,s),e&4&&-1<z1.indexOf(t)){for(;i!==null;){var a=Qo(i);if(a!==null&&zv(a),a=Hh(t,e,r,s),a===null&&Zd(t,e,s,Rc,r),a===i)break;i=a}i!==null&&s.stopPropagation()}else Zd(t,e,s,null,r)}}var Rc=null;function Hh(t,e,r,s){if(Rc=null,t=np(s),t=Dn(t),t!==null)if(e=si(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Pv(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rc=t,null}function Wv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R1()){case ip:return 1;case Ov:return 4;case Ic:case P1:return 16;case Vv:return 536870912;default:return 16}default:return 16}}var Gs=null,cp=null,nc=null;function Gv(){if(nc)return nc;var t,e=cp,r=e.length,s,i="value"in Gs?Gs.value:Gs.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(s=1;s<=o&&e[r-s]===i[a-s];s++);return nc=i.slice(t,1<s?1-s:void 0)}function ic(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ll(){return!0}function yx(){return!1}function ir(t){function e(r,s,i,a,o){this._reactName=r,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ll:yx,this.isPropagationStopped=yx,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),e}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},up=ir(ia),Ko=$e({},ia,{view:0,detail:0}),W1=ir(Ko),qd,Hd,La,_u=$e({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==La&&(La&&t.type==="mousemove"?(qd=t.screenX-La.screenX,Hd=t.screenY-La.screenY):Hd=qd=0,La=t),qd)},movementY:function(t){return"movementY"in t?t.movementY:Hd}}),vx=ir(_u),G1=$e({},_u,{dataTransfer:0}),K1=ir(G1),Q1=$e({},Ko,{relatedTarget:0}),Wd=ir(Q1),Y1=$e({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),J1=ir(Y1),X1=$e({},ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Z1=ir(X1),e2=$e({},ia,{data:0}),bx=ir(e2),t2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s2[t])?!!e[t]:!1}function dp(){return n2}var i2=$e({},Ko,{key:function(t){if(t.key){var e=t2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ic(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?r2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dp,charCode:function(t){return t.type==="keypress"?ic(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ic(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),a2=ir(i2),o2=$e({},_u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wx=ir(o2),l2=$e({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dp}),c2=ir(l2),u2=$e({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),d2=ir(u2),h2=$e({},_u,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),m2=ir(h2),p2=[9,13,27,32],hp=ys&&"CompositionEvent"in window,eo=null;ys&&"documentMode"in document&&(eo=document.documentMode);var f2=ys&&"TextEvent"in window&&!eo,Kv=ys&&(!hp||eo&&8<eo&&11>=eo),Nx=" ",jx=!1;function Qv(t,e){switch(t){case"keyup":return p2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bi=!1;function g2(t,e){switch(t){case"compositionend":return Yv(e);case"keypress":return e.which!==32?null:(jx=!0,Nx);case"textInput":return t=e.data,t===Nx&&jx?null:t;default:return null}}function x2(t,e){if(bi)return t==="compositionend"||!hp&&Qv(t,e)?(t=Gv(),nc=cp=Gs=null,bi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kv&&e.locale!=="ko"?null:e.data;default:return null}}var y2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _x(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!y2[t.type]:e==="textarea"}function Jv(t,e,r,s){kv(s),e=Pc(e,"onChange"),0<e.length&&(r=new up("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var to=null,No=null;function v2(t){lb(t,0)}function Eu(t){var e=ji(t);if(wv(e))return t}function b2(t,e){if(t==="change")return e}var Xv=!1;if(ys){var Gd;if(ys){var Kd="oninput"in document;if(!Kd){var Ex=document.createElement("div");Ex.setAttribute("oninput","return;"),Kd=typeof Ex.oninput=="function"}Gd=Kd}else Gd=!1;Xv=Gd&&(!document.documentMode||9<document.documentMode)}function Sx(){to&&(to.detachEvent("onpropertychange",Zv),No=to=null)}function Zv(t){if(t.propertyName==="value"&&Eu(No)){var e=[];Jv(e,No,t,np(t)),Rv(v2,e)}}function w2(t,e,r){t==="focusin"?(Sx(),to=e,No=r,to.attachEvent("onpropertychange",Zv)):t==="focusout"&&Sx()}function N2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eu(No)}function j2(t,e){if(t==="click")return Eu(e)}function _2(t,e){if(t==="input"||t==="change")return Eu(e)}function E2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kr=typeof Object.is=="function"?Object.is:E2;function jo(t,e){if(kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var i=r[s];if(!Th.call(e,i)||!kr(t[i],e[i]))return!1}return!0}function Tx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kx(t,e){var r=Tx(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tx(r)}}function eb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tb(){for(var t=window,e=Sc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Sc(t.document)}return e}function mp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function S2(t){var e=tb(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&eb(r.ownerDocument.documentElement,r)){if(s!==null&&mp(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!t.extend&&a>s&&(i=s,s=a,a=i),i=kx(r,a);var o=kx(r,s);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T2=ys&&"documentMode"in document&&11>=document.documentMode,wi=null,Wh=null,ro=null,Gh=!1;function Ix(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gh||wi==null||wi!==Sc(s)||(s=wi,"selectionStart"in s&&mp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ro&&jo(ro,s)||(ro=s,s=Pc(Wh,"onSelect"),0<s.length&&(e=new up("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=wi)))}function Ol(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ni={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},Qd={},rb={};ys&&(rb=document.createElement("div").style,"AnimationEvent"in window||(delete Ni.animationend.animation,delete Ni.animationiteration.animation,delete Ni.animationstart.animation),"TransitionEvent"in window||delete Ni.transitionend.transition);function Su(t){if(Qd[t])return Qd[t];if(!Ni[t])return t;var e=Ni[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in rb)return Qd[t]=e[r];return t}var sb=Su("animationend"),nb=Su("animationiteration"),ib=Su("animationstart"),ab=Su("transitionend"),ob=new Map,Cx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(t,e){ob.set(t,e),ri(e,[t])}for(var Yd=0;Yd<Cx.length;Yd++){var Jd=Cx[Yd],k2=Jd.toLowerCase(),I2=Jd[0].toUpperCase()+Jd.slice(1);vn(k2,"on"+I2)}vn(sb,"onAnimationEnd");vn(nb,"onAnimationIteration");vn(ib,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(ab,"onTransitionEnd");Bi("onMouseEnter",["mouseout","mouseover"]);Bi("onMouseLeave",["mouseout","mouseover"]);Bi("onPointerEnter",["pointerout","pointerover"]);Bi("onPointerLeave",["pointerout","pointerover"]);ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ri("onBeforeInput",["compositionend","keypress","textInput","paste"]);ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C2=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function Ax(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,k1(s,e,void 0,t),t.currentTarget=null}function lb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;Ax(i,l,d),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;Ax(i,l,d),a=c}}}if(kc)throw t=Bh,kc=!1,Bh=null,t}function Pe(t,e){var r=e[Xh];r===void 0&&(r=e[Xh]=new Set);var s=t+"__bubble";r.has(s)||(cb(e,t,2,!1),r.add(s))}function Xd(t,e,r){var s=0;e&&(s|=4),cb(r,t,s,e)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function _o(t){if(!t[Vl]){t[Vl]=!0,gv.forEach(function(r){r!=="selectionchange"&&(C2.has(r)||Xd(r,!1,t),Xd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vl]||(e[Vl]=!0,Xd("selectionchange",!1,e))}}function cb(t,e,r,s){switch(Wv(e)){case 1:var i=q1;break;case 4:i=H1;break;default:i=lp}r=i.bind(null,e,r,t),i=void 0,!zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Zd(t,e,r,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Dn(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}Rv(function(){var d=a,h=np(r),m=[];e:{var p=ob.get(t);if(p!==void 0){var v=up,S=t;switch(t){case"keypress":if(ic(r)===0)break e;case"keydown":case"keyup":v=a2;break;case"focusin":S="focus",v=Wd;break;case"focusout":S="blur",v=Wd;break;case"beforeblur":case"afterblur":v=Wd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=K1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=c2;break;case sb:case nb:case ib:v=J1;break;case ab:v=d2;break;case"scroll":v=W1;break;case"wheel":v=m2;break;case"copy":case"cut":case"paste":v=Z1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=wx}var b=(e&4)!==0,N=!b&&t==="scroll",g=b?p!==null?p+"Capture":null:p;b=[];for(var y=d,j;y!==null;){j=y;var R=j.stateNode;if(j.tag===5&&R!==null&&(j=R,g!==null&&(R=yo(y,g),R!=null&&b.push(Eo(y,R,j)))),N)break;y=y.return}0<b.length&&(p=new v(p,S,null,r,h),m.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&r!==Fh&&(S=r.relatedTarget||r.fromElement)&&(Dn(S)||S[vs]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(S=r.relatedTarget||r.toElement,v=d,S=S?Dn(S):null,S!==null&&(N=si(S),S!==N||S.tag!==5&&S.tag!==6)&&(S=null)):(v=null,S=d),v!==S)){if(b=vx,R="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(b=wx,R="onPointerLeave",g="onPointerEnter",y="pointer"),N=v==null?p:ji(v),j=S==null?p:ji(S),p=new b(R,y+"leave",v,r,h),p.target=N,p.relatedTarget=j,R=null,Dn(h)===d&&(b=new b(g,y+"enter",S,r,h),b.target=j,b.relatedTarget=N,R=b),N=R,v&&S)t:{for(b=v,g=S,y=0,j=b;j;j=hi(j))y++;for(j=0,R=g;R;R=hi(R))j++;for(;0<y-j;)b=hi(b),y--;for(;0<j-y;)g=hi(g),j--;for(;y--;){if(b===g||g!==null&&b===g.alternate)break t;b=hi(b),g=hi(g)}b=null}else b=null;v!==null&&Rx(m,p,v,b,!1),S!==null&&N!==null&&Rx(m,N,S,b,!0)}}e:{if(p=d?ji(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var M=b2;else if(_x(p))if(Xv)M=_2;else{M=N2;var D=w2}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=j2);if(M&&(M=M(t,d))){Jv(m,M,r,h);break e}D&&D(t,p,d),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&Dh(p,"number",p.value)}switch(D=d?ji(d):window,t){case"focusin":(_x(D)||D.contentEditable==="true")&&(wi=D,Wh=d,ro=null);break;case"focusout":ro=Wh=wi=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,Ix(m,r,h);break;case"selectionchange":if(T2)break;case"keydown":case"keyup":Ix(m,r,h)}var T;if(hp)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else bi?Qv(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Kv&&r.locale!=="ko"&&(bi||_!=="onCompositionStart"?_==="onCompositionEnd"&&bi&&(T=Gv()):(Gs=h,cp="value"in Gs?Gs.value:Gs.textContent,bi=!0)),D=Pc(d,_),0<D.length&&(_=new bx(_,t,null,r,h),m.push({event:_,listeners:D}),T?_.data=T:(T=Yv(r),T!==null&&(_.data=T)))),(T=f2?g2(t,r):x2(t,r))&&(d=Pc(d,"onBeforeInput"),0<d.length&&(h=new bx("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:d}),h.data=T))}lb(m,e)})}function Eo(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Pc(t,e){for(var r=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=yo(t,r),a!=null&&s.unshift(Eo(t,a,i)),a=yo(t,e),a!=null&&s.push(Eo(t,a,i))),t=t.return}return s}function hi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rx(t,e,r,s,i){for(var a=e._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,i?(c=yo(r,a),c!=null&&o.unshift(Eo(r,c,l))):i||(c=yo(r,a),c!=null&&o.push(Eo(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var A2=/\r\n?/g,R2=/\u0000|\uFFFD/g;function Px(t){return(typeof t=="string"?t:""+t).replace(A2,`
`).replace(R2,"")}function Fl(t,e,r){if(e=Px(e),Px(t)!==e&&r)throw Error(z(425))}function Dc(){}var Kh=null,Qh=null;function Yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jh=typeof setTimeout=="function"?setTimeout:void 0,P2=typeof clearTimeout=="function"?clearTimeout:void 0,Dx=typeof Promise=="function"?Promise:void 0,D2=typeof queueMicrotask=="function"?queueMicrotask:typeof Dx<"u"?function(t){return Dx.resolve(null).then(t).catch(M2)}:Jh;function M2(t){setTimeout(function(){throw t})}function eh(t,e){var r=e,s=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){t.removeChild(i),wo(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=i}while(r);wo(e)}function Zs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var aa=Math.random().toString(36).slice(2),Vr="__reactFiber$"+aa,So="__reactProps$"+aa,vs="__reactContainer$"+aa,Xh="__reactEvents$"+aa,L2="__reactListeners$"+aa,O2="__reactHandles$"+aa;function Dn(t){var e=t[Vr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[vs]||r[Vr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Mx(t);t!==null;){if(r=t[Vr])return r;t=Mx(t)}return e}t=r,r=t.parentNode}return null}function Qo(t){return t=t[Vr]||t[vs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ji(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Tu(t){return t[So]||null}var Zh=[],_i=-1;function bn(t){return{current:t}}function Me(t){0>_i||(t.current=Zh[_i],Zh[_i]=null,_i--)}function Ae(t,e){_i++,Zh[_i]=t.current,t.current=e}var un={},At=bn(un),qt=bn(!1),$n=un;function $i(t,e){var r=t.type.contextTypes;if(!r)return un;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ht(t){return t=t.childContextTypes,t!=null}function Mc(){Me(qt),Me(At)}function Lx(t,e,r){if(At.current!==un)throw Error(z(168));Ae(At,e),Ae(qt,r)}function ub(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(z(108,w1(t)||"Unknown",i));return $e({},r,s)}function Lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||un,$n=At.current,Ae(At,t),Ae(qt,qt.current),!0}function Ox(t,e,r){var s=t.stateNode;if(!s)throw Error(z(169));r?(t=ub(t,e,$n),s.__reactInternalMemoizedMergedChildContext=t,Me(qt),Me(At),Ae(At,t)):Me(qt),Ae(qt,r)}var os=null,ku=!1,th=!1;function db(t){os===null?os=[t]:os.push(t)}function V2(t){ku=!0,db(t)}function wn(){if(!th&&os!==null){th=!0;var t=0,e=Ee;try{var r=os;for(Ee=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}os=null,ku=!1}catch(i){throw os!==null&&(os=os.slice(t+1)),Lv(ip,wn),i}finally{Ee=e,th=!1}}return null}var Ei=[],Si=0,Oc=null,Vc=0,ar=[],or=0,qn=null,ls=1,cs="";function An(t,e){Ei[Si++]=Vc,Ei[Si++]=Oc,Oc=t,Vc=e}function hb(t,e,r){ar[or++]=ls,ar[or++]=cs,ar[or++]=qn,qn=t;var s=ls;t=cs;var i=32-Sr(s)-1;s&=~(1<<i),r+=1;var a=32-Sr(e)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,ls=1<<32-Sr(e)+i|r<<i|s,cs=a+t}else ls=1<<a|r<<i|s,cs=t}function pp(t){t.return!==null&&(An(t,1),hb(t,1,0))}function fp(t){for(;t===Oc;)Oc=Ei[--Si],Ei[Si]=null,Vc=Ei[--Si],Ei[Si]=null;for(;t===qn;)qn=ar[--or],ar[or]=null,cs=ar[--or],ar[or]=null,ls=ar[--or],ar[or]=null}var er=null,Xt=null,Oe=!1,Nr=null;function mb(t,e){var r=cr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Vx(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,er=t,Xt=Zs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,er=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=qn!==null?{id:ls,overflow:cs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=cr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,er=t,Xt=null,!0):!1;default:return!1}}function em(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tm(t){if(Oe){var e=Xt;if(e){var r=e;if(!Vx(t,e)){if(em(t))throw Error(z(418));e=Zs(r.nextSibling);var s=er;e&&Vx(t,e)?mb(s,r):(t.flags=t.flags&-4097|2,Oe=!1,er=t)}}else{if(em(t))throw Error(z(418));t.flags=t.flags&-4097|2,Oe=!1,er=t}}}function Fx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;er=t}function Ul(t){if(t!==er)return!1;if(!Oe)return Fx(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yh(t.type,t.memoizedProps)),e&&(e=Xt)){if(em(t))throw pb(),Error(z(418));for(;e;)mb(t,e),e=Zs(e.nextSibling)}if(Fx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Xt=Zs(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=er?Zs(t.stateNode.nextSibling):null;return!0}function pb(){for(var t=Xt;t;)t=Zs(t.nextSibling)}function qi(){Xt=er=null,Oe=!1}function gp(t){Nr===null?Nr=[t]:Nr.push(t)}var F2=Is.ReactCurrentBatchConfig;function Oa(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(z(309));var s=r.stateNode}if(!s)throw Error(z(147,t));var i=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(z(284));if(!r._owner)throw Error(z(290,t))}return t}function zl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ux(t){var e=t._init;return e(t._payload)}function fb(t){function e(g,y){if(t){var j=g.deletions;j===null?(g.deletions=[y],g.flags|=16):j.push(y)}}function r(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function s(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=sn(g,y),g.index=0,g.sibling=null,g}function a(g,y,j){return g.index=j,t?(j=g.alternate,j!==null?(j=j.index,j<y?(g.flags|=2,y):j):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,y,j,R){return y===null||y.tag!==6?(y=lh(j,g.mode,R),y.return=g,y):(y=i(y,j),y.return=g,y)}function c(g,y,j,R){var M=j.type;return M===vi?h(g,y,j.props.children,R,j.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Fs&&Ux(M)===y.type)?(R=i(y,j.props),R.ref=Oa(g,y,j),R.return=g,R):(R=hc(j.type,j.key,j.props,null,g.mode,R),R.ref=Oa(g,y,j),R.return=g,R)}function d(g,y,j,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==j.containerInfo||y.stateNode.implementation!==j.implementation?(y=ch(j,g.mode,R),y.return=g,y):(y=i(y,j.children||[]),y.return=g,y)}function h(g,y,j,R,M){return y===null||y.tag!==7?(y=Fn(j,g.mode,R,M),y.return=g,y):(y=i(y,j),y.return=g,y)}function m(g,y,j){if(typeof y=="string"&&y!==""||typeof y=="number")return y=lh(""+y,g.mode,j),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Cl:return j=hc(y.type,y.key,y.props,null,g.mode,j),j.ref=Oa(g,null,y),j.return=g,j;case yi:return y=ch(y,g.mode,j),y.return=g,y;case Fs:var R=y._init;return m(g,R(y._payload),j)}if(Ba(y)||Ra(y))return y=Fn(y,g.mode,j,null),y.return=g,y;zl(g,y)}return null}function p(g,y,j,R){var M=y!==null?y.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return M!==null?null:l(g,y,""+j,R);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Cl:return j.key===M?c(g,y,j,R):null;case yi:return j.key===M?d(g,y,j,R):null;case Fs:return M=j._init,p(g,y,M(j._payload),R)}if(Ba(j)||Ra(j))return M!==null?null:h(g,y,j,R,null);zl(g,j)}return null}function v(g,y,j,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return g=g.get(j)||null,l(y,g,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Cl:return g=g.get(R.key===null?j:R.key)||null,c(y,g,R,M);case yi:return g=g.get(R.key===null?j:R.key)||null,d(y,g,R,M);case Fs:var D=R._init;return v(g,y,j,D(R._payload),M)}if(Ba(R)||Ra(R))return g=g.get(j)||null,h(y,g,R,M,null);zl(y,R)}return null}function S(g,y,j,R){for(var M=null,D=null,T=y,_=y=0,k=null;T!==null&&_<j.length;_++){T.index>_?(k=T,T=null):k=T.sibling;var I=p(g,T,j[_],R);if(I===null){T===null&&(T=k);break}t&&T&&I.alternate===null&&e(g,T),y=a(I,y,_),D===null?M=I:D.sibling=I,D=I,T=k}if(_===j.length)return r(g,T),Oe&&An(g,_),M;if(T===null){for(;_<j.length;_++)T=m(g,j[_],R),T!==null&&(y=a(T,y,_),D===null?M=T:D.sibling=T,D=T);return Oe&&An(g,_),M}for(T=s(g,T);_<j.length;_++)k=v(T,g,_,j[_],R),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?_:k.key),y=a(k,y,_),D===null?M=k:D.sibling=k,D=k);return t&&T.forEach(function(P){return e(g,P)}),Oe&&An(g,_),M}function b(g,y,j,R){var M=Ra(j);if(typeof M!="function")throw Error(z(150));if(j=M.call(j),j==null)throw Error(z(151));for(var D=M=null,T=y,_=y=0,k=null,I=j.next();T!==null&&!I.done;_++,I=j.next()){T.index>_?(k=T,T=null):k=T.sibling;var P=p(g,T,I.value,R);if(P===null){T===null&&(T=k);break}t&&T&&P.alternate===null&&e(g,T),y=a(P,y,_),D===null?M=P:D.sibling=P,D=P,T=k}if(I.done)return r(g,T),Oe&&An(g,_),M;if(T===null){for(;!I.done;_++,I=j.next())I=m(g,I.value,R),I!==null&&(y=a(I,y,_),D===null?M=I:D.sibling=I,D=I);return Oe&&An(g,_),M}for(T=s(g,T);!I.done;_++,I=j.next())I=v(T,g,_,I.value,R),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?_:I.key),y=a(I,y,_),D===null?M=I:D.sibling=I,D=I);return t&&T.forEach(function(A){return e(g,A)}),Oe&&An(g,_),M}function N(g,y,j,R){if(typeof j=="object"&&j!==null&&j.type===vi&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Cl:e:{for(var M=j.key,D=y;D!==null;){if(D.key===M){if(M=j.type,M===vi){if(D.tag===7){r(g,D.sibling),y=i(D,j.props.children),y.return=g,g=y;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Fs&&Ux(M)===D.type){r(g,D.sibling),y=i(D,j.props),y.ref=Oa(g,D,j),y.return=g,g=y;break e}r(g,D);break}else e(g,D);D=D.sibling}j.type===vi?(y=Fn(j.props.children,g.mode,R,j.key),y.return=g,g=y):(R=hc(j.type,j.key,j.props,null,g.mode,R),R.ref=Oa(g,y,j),R.return=g,g=R)}return o(g);case yi:e:{for(D=j.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===j.containerInfo&&y.stateNode.implementation===j.implementation){r(g,y.sibling),y=i(y,j.children||[]),y.return=g,g=y;break e}else{r(g,y);break}else e(g,y);y=y.sibling}y=ch(j,g.mode,R),y.return=g,g=y}return o(g);case Fs:return D=j._init,N(g,y,D(j._payload),R)}if(Ba(j))return S(g,y,j,R);if(Ra(j))return b(g,y,j,R);zl(g,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,y!==null&&y.tag===6?(r(g,y.sibling),y=i(y,j),y.return=g,g=y):(r(g,y),y=lh(j,g.mode,R),y.return=g,g=y),o(g)):r(g,y)}return N}var Hi=fb(!0),gb=fb(!1),Fc=bn(null),Uc=null,Ti=null,xp=null;function yp(){xp=Ti=Uc=null}function vp(t){var e=Fc.current;Me(Fc),t._currentValue=e}function rm(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function Mi(t,e){Uc=t,xp=Ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function mr(t){var e=t._currentValue;if(xp!==t)if(t={context:t,memoizedValue:e,next:null},Ti===null){if(Uc===null)throw Error(z(308));Ti=t,Uc.dependencies={lanes:0,firstContext:t}}else Ti=Ti.next=t;return e}var Mn=null;function bp(t){Mn===null?Mn=[t]:Mn.push(t)}function xb(t,e,r,s){var i=e.interleaved;return i===null?(r.next=r,bp(e)):(r.next=i.next,i.next=r),e.interleaved=r,bs(t,s)}function bs(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Us=!1;function wp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function en(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,be&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,bs(t,r)}return i=s.interleaved,i===null?(e.next=e,bp(s)):(e.next=i.next,i.next=e),s.interleaved=e,bs(t,r)}function ac(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,ap(t,r)}}function zx(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function zc(t,e,r,s){var i=t.updateQueue;Us=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var m=i.baseState;o=0,h=d=c=null,l=a;do{var p=l.lane,v=l.eventTime;if((s&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=t,b=l;switch(p=e,v=r,b.tag){case 1:if(S=b.payload,typeof S=="function"){m=S.call(v,m,p);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=b.payload,p=typeof S=="function"?S.call(v,m,p):S,p==null)break e;m=$e({},m,p);break e;case 2:Us=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,c=m):h=h.next=v,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(c=m),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Wn|=o,t.lanes=o,t.memoizedState=m}}function Bx(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=r,typeof i!="function")throw Error(z(191,i));i.call(s)}}}var Yo={},Ur=bn(Yo),To=bn(Yo),ko=bn(Yo);function Ln(t){if(t===Yo)throw Error(z(174));return t}function Np(t,e){switch(Ae(ko,e),Ae(To,t),Ae(Ur,Yo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lh(e,t)}Me(Ur),Ae(Ur,e)}function Wi(){Me(Ur),Me(To),Me(ko)}function vb(t){Ln(ko.current);var e=Ln(Ur.current),r=Lh(e,t.type);e!==r&&(Ae(To,t),Ae(Ur,r))}function jp(t){To.current===t&&(Me(Ur),Me(To))}var ze=bn(0);function Bc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rh=[];function _p(){for(var t=0;t<rh.length;t++)rh[t]._workInProgressVersionPrimary=null;rh.length=0}var oc=Is.ReactCurrentDispatcher,sh=Is.ReactCurrentBatchConfig,Hn=0,Be=null,nt=null,ct=null,$c=!1,so=!1,Io=0,U2=0;function Nt(){throw Error(z(321))}function Ep(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!kr(t[r],e[r]))return!1;return!0}function Sp(t,e,r,s,i,a){if(Hn=a,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oc.current=t===null||t.memoizedState===null?q2:H2,t=r(s,i),so){a=0;do{if(so=!1,Io=0,25<=a)throw Error(z(301));a+=1,ct=nt=null,e.updateQueue=null,oc.current=W2,t=r(s,i)}while(so)}if(oc.current=qc,e=nt!==null&&nt.next!==null,Hn=0,ct=nt=Be=null,$c=!1,e)throw Error(z(300));return t}function Tp(){var t=Io!==0;return Io=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Be.memoizedState=ct=t:ct=ct.next=t,ct}function pr(){if(nt===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=ct===null?Be.memoizedState:ct.next;if(e!==null)ct=e,nt=t;else{if(t===null)throw Error(z(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ct===null?Be.memoizedState=ct=t:ct=ct.next=t}return ct}function Co(t,e){return typeof e=="function"?e(t):e}function nh(t){var e=pr(),r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var s=nt,i=s.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,c=null,d=a;do{var h=d.lane;if((Hn&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=s):c=c.next=m,Be.lanes|=h,Wn|=h}d=d.next}while(d!==null&&d!==a);c===null?o=s:c.next=l,kr(s,e.memoizedState)||($t=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}if(t=r.interleaved,t!==null){i=t;do a=i.lane,Be.lanes|=a,Wn|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ih(t){var e=pr(),r=e.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var s=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);kr(a,e.memoizedState)||($t=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,s]}function bb(){}function wb(t,e){var r=Be,s=pr(),i=e(),a=!kr(s.memoizedState,i);if(a&&(s.memoizedState=i,$t=!0),s=s.queue,kp(_b.bind(null,r,s,t),[t]),s.getSnapshot!==e||a||ct!==null&&ct.memoizedState.tag&1){if(r.flags|=2048,Ao(9,jb.bind(null,r,s,i,e),void 0,null),ut===null)throw Error(z(349));Hn&30||Nb(r,e,i)}return i}function Nb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function jb(t,e,r,s){e.value=r,e.getSnapshot=s,Eb(e)&&Sb(t)}function _b(t,e,r){return r(function(){Eb(e)&&Sb(t)})}function Eb(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!kr(t,r)}catch{return!0}}function Sb(t){var e=bs(t,1);e!==null&&Tr(e,t,1,-1)}function $x(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=$2.bind(null,Be,t),[e.memoizedState,t]}function Ao(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function Tb(){return pr().memoizedState}function lc(t,e,r,s){var i=Lr();Be.flags|=t,i.memoizedState=Ao(1|e,r,void 0,s===void 0?null:s)}function Iu(t,e,r,s){var i=pr();s=s===void 0?null:s;var a=void 0;if(nt!==null){var o=nt.memoizedState;if(a=o.destroy,s!==null&&Ep(s,o.deps)){i.memoizedState=Ao(e,r,a,s);return}}Be.flags|=t,i.memoizedState=Ao(1|e,r,a,s)}function qx(t,e){return lc(8390656,8,t,e)}function kp(t,e){return Iu(2048,8,t,e)}function kb(t,e){return Iu(4,2,t,e)}function Ib(t,e){return Iu(4,4,t,e)}function Cb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ab(t,e,r){return r=r!=null?r.concat([t]):null,Iu(4,4,Cb.bind(null,e,t),r)}function Ip(){}function Rb(t,e){var r=pr();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Ep(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function Pb(t,e){var r=pr();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Ep(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function Db(t,e,r){return Hn&21?(kr(r,e)||(r=Fv(),Be.lanes|=r,Wn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=r)}function z2(t,e){var r=Ee;Ee=r!==0&&4>r?r:4,t(!0);var s=sh.transition;sh.transition={};try{t(!1),e()}finally{Ee=r,sh.transition=s}}function Mb(){return pr().memoizedState}function B2(t,e,r){var s=rn(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Lb(t))Ob(e,r);else if(r=xb(t,e,r,s),r!==null){var i=Lt();Tr(r,t,s,i),Vb(r,e,s)}}function $2(t,e,r){var s=rn(t),i={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Lb(t))Ob(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(i.hasEagerState=!0,i.eagerState=l,kr(l,o)){var c=e.interleaved;c===null?(i.next=i,bp(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=xb(t,e,i,s),r!==null&&(i=Lt(),Tr(r,t,s,i),Vb(r,e,s))}}function Lb(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function Ob(t,e){so=$c=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Vb(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,ap(t,r)}}var qc={readContext:mr,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},q2={readContext:mr,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:mr,useEffect:qx,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,lc(4194308,4,Cb.bind(null,e,t),r)},useLayoutEffect:function(t,e){return lc(4194308,4,t,e)},useInsertionEffect:function(t,e){return lc(4,2,t,e)},useMemo:function(t,e){var r=Lr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=Lr();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=B2.bind(null,Be,t),[s.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:$x,useDebugValue:Ip,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=$x(!1),e=t[0];return t=z2.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=Be,i=Lr();if(Oe){if(r===void 0)throw Error(z(407));r=r()}else{if(r=e(),ut===null)throw Error(z(349));Hn&30||Nb(s,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,qx(_b.bind(null,s,a,t),[t]),s.flags|=2048,Ao(9,jb.bind(null,s,a,r,e),void 0,null),r},useId:function(){var t=Lr(),e=ut.identifierPrefix;if(Oe){var r=cs,s=ls;r=(s&~(1<<32-Sr(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Io++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=U2++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},H2={readContext:mr,useCallback:Rb,useContext:mr,useEffect:kp,useImperativeHandle:Ab,useInsertionEffect:kb,useLayoutEffect:Ib,useMemo:Pb,useReducer:nh,useRef:Tb,useState:function(){return nh(Co)},useDebugValue:Ip,useDeferredValue:function(t){var e=pr();return Db(e,nt.memoizedState,t)},useTransition:function(){var t=nh(Co)[0],e=pr().memoizedState;return[t,e]},useMutableSource:bb,useSyncExternalStore:wb,useId:Mb,unstable_isNewReconciler:!1},W2={readContext:mr,useCallback:Rb,useContext:mr,useEffect:kp,useImperativeHandle:Ab,useInsertionEffect:kb,useLayoutEffect:Ib,useMemo:Pb,useReducer:ih,useRef:Tb,useState:function(){return ih(Co)},useDebugValue:Ip,useDeferredValue:function(t){var e=pr();return nt===null?e.memoizedState=t:Db(e,nt.memoizedState,t)},useTransition:function(){var t=ih(Co)[0],e=pr().memoizedState;return[t,e]},useMutableSource:bb,useSyncExternalStore:wb,useId:Mb,unstable_isNewReconciler:!1};function br(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function sm(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:$e({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Cu={isMounted:function(t){return(t=t._reactInternals)?si(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=Lt(),i=rn(t),a=hs(s,i);a.payload=e,r!=null&&(a.callback=r),e=en(t,a,i),e!==null&&(Tr(e,t,i,s),ac(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=Lt(),i=rn(t),a=hs(s,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=en(t,a,i),e!==null&&(Tr(e,t,i,s),ac(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Lt(),s=rn(t),i=hs(r,s);i.tag=2,e!=null&&(i.callback=e),e=en(t,i,s),e!==null&&(Tr(e,t,s,r),ac(e,t,s))}};function Hx(t,e,r,s,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,o):e.prototype&&e.prototype.isPureReactComponent?!jo(r,s)||!jo(i,a):!0}function Fb(t,e,r){var s=!1,i=un,a=e.contextType;return typeof a=="object"&&a!==null?a=mr(a):(i=Ht(e)?$n:At.current,s=e.contextTypes,a=(s=s!=null)?$i(t,i):un),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cu,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Wx(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Cu.enqueueReplaceState(e,e.state,null)}function nm(t,e,r,s){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},wp(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=mr(a):(a=Ht(e)?$n:At.current,i.context=$i(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(sm(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Cu.enqueueReplaceState(i,i.state,null),zc(t,r,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gi(t,e){try{var r="",s=e;do r+=b1(s),s=s.return;while(s);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function ah(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function im(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var G2=typeof WeakMap=="function"?WeakMap:Map;function Ub(t,e,r){r=hs(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){Wc||(Wc=!0,fm=s),im(t,e)},r}function zb(t,e,r){r=hs(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;r.payload=function(){return s(i)},r.callback=function(){im(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){im(t,e),typeof s!="function"&&(tn===null?tn=new Set([this]):tn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Gx(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new G2;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(r)||(i.add(r),t=oE.bind(null,t,e,r),e.then(t,t))}function Kx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qx(t,e,r,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=hs(-1,1),e.tag=2,en(r,e,1))),r.lanes|=1),t)}var K2=Is.ReactCurrentOwner,$t=!1;function Mt(t,e,r,s){e.child=t===null?gb(e,null,r,s):Hi(e,t.child,r,s)}function Yx(t,e,r,s,i){r=r.render;var a=e.ref;return Mi(e,i),s=Sp(t,e,r,s,a,i),r=Tp(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ws(t,e,i)):(Oe&&r&&pp(e),e.flags|=1,Mt(t,e,s,i),e.child)}function Jx(t,e,r,s,i){if(t===null){var a=r.type;return typeof a=="function"&&!Op(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,Bb(t,e,a,s,i)):(t=hc(r.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:jo,r(o,s)&&t.ref===e.ref)return ws(t,e,i)}return e.flags|=1,t=sn(a,s),t.ref=e.ref,t.return=e,e.child=t}function Bb(t,e,r,s,i){if(t!==null){var a=t.memoizedProps;if(jo(a,s)&&t.ref===e.ref)if($t=!1,e.pendingProps=s=a,(t.lanes&i)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,ws(t,e,i)}return am(t,e,r,s,i)}function $b(t,e,r){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ii,Qt),Qt|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Ii,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,Ae(Ii,Qt),Qt|=s}else a!==null?(s=a.baseLanes|r,e.memoizedState=null):s=r,Ae(Ii,Qt),Qt|=s;return Mt(t,e,i,r),e.child}function qb(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function am(t,e,r,s,i){var a=Ht(r)?$n:At.current;return a=$i(e,a),Mi(e,i),r=Sp(t,e,r,s,a,i),s=Tp(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ws(t,e,i)):(Oe&&s&&pp(e),e.flags|=1,Mt(t,e,r,i),e.child)}function Xx(t,e,r,s,i){if(Ht(r)){var a=!0;Lc(e)}else a=!1;if(Mi(e,i),e.stateNode===null)cc(t,e),Fb(e,r,s),nm(e,r,s,i),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=mr(d):(d=Ht(r)?$n:At.current,d=$i(e,d));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&Wx(e,o,s,d),Us=!1;var p=e.memoizedState;o.state=p,zc(e,s,o,i),c=e.memoizedState,l!==s||p!==c||qt.current||Us?(typeof h=="function"&&(sm(e,r,h,s),c=e.memoizedState),(l=Us||Hx(e,r,l,s,p,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,yb(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:br(e.type,l),o.props=d,m=e.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=mr(c):(c=Ht(r)?$n:At.current,c=$i(e,c));var v=r.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==c)&&Wx(e,o,s,c),Us=!1,p=e.memoizedState,o.state=p,zc(e,s,o,i);var S=e.memoizedState;l!==m||p!==S||qt.current||Us?(typeof v=="function"&&(sm(e,r,v,s),S=e.memoizedState),(d=Us||Hx(e,r,d,s,p,S,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=S),o.props=s,o.state=S,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),s=!1)}return om(t,e,r,s,a,i)}function om(t,e,r,s,i,a){qb(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&Ox(e,r,!1),ws(t,e,a);s=e.stateNode,K2.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Hi(e,t.child,null,a),e.child=Hi(e,null,l,a)):Mt(t,e,l,a),e.memoizedState=s.state,i&&Ox(e,r,!0),e.child}function Hb(t){var e=t.stateNode;e.pendingContext?Lx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lx(t,e.context,!1),Np(t,e.containerInfo)}function Zx(t,e,r,s,i){return qi(),gp(i),e.flags|=256,Mt(t,e,r,s),e.child}var lm={dehydrated:null,treeContext:null,retryLane:0};function cm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wb(t,e,r){var s=e.pendingProps,i=ze.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(ze,i&1),t===null)return tm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,a?(s=e.mode,a=e.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Pu(o,s,0,null),t=Fn(t,s,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=cm(r),e.memoizedState=lm,t):Cp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Q2(t,e,o,s,l,i,r);if(a){a=s.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=sn(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=sn(l,a):(a=Fn(a,o,r,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,o=t.child.memoizedState,o=o===null?cm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=lm,s}return a=t.child,t=a.sibling,s=sn(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function Cp(t,e){return e=Pu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bl(t,e,r,s){return s!==null&&gp(s),Hi(e,t.child,null,r),t=Cp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Q2(t,e,r,s,i,a,o){if(r)return e.flags&256?(e.flags&=-257,s=ah(Error(z(422))),Bl(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,i=e.mode,s=Pu({mode:"visible",children:s.children},i,0,null),a=Fn(a,i,o,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&Hi(e,t.child,null,o),e.child.memoizedState=cm(o),e.memoizedState=lm,a);if(!(e.mode&1))return Bl(t,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(z(419)),s=ah(a,s,void 0),Bl(t,e,o,s)}if(l=(o&t.childLanes)!==0,$t||l){if(s=ut,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,bs(t,i),Tr(s,t,i,-1))}return Lp(),s=ah(Error(z(421))),Bl(t,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lE.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Xt=Zs(i.nextSibling),er=e,Oe=!0,Nr=null,t!==null&&(ar[or++]=ls,ar[or++]=cs,ar[or++]=qn,ls=t.id,cs=t.overflow,qn=e),e=Cp(e,s.children),e.flags|=4096,e)}function e0(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),rm(t.return,e,r)}function oh(t,e,r,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=i)}function Gb(t,e,r){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(Mt(t,e,s.children,r),s=ze.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&e0(t,r,e);else if(t.tag===19)e0(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Ae(ze,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Bc(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),oh(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bc(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}oh(e,!0,r,null,a);break;case"together":oh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ws(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Wn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,r=sn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=sn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Y2(t,e,r){switch(e.tag){case 3:Hb(e),qi();break;case 5:vb(e);break;case 1:Ht(e.type)&&Lc(e);break;case 4:Np(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Ae(Fc,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ae(ze,ze.current&1),e.flags|=128,null):r&e.child.childLanes?Wb(t,e,r):(Ae(ze,ze.current&1),t=ws(t,e,r),t!==null?t.sibling:null);Ae(ze,ze.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return Gb(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(ze,ze.current),s)break;return null;case 22:case 23:return e.lanes=0,$b(t,e,r)}return ws(t,e,r)}var Kb,um,Qb,Yb;Kb=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};um=function(){};Qb=function(t,e,r,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,Ln(Ur.current);var a=null;switch(r){case"input":i=Rh(t,i),s=Rh(t,s),a=[];break;case"select":i=$e({},i,{value:void 0}),s=$e({},s,{value:void 0}),a=[];break;case"textarea":i=Mh(t,i),s=Mh(t,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Dc)}Oh(r,s);var o;r=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(go.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(l=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(go.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Pe("scroll",t),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};Yb=function(t,e,r,s){r!==s&&(e.flags|=4)};function Va(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function J2(t,e,r){var s=e.pendingProps;switch(fp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return Ht(e.type)&&Mc(),jt(e),null;case 3:return s=e.stateNode,Wi(),Me(qt),Me(At),_p(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ul(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nr!==null&&(ym(Nr),Nr=null))),um(t,e),jt(e),null;case 5:jp(e);var i=Ln(ko.current);if(r=e.type,t!==null&&e.stateNode!=null)Qb(t,e,r,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(z(166));return jt(e),null}if(t=Ln(Ur.current),Ul(e)){s=e.stateNode,r=e.type;var a=e.memoizedProps;switch(s[Vr]=e,s[So]=a,t=(e.mode&1)!==0,r){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(i=0;i<qa.length;i++)Pe(qa[i],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":cx(s,a),Pe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Pe("invalid",s);break;case"textarea":dx(s,a),Pe("invalid",s)}Oh(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&Fl(s.textContent,l,t),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Fl(s.textContent,l,t),i=["children",""+l]):go.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pe("scroll",s)}switch(r){case"input":Al(s),ux(s,a,!0);break;case"textarea":Al(s),hx(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Dc)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_v(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(r,{is:s.is}):(t=o.createElement(r),r==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,r),t[Vr]=e,t[So]=s,Kb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vh(r,s),r){case"dialog":Pe("cancel",t),Pe("close",t),i=s;break;case"iframe":case"object":case"embed":Pe("load",t),i=s;break;case"video":case"audio":for(i=0;i<qa.length;i++)Pe(qa[i],t);i=s;break;case"source":Pe("error",t),i=s;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),i=s;break;case"details":Pe("toggle",t),i=s;break;case"input":cx(t,s),i=Rh(t,s),Pe("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=$e({},s,{value:void 0}),Pe("invalid",t);break;case"textarea":dx(t,s),i=Mh(t,s),Pe("invalid",t);break;default:i=s}Oh(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Tv(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ev(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&xo(t,c):typeof c=="number"&&xo(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(go.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Pe("scroll",t):c!=null&&ep(t,a,c,o))}switch(r){case"input":Al(t),ux(t,s,!1);break;case"textarea":Al(t),hx(t);break;case"option":s.value!=null&&t.setAttribute("value",""+cn(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?Ai(t,!!s.multiple,a,!1):s.defaultValue!=null&&Ai(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Dc)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)Yb(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(z(166));if(r=Ln(ko.current),Ln(Ur.current),Ul(e)){if(s=e.stateNode,r=e.memoizedProps,s[Vr]=e,(a=s.nodeValue!==r)&&(t=er,t!==null))switch(t.tag){case 3:Fl(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fl(s.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Vr]=e,e.stateNode=s}return jt(e),null;case 13:if(Me(ze),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Xt!==null&&e.mode&1&&!(e.flags&128))pb(),qi(),e.flags|=98560,a=!1;else if(a=Ul(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(z(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(z(317));a[Vr]=e}else qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),a=!1}else Nr!==null&&(ym(Nr),Nr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?it===0&&(it=3):Lp())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return Wi(),um(t,e),t===null&&_o(e.stateNode.containerInfo),jt(e),null;case 10:return vp(e.type._context),jt(e),null;case 17:return Ht(e.type)&&Mc(),jt(e),null;case 19:if(Me(ze),a=e.memoizedState,a===null)return jt(e),null;if(s=(e.flags&128)!==0,o=a.rendering,o===null)if(s)Va(a,!1);else{if(it!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bc(t),o!==null){for(e.flags|=128,Va(a,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)a=r,t=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ae(ze,ze.current&1|2),e.child}t=t.sibling}a.tail!==null&&Je()>Ki&&(e.flags|=128,s=!0,Va(a,!1),e.lanes=4194304)}else{if(!s)if(t=Bc(o),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Va(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Oe)return jt(e),null}else 2*Je()-a.renderingStartTime>Ki&&r!==1073741824&&(e.flags|=128,s=!0,Va(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Je(),e.sibling=null,r=ze.current,Ae(ze,s?r&1|2:r&1),e):(jt(e),null);case 22:case 23:return Mp(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Qt&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function X2(t,e){switch(fp(e),e.tag){case 1:return Ht(e.type)&&Mc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wi(),Me(qt),Me(At),_p(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jp(e),null;case 13:if(Me(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(ze),null;case 4:return Wi(),null;case 10:return vp(e.type._context),null;case 22:case 23:return Mp(),null;case 24:return null;default:return null}}var $l=!1,St=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,K=null;function ki(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ge(t,e,s)}else r.current=null}function dm(t,e,r){try{r()}catch(s){Ge(t,e,s)}}var t0=!1;function eE(t,e){if(Kh=Ac,t=tb(),mp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var v;m!==r||i!==0&&m.nodeType!==3||(l=o+i),m!==a||s!==0&&m.nodeType!==3||(c=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===t)break t;if(p===r&&++d===i&&(l=o),p===a&&++h===s&&(c=o),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qh={focusedElem:t,selectionRange:r},Ac=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var b=S.memoizedProps,N=S.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?b:br(e.type,b),N);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(R){Ge(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return S=t0,t0=!1,S}function no(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&dm(e,r,a)}i=i.next}while(i!==s)}}function Au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function hm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Jb(t){var e=t.alternate;e!==null&&(t.alternate=null,Jb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vr],delete e[So],delete e[Xh],delete e[L2],delete e[O2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xb(t){return t.tag===5||t.tag===3||t.tag===4}function r0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mm(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Dc));else if(s!==4&&(t=t.child,t!==null))for(mm(t,e,r),t=t.sibling;t!==null;)mm(t,e,r),t=t.sibling}function pm(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(pm(t,e,r),t=t.sibling;t!==null;)pm(t,e,r),t=t.sibling}var mt=null,wr=!1;function Os(t,e,r){for(r=r.child;r!==null;)Zb(t,e,r),r=r.sibling}function Zb(t,e,r){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(ju,r)}catch{}switch(r.tag){case 5:St||ki(r,e);case 6:var s=mt,i=wr;mt=null,Os(t,e,r),mt=s,wr=i,mt!==null&&(wr?(t=mt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):mt.removeChild(r.stateNode));break;case 18:mt!==null&&(wr?(t=mt,r=r.stateNode,t.nodeType===8?eh(t.parentNode,r):t.nodeType===1&&eh(t,r),wo(t)):eh(mt,r.stateNode));break;case 4:s=mt,i=wr,mt=r.stateNode.containerInfo,wr=!0,Os(t,e,r),mt=s,wr=i;break;case 0:case 11:case 14:case 15:if(!St&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&dm(r,e,o),i=i.next}while(i!==s)}Os(t,e,r);break;case 1:if(!St&&(ki(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Ge(r,e,l)}Os(t,e,r);break;case 21:Os(t,e,r);break;case 22:r.mode&1?(St=(s=St)||r.memoizedState!==null,Os(t,e,r),St=s):Os(t,e,r);break;default:Os(t,e,r)}}function s0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Z2),e.forEach(function(s){var i=cE.bind(null,t,s);r.has(s)||(r.add(s),s.then(i,i))})}}function vr(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:mt=l.stateNode,wr=!1;break e;case 3:mt=l.stateNode.containerInfo,wr=!0;break e;case 4:mt=l.stateNode.containerInfo,wr=!0;break e}l=l.return}if(mt===null)throw Error(z(160));Zb(a,o,i),mt=null,wr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Ge(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ew(e,t),e=e.sibling}function ew(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vr(e,t),Mr(t),s&4){try{no(3,t,t.return),Au(3,t)}catch(b){Ge(t,t.return,b)}try{no(5,t,t.return)}catch(b){Ge(t,t.return,b)}}break;case 1:vr(e,t),Mr(t),s&512&&r!==null&&ki(r,r.return);break;case 5:if(vr(e,t),Mr(t),s&512&&r!==null&&ki(r,r.return),t.flags&32){var i=t.stateNode;try{xo(i,"")}catch(b){Ge(t,t.return,b)}}if(s&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Nv(i,a),Vh(l,o);var d=Vh(l,a);for(o=0;o<c.length;o+=2){var h=c[o],m=c[o+1];h==="style"?Tv(i,m):h==="dangerouslySetInnerHTML"?Ev(i,m):h==="children"?xo(i,m):ep(i,h,m,d)}switch(l){case"input":Ph(i,a);break;case"textarea":jv(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Ai(i,!!a.multiple,v,!1):p!==!!a.multiple&&(a.defaultValue!=null?Ai(i,!!a.multiple,a.defaultValue,!0):Ai(i,!!a.multiple,a.multiple?[]:"",!1))}i[So]=a}catch(b){Ge(t,t.return,b)}}break;case 6:if(vr(e,t),Mr(t),s&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(b){Ge(t,t.return,b)}}break;case 3:if(vr(e,t),Mr(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{wo(e.containerInfo)}catch(b){Ge(t,t.return,b)}break;case 4:vr(e,t),Mr(t);break;case 13:vr(e,t),Mr(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Pp=Je())),s&4&&s0(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(St=(d=St)||h,vr(e,t),St=d):vr(e,t),Mr(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(m=K=h;K!==null;){switch(p=K,v=p.child,p.tag){case 0:case 11:case 14:case 15:no(4,p,p.return);break;case 1:ki(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){s=p,r=p.return;try{e=s,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(b){Ge(s,r,b)}}break;case 5:ki(p,p.return);break;case 22:if(p.memoizedState!==null){i0(m);continue}}v!==null?(v.return=p,K=v):i0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Sv("display",o))}catch(b){Ge(t,t.return,b)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){Ge(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:vr(e,t),Mr(t),s&4&&s0(t);break;case 21:break;default:vr(e,t),Mr(t)}}function Mr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Xb(r)){var s=r;break e}r=r.return}throw Error(z(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(xo(i,""),s.flags&=-33);var a=r0(t);pm(t,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=r0(t);mm(t,l,o);break;default:throw Error(z(161))}}catch(c){Ge(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tE(t,e,r){K=t,tw(t)}function tw(t,e,r){for(var s=(t.mode&1)!==0;K!==null;){var i=K,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||$l;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||St;l=$l;var d=St;if($l=o,(St=c)&&!d)for(K=i;K!==null;)o=K,c=o.child,o.tag===22&&o.memoizedState!==null?a0(i):c!==null?(c.return=o,K=c):a0(i);for(;a!==null;)K=a,tw(a),a=a.sibling;K=i,$l=l,St=d}n0(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,K=a):n0(t)}}function n0(t){for(;K!==null;){var e=K;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:St||Au(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!St)if(r===null)s.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:br(e.type,r.memoizedProps);s.componentDidUpdate(i,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Bx(e,a,s);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Bx(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&wo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}St||e.flags&512&&hm(e)}catch(p){Ge(e,e.return,p)}}if(e===t){K=null;break}if(r=e.sibling,r!==null){r.return=e.return,K=r;break}K=e.return}}function i0(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var r=e.sibling;if(r!==null){r.return=e.return,K=r;break}K=e.return}}function a0(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Au(4,e)}catch(c){Ge(e,r,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){Ge(e,i,c)}}var a=e.return;try{hm(e)}catch(c){Ge(e,a,c)}break;case 5:var o=e.return;try{hm(e)}catch(c){Ge(e,o,c)}}}catch(c){Ge(e,e.return,c)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var rE=Math.ceil,Hc=Is.ReactCurrentDispatcher,Ap=Is.ReactCurrentOwner,ur=Is.ReactCurrentBatchConfig,be=0,ut=null,Ze=null,gt=0,Qt=0,Ii=bn(0),it=0,Ro=null,Wn=0,Ru=0,Rp=0,io=null,zt=null,Pp=0,Ki=1/0,as=null,Wc=!1,fm=null,tn=null,ql=!1,Ks=null,Gc=0,ao=0,gm=null,uc=-1,dc=0;function Lt(){return be&6?Je():uc!==-1?uc:uc=Je()}function rn(t){return t.mode&1?be&2&&gt!==0?gt&-gt:F2.transition!==null?(dc===0&&(dc=Fv()),dc):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:Wv(t.type)),t):1}function Tr(t,e,r,s){if(50<ao)throw ao=0,gm=null,Error(z(185));Go(t,r,s),(!(be&2)||t!==ut)&&(t===ut&&(!(be&2)&&(Ru|=r),it===4&&Bs(t,gt)),Wt(t,s),r===1&&be===0&&!(e.mode&1)&&(Ki=Je()+500,ku&&wn()))}function Wt(t,e){var r=t.callbackNode;F1(t,e);var s=Cc(t,t===ut?gt:0);if(s===0)r!==null&&fx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&fx(r),e===1)t.tag===0?V2(o0.bind(null,t)):db(o0.bind(null,t)),D2(function(){!(be&6)&&wn()}),r=null;else{switch(Uv(s)){case 1:r=ip;break;case 4:r=Ov;break;case 16:r=Ic;break;case 536870912:r=Vv;break;default:r=Ic}r=cw(r,rw.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function rw(t,e){if(uc=-1,dc=0,be&6)throw Error(z(327));var r=t.callbackNode;if(Li()&&t.callbackNode!==r)return null;var s=Cc(t,t===ut?gt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Kc(t,s);else{e=s;var i=be;be|=2;var a=nw();(ut!==t||gt!==e)&&(as=null,Ki=Je()+500,Vn(t,e));do try{iE();break}catch(l){sw(t,l)}while(!0);yp(),Hc.current=a,be=i,Ze!==null?e=0:(ut=null,gt=0,e=it)}if(e!==0){if(e===2&&(i=$h(t),i!==0&&(s=i,e=xm(t,i))),e===1)throw r=Ro,Vn(t,0),Bs(t,s),Wt(t,Je()),r;if(e===6)Bs(t,s);else{if(i=t.current.alternate,!(s&30)&&!sE(i)&&(e=Kc(t,s),e===2&&(a=$h(t),a!==0&&(s=a,e=xm(t,a))),e===1))throw r=Ro,Vn(t,0),Bs(t,s),Wt(t,Je()),r;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(z(345));case 2:Rn(t,zt,as);break;case 3:if(Bs(t,s),(s&130023424)===s&&(e=Pp+500-Je(),10<e)){if(Cc(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){Lt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jh(Rn.bind(null,t,zt,as),e);break}Rn(t,zt,as);break;case 4:if(Bs(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var o=31-Sr(s);a=1<<o,o=e[o],o>i&&(i=o),s&=~a}if(s=i,s=Je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*rE(s/1960))-s,10<s){t.timeoutHandle=Jh(Rn.bind(null,t,zt,as),s);break}Rn(t,zt,as);break;case 5:Rn(t,zt,as);break;default:throw Error(z(329))}}}return Wt(t,Je()),t.callbackNode===r?rw.bind(null,t):null}function xm(t,e){var r=io;return t.current.memoizedState.isDehydrated&&(Vn(t,e).flags|=256),t=Kc(t,e),t!==2&&(e=zt,zt=r,e!==null&&ym(e)),t}function ym(t){zt===null?zt=t:zt.push.apply(zt,t)}function sE(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var i=r[s],a=i.getSnapshot;i=i.value;try{if(!kr(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bs(t,e){for(e&=~Rp,e&=~Ru,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Sr(e),s=1<<r;t[r]=-1,e&=~s}}function o0(t){if(be&6)throw Error(z(327));Li();var e=Cc(t,0);if(!(e&1))return Wt(t,Je()),null;var r=Kc(t,e);if(t.tag!==0&&r===2){var s=$h(t);s!==0&&(e=s,r=xm(t,s))}if(r===1)throw r=Ro,Vn(t,0),Bs(t,e),Wt(t,Je()),r;if(r===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rn(t,zt,as),Wt(t,Je()),null}function Dp(t,e){var r=be;be|=1;try{return t(e)}finally{be=r,be===0&&(Ki=Je()+500,ku&&wn())}}function Gn(t){Ks!==null&&Ks.tag===0&&!(be&6)&&Li();var e=be;be|=1;var r=ur.transition,s=Ee;try{if(ur.transition=null,Ee=1,t)return t()}finally{Ee=s,ur.transition=r,be=e,!(be&6)&&wn()}}function Mp(){Qt=Ii.current,Me(Ii)}function Vn(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,P2(r)),Ze!==null)for(r=Ze.return;r!==null;){var s=r;switch(fp(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Mc();break;case 3:Wi(),Me(qt),Me(At),_p();break;case 5:jp(s);break;case 4:Wi();break;case 13:Me(ze);break;case 19:Me(ze);break;case 10:vp(s.type._context);break;case 22:case 23:Mp()}r=r.return}if(ut=t,Ze=t=sn(t.current,null),gt=Qt=e,it=0,Ro=null,Rp=Ru=Wn=0,zt=io=null,Mn!==null){for(e=0;e<Mn.length;e++)if(r=Mn[e],s=r.interleaved,s!==null){r.interleaved=null;var i=s.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}r.pending=s}Mn=null}return t}function sw(t,e){do{var r=Ze;try{if(yp(),oc.current=qc,$c){for(var s=Be.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}$c=!1}if(Hn=0,ct=nt=Be=null,so=!1,Io=0,Ap.current=null,r===null||r.return===null){it=1,Ro=e,Ze=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=gt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Kx(o);if(v!==null){v.flags&=-257,Qx(v,o,l,a,e),v.mode&1&&Gx(a,d,e),e=v,c=d;var S=e.updateQueue;if(S===null){var b=new Set;b.add(c),e.updateQueue=b}else S.add(c);break e}else{if(!(e&1)){Gx(a,d,e),Lp();break e}c=Error(z(426))}}else if(Oe&&l.mode&1){var N=Kx(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Qx(N,o,l,a,e),gp(Gi(c,l));break e}}a=c=Gi(c,l),it!==4&&(it=2),io===null?io=[a]:io.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=Ub(a,c,e);zx(a,g);break e;case 1:l=c;var y=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(tn===null||!tn.has(j)))){a.flags|=65536,e&=-e,a.lanes|=e;var R=zb(a,l,e);zx(a,R);break e}}a=a.return}while(a!==null)}aw(r)}catch(M){e=M,Ze===r&&r!==null&&(Ze=r=r.return);continue}break}while(!0)}function nw(){var t=Hc.current;return Hc.current=qc,t===null?qc:t}function Lp(){(it===0||it===3||it===2)&&(it=4),ut===null||!(Wn&268435455)&&!(Ru&268435455)||Bs(ut,gt)}function Kc(t,e){var r=be;be|=2;var s=nw();(ut!==t||gt!==e)&&(as=null,Vn(t,e));do try{nE();break}catch(i){sw(t,i)}while(!0);if(yp(),be=r,Hc.current=s,Ze!==null)throw Error(z(261));return ut=null,gt=0,it}function nE(){for(;Ze!==null;)iw(Ze)}function iE(){for(;Ze!==null&&!C1();)iw(Ze)}function iw(t){var e=lw(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?aw(t):Ze=e,Ap.current=null}function aw(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=X2(r,e),r!==null){r.flags&=32767,Ze=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,Ze=null;return}}else if(r=J2(r,e,Qt),r!==null){Ze=r;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);it===0&&(it=5)}function Rn(t,e,r){var s=Ee,i=ur.transition;try{ur.transition=null,Ee=1,aE(t,e,r,s)}finally{ur.transition=i,Ee=s}return null}function aE(t,e,r,s){do Li();while(Ks!==null);if(be&6)throw Error(z(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(U1(t,a),t===ut&&(Ze=ut=null,gt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ql||(ql=!0,cw(Ic,function(){return Li(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ur.transition,ur.transition=null;var o=Ee;Ee=1;var l=be;be|=4,Ap.current=null,eE(t,r),ew(r,t),S2(Qh),Ac=!!Kh,Qh=Kh=null,t.current=r,tE(r),A1(),be=l,Ee=o,ur.transition=a}else t.current=r;if(ql&&(ql=!1,Ks=t,Gc=i),a=t.pendingLanes,a===0&&(tn=null),D1(r.stateNode),Wt(t,Je()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],s(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,t=fm,fm=null,t;return Gc&1&&t.tag!==0&&Li(),a=t.pendingLanes,a&1?t===gm?ao++:(ao=0,gm=t):ao=0,wn(),null}function Li(){if(Ks!==null){var t=Uv(Gc),e=ur.transition,r=Ee;try{if(ur.transition=null,Ee=16>t?16:t,Ks===null)var s=!1;else{if(t=Ks,Ks=null,Gc=0,be&6)throw Error(z(331));var i=be;for(be|=4,K=t.current;K!==null;){var a=K,o=a.child;if(K.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(K=d;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:no(8,h,a)}var m=h.child;if(m!==null)m.return=h,K=m;else for(;K!==null;){h=K;var p=h.sibling,v=h.return;if(Jb(h),h===d){K=null;break}if(p!==null){p.return=v,K=p;break}K=v}}}var S=a.alternate;if(S!==null){var b=S.child;if(b!==null){S.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}K=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,K=o;else e:for(;K!==null;){if(a=K,a.flags&2048)switch(a.tag){case 0:case 11:case 15:no(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,K=g;break e}K=a.return}}var y=t.current;for(K=y;K!==null;){o=K;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,K=j;else e:for(o=y;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Au(9,l)}}catch(M){Ge(l,l.return,M)}if(l===o){K=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,K=R;break e}K=l.return}}if(be=i,wn(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(ju,t)}catch{}s=!0}return s}finally{Ee=r,ur.transition=e}}return!1}function l0(t,e,r){e=Gi(r,e),e=Ub(t,e,1),t=en(t,e,1),e=Lt(),t!==null&&(Go(t,1,e),Wt(t,e))}function Ge(t,e,r){if(t.tag===3)l0(t,t,r);else for(;e!==null;){if(e.tag===3){l0(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(tn===null||!tn.has(s))){t=Gi(r,t),t=zb(e,t,1),e=en(e,t,1),t=Lt(),e!==null&&(Go(e,1,t),Wt(e,t));break}}e=e.return}}function oE(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=Lt(),t.pingedLanes|=t.suspendedLanes&r,ut===t&&(gt&r)===r&&(it===4||it===3&&(gt&130023424)===gt&&500>Je()-Pp?Vn(t,0):Rp|=r),Wt(t,e)}function ow(t,e){e===0&&(t.mode&1?(e=Dl,Dl<<=1,!(Dl&130023424)&&(Dl=4194304)):e=1);var r=Lt();t=bs(t,e),t!==null&&(Go(t,e,r),Wt(t,r))}function lE(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),ow(t,r)}function cE(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(z(314))}s!==null&&s.delete(e),ow(t,r)}var lw;lw=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)$t=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return $t=!1,Y2(t,e,r);$t=!!(t.flags&131072)}else $t=!1,Oe&&e.flags&1048576&&hb(e,Vc,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;cc(t,e),t=e.pendingProps;var i=$i(e,At.current);Mi(e,r),i=Sp(null,e,s,t,i,r);var a=Tp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(s)?(a=!0,Lc(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wp(e),i.updater=Cu,e.stateNode=i,i._reactInternals=e,nm(e,s,t,r),e=om(null,e,s,!0,a,r)):(e.tag=0,Oe&&a&&pp(e),Mt(null,e,i,r),e=e.child),e;case 16:s=e.elementType;e:{switch(cc(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=dE(s),t=br(s,t),i){case 0:e=am(null,e,s,t,r);break e;case 1:e=Xx(null,e,s,t,r);break e;case 11:e=Yx(null,e,s,t,r);break e;case 14:e=Jx(null,e,s,br(s.type,t),r);break e}throw Error(z(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:br(s,i),am(t,e,s,i,r);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:br(s,i),Xx(t,e,s,i,r);case 3:e:{if(Hb(e),t===null)throw Error(z(387));s=e.pendingProps,a=e.memoizedState,i=a.element,yb(t,e),zc(e,s,null,r);var o=e.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Gi(Error(z(423)),e),e=Zx(t,e,s,r,i);break e}else if(s!==i){i=Gi(Error(z(424)),e),e=Zx(t,e,s,r,i);break e}else for(Xt=Zs(e.stateNode.containerInfo.firstChild),er=e,Oe=!0,Nr=null,r=gb(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qi(),s===i){e=ws(t,e,r);break e}Mt(t,e,s,r)}e=e.child}return e;case 5:return vb(e),t===null&&tm(e),s=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Yh(s,i)?o=null:a!==null&&Yh(s,a)&&(e.flags|=32),qb(t,e),Mt(t,e,o,r),e.child;case 6:return t===null&&tm(e),null;case 13:return Wb(t,e,r);case 4:return Np(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Hi(e,null,s,r):Mt(t,e,s,r),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:br(s,i),Yx(t,e,s,i,r);case 7:return Mt(t,e,e.pendingProps,r),e.child;case 8:return Mt(t,e,e.pendingProps.children,r),e.child;case 12:return Mt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Ae(Fc,s._currentValue),s._currentValue=o,a!==null)if(kr(a.value,o)){if(a.children===i.children&&!qt.current){e=ws(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=hs(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),rm(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(z(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),rm(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Mt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Mi(e,r),i=mr(i),s=s(i),e.flags|=1,Mt(t,e,s,r),e.child;case 14:return s=e.type,i=br(s,e.pendingProps),i=br(s.type,i),Jx(t,e,s,i,r);case 15:return Bb(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:br(s,i),cc(t,e),e.tag=1,Ht(s)?(t=!0,Lc(e)):t=!1,Mi(e,r),Fb(e,s,i),nm(e,s,i,r),om(null,e,s,!0,t,r);case 19:return Gb(t,e,r);case 22:return $b(t,e,r)}throw Error(z(156,e.tag))};function cw(t,e){return Lv(t,e)}function uE(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(t,e,r,s){return new uE(t,e,r,s)}function Op(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dE(t){if(typeof t=="function")return Op(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rp)return 11;if(t===sp)return 14}return 2}function sn(t,e){var r=t.alternate;return r===null?(r=cr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function hc(t,e,r,s,i,a){var o=2;if(s=t,typeof t=="function")Op(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vi:return Fn(r.children,i,a,e);case tp:o=8,i|=8;break;case kh:return t=cr(12,r,e,i|2),t.elementType=kh,t.lanes=a,t;case Ih:return t=cr(13,r,e,i),t.elementType=Ih,t.lanes=a,t;case Ch:return t=cr(19,r,e,i),t.elementType=Ch,t.lanes=a,t;case vv:return Pu(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xv:o=10;break e;case yv:o=9;break e;case rp:o=11;break e;case sp:o=14;break e;case Fs:o=16,s=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=cr(o,r,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function Fn(t,e,r,s){return t=cr(7,t,s,e),t.lanes=r,t}function Pu(t,e,r,s){return t=cr(22,t,s,e),t.elementType=vv,t.lanes=r,t.stateNode={isHidden:!1},t}function lh(t,e,r){return t=cr(6,t,null,e),t.lanes=r,t}function ch(t,e,r){return e=cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hE(t,e,r,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$d(0),this.expirationTimes=$d(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$d(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vp(t,e,r,s,i,a,o,l,c){return t=new hE(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=cr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wp(a),t}function mE(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yi,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function uw(t){if(!t)return un;t=t._reactInternals;e:{if(si(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var r=t.type;if(Ht(r))return ub(t,r,e)}return e}function dw(t,e,r,s,i,a,o,l,c){return t=Vp(r,s,!0,t,i,a,o,l,c),t.context=uw(null),r=t.current,s=Lt(),i=rn(r),a=hs(s,i),a.callback=e??null,en(r,a,i),t.current.lanes=i,Go(t,i,s),Wt(t,s),t}function Du(t,e,r,s){var i=e.current,a=Lt(),o=rn(i);return r=uw(r),e.context===null?e.context=r:e.pendingContext=r,e=hs(a,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=en(i,e,o),t!==null&&(Tr(t,i,o,a),ac(t,i,o)),o}function Qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function c0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Fp(t,e){c0(t,e),(t=t.alternate)&&c0(t,e)}function pE(){return null}var hw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Up(t){this._internalRoot=t}Mu.prototype.render=Up.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Du(t,e,null,null)};Mu.prototype.unmount=Up.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gn(function(){Du(null,t,null,null)}),e[vs]=null}};function Mu(t){this._internalRoot=t}Mu.prototype.unstable_scheduleHydration=function(t){if(t){var e=$v();t={blockedOn:null,target:t,priority:e};for(var r=0;r<zs.length&&e!==0&&e<zs[r].priority;r++);zs.splice(r,0,t),r===0&&Hv(t)}};function zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function u0(){}function fE(t,e,r,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=Qc(o);a.call(d)}}var o=dw(e,s,t,0,null,!1,!1,"",u0);return t._reactRootContainer=o,t[vs]=o.current,_o(t.nodeType===8?t.parentNode:t),Gn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var d=Qc(c);l.call(d)}}var c=Vp(t,0,!1,null,null,!1,!1,"",u0);return t._reactRootContainer=c,t[vs]=c.current,_o(t.nodeType===8?t.parentNode:t),Gn(function(){Du(e,c,r,s)}),c}function Ou(t,e,r,s,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Qc(o);l.call(c)}}Du(e,o,t,i)}else o=fE(r,e,t,i,s);return Qc(o)}zv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=$a(e.pendingLanes);r!==0&&(ap(e,r|1),Wt(e,Je()),!(be&6)&&(Ki=Je()+500,wn()))}break;case 13:Gn(function(){var s=bs(t,1);if(s!==null){var i=Lt();Tr(s,t,1,i)}}),Fp(t,1)}};op=function(t){if(t.tag===13){var e=bs(t,134217728);if(e!==null){var r=Lt();Tr(e,t,134217728,r)}Fp(t,134217728)}};Bv=function(t){if(t.tag===13){var e=rn(t),r=bs(t,e);if(r!==null){var s=Lt();Tr(r,t,e,s)}Fp(t,e)}};$v=function(){return Ee};qv=function(t,e){var r=Ee;try{return Ee=t,e()}finally{Ee=r}};Uh=function(t,e,r){switch(e){case"input":if(Ph(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var i=Tu(s);if(!i)throw Error(z(90));wv(s),Ph(s,i)}}}break;case"textarea":jv(t,r);break;case"select":e=r.value,e!=null&&Ai(t,!!r.multiple,e,!1)}};Cv=Dp;Av=Gn;var gE={usingClientEntryPoint:!1,Events:[Qo,ji,Tu,kv,Iv,Dp]},Fa={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xE={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Is.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dv(t),t===null?null:t.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||pE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{ju=Hl.inject(xE),Fr=Hl}catch{}}nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gE;nr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zp(e))throw Error(z(200));return mE(t,e,null,r)};nr.createRoot=function(t,e){if(!zp(t))throw Error(z(299));var r=!1,s="",i=hw;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vp(t,1,!1,null,null,r,!1,s,i),t[vs]=e.current,_o(t.nodeType===8?t.parentNode:t),new Up(e)};nr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Dv(e),t=t===null?null:t.stateNode,t};nr.flushSync=function(t){return Gn(t)};nr.hydrate=function(t,e,r){if(!Lu(e))throw Error(z(200));return Ou(null,t,e,!0,r)};nr.hydrateRoot=function(t,e,r){if(!zp(t))throw Error(z(405));var s=r!=null&&r.hydratedSources||null,i=!1,a="",o=hw;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=dw(e,null,t,1,r??null,i,!1,a,o),t[vs]=e.current,_o(t),s)for(t=0;t<s.length;t++)r=s[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Mu(e)};nr.render=function(t,e,r){if(!Lu(e))throw Error(z(200));return Ou(null,t,e,!1,r)};nr.unmountComponentAtNode=function(t){if(!Lu(t))throw Error(z(40));return t._reactRootContainer?(Gn(function(){Ou(null,null,t,!1,function(){t._reactRootContainer=null,t[vs]=null})}),!0):!1};nr.unstable_batchedUpdates=Dp;nr.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Lu(r))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Ou(t,e,r,!1,s)};nr.version="18.3.1-next-f1338f8080-20240426";function mw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mw)}catch(t){console.error(t)}}mw(),mv.exports=nr;var yE=mv.exports,pw,d0=yE;pw=d0.createRoot,d0.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var h0="popstate";function vE(t={}){function e(s,i){let{pathname:a,search:o,hash:l}=s.location;return vm("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:Po(i)}return wE(e,r,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bE(){return Math.random().toString(36).substring(2,10)}function m0(t,e){return{usr:t.state,key:t.key,idx:e}}function vm(t,e,r=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?oa(e):e,state:r,key:e&&e.key||s||bE()}}function Po({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function oa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function wE(t,e,r,s={}){let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,l="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function m(){l="POP";let N=h(),g=N==null?null:N-d;d=N,c&&c({action:l,location:b.location,delta:g})}function p(N,g){l="PUSH";let y=vm(b.location,N,g);d=h()+1;let j=m0(y,d),R=b.createHref(y);try{o.pushState(j,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(R)}a&&c&&c({action:l,location:b.location,delta:1})}function v(N,g){l="REPLACE";let y=vm(b.location,N,g);d=h();let j=m0(y,d),R=b.createHref(y);o.replaceState(j,"",R),a&&c&&c({action:l,location:b.location,delta:0})}function S(N){return NE(N)}let b={get action(){return l},get location(){return t(i,o)},listen(N){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(h0,m),c=N,()=>{i.removeEventListener(h0,m),c=null}},createHref(N){return e(i,N)},createURL:S,encodeLocation(N){let g=S(N);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:v,go(N){return o.go(N)}};return b}function NE(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(r,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Po(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function fw(t,e,r="/"){return jE(t,e,r,!1)}function jE(t,e,r,s){let i=typeof e=="string"?oa(e):e,a=Ns(i.pathname||"/",r);if(a==null)return null;let o=gw(t);_E(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=ME(a);l=PE(o[c],d,s)}return l}function gw(t,e=[],r=[],s="",i=!1){let a=(o,l,c=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(s)&&c)return;Fe(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length)}let m=ms([s,h.relativePath]),p=r.concat(h);o.children&&o.children.length>0&&(Fe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),gw(o.children,e,p,m,c)),!(o.path==null&&!o.index)&&e.push({path:m,score:AE(m,o.index),routesMeta:p})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))a(o,l);else for(let d of xw(o.path))a(o,l,!0,d)}),e}function xw(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=xw(s.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function _E(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:RE(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var EE=/^:[\w-]+$/,SE=3,TE=2,kE=1,IE=10,CE=-2,p0=t=>t==="*";function AE(t,e){let r=t.split("/"),s=r.length;return r.some(p0)&&(s+=CE),e&&(s+=TE),r.filter(i=>!p0(i)).reduce((i,a)=>i+(EE.test(a)?SE:a===""?kE:IE),s)}function RE(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function PE(t,e,r=!1){let{routesMeta:s}=t,i={},a="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,h=a==="/"?e:e.slice(a.length)||"/",m=Yc({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!m&&d&&r&&!s[s.length-1].route.index&&(m=Yc({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:ms([a,m.pathname]),pathnameBase:UE(ms([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=ms([a,m.pathnameBase]))}return o}function Yc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=DE(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((d,{paramName:h,isOptional:m},p)=>{if(h==="*"){let S=l[p]||"";o=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const v=l[p];return m&&!v?d[h]=void 0:d[h]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function DE(t,e=!1,r=!0){fr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function ME(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ns(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}var LE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OE=t=>LE.test(t);function VE(t,e="/"){let{pathname:r,search:s="",hash:i=""}=typeof t=="string"?oa(t):t,a;if(r)if(OE(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),fr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?a=f0(r.substring(1),"/"):a=f0(r,e)}else a=e;return{pathname:a,search:zE(s),hash:BE(i)}}function f0(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function uh(t,e,r,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FE(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Bp(t){let e=FE(t);return e.map((r,s)=>s===e.length-1?r.pathname:r.pathnameBase)}function $p(t,e,r,s=!1){let i;typeof t=="string"?i=oa(t):(i={...t},Fe(!i.pathname||!i.pathname.includes("?"),uh("?","pathname","search",i)),Fe(!i.pathname||!i.pathname.includes("#"),uh("#","pathname","hash",i)),Fe(!i.search||!i.search.includes("#"),uh("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=r;else{let m=e.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}l=m>=0?e[m]:"/"}let c=VE(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var ms=t=>t.join("/").replace(/\/\/+/g,"/"),UE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,BE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $E(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function qE(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yw=["POST","PUT","PATCH","DELETE"];new Set(yw);var HE=["GET",...yw];new Set(HE);var la=w.createContext(null);la.displayName="DataRouter";var Vu=w.createContext(null);Vu.displayName="DataRouterState";w.createContext(!1);var vw=w.createContext({isTransitioning:!1});vw.displayName="ViewTransition";var WE=w.createContext(new Map);WE.displayName="Fetchers";var GE=w.createContext(null);GE.displayName="Await";var xr=w.createContext(null);xr.displayName="Navigation";var Jo=w.createContext(null);Jo.displayName="Location";var es=w.createContext({outlet:null,matches:[],isDataRoute:!1});es.displayName="Route";var qp=w.createContext(null);qp.displayName="RouteError";function KE(t,{relative:e}={}){Fe(ca(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=w.useContext(xr),{hash:i,pathname:a,search:o}=Xo(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:ms([r,a])),s.createHref({pathname:l,search:o,hash:i})}function ca(){return w.useContext(Jo)!=null}function yr(){return Fe(ca(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Jo).location}var bw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ww(t){w.useContext(xr).static||w.useLayoutEffect(t)}function Ar(){let{isDataRoute:t}=w.useContext(es);return t?oS():QE()}function QE(){Fe(ca(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(la),{basename:e,navigator:r}=w.useContext(xr),{matches:s}=w.useContext(es),{pathname:i}=yr(),a=JSON.stringify(Bp(s)),o=w.useRef(!1);return ww(()=>{o.current=!0}),w.useCallback((c,d={})=>{if(fr(o.current,bw),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=$p(c,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ms([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,a,i,t])}w.createContext(null);function Xo(t,{relative:e}={}){let{matches:r}=w.useContext(es),{pathname:s}=yr(),i=JSON.stringify(Bp(r));return w.useMemo(()=>$p(t,JSON.parse(i),s,e==="path"),[t,i,s,e])}function YE(t,e){return Nw(t,e)}function Nw(t,e,r,s,i){var y;Fe(ca(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=w.useContext(xr),{matches:o}=w.useContext(es),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let j=m&&m.path||"";jw(d,!m||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let p=yr(),v;if(e){let j=typeof e=="string"?oa(e):e;Fe(h==="/"||((y=j.pathname)==null?void 0:y.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${j.pathname}" was given in the \`location\` prop.`),v=j}else v=p;let S=v.pathname||"/",b=S;if(h!=="/"){let j=h.replace(/^\//,"").split("/");b="/"+S.replace(/^\//,"").split("/").slice(j.length).join("/")}let N=fw(t,{pathname:b});fr(m||N!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),fr(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=tS(N&&N.map(j=>Object.assign({},j,{params:Object.assign({},c,j.params),pathname:ms([h,a.encodeLocation?a.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?h:ms([h,a.encodeLocation?a.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),o,r,s,i);return e&&g?w.createElement(Jo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},g):g}function JE(){let t=aS(),e=$E(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:a},"ErrorBoundary")," or"," ",w.createElement("code",{style:a},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),r?w.createElement("pre",{style:i},r):null,o)}var XE=w.createElement(JE,null),ZE=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?w.createElement(es.Provider,{value:this.props.routeContext},w.createElement(qp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function eS({routeContext:t,match:e,children:r}){let s=w.useContext(la);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(es.Provider,{value:t},r)}function tS(t,e=[],r=null,s=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=r==null?void 0:r.errors;if(o!=null){let h=a.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);Fe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,c=-1;if(r)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=h),m.route.id){let{loaderData:p,errors:v}=r,S=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||S){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let d=r&&s?(h,m)=>{var p,v;s(h,{location:r.location,params:((v=(p=r.matches)==null?void 0:p[0])==null?void 0:v.params)??{},unstable_pattern:qE(r.matches),errorInfo:m})}:void 0;return a.reduceRight((h,m,p)=>{let v,S=!1,b=null,N=null;r&&(v=o&&m.route.id?o[m.route.id]:void 0,b=m.route.errorElement||XE,l&&(c<0&&p===0?(jw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,N=null):c===p&&(S=!0,N=m.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,p+1)),y=()=>{let j;return v?j=b:S?j=N:m.route.Component?j=w.createElement(m.route.Component,null):m.route.element?j=m.route.element:j=h,w.createElement(eS,{match:m,routeContext:{outlet:h,matches:g,isDataRoute:r!=null},children:j})};return r&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?w.createElement(ZE,{location:r.location,revalidation:r.revalidation,component:b,error:v,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:d}):y()},null)}function Hp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rS(t){let e=w.useContext(la);return Fe(e,Hp(t)),e}function sS(t){let e=w.useContext(Vu);return Fe(e,Hp(t)),e}function nS(t){let e=w.useContext(es);return Fe(e,Hp(t)),e}function Wp(t){let e=nS(t),r=e.matches[e.matches.length-1];return Fe(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function iS(){return Wp("useRouteId")}function aS(){var s;let t=w.useContext(qp),e=sS("useRouteError"),r=Wp("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[r]}function oS(){let{router:t}=rS("useNavigate"),e=Wp("useNavigate"),r=w.useRef(!1);return ww(()=>{r.current=!0}),w.useCallback(async(i,a={})=>{fr(r.current,bw),r.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var g0={};function jw(t,e,r){!e&&!g0[t]&&(g0[t]=!0,fr(!1,r))}w.memo(lS);function lS({routes:t,future:e,state:r,unstable_onError:s}){return Nw(t,void 0,r,s,e)}function oo({to:t,replace:e,state:r,relative:s}){Fe(ca(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=w.useContext(xr);fr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=w.useContext(es),{pathname:o}=yr(),l=Ar(),c=$p(t,Bp(a),o,s==="path"),d=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(d),{replace:e,state:r,relative:s})},[l,d,s,e,r]),null}function le(t){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cS({basename:t="/",children:e=null,location:r,navigationType:s="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){Fe(!ca(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:l,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[l,i,a,o]);typeof r=="string"&&(r=oa(r));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:v="default"}=r,S=w.useMemo(()=>{let b=Ns(d,l);return b==null?null:{location:{pathname:b,search:h,hash:m,state:p,key:v},navigationType:s}},[l,d,h,m,p,v,s]);return fr(S!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:w.createElement(xr.Provider,{value:c},w.createElement(Jo.Provider,{children:e,value:S}))}function uS({children:t,location:e}){return YE(bm(t),e)}function bm(t,e=[]){let r=[];return w.Children.forEach(t,(s,i)=>{if(!w.isValidElement(s))return;let a=[...e,i];if(s.type===w.Fragment){r.push.apply(r,bm(s.props.children,a));return}Fe(s.type===le,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=bm(s.props.children,a)),r.push(o)}),r}var mc="get",pc="application/x-www-form-urlencoded";function Fu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function dS(t){return Fu(t)&&t.tagName.toLowerCase()==="button"}function hS(t){return Fu(t)&&t.tagName.toLowerCase()==="form"}function mS(t){return Fu(t)&&t.tagName.toLowerCase()==="input"}function pS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fS(t,e){return t.button===0&&(!e||e==="_self")&&!pS(t)}var Wl=null;function gS(){if(Wl===null)try{new FormData(document.createElement("form"),0),Wl=!1}catch{Wl=!0}return Wl}var xS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dh(t){return t!=null&&!xS.has(t)?(fr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pc}"`),null):t}function yS(t,e){let r,s,i,a,o;if(hS(t)){let l=t.getAttribute("action");s=l?Ns(l,e):null,r=t.getAttribute("method")||mc,i=dh(t.getAttribute("enctype"))||pc,a=new FormData(t)}else if(dS(t)||mS(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(s=c?Ns(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||mc,i=dh(t.getAttribute("formenctype"))||dh(l.getAttribute("enctype"))||pc,a=new FormData(l,t),!gS()){let{name:d,type:h,value:m}=t;if(h==="image"){let p=d?`${d}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else d&&a.append(d,m)}}else{if(Fu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=mc,s=null,i=pc,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:s,method:r.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vS(t,e,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${r}`:e&&Ns(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function bS(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function NS(t,e,r){let s=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await bS(a,r);return o.links?o.links():[]}return[]}));return SS(s.flat(1).filter(wS).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function x0(t,e,r,s,i,a){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>{var h;return r[d].pathname!==c.pathname||((h=r[d].route.path)==null?void 0:h.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):a==="data"?e.filter((c,d)=>{var m;let h=s.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=r[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function jS(t,e,{includeHydrateFallback:r}={}){return _S(t.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function _S(t){return[...new Set(t)]}function ES(t){let e={},r=Object.keys(t).sort();for(let s of r)e[s]=t[s];return e}function SS(t,e){let r=new Set;return new Set(e),t.reduce((s,i)=>{let a=JSON.stringify(ES(i));return r.has(a)||(r.add(a),s.push({key:a,link:i})),s},[])}function _w(){let t=w.useContext(la);return Gp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function TS(){let t=w.useContext(Vu);return Gp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Kp=w.createContext(void 0);Kp.displayName="FrameworkContext";function Ew(){let t=w.useContext(Kp);return Gp(t,"You must render this element inside a <HydratedRouter> element"),t}function kS(t,e){let r=w.useContext(Kp),[s,i]=w.useState(!1),[a,o]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=e,p=w.useRef(null);w.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let b=g=>{g.forEach(y=>{o(y.isIntersecting)})},N=new IntersectionObserver(b,{threshold:.5});return p.current&&N.observe(p.current),()=>{N.disconnect()}}},[t]),w.useEffect(()=>{if(s){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[s]);let v=()=>{i(!0)},S=()=>{i(!1),o(!1)};return r?t!=="intent"?[a,p,{}]:[a,p,{onFocus:Ua(l,v),onBlur:Ua(c,S),onMouseEnter:Ua(d,v),onMouseLeave:Ua(h,S),onTouchStart:Ua(m,v)}]:[!1,p,{}]}function Ua(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function IS({page:t,...e}){let{router:r}=_w(),s=w.useMemo(()=>fw(r.routes,t,r.basename),[r.routes,t,r.basename]);return s?w.createElement(AS,{page:t,matches:s,...e}):null}function CS(t){let{manifest:e,routeModules:r}=Ew(),[s,i]=w.useState([]);return w.useEffect(()=>{let a=!1;return NS(t,e,r).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,r]),s}function AS({page:t,matches:e,...r}){let s=yr(),{manifest:i,routeModules:a}=Ew(),{basename:o}=_w(),{loaderData:l,matches:c}=TS(),d=w.useMemo(()=>x0(t,e,c,i,s,"data"),[t,e,c,i,s]),h=w.useMemo(()=>x0(t,e,c,i,s,"assets"),[t,e,c,i,s]),m=w.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let S=new Set,b=!1;if(e.forEach(g=>{var j;let y=i.routes[g.route.id];!y||!y.hasLoader||(!d.some(R=>R.route.id===g.route.id)&&g.route.id in l&&((j=a[g.route.id])!=null&&j.shouldRevalidate)||y.hasClientLoader?b=!0:S.add(g.route.id))}),S.size===0)return[];let N=vS(t,o,"data");return b&&S.size>0&&N.searchParams.set("_routes",e.filter(g=>S.has(g.route.id)).map(g=>g.route.id).join(",")),[N.pathname+N.search]},[o,l,s,i,d,e,t,a]),p=w.useMemo(()=>jS(h,i),[h,i]),v=CS(h);return w.createElement(w.Fragment,null,m.map(S=>w.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...r})),p.map(S=>w.createElement("link",{key:S,rel:"modulepreload",href:S,...r})),v.map(({key:S,link:b})=>w.createElement("link",{key:S,nonce:r.nonce,...b})))}function RS(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Sw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sw&&(window.__reactRouterVersion="7.10.1")}catch{}function PS({basename:t,children:e,unstable_useTransitions:r,window:s}){let i=w.useRef();i.current==null&&(i.current=vE({window:s,v5Compat:!0}));let a=i.current,[o,l]=w.useState({action:a.action,location:a.location}),c=w.useCallback(d=>{r===!1?l(d):w.startTransition(()=>l(d))},[r]);return w.useLayoutEffect(()=>a.listen(c),[a,c]),w.createElement(cS,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:r===!0})}var Tw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z=w.forwardRef(function({onClick:e,discover:r="render",prefetch:s="none",relative:i,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:m,...p},v){let{basename:S,unstable_useTransitions:b}=w.useContext(xr),N=typeof d=="string"&&Tw.test(d),g,y=!1;if(typeof d=="string"&&N&&(g=d,Sw))try{let I=new URL(window.location.href),P=d.startsWith("//")?new URL(I.protocol+d):new URL(d),A=Ns(P.pathname,S);P.origin===I.origin&&A!=null?d=A+P.search+P.hash:y=!0}catch{fr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=KE(d,{relative:i}),[R,M,D]=kS(s,p),T=OS(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:m,unstable_useTransitions:b});function _(I){e&&e(I),I.defaultPrevented||T(I)}let k=w.createElement("a",{...p,...D,href:g||j,onClick:y||a?e:_,ref:RS(v,M),target:c,"data-discover":!N&&r==="render"?"true":void 0});return R&&!N?w.createElement(w.Fragment,null,k,w.createElement(IS,{page:j})):k});Z.displayName="Link";var DS=w.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:s="",end:i=!1,style:a,to:o,viewTransition:l,children:c,...d},h){let m=Xo(o,{relative:d.relative}),p=yr(),v=w.useContext(Vu),{navigator:S,basename:b}=w.useContext(xr),N=v!=null&&BS(m)&&l===!0,g=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,y=p.pathname,j=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(y=y.toLowerCase(),j=j?j.toLowerCase():null,g=g.toLowerCase()),j&&b&&(j=Ns(j,b)||j);const R=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let M=y===g||!i&&y.startsWith(g)&&y.charAt(R)==="/",D=j!=null&&(j===g||!i&&j.startsWith(g)&&j.charAt(g.length)==="/"),T={isActive:M,isPending:D,isTransitioning:N},_=M?e:void 0,k;typeof s=="function"?k=s(T):k=[s,M?"active":null,D?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(T):a;return w.createElement(Z,{...d,"aria-current":_,className:k,ref:h,style:I,to:o,viewTransition:l},typeof c=="function"?c(T):c)});DS.displayName="NavLink";var MS=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:s,replace:i,state:a,method:o=mc,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:m,...p},v)=>{let{unstable_useTransitions:S}=w.useContext(xr),b=US(),N=zS(l,{relative:d}),g=o.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&Tw.test(l),j=R=>{if(c&&c(R),R.defaultPrevented)return;R.preventDefault();let M=R.nativeEvent.submitter,D=(M==null?void 0:M.getAttribute("formmethod"))||o,T=()=>b(M||R.currentTarget,{fetcherKey:e,method:D,navigate:r,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:m});S&&r!==!1?w.startTransition(()=>T()):T()};return w.createElement("form",{ref:v,method:g,action:N,onSubmit:s?c:j,...p,"data-discover":!y&&t==="render"?"true":void 0})});MS.displayName="Form";function LS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kw(t){let e=w.useContext(la);return Fe(e,LS(t)),e}function OS(t,{target:e,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o,unstable_useTransitions:l}={}){let c=Ar(),d=yr(),h=Xo(t,{relative:a});return w.useCallback(m=>{if(fS(m,e)){m.preventDefault();let p=r!==void 0?r:Po(d)===Po(h),v=()=>c(t,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:o});l?w.startTransition(()=>v()):v()}},[d,c,h,r,s,e,t,i,a,o,l])}var VS=0,FS=()=>`__${String(++VS)}__`;function US(){let{router:t}=kw("useSubmit"),{basename:e}=w.useContext(xr),r=iS(),s=t.fetch,i=t.navigate;return w.useCallback(async(a,o={})=>{let{action:l,method:c,encType:d,formData:h,body:m}=yS(a,e);if(o.navigate===!1){let p=o.fetcherKey||FS();await s(p,r,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await i(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,i,e,r])}function zS(t,{relative:e}={}){let{basename:r}=w.useContext(xr),s=w.useContext(es);Fe(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a={...Xo(t||".",{relative:e})},o=yr();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(m=>m).forEach(m=>l.append("index",m));let h=l.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:ms([r,a.pathname])),Po(a)}function BS(t,{relative:e}={}){let r=w.useContext(vw);Fe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=kw("useViewTransitionState"),i=Xo(t,{relative:e});if(!r.isTransitioning)return!1;let a=Ns(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=Ns(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Yc(i.pathname,o)!=null||Yc(i.pathname,a)!=null}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=()=>{};var y0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=function(t){const e=[];let r=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},qS=function(t){const e=[];let r=0,s=0;for(;r<t.length;){const i=t[r++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[s++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],l=t[r++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const a=t[r++],o=t[r++];e[s++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Cw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=a>>2,m=(a&3)<<4|l>>4;let p=(l&15)<<2|d>>6,v=d&63;c||(v=64,o||(p=64)),s.push(r[h],r[m],r[p],r[v])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Iw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],l=i<t.length?r[t.charAt(i)]:0;++i;const d=i<t.length?r[t.charAt(i)]:64;++i;const m=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||l==null||d==null||m==null)throw new HS;const p=a<<2|l>>4;if(s.push(p),d!==64){const v=l<<4&240|d>>2;if(s.push(v),m!==64){const S=d<<6&192|m;s.push(S)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WS=function(t){const e=Iw(t);return Cw.encodeByteArray(e,!0)},Jc=function(t){return WS(t).replace(/\./g,"")},Aw=function(t){try{return Cw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=()=>GS().__FIREBASE_DEFAULTS__,QS=()=>{if(typeof process>"u"||typeof y0>"u")return;const t=y0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Aw(t[1]);return e&&JSON.parse(e)},Uu=()=>{try{return $S()||KS()||QS()||YS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rw=t=>{var e,r;return(r=(e=Uu())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},Pw=t=>{const e=Rw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),s]:[e.substring(0,r),s]},Dw=()=>{var t;return(t=Uu())==null?void 0:t.config},Mw=t=>{var e;return(e=Uu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Jc(JSON.stringify(r)),Jc(JSON.stringify(o)),""].join(".")}const lo={};function XS(){const t={prod:[],emulator:[]};for(const e of Object.keys(lo))lo[e]?t.emulator.push(e):t.prod.push(e);return t}function ZS(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let v0=!1;function Yp(t,e){if(typeof window>"u"||typeof document>"u"||!ni(window.location.host)||lo[t]===e||lo[t]||v0)return;lo[t]=e;function r(p){return`__firebase__banner__${p}`}const s="__firebase__banner",a=XS().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,v){p.setAttribute("width","24"),p.setAttribute("id",v),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{v0=!0,o()},p}function h(p,v){p.setAttribute("id",v),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=ZS(s),v=r("text"),S=document.getElementById(v)||document.createElement("span"),b=r("learnmore"),N=document.getElementById(b)||document.createElement("a"),g=r("preprendIcon"),y=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const j=p.element;l(j),h(N,b);const R=d();c(y,g),j.append(y,S,N,R),document.body.appendChild(j)}a?(S.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function t4(){var e;const t=(e=Uu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function s4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function n4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i4(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function a4(){return!t4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function o4(){try{return typeof indexedDB=="object"}catch{return!1}}function l4(){return new Promise((t,e)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="FirebaseError";class ts extends Error{constructor(e,r,s){super(r),this.code=e,this.customData=s,this.name=c4,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zo.prototype.create)}}class Zo{constructor(e,r,s){this.service=e,this.serviceName=r,this.errors=s}create(e,...r){const s=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?u4(a,s):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ts(i,l,s)}}function u4(t,e){return t.replace(d4,(r,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const d4=/\{\$([^}]+)}/g;function h4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kn(t,e){if(t===e)return!0;const r=Object.keys(t),s=Object.keys(e);for(const i of r){if(!s.includes(i))return!1;const a=t[i],o=e[i];if(b0(a)&&b0(o)){if(!Kn(a,o))return!1}else if(a!==o)return!1}for(const i of s)if(!r.includes(i))return!1;return!0}function b0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){const e=[];for(const[r,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ha(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,a]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Wa(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function m4(t,e){const r=new p4(t,e);return r.subscribe.bind(r)}class p4{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,s){let i;if(e===void 0&&r===void 0&&s===void 0)throw new Error("Missing Observer.");f4(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:s},i.next===void 0&&(i.next=hh),i.error===void 0&&(i.error=hh),i.complete===void 0&&(i.complete=hh);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function f4(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function hh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class dn{constructor(e,r,s){this.name=e,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const s=new JS;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y4(e))try{this.getOrInitializeService({instanceIdentifier:Pn})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});s.resolve(a)}catch{}}}}clearInstance(e=Pn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pn){return this.instances.has(e)}getOptions(e=Pn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);s===l&&o.resolve(i)}return i}onInit(e,r){const s=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const s=this.onInitCallbacks.get(r);if(s)for(const i of s)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:x4(e),options:r}),this.instances.set(e,s),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Pn){return this.component?this.component.multipleInstances?e:Pn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function x4(t){return t===Pn?void 0:t}function y4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new g4(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const b4={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},w4=fe.INFO,N4={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},j4=(t,e,...r)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=N4[e];if(i)console[i](`[${s}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jp{constructor(e){this.name=e,this._logLevel=w4,this._logHandler=j4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const _4=(t,e)=>e.some(r=>t instanceof r);let w0,N0;function E4(){return w0||(w0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function S4(){return N0||(N0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ow=new WeakMap,wm=new WeakMap,Vw=new WeakMap,mh=new WeakMap,Xp=new WeakMap;function T4(t){const e=new Promise((r,s)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(nn(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&Ow.set(r,t)}).catch(()=>{}),Xp.set(e,t),e}function k4(t){if(wm.has(t))return;const e=new Promise((r,s)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});wm.set(t,e)}let Nm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return wm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vw.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return nn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function I4(t){Nm=t(Nm)}function C4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const s=t.call(ph(this),e,...r);return Vw.set(s,e.sort?e.sort():[e]),nn(s)}:S4().includes(t)?function(...e){return t.apply(ph(this),e),nn(Ow.get(this))}:function(...e){return nn(t.apply(ph(this),e))}}function A4(t){return typeof t=="function"?C4(t):(t instanceof IDBTransaction&&k4(t),_4(t,E4())?new Proxy(t,Nm):t)}function nn(t){if(t instanceof IDBRequest)return T4(t);if(mh.has(t))return mh.get(t);const e=A4(t);return e!==t&&(mh.set(t,e),Xp.set(e,t)),e}const ph=t=>Xp.get(t);function R4(t,e,{blocked:r,upgrade:s,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=nn(o);return s&&o.addEventListener("upgradeneeded",c=>{s(nn(o.result),c.oldVersion,c.newVersion,nn(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const P4=["get","getKey","getAll","getAllKeys","count"],D4=["put","add","delete","clear"],fh=new Map;function j0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fh.get(e))return fh.get(e);const r=e.replace(/FromIndex$/,""),s=e!==r,i=D4.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(i||P4.includes(r)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),i&&c.done]))[0]};return fh.set(e,a),a}I4(t=>({...t,get:(e,r,s)=>j0(e,r)||t.get(e,r,s),has:(e,r)=>!!j0(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(L4(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function L4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jm="@firebase/app",_0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Jp("@firebase/app"),O4="@firebase/app-compat",V4="@firebase/analytics-compat",F4="@firebase/analytics",U4="@firebase/app-check-compat",z4="@firebase/app-check",B4="@firebase/auth",$4="@firebase/auth-compat",q4="@firebase/database",H4="@firebase/data-connect",W4="@firebase/database-compat",G4="@firebase/functions",K4="@firebase/functions-compat",Q4="@firebase/installations",Y4="@firebase/installations-compat",J4="@firebase/messaging",X4="@firebase/messaging-compat",Z4="@firebase/performance",eT="@firebase/performance-compat",tT="@firebase/remote-config",rT="@firebase/remote-config-compat",sT="@firebase/storage",nT="@firebase/storage-compat",iT="@firebase/firestore",aT="@firebase/ai",oT="@firebase/firestore-compat",lT="firebase",cT="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="[DEFAULT]",uT={[jm]:"fire-core",[O4]:"fire-core-compat",[F4]:"fire-analytics",[V4]:"fire-analytics-compat",[z4]:"fire-app-check",[U4]:"fire-app-check-compat",[B4]:"fire-auth",[$4]:"fire-auth-compat",[q4]:"fire-rtdb",[H4]:"fire-data-connect",[W4]:"fire-rtdb-compat",[G4]:"fire-fn",[K4]:"fire-fn-compat",[Q4]:"fire-iid",[Y4]:"fire-iid-compat",[J4]:"fire-fcm",[X4]:"fire-fcm-compat",[Z4]:"fire-perf",[eT]:"fire-perf-compat",[tT]:"fire-rc",[rT]:"fire-rc-compat",[sT]:"fire-gcs",[nT]:"fire-gcs-compat",[iT]:"fire-fst",[oT]:"fire-fst-compat",[aT]:"fire-vertex","fire-js":"fire-js",[lT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Map,dT=new Map,Em=new Map;function E0(t,e){try{t.container.addComponent(e)}catch(r){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Qn(t){const e=t.name;if(Em.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;Em.set(e,t);for(const r of Xc.values())E0(r,t);for(const r of dT.values())E0(r,t);return!0}function zu(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Jt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},an=new Zo("app","Firebase",hT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,r,s){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=cT;function Fw(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const s={name:_m,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw an.create("bad-app-name",{appName:String(i)});if(r||(r=Dw()),!r)throw an.create("no-options");const a=Xc.get(i);if(a){if(Kn(r,a.options)&&Kn(s,a.config))return a;throw an.create("duplicate-app",{appName:i})}const o=new v4(i);for(const c of Em.values())o.addComponent(c);const l=new mT(r,s,o);return Xc.set(i,l),l}function Zp(t=_m){const e=Xc.get(t);if(!e&&t===_m&&Dw())return Fw();if(!e)throw an.create("no-app",{appName:t});return e}function zr(t,e,r){let s=uT[t]??t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(o.join(" "));return}Qn(new dn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="firebase-heartbeat-database",fT=1,Do="firebase-heartbeat-store";let gh=null;function Uw(){return gh||(gh=R4(pT,fT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Do)}catch(r){console.warn(r)}}}}).catch(t=>{throw an.create("idb-open",{originalErrorMessage:t.message})})),gh}async function gT(t){try{const r=(await Uw()).transaction(Do),s=await r.objectStore(Do).get(zw(t));return await r.done,s}catch(e){if(e instanceof ts)js.warn(e.message);else{const r=an.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(r.message)}}}async function S0(t,e){try{const s=(await Uw()).transaction(Do,"readwrite");await s.objectStore(Do).put(e,zw(t)),await s.done}catch(r){if(r instanceof ts)js.warn(r.message);else{const s=an.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});js.warn(s.message)}}}function zw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=1024,yT=30;class vT{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new wT(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=T0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>yT){const o=NT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){js.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=T0(),{heartbeatsToSend:s,unsentEntries:i}=bT(this._heartbeatsCache.heartbeats),a=Jc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return js.warn(r),""}}}function T0(){return new Date().toISOString().substring(0,10)}function bT(t,e=xT){const r=[];let s=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),k0(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),k0(r)>e){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class wT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o4()?l4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await gT(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return S0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return S0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function k0(t){return Jc(JSON.stringify({version:2,heartbeats:t})).length}function NT(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let s=1;s<t.length;s++)t[s].date<r&&(r=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){Qn(new dn("platform-logger",e=>new M4(e),"PRIVATE")),Qn(new dn("heartbeat",e=>new vT(e),"PRIVATE")),zr(jm,_0,t),zr(jm,_0,"esm2020"),zr("fire-js","")}jT("");function Bw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _T=Bw,$w=new Zo("auth","Firebase",Bw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Jp("@firebase/auth");function ET(t,...e){Zc.logLevel<=fe.WARN&&Zc.warn(`Auth (${ii}): ${t}`,...e)}function fc(t,...e){Zc.logLevel<=fe.ERROR&&Zc.error(`Auth (${ii}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,...e){throw ef(t,...e)}function Br(t,...e){return ef(t,...e)}function qw(t,e,r){const s={..._T(),[e]:r};return new Zo("auth","Firebase",s).create(e,{appName:t.name})}function ps(t){return qw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ef(t,...e){if(typeof t!="string"){const r=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(r,...s)}return $w.create(t,...e)}function re(t,e,...r){if(!t)throw ef(e,...r)}function us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fc(e),new Error(e)}function _s(t,e){t||us(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function ST(){return I0()==="http:"||I0()==="https:"}function I0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ST()||s4()||"connection"in navigator)?navigator.onLine:!0}function kT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,r){this.shortDelay=e,this.longDelay=r,_s(r>e,"Short delay should be less than long delay!"),this.isMobile=e4()||n4()}get(){return TT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t,e){_s(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{static initialize(e,r,s){this.fetchImpl=e,r&&(this.headersImpl=r),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AT=new tl(3e4,6e4);function Cs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Rr(t,e,r,s,i={}){return Ww(t,i,async()=>{let a={},o={};s&&(e==="GET"?o=s:a={body:JSON.stringify(s)});const l=el({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...a};return r4()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ni(t.emulatorConfig.host)&&(d.credentials="include"),Hw.fetch()(await Gw(t,t.config.apiHost,r,l),d)})}async function Ww(t,e,r){t._canInitEmulator=!1;const s={...IT,...e};try{const i=new PT(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Gl(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Gl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Gl(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw qw(t,h,d);Ir(t,h)}}catch(i){if(i instanceof ts)throw i;Ir(t,"network-request-failed",{message:String(i)})}}async function rl(t,e,r,s,i={}){const a=await Rr(t,e,r,s,i);return"mfaPendingCredential"in a&&Ir(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function Gw(t,e,r,s){const i=`${e}${r}?${s}`,a=t,o=a.config.emulator?tf(t.config,i):`${t.config.apiScheme}://${i}`;return CT.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function RT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,s)=>{this.timer=setTimeout(()=>s(Br(this.auth,"network-request-failed")),AT.get())})}}function Gl(t,e,r){const s={appName:t.name};r.email&&(s.email=r.email),r.phoneNumber&&(s.phoneNumber=r.phoneNumber);const i=Br(t,e,s);return i.customData._tokenResponse=r,i}function C0(t){return t!==void 0&&t.enterprise!==void 0}class DT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return RT(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MT(t,e){return Rr(t,"GET","/v2/recaptchaConfig",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(t,e){return Rr(t,"POST","/v1/accounts:delete",e)}async function eu(t,e){return Rr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OT(t,e=!1){const r=qe(t),s=await r.getIdToken(e),i=rf(s);re(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:s,authTime:co(xh(i.auth_time)),issuedAtTime:co(xh(i.iat)),expirationTime:co(xh(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function xh(t){return Number(t)*1e3}function rf(t){const[e,r,s]=t.split(".");if(e===void 0||r===void 0||s===void 0)return fc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Aw(r);return i?JSON.parse(i):(fc("Failed to decode base64 JWT payload"),null)}catch(i){return fc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function A0(t){const e=rf(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yn(t,e,r=!1){if(r)return e;try{return await e}catch(s){throw s instanceof ts&&VT(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function VT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=co(this.lastLoginAt),this.creationTime=co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(t){var m;const e=t.auth,r=await t.getIdToken(),s=await Yn(t,eu(e,{idToken:r}));re(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=(m=i.providerUserInfo)!=null&&m.length?Kw(i.providerUserInfo):[],o=zT(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Tm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function UT(t){const e=qe(t);await tu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zT(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function Kw(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(t,e){const r=await Ww(t,{},async()=>{const s=el({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await Gw(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&ni(t.emulatorConfig.host)&&(c.credentials="include"),Hw.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function $T(t,e){return Rr(t,"POST","/v2/accounts:revokeToken",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){re(e.length!==0,"internal-error");const r=A0(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:s,refreshToken:i,expiresIn:a}=await BT(e,r);this.updateTokensAndExpiration(s,i,Number(a))}updateTokensAndExpiration(e,r,s){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,r){const{refreshToken:s,accessToken:i,expirationTime:a}=r,o=new Oi;return s&&(re(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(re(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(re(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oi,this.toJSON())}_performRefresh(){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jr{constructor({uid:e,auth:r,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new FT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Tm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Yn(this,this.stsTokenManager.getToken(this.auth,e));return re(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return OT(this,e)}reload(){return UT(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new jr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),r&&await tu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jt(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await Yn(this,LT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const s=r.displayName??void 0,i=r.email??void 0,a=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,d=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:v,providerData:S,stsTokenManager:b}=r;re(m&&b,e,"internal-error");const N=Oi.fromJSON(this.name,b);re(typeof m=="string",e,"internal-error"),Vs(s,e.name),Vs(i,e.name),re(typeof p=="boolean",e,"internal-error"),re(typeof v=="boolean",e,"internal-error"),Vs(a,e.name),Vs(o,e.name),Vs(l,e.name),Vs(c,e.name),Vs(d,e.name),Vs(h,e.name);const g=new jr({uid:m,auth:e,email:i,emailVerified:p,displayName:s,isAnonymous:v,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:N,createdAt:d,lastLoginAt:h});return S&&Array.isArray(S)&&(g.providerData=S.map(y=>({...y}))),c&&(g._redirectEventId=c),g}static async _fromIdTokenResponse(e,r,s=!1){const i=new Oi;i.updateFromServerResponse(r);const a=new jr({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await tu(a),a}static async _fromGetAccountInfoResponse(e,r,s){const i=r.users[0];re(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Kw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new Oi;l.updateFromIdToken(s);const c=new jr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Tm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map;function ds(t){_s(t instanceof Function,"Expected a class definition");let e=R0.get(t);return e?(_s(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,R0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Qw.type="NONE";const P0=Qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t,e,r){return`firebase:${t}:${e}:${r}`}class Vi{constructor(e,r,s){this.persistence=e,this.auth=r,this.userKey=s;const{config:i,name:a}=this.auth;this.fullUserKey=gc(this.userKey,i.apiKey,a),this.fullPersistenceKey=gc("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await eu(this.auth,{idToken:e}).catch(()=>{});return r?jr._fromGetAccountInfoResponse(this.auth,r,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,s="authUser"){if(!r.length)return new Vi(ds(P0),e,s);const i=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||ds(P0);const o=gc(s,e.config.apiKey,e.name);let l=null;for(const d of r)try{const h=await d._get(o);if(h){let m;if(typeof h=="string"){const p=await eu(e,{idToken:h}).catch(()=>{});if(!p)break;m=await jr._fromGetAccountInfoResponse(e,p,h)}else m=jr._fromJSON(e,h);d!==a&&(l=m),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Vi(a,e,s):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Vi(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tN(e))return"Blackberry";if(rN(e))return"Webos";if(Jw(e))return"Safari";if((e.includes("chrome/")||Xw(e))&&!e.includes("edge/"))return"Chrome";if(eN(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(r);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Yw(t=Rt()){return/firefox\//i.test(t)}function Jw(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xw(t=Rt()){return/crios\//i.test(t)}function Zw(t=Rt()){return/iemobile/i.test(t)}function eN(t=Rt()){return/android/i.test(t)}function tN(t=Rt()){return/blackberry/i.test(t)}function rN(t=Rt()){return/webos/i.test(t)}function sf(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qT(t=Rt()){var e;return sf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function HT(){return i4()&&document.documentMode===10}function sN(t=Rt()){return sf(t)||eN(t)||rN(t)||tN(t)||/windows phone/i.test(t)||Zw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t,e=[]){let r;switch(t){case"Browser":r=D0(Rt());break;case"Worker":r=`${D0(Rt())}-${t}`;break;default:r=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${ii}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const s=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});s.onAbort=r,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const s of this.queue)await s(e),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(t,e={}){return Rr(t,"GET","/v2/passwordPolicy",Cs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=6;class QT{constructor(e){var s;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??KT,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(r.meetsMinPasswordLength=e.length>=s),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,r,s,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,r,s,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M0(this),this.idTokenSubscription=new M0(this),this.beforeStateQueue=new WT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$w,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ds(r)),this._initializationPromise=this.queue(async()=>{var s,i,a;if(!this._deleted&&(this.persistenceManager=await Vi.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await eu(this,{idToken:e}),s=await jr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(s)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Jt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await tu(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jt(this.app))return Promise.reject(ps(this));const r=e?qe(e):null;return r&&re(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jt(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jt(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GT(this),r=new QT(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zo("auth","Firebase",e())}onAuthStateChanged(e,r,s){return this.registerStateListener(this.authStateSubscription,e,r,s)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,s){return this.registerStateListener(this.idTokenSubscription,e,r,s)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(s.tenantId=this.tenantId),await $T(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const s=await this.getOrInitRedirectPersistenceManager(r);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ds(e)||this._popupRedirectResolver;re(r,this,"argument-error"),this.redirectPersistenceManager=await Vi.create(this,[ds(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,s;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,s,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,s,i);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var r;if(Jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&ET(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Nn(t){return qe(t)}class M0{constructor(e){this.auth=e,this.observer=null,this.addObserver=m4(r=>this.observer=r)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JT(t){Bu=t}function iN(t){return Bu.loadJS(t)}function XT(){return Bu.recaptchaEnterpriseScript}function ZT(){return Bu.gapiScript}function ek(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class tk{constructor(){this.enterprise=new rk}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class rk{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const sk="recaptcha-enterprise",aN="NO_RECAPTCHA";class nk{constructor(e){this.type=sk,this.auth=Nn(e)}async verify(e="verify",r=!1){async function s(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{MT(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new DT(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function i(a,o,l){const c=window.grecaptcha;C0(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(aN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tk().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{s(this.auth).then(l=>{if(!r&&C0(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=XT();c.length!==0&&(c+=l),iN(c).then(()=>{i(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function L0(t,e,r,s=!1,i=!1){const a=new nk(t);let o;if(i)o=aN;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ru(t,e,r,s,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await L0(t,e,r,r==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await L0(t,e,r,r==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t,e){const r=zu(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(Kn(a,e??{}))return i;Ir(i,"already-initialized")}return r.initialize({options:e})}function ak(t,e){const r=(e==null?void 0:e.persistence)||[],s=(Array.isArray(r)?r:[r]).map(ds);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function ok(t,e,r){const s=Nn(t);re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,a=oN(e),{host:o,port:l}=lk(e),c=l===null?"":`:${l}`,d={url:`${a}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),re(Kn(d,s.config.emulator)&&Kn(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,ni(o)?(Qp(`${a}//${o}${c}`),Yp("Auth",!0)):ck()}function oN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lk(t){const e=oN(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const s=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const a=i[1];return{host:a,port:O0(s.substr(a.length+1))}}else{const[a,o]=s.split(":");return{host:a,port:O0(o)}}}function O0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ck(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return us("not implemented")}_getIdTokenResponse(e){return us("not implemented")}_linkToIdToken(e,r){return us("not implemented")}_getReauthenticationResolver(e){return us("not implemented")}}async function uk(t,e){return Rr(t,"POST","/v1/accounts:update",e)}async function dk(t,e){return Rr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t,e){return rl(t,"POST","/v1/accounts:signInWithPassword",Cs(t,e))}async function mk(t,e){return Rr(t,"POST","/v1/accounts:sendOobCode",Cs(t,e))}async function pk(t,e){return mk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){return rl(t,"POST","/v1/accounts:signInWithEmailLink",Cs(t,e))}async function gk(t,e){return rl(t,"POST","/v1/accounts:signInWithEmailLink",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends nf{constructor(e,r,s,i=null){super("password",s),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new Mo(e,r,"password")}static _fromEmailAndCode(e,r,s=null){return new Mo(e,r,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ru(e,r,"signInWithPassword",hk);case"emailLink":return fk(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const s={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ru(e,s,"signUpPassword",dk);case"emailLink":return gk(e,{idToken:r,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(t,e){return rl(t,"POST","/v1/accounts:signInWithIdp",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="http://localhost";class Jn extends nf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Jn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ir("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...a}=r;if(!s||!i)return null;const o=new Jn(s,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Fi(e,r)}_linkToIdToken(e,r){const s=this.buildRequest();return s.idToken=r,Fi(e,s)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Fi(e,r)}buildRequest(){const e={requestUri:xk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=el(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vk(t){const e=Ha(Wa(t)).link,r=e?Ha(Wa(e)).deep_link_id:null,s=Ha(Wa(t)).deep_link_id;return(s?Ha(Wa(s)).link:null)||s||r||e||t}class af{constructor(e){const r=Ha(Wa(e)),s=r.apiKey??null,i=r.oobCode??null,a=yk(r.mode??null);re(s&&i&&a,"argument-error"),this.apiKey=s,this.operation=a,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=vk(e);try{return new af(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.providerId=ua.PROVIDER_ID}static credential(e,r){return Mo._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const s=af.parseLink(r);return re(s,"argument-error"),Mo._fromEmailAndCode(e,s.code,s.tenantId)}}ua.PROVIDER_ID="password";ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends lN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends sl{constructor(){super("facebook.com")}static credential(e){return Jn._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Jn._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:s}=e;if(!r&&!s)return null;try{return qs.credential(r,s)}catch{return null}}}qs.GOOGLE_SIGN_IN_METHOD="google.com";qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends sl{constructor(){super("github.com")}static credential(e){return Jn._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.GITHUB_SIGN_IN_METHOD="github.com";Hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends sl{constructor(){super("twitter.com")}static credential(e,r){return Jn._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:s}=e;if(!r||!s)return null;try{return Ws.credential(r,s)}catch{return null}}}Ws.TWITTER_SIGN_IN_METHOD="twitter.com";Ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,e){return rl(t,"POST","/v1/accounts:signUp",Cs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,s,i=!1){const a=await jr._fromIdTokenResponse(e,s,i),o=V0(s);return new Xn({user:a,providerId:o,_tokenResponse:s,operationType:r})}static async _forOperation(e,r,s){await e._updateTokensIfNecessary(s,!0);const i=V0(s);return new Xn({user:e,providerId:i,_tokenResponse:s,operationType:r})}}function V0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends ts{constructor(e,r,s,i){super(r.code,r.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,su.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,r,s,i){return new su(e,r,s,i)}}function cN(t,e,r,s){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?su._fromErrorAndOperation(t,a,e,s):a})}async function wk(t,e,r=!1){const s=await Yn(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Xn._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e,r=!1){const{auth:s}=t;if(Jt(s.app))return Promise.reject(ps(s));const i="reauthenticate";try{const a=await Yn(t,cN(s,i,e,t),r);re(a.idToken,s,"internal-error");const o=rf(a.idToken);re(o,s,"internal-error");const{sub:l}=o;return re(t.uid===l,s,"user-mismatch"),Xn._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ir(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e,r=!1){if(Jt(t.app))return Promise.reject(ps(t));const s="signIn",i=await cN(t,s,e),a=await Xn._fromIdTokenResponse(t,s,i);return r||await t._updateCurrentUser(a.user),a}async function jk(t,e){return uN(Nn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t){const e=Nn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _k(t,e,r){const s=Nn(t);await ru(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pk)}async function Ek(t,e,r){if(Jt(t.app))return Promise.reject(ps(t));const s=Nn(t),o=await ru(s,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bk).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&dN(t),c}),l=await Xn._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function Sk(t,e,r){return Jt(t.app)?Promise.reject(ps(t)):jk(qe(t),ua.credential(e,r)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&dN(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(t,e){return Rr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const s=qe(t),a={idToken:await s.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await Yn(s,Tk(s.auth,a));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const l=s.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function of(t,e){return kk(qe(t),null,e)}async function kk(t,e,r){const{auth:s}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};r&&(a.password=r);const o=await Yn(t,uk(s,a));await t._updateTokensIfNecessary(o,!0)}function Ik(t,e,r,s){return qe(t).onIdTokenChanged(e,r,s)}function Ck(t,e,r){return qe(t).beforeAuthStateChanged(e,r)}function Ak(t,e,r,s){return qe(t).onAuthStateChanged(e,r,s)}function Rk(t){return qe(t).signOut()}const iu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(iu,"1"),this.storage.removeItem(iu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=1e3,Dk=10;class mN extends hN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const s=this.storage.getItem(r),i=this.localCache[r];s!==i&&e(r,i,s)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!r&&this.localCache[s]===o||this.notifyListeners(s,o)},a=this.storage.getItem(s);HT()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Dk):i()}notifyListeners(e,r){this.localCache[e]=r;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:s}),!0)})},Pk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}mN.type="LOCAL";const Mk=mN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN extends hN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}pN.type="SESSION";const fN=pN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const s=new $u(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:s,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const l=Array.from(o).map(async d=>d(r.origin,a)),c=await Lk(l);r.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$u.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(t="",e=10){let r="";for(let s=0;s<e;s++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const d=lf("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(h),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(){return window}function Vk(t){$r().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(){return typeof $r().WorkerGlobalScope<"u"&&typeof $r().importScripts=="function"}async function Fk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Uk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function zk(){return gN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="firebaseLocalStorageDb",Bk=1,au="firebaseLocalStorage",yN="fbase_key";class nl{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function qu(t,e){return t.transaction([au],e?"readwrite":"readonly").objectStore(au)}function $k(){const t=indexedDB.deleteDatabase(xN);return new nl(t).toPromise()}function km(){const t=indexedDB.open(xN,Bk);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(au,{keyPath:yN})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(au)?e(s):(s.close(),await $k(),e(await km()))})})}async function F0(t,e,r){const s=qu(t,!0).put({[yN]:e,value:r});return new nl(s).toPromise()}async function qk(t,e){const r=qu(t,!1).get(e),s=await new nl(r).toPromise();return s===void 0?null:s.value}function U0(t,e){const r=qu(t,!0).delete(e);return new nl(r).toPromise()}const Hk=800,Wk=3;class vN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let r=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(r++>Wk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$u._getInstance(zk()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,s;if(this.activeServiceWorker=await Fk(),!this.activeServiceWorker)return;this.sender=new Ok(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Uk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await F0(e,iu,"1"),await U0(e,iu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(s=>F0(s,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(s=>qk(s,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>U0(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=qu(i,!1).getAll();return new nl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vN.type="LOCAL";const Gk=vN;new tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t,e){return e?ds(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends nf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fi(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Fi(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Qk(t){return uN(t.auth,new cf(t),t.bypassAuthState)}function Yk(t){const{auth:e,user:r}=t;return re(r,e,"internal-error"),Nk(r,new cf(t),t.bypassAuthState)}async function Jk(t){const{auth:e,user:r}=t;return re(r,e,"internal-error"),wk(r,new cf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,r,s,i,a=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:s,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:s,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qk;case"linkViaPopup":case"linkViaRedirect":return Jk;case"reauthViaPopup":case"reauthViaRedirect":return Yk;default:Ir(this.auth,"internal-error")}}resolve(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new tl(2e3,1e4);class Ci extends bN{constructor(e,r,s,i,a){super(e,r,i,a),this.provider=s,this.authWindow=null,this.pollId=null,Ci.currentPopupAction&&Ci.currentPopupAction.cancel(),Ci.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){_s(this.filter.length===1,"Popup operations only handle one event");const e=lf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ci.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,s;if((s=(r=this.authWindow)==null?void 0:r.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Xk.get())};e()}}Ci.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="pendingRedirect",xc=new Map;class eI extends bN{constructor(e,r,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,s),this.eventId=null}async execute(){let e=xc.get(this.auth._key());if(!e){try{const s=await tI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(r){e=()=>Promise.reject(r)}xc.set(this.auth._key(),e)}return this.bypassAuthState||xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tI(t,e){const r=nI(e),s=sI(t);if(!await s._isAvailable())return!1;const i=await s._get(r)==="true";return await s._remove(r),i}function rI(t,e){xc.set(t._key(),e)}function sI(t){return ds(t._redirectPersistence)}function nI(t){return gc(Zk,t.config.apiKey,t.name)}async function iI(t,e,r=!1){if(Jt(t.app))return Promise.reject(ps(t));const s=Nn(t),i=Kk(s,e),o=await new eI(s,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=10*60*1e3;class oI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(r=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lI(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var s;if(e.error&&!wN(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";r.onError(Br(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const s=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aI&&this.cachedEventUids.clear(),this.cachedEventUids.has(z0(e))}saveEventToCache(e){this.cachedEventUids.add(z0(e)),this.lastProcessedEventTime=Date.now()}}function z0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(t,e={}){return Rr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dI=/^https?/;async function hI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cI(t);for(const r of e)try{if(mI(r))return}catch{}Ir(t,"unauthorized-domain")}function mI(t){const e=Sm(),{protocol:r,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===s}if(!dI.test(r))return!1;if(uI.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new tl(3e4,6e4);function B0(){const t=$r().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function fI(t){return new Promise((e,r)=>{var i,a,o;function s(){B0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B0(),r(Br(t,"network-request-failed"))},timeout:pI.get()})}if((a=(i=$r().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=$r().gapi)!=null&&o.load)s();else{const l=ek("iframefcb");return $r()[l]=()=>{gapi.load?s():r(Br(t,"network-request-failed"))},iN(`${ZT()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw yc=null,e})}let yc=null;function gI(t){return yc=yc||fI(t),yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new tl(5e3,15e3),yI="__/auth/iframe",vI="emulator/auth/iframe",bI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NI(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?tf(e,vI):`https://${t.config.authDomain}/${yI}`,s={apiKey:e.apiKey,appName:t.name,v:ii},i=wI.get(t.config.apiHost);i&&(s.eid=i);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${r}?${el(s).slice(1)}`}async function jI(t){const e=await gI(t),r=$r().gapi;return re(r,t,"internal-error"),e.open({where:document.body,url:NI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bI,dontclear:!0},s=>new Promise(async(i,a)=>{await s.restyle({setHideOnLeave:!1});const o=Br(t,"network-request-failed"),l=$r().setTimeout(()=>{a(o)},xI.get());function c(){$r().clearTimeout(l),i(s)}s.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EI=500,SI=600,TI="_blank",kI="http://localhost";class $0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function II(t,e,r,s=EI,i=SI){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={..._I,width:s.toString(),height:i.toString(),top:a,left:o},d=Rt().toLowerCase();r&&(l=Xw(d)?TI:r),Yw(d)&&(e=e||kI,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[v,S])=>`${p}${v}=${S},`,"");if(qT(d)&&l!=="_self")return CI(e||"",l),new $0(null);const m=window.open(e||"",l,h);re(m,t,"popup-blocked");try{m.focus()}catch{}return new $0(m)}function CI(t,e){const r=document.createElement("a");r.href=t,r.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="__/auth/handler",RI="emulator/auth/handler",PI=encodeURIComponent("fac");async function q0(t,e,r,s,i,a){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:s,v:ii,eventId:i};if(e instanceof lN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",h4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof sl){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${PI}=${encodeURIComponent(c)}`:"";return`${DI(t)}?${el(l).slice(1)}${d}`}function DI({config:t}){return t.emulator?tf(t,RI):`https://${t.authDomain}/${AI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="webStorageSupport";class MI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fN,this._completeRedirectFn=iI,this._overrideRedirectResult=rI}async _openPopup(e,r,s,i){var o;_s((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await q0(e,r,s,Sm(),i);return II(e,a,lf())}async _openRedirect(e,r,s,i){await this._originValidation(e);const a=await q0(e,r,s,Sm(),i);return Vk(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(_s(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[r]={promise:s},s.catch(()=>{delete this.eventManagers[r]}),s}async initAndGetManager(e){const r=await jI(e),s=new oI(e);return r.register("authEvent",i=>(re(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=r,s}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(yh,{type:yh},i=>{var o;const a=(o=i==null?void 0:i[0])==null?void 0:o[yh];a!==void 0&&r(!!a),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=hI(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return sN()||Jw()||sf()}}const LI=MI;var H0="@firebase/auth",W0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FI(t){Qn(new dn("auth",(e,{options:r})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nN(t)},d=new YT(s,i,a,c);return ak(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,s)=>{e.getProvider("auth-internal").initialize()})),Qn(new dn("auth-internal",e=>{const r=Nn(e.getProvider("auth").getImmediate());return(s=>new OI(s))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),zr(H0,W0,VI(t)),zr(H0,W0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=5*60,zI=Mw("authIdTokenMaxAge")||UI;let G0=null;const BI=t=>async e=>{const r=e&&await e.getIdTokenResult(),s=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(s&&s>zI)return;const i=r==null?void 0:r.token;G0!==i&&(G0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function $I(t=Zp()){const e=zu(t,"auth");if(e.isInitialized())return e.getImmediate();const r=ik(t,{popupRedirectResolver:LI,persistence:[Gk,Mk,fN]}),s=Mw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const o=BI(a.toString());Ck(r,o,()=>o(r.currentUser)),Ik(r,l=>o(l))}}const i=Rw("auth");return i&&ok(r,`http://${i}`),r}function qI(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}JT({loadJS(t){return new Promise((e,r)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const a=Br("internal-error");a.customData=i,r(a)},s.type="text/javascript",s.charset="UTF-8",qI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FI("Browser");var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var on,NN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function k(){}k.prototype=_.prototype,T.F=_.prototype,T.prototype=new k,T.prototype.constructor=T,T.D=function(I,P,A){for(var C=Array(arguments.length-2),me=2;me<arguments.length;me++)C[me-2]=arguments[me];return _.prototype[P].apply(I,C)}}function r(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,r),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,k){k||(k=0);const I=Array(16);if(typeof _=="string")for(var P=0;P<16;++P)I[P]=_.charCodeAt(k++)|_.charCodeAt(k++)<<8|_.charCodeAt(k++)<<16|_.charCodeAt(k++)<<24;else for(P=0;P<16;++P)I[P]=_[k++]|_[k++]<<8|_[k++]<<16|_[k++]<<24;_=T.g[0],k=T.g[1],P=T.g[2];let A=T.g[3],C;C=_+(A^k&(P^A))+I[0]+3614090360&4294967295,_=k+(C<<7&4294967295|C>>>25),C=A+(P^_&(k^P))+I[1]+3905402710&4294967295,A=_+(C<<12&4294967295|C>>>20),C=P+(k^A&(_^k))+I[2]+606105819&4294967295,P=A+(C<<17&4294967295|C>>>15),C=k+(_^P&(A^_))+I[3]+3250441966&4294967295,k=P+(C<<22&4294967295|C>>>10),C=_+(A^k&(P^A))+I[4]+4118548399&4294967295,_=k+(C<<7&4294967295|C>>>25),C=A+(P^_&(k^P))+I[5]+1200080426&4294967295,A=_+(C<<12&4294967295|C>>>20),C=P+(k^A&(_^k))+I[6]+2821735955&4294967295,P=A+(C<<17&4294967295|C>>>15),C=k+(_^P&(A^_))+I[7]+4249261313&4294967295,k=P+(C<<22&4294967295|C>>>10),C=_+(A^k&(P^A))+I[8]+1770035416&4294967295,_=k+(C<<7&4294967295|C>>>25),C=A+(P^_&(k^P))+I[9]+2336552879&4294967295,A=_+(C<<12&4294967295|C>>>20),C=P+(k^A&(_^k))+I[10]+4294925233&4294967295,P=A+(C<<17&4294967295|C>>>15),C=k+(_^P&(A^_))+I[11]+2304563134&4294967295,k=P+(C<<22&4294967295|C>>>10),C=_+(A^k&(P^A))+I[12]+1804603682&4294967295,_=k+(C<<7&4294967295|C>>>25),C=A+(P^_&(k^P))+I[13]+4254626195&4294967295,A=_+(C<<12&4294967295|C>>>20),C=P+(k^A&(_^k))+I[14]+2792965006&4294967295,P=A+(C<<17&4294967295|C>>>15),C=k+(_^P&(A^_))+I[15]+1236535329&4294967295,k=P+(C<<22&4294967295|C>>>10),C=_+(P^A&(k^P))+I[1]+4129170786&4294967295,_=k+(C<<5&4294967295|C>>>27),C=A+(k^P&(_^k))+I[6]+3225465664&4294967295,A=_+(C<<9&4294967295|C>>>23),C=P+(_^k&(A^_))+I[11]+643717713&4294967295,P=A+(C<<14&4294967295|C>>>18),C=k+(A^_&(P^A))+I[0]+3921069994&4294967295,k=P+(C<<20&4294967295|C>>>12),C=_+(P^A&(k^P))+I[5]+3593408605&4294967295,_=k+(C<<5&4294967295|C>>>27),C=A+(k^P&(_^k))+I[10]+38016083&4294967295,A=_+(C<<9&4294967295|C>>>23),C=P+(_^k&(A^_))+I[15]+3634488961&4294967295,P=A+(C<<14&4294967295|C>>>18),C=k+(A^_&(P^A))+I[4]+3889429448&4294967295,k=P+(C<<20&4294967295|C>>>12),C=_+(P^A&(k^P))+I[9]+568446438&4294967295,_=k+(C<<5&4294967295|C>>>27),C=A+(k^P&(_^k))+I[14]+3275163606&4294967295,A=_+(C<<9&4294967295|C>>>23),C=P+(_^k&(A^_))+I[3]+4107603335&4294967295,P=A+(C<<14&4294967295|C>>>18),C=k+(A^_&(P^A))+I[8]+1163531501&4294967295,k=P+(C<<20&4294967295|C>>>12),C=_+(P^A&(k^P))+I[13]+2850285829&4294967295,_=k+(C<<5&4294967295|C>>>27),C=A+(k^P&(_^k))+I[2]+4243563512&4294967295,A=_+(C<<9&4294967295|C>>>23),C=P+(_^k&(A^_))+I[7]+1735328473&4294967295,P=A+(C<<14&4294967295|C>>>18),C=k+(A^_&(P^A))+I[12]+2368359562&4294967295,k=P+(C<<20&4294967295|C>>>12),C=_+(k^P^A)+I[5]+4294588738&4294967295,_=k+(C<<4&4294967295|C>>>28),C=A+(_^k^P)+I[8]+2272392833&4294967295,A=_+(C<<11&4294967295|C>>>21),C=P+(A^_^k)+I[11]+1839030562&4294967295,P=A+(C<<16&4294967295|C>>>16),C=k+(P^A^_)+I[14]+4259657740&4294967295,k=P+(C<<23&4294967295|C>>>9),C=_+(k^P^A)+I[1]+2763975236&4294967295,_=k+(C<<4&4294967295|C>>>28),C=A+(_^k^P)+I[4]+1272893353&4294967295,A=_+(C<<11&4294967295|C>>>21),C=P+(A^_^k)+I[7]+4139469664&4294967295,P=A+(C<<16&4294967295|C>>>16),C=k+(P^A^_)+I[10]+3200236656&4294967295,k=P+(C<<23&4294967295|C>>>9),C=_+(k^P^A)+I[13]+681279174&4294967295,_=k+(C<<4&4294967295|C>>>28),C=A+(_^k^P)+I[0]+3936430074&4294967295,A=_+(C<<11&4294967295|C>>>21),C=P+(A^_^k)+I[3]+3572445317&4294967295,P=A+(C<<16&4294967295|C>>>16),C=k+(P^A^_)+I[6]+76029189&4294967295,k=P+(C<<23&4294967295|C>>>9),C=_+(k^P^A)+I[9]+3654602809&4294967295,_=k+(C<<4&4294967295|C>>>28),C=A+(_^k^P)+I[12]+3873151461&4294967295,A=_+(C<<11&4294967295|C>>>21),C=P+(A^_^k)+I[15]+530742520&4294967295,P=A+(C<<16&4294967295|C>>>16),C=k+(P^A^_)+I[2]+3299628645&4294967295,k=P+(C<<23&4294967295|C>>>9),C=_+(P^(k|~A))+I[0]+4096336452&4294967295,_=k+(C<<6&4294967295|C>>>26),C=A+(k^(_|~P))+I[7]+1126891415&4294967295,A=_+(C<<10&4294967295|C>>>22),C=P+(_^(A|~k))+I[14]+2878612391&4294967295,P=A+(C<<15&4294967295|C>>>17),C=k+(A^(P|~_))+I[5]+4237533241&4294967295,k=P+(C<<21&4294967295|C>>>11),C=_+(P^(k|~A))+I[12]+1700485571&4294967295,_=k+(C<<6&4294967295|C>>>26),C=A+(k^(_|~P))+I[3]+2399980690&4294967295,A=_+(C<<10&4294967295|C>>>22),C=P+(_^(A|~k))+I[10]+4293915773&4294967295,P=A+(C<<15&4294967295|C>>>17),C=k+(A^(P|~_))+I[1]+2240044497&4294967295,k=P+(C<<21&4294967295|C>>>11),C=_+(P^(k|~A))+I[8]+1873313359&4294967295,_=k+(C<<6&4294967295|C>>>26),C=A+(k^(_|~P))+I[15]+4264355552&4294967295,A=_+(C<<10&4294967295|C>>>22),C=P+(_^(A|~k))+I[6]+2734768916&4294967295,P=A+(C<<15&4294967295|C>>>17),C=k+(A^(P|~_))+I[13]+1309151649&4294967295,k=P+(C<<21&4294967295|C>>>11),C=_+(P^(k|~A))+I[4]+4149444226&4294967295,_=k+(C<<6&4294967295|C>>>26),C=A+(k^(_|~P))+I[11]+3174756917&4294967295,A=_+(C<<10&4294967295|C>>>22),C=P+(_^(A|~k))+I[2]+718787259&4294967295,P=A+(C<<15&4294967295|C>>>17),C=k+(A^(P|~_))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+A&4294967295}s.prototype.v=function(T,_){_===void 0&&(_=T.length);const k=_-this.blockSize,I=this.C;let P=this.h,A=0;for(;A<_;){if(P==0)for(;A<=k;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(I[P++]=T.charCodeAt(A++),P==this.blockSize){i(this,I),P=0;break}}else for(;A<_;)if(I[P++]=T[A++],P==this.blockSize){i(this,I),P=0;break}}this.h=P,this.o+=_},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var k=T.length-8;k<T.length;++k)T[k]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,k=0;k<4;++k)for(let I=0;I<32;I+=8)T[_++]=this.g[k]>>>I&255;return T};function a(T,_){var k=l;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=_(T)}function o(T,_){this.h=_;const k=[];let I=!0;for(let P=T.length-1;P>=0;P--){const A=T[P]|0;I&&A==_||(k[P]=A,I=!1)}this.g=k}var l={};function c(T){return-128<=T&&T<128?a(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return N(d(-T));const _=[];let k=1;for(let I=0;T>=k;I++)_[I]=T/k|0,k*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return N(h(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(_,8));let I=m;for(let A=0;A<T.length;A+=8){var P=Math.min(8,T.length-A);const C=parseInt(T.substring(A,A+P),_);P<8?(P=d(Math.pow(_,P)),I=I.j(P).add(d(C))):(I=I.j(k),I=I.add(d(C)))}return I}var m=c(0),p=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(b(this))return-N(this).m();let T=0,_=1;for(let k=0;k<this.g.length;k++){const I=this.i(k);T+=(I>=0?I:4294967296+I)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S(this))return"0";if(b(this))return"-"+N(this).toString(T);const _=d(Math.pow(T,6));var k=this;let I="";for(;;){const P=R(k,_).g;k=g(k,P.j(_));let A=((k.g.length>0?k.g[0]:k.h)>>>0).toString(T);if(k=P,S(k))return A+I;for(;A.length<6;)A="0"+A;I=A+I}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function S(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function b(T){return T.h==-1}t.l=function(T){return T=g(this,T),b(T)?-1:S(T)?0:1};function N(T){const _=T.g.length,k=[];for(let I=0;I<_;I++)k[I]=~T.g[I];return new o(k,~T.h).add(p)}t.abs=function(){return b(this)?N(this):this},t.add=function(T){const _=Math.max(this.g.length,T.g.length),k=[];let I=0;for(let P=0;P<=_;P++){let A=I+(this.i(P)&65535)+(T.i(P)&65535),C=(A>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);I=C>>>16,A&=65535,C&=65535,k[P]=C<<16|A}return new o(k,k[k.length-1]&-2147483648?-1:0)};function g(T,_){return T.add(N(_))}t.j=function(T){if(S(this)||S(T))return m;if(b(this))return b(T)?N(this).j(N(T)):N(N(this).j(T));if(b(T))return N(this.j(N(T)));if(this.l(v)<0&&T.l(v)<0)return d(this.m()*T.m());const _=this.g.length+T.g.length,k=[];for(var I=0;I<2*_;I++)k[I]=0;for(I=0;I<this.g.length;I++)for(let P=0;P<T.g.length;P++){const A=this.i(I)>>>16,C=this.i(I)&65535,me=T.i(P)>>>16,U=T.i(P)&65535;k[2*I+2*P]+=C*U,y(k,2*I+2*P),k[2*I+2*P+1]+=A*U,y(k,2*I+2*P+1),k[2*I+2*P+1]+=C*me,y(k,2*I+2*P+1),k[2*I+2*P+2]+=A*me,y(k,2*I+2*P+2)}for(T=0;T<_;T++)k[T]=k[2*T+1]<<16|k[2*T];for(T=_;T<2*_;T++)k[T]=0;return new o(k,0)};function y(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function j(T,_){this.g=T,this.h=_}function R(T,_){if(S(_))throw Error("division by zero");if(S(T))return new j(m,m);if(b(T))return _=R(N(T),_),new j(N(_.g),N(_.h));if(b(_))return _=R(T,N(_)),new j(N(_.g),_.h);if(T.g.length>30){if(b(T)||b(_))throw Error("slowDivide_ only works with positive integers.");for(var k=p,I=_;I.l(T)<=0;)k=M(k),I=M(I);var P=D(k,1),A=D(I,1);for(I=D(I,2),k=D(k,2);!S(I);){var C=A.add(I);C.l(T)<=0&&(P=P.add(k),A=C),I=D(I,1),k=D(k,1)}return _=g(T,P.j(_)),new j(P,_)}for(P=m;T.l(_)>=0;){for(k=Math.max(1,Math.floor(T.m()/_.m())),I=Math.ceil(Math.log(k)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),A=d(k),C=A.j(_);b(C)||C.l(T)>0;)k-=I,A=d(k),C=A.j(_);S(A)&&(A=p),P=P.add(A),T=g(T,C)}return new j(P,T)}t.B=function(T){return R(this,T).h},t.and=function(T){const _=Math.max(this.g.length,T.g.length),k=[];for(let I=0;I<_;I++)k[I]=this.i(I)&T.i(I);return new o(k,this.h&T.h)},t.or=function(T){const _=Math.max(this.g.length,T.g.length),k=[];for(let I=0;I<_;I++)k[I]=this.i(I)|T.i(I);return new o(k,this.h|T.h)},t.xor=function(T){const _=Math.max(this.g.length,T.g.length),k=[];for(let I=0;I<_;I++)k[I]=this.i(I)^T.i(I);return new o(k,this.h^T.h)};function M(T){const _=T.g.length+1,k=[];for(let I=0;I<_;I++)k[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(k,T.h)}function D(T,_){const k=_>>5;_%=32;const I=T.g.length-k,P=[];for(let A=0;A<I;A++)P[A]=_>0?T.i(A+k)>>>_|T.i(A+k+1)<<32-_:T.i(A+k);return new o(P,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,NN=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,on=o}).apply(typeof K0<"u"?K0:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jN,Ga,_N,vc,Im,EN,SN,TN;(function(){var t,e=Object.defineProperty;function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var f=0;f<u.length;++f){var x=u[f];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=r(this);function i(u,f){if(f)e:{var x=s;u=u.split(".");for(var E=0;E<u.length-1;E++){var L=u[E];if(!(L in x))break e;x=x[L]}u=u[u.length-1],E=x[u],f=f(E),f!=E&&f!=null&&e(x,u,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(f){var x=[],E;for(E in f)Object.prototype.hasOwnProperty.call(f,E)&&x.push([E,f[E]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function c(u,f,x){return u.call.apply(u.bind,arguments)}function d(u,f,x){return d=c,d.apply(null,arguments)}function h(u,f){var x=Array.prototype.slice.call(arguments,1);return function(){var E=x.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function m(u,f){function x(){}x.prototype=f.prototype,u.Z=f.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(E,L,O){for(var W=Array(arguments.length-2),he=2;he<arguments.length;he++)W[he-2]=arguments[he];return f.prototype[L].apply(E,W)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function v(u){const f=u.length;if(f>0){const x=Array(f);for(let E=0;E<f;E++)x[E]=u[E];return x}return[]}function S(u,f){for(let E=1;E<arguments.length;E++){const L=arguments[E];var x=typeof L;if(x=x!="object"?x:L?Array.isArray(L)?"array":x:"null",x=="array"||x=="object"&&typeof L.length=="number"){x=u.length||0;const O=L.length||0;u.length=x+O;for(let W=0;W<O;W++)u[x+W]=L[W]}else u.push(L)}}class b{constructor(f,x){this.i=f,this.j=x,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function N(u){o.setTimeout(()=>{throw u},0)}function g(){var u=T;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class y{constructor(){this.h=this.g=null}add(f,x){const E=j.get();E.set(f,x),this.h?this.h.next=E:this.g=E,this.h=E}}var j=new b(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(f,x){this.h=f,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let M,D=!1,T=new y,_=()=>{const u=Promise.resolve(void 0);M=()=>{u.then(k)}};function k(){for(var u;u=g();){try{u.h.call(u.g)}catch(x){N(x)}var f=j;f.j(u),f.h<100&&(f.h++,u.next=f.g,f.g=u)}D=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};o.addEventListener("test",x,f),o.removeEventListener("test",x,f)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function me(u,f){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,f)}m(me,P),me.prototype.init=function(u,f){const x=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget,f||(x=="mouseover"?f=u.fromElement:x=="mouseout"&&(f=u.toElement)),this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var U="closure_listenable_"+(Math.random()*1e6|0),oe=0;function we(u,f,x,E,L){this.listener=u,this.proxy=null,this.src=f,this.type=x,this.capture=!!E,this.ha=L,this.key=++oe,this.da=this.fa=!1}function q(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function B(u,f,x){for(const E in u)f.call(x,u[E],E,u)}function ee(u,f){for(const x in u)f.call(void 0,u[x],x,u)}function de(u){const f={};for(const x in u)f[x]=u[x];return f}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(u,f){let x,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(x in E)u[x]=E[x];for(let O=0;O<Se.length;O++)x=Se[O],Object.prototype.hasOwnProperty.call(E,x)&&(u[x]=E[x])}}function X(u){this.src=u,this.g={},this.h=0}X.prototype.add=function(u,f,x,E,L){const O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);const W=ht(u,f,E,L);return W>-1?(f=u[W],x||(f.fa=!1)):(f=new we(f,this.src,O,!!E,L),f.fa=x,u.push(f)),f};function Ue(u,f){const x=f.type;if(x in u.g){var E=u.g[x],L=Array.prototype.indexOf.call(E,f,void 0),O;(O=L>=0)&&Array.prototype.splice.call(E,L,1),O&&(q(f),u.g[x].length==0&&(delete u.g[x],u.h--))}}function ht(u,f,x,E){for(let L=0;L<u.length;++L){const O=u[L];if(!O.da&&O.listener==f&&O.capture==!!x&&O.ha==E)return L}return-1}var bt="closure_lm_"+(Math.random()*1e6|0),rt={};function ig(u,f,x,E,L){if(Array.isArray(f)){for(let O=0;O<f.length;O++)ig(u,f[O],x,E,L);return null}return x=lg(x),u&&u[U]?u.J(f,x,l(E)?!!E.capture:!1,L):g_(u,f,x,!1,E,L)}function g_(u,f,x,E,L,O){if(!f)throw Error("Invalid event type");const W=l(L)?!!L.capture:!!L;let he=vd(u);if(he||(u[bt]=he=new X(u)),x=he.add(f,x,E,W,O),x.proxy)return x;if(E=x_(),x.proxy=E,E.src=u,E.listener=x,u.addEventListener)A||(L=W),L===void 0&&(L=!1),u.addEventListener(f.toString(),E,L);else if(u.attachEvent)u.attachEvent(og(f.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return x}function x_(){function u(x){return f.call(u.src,u.listener,x)}const f=y_;return u}function ag(u,f,x,E,L){if(Array.isArray(f))for(var O=0;O<f.length;O++)ag(u,f[O],x,E,L);else E=l(E)?!!E.capture:!!E,x=lg(x),u&&u[U]?(u=u.i,O=String(f).toString(),O in u.g&&(f=u.g[O],x=ht(f,x,E,L),x>-1&&(q(f[x]),Array.prototype.splice.call(f,x,1),f.length==0&&(delete u.g[O],u.h--)))):u&&(u=vd(u))&&(f=u.g[f.toString()],u=-1,f&&(u=ht(f,x,E,L)),(x=u>-1?f[u]:null)&&yd(x))}function yd(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[U])Ue(f.i,u);else{var x=u.type,E=u.proxy;f.removeEventListener?f.removeEventListener(x,E,u.capture):f.detachEvent?f.detachEvent(og(x),E):f.addListener&&f.removeListener&&f.removeListener(E),(x=vd(f))?(Ue(x,u),x.h==0&&(x.src=null,f[bt]=null)):q(u)}}}function og(u){return u in rt?rt[u]:rt[u]="on"+u}function y_(u,f){if(u.da)u=!0;else{f=new me(f,this);const x=u.listener,E=u.ha||u.src;u.fa&&yd(u),u=x.call(E,f)}return u}function vd(u){return u=u[bt],u instanceof X?u:null}var bd="__closure_events_fn_"+(Math.random()*1e9>>>0);function lg(u){return typeof u=="function"?u:(u[bd]||(u[bd]=function(f){return u.handleEvent(f)}),u[bd])}function wt(){I.call(this),this.i=new X(this),this.M=this,this.G=null}m(wt,I),wt.prototype[U]=!0,wt.prototype.removeEventListener=function(u,f,x,E){ag(this,u,f,x,E)};function Pt(u,f){var x,E=u.G;if(E)for(x=[];E;E=E.G)x.push(E);if(u=u.M,E=f.type||f,typeof f=="string")f=new P(f,u);else if(f instanceof P)f.target=f.target||u;else{var L=f;f=new P(E,u),Q(f,L)}L=!0;let O,W;if(x)for(W=x.length-1;W>=0;W--)O=f.g=x[W],L=xl(O,E,!0,f)&&L;if(O=f.g=u,L=xl(O,E,!0,f)&&L,L=xl(O,E,!1,f)&&L,x)for(W=0;W<x.length;W++)O=f.g=x[W],L=xl(O,E,!1,f)&&L}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var u=this.i;for(const f in u.g){const x=u.g[f];for(let E=0;E<x.length;E++)q(x[E]);delete u.g[f],u.h--}}this.G=null},wt.prototype.J=function(u,f,x,E){return this.i.add(String(u),f,!1,x,E)},wt.prototype.K=function(u,f,x,E){return this.i.add(String(u),f,!0,x,E)};function xl(u,f,x,E){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();let L=!0;for(let O=0;O<f.length;++O){const W=f[O];if(W&&!W.da&&W.capture==x){const he=W.listener,st=W.ha||W.src;W.fa&&Ue(u.i,W),L=he.call(st,E)!==!1&&L}}return L&&!E.defaultPrevented}function v_(u,f){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(u,f||0)}function cg(u){u.g=v_(()=>{u.g=null,u.i&&(u.i=!1,cg(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class b_ extends I{constructor(f,x){super(),this.m=f,this.l=x,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:cg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ga(u){I.call(this),this.h=u,this.g={}}m(ga,I);var ug=[];function dg(u){B(u.g,function(f,x){this.g.hasOwnProperty(x)&&yd(f)},u),u.g={}}ga.prototype.N=function(){ga.Z.N.call(this),dg(this)},ga.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wd=o.JSON.stringify,w_=o.JSON.parse,N_=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function hg(){}function mg(){}var xa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nd(){P.call(this,"d")}m(Nd,P);function jd(){P.call(this,"c")}m(jd,P);var En={},pg=null;function yl(){return pg=pg||new wt}En.Ia="serverreachability";function fg(u){P.call(this,En.Ia,u)}m(fg,P);function ya(u){const f=yl();Pt(f,new fg(f))}En.STAT_EVENT="statevent";function gg(u,f){P.call(this,En.STAT_EVENT,u),this.stat=f}m(gg,P);function Dt(u){const f=yl();Pt(f,new gg(f,u))}En.Ja="timingevent";function xg(u,f){P.call(this,En.Ja,u),this.size=f}m(xg,P);function va(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},f)}function ba(){this.g=!0}ba.prototype.ua=function(){this.g=!1};function j_(u,f,x,E,L,O){u.info(function(){if(u.g)if(O){var W="",he=O.split("&");for(let Te=0;Te<he.length;Te++){var st=he[Te].split("=");if(st.length>1){const ot=st[0];st=st[1];const Dr=ot.split("_");W=Dr.length>=2&&Dr[1]=="type"?W+(ot+"="+st+"&"):W+(ot+"=redacted&")}}}else W=null;else W=O;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+f+`
`+x+`
`+W})}function __(u,f,x,E,L,O,W){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+f+`
`+x+`
`+O+" "+W})}function ci(u,f,x,E){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+S_(u,x)+(E?" "+E:"")})}function E_(u,f){u.info(function(){return"TIMEOUT: "+f})}ba.prototype.info=function(){};function S_(u,f){if(!u.g)return f;if(!f)return null;try{const O=JSON.parse(f);if(O){for(u=0;u<O.length;u++)if(Array.isArray(O[u])){var x=O[u];if(!(x.length<2)){var E=x[1];if(Array.isArray(E)&&!(E.length<1)){var L=E[0];if(L!="noop"&&L!="stop"&&L!="close")for(let W=1;W<E.length;W++)E[W]=""}}}}return wd(O)}catch{return f}}var vl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vg;function _d(){}m(_d,hg),_d.prototype.g=function(){return new XMLHttpRequest},vg=new _d;function wa(u){return encodeURIComponent(String(u))}function T_(u){var f=1;u=u.split(":");const x=[];for(;f>0&&u.length;)x.push(u.shift()),f--;return u.length&&x.push(u.join(":")),x}function As(u,f,x,E){this.j=u,this.i=f,this.l=x,this.S=E||1,this.V=new ga(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bg}function bg(){this.i=null,this.g="",this.h=!1}var wg={},Ed={};function Sd(u,f,x){u.M=1,u.A=wl(Pr(f)),u.u=x,u.R=!0,Ng(u,null)}function Ng(u,f){u.F=Date.now(),bl(u),u.B=Pr(u.A);var x=u.B,E=u.S;Array.isArray(E)||(E=[String(E)]),Mg(x.i,"t",E),u.C=0,x=u.j.L,u.h=new bg,u.g=Zg(u.j,x?f:null,!u.u),u.P>0&&(u.O=new b_(d(u.Y,u,u.g),u.P)),f=u.V,x=u.g,E=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(ug[0]=L.toString()),L=ug);for(let O=0;O<L.length;O++){const W=ig(x,L[O],E||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,f)):(u.v="GET",u.g.ea(u.B,u.v,null,f)),ya(),j_(u.i,u.v,u.B,u.l,u.S,u.u)}As.prototype.ba=function(u){u=u.target;const f=this.O;f&&Ds(u)==3?f.j():this.Y(u)},As.prototype.Y=function(u){try{if(u==this.g)e:{const he=Ds(this.g),st=this.g.ya(),Te=this.g.ca();if(!(he<3)&&(he!=3||this.g&&(this.h.h||this.g.la()||Bg(this.g)))){this.K||he!=4||st==7||(st==8||Te<=0?ya(3):ya(2)),Td(this);var f=this.g.ca();this.X=f;var x=k_(this);if(this.o=f==200,__(this.i,this.v,this.B,this.l,this.S,he,f),this.o){if(this.U&&!this.L){t:{if(this.g){var E,L=this.g;if((E=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(E)){var O=E;break t}}O=null}if(u=O)ci(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,kd(this,u);else{this.o=!1,this.m=3,Dt(12),Sn(this),Na(this);break e}}if(this.R){u=!0;let ot;for(;!this.K&&this.C<x.length;)if(ot=I_(this,x),ot==Ed){he==4&&(this.m=4,Dt(14),u=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(ot==wg){this.m=4,Dt(15),ci(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else ci(this.i,this.l,ot,null),kd(this,ot);if(jg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),he!=4||x.length!=0||this.h.h||(this.m=1,Dt(16),u=!1),this.o=this.o&&u,!u)ci(this.i,this.l,x,"[Invalid Chunked Response]"),Sn(this),Na(this);else if(x.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Ld(W),W.P=!0,Dt(11))}}else ci(this.i,this.l,x,null),kd(this,x);he==4&&Sn(this),this.o&&!this.K&&(he==4?Qg(this.j,this):(this.o=!1,bl(this)))}else $_(this.g),f==400&&x.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Sn(this),Na(this)}}}catch{}finally{}};function k_(u){if(!jg(u))return u.g.la();const f=Bg(u.g);if(f==="")return"";let x="";const E=f.length,L=Ds(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Sn(u),Na(u),"";u.h.i=new o.TextDecoder}for(let O=0;O<E;O++)u.h.h=!0,x+=u.h.i.decode(f[O],{stream:!(L&&O==E-1)});return f.length=0,u.h.g+=x,u.C=0,u.h.g}function jg(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function I_(u,f){var x=u.C,E=f.indexOf(`
`,x);return E==-1?Ed:(x=Number(f.substring(x,E)),isNaN(x)?wg:(E+=1,E+x>f.length?Ed:(f=f.slice(E,E+x),u.C=E+x,f)))}As.prototype.cancel=function(){this.K=!0,Sn(this)};function bl(u){u.T=Date.now()+u.H,_g(u,u.H)}function _g(u,f){if(u.D!=null)throw Error("WatchDog timer not null");u.D=va(d(u.aa,u),f)}function Td(u){u.D&&(o.clearTimeout(u.D),u.D=null)}As.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(E_(this.i,this.B),this.M!=2&&(ya(),Dt(17)),Sn(this),this.m=2,Na(this)):_g(this,this.T-u)};function Na(u){u.j.I==0||u.K||Qg(u.j,u)}function Sn(u){Td(u);var f=u.O;f&&typeof f.dispose=="function"&&f.dispose(),u.O=null,dg(u.V),u.g&&(f=u.g,u.g=null,f.abort(),f.dispose())}function kd(u,f){try{var x=u.j;if(x.I!=0&&(x.g==u||Id(x.h,u))){if(!u.L&&Id(x.h,u)&&x.I==3){try{var E=x.Ba.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)Sl(x),_l(x);else break e;Md(x),Dt(18)}}else x.xa=L[1],0<x.xa-x.K&&L[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=va(d(x.Va,x),6e3));Tg(x.h)<=1&&x.ta&&(x.ta=void 0)}else kn(x,11)}else if((u.L||x.g==u)&&Sl(x),!C(f))for(L=x.Ba.g.parse(f),f=0;f<L.length;f++){let Te=L[f];const ot=Te[0];if(!(ot<=x.K))if(x.K=ot,Te=Te[1],x.I==2)if(Te[0]=="c"){x.M=Te[1],x.ba=Te[2];const Dr=Te[3];Dr!=null&&(x.ka=Dr,x.j.info("VER="+x.ka));const In=Te[4];In!=null&&(x.za=In,x.j.info("SVER="+x.za));const Ms=Te[5];Ms!=null&&typeof Ms=="number"&&Ms>0&&(E=1.5*Ms,x.O=E,x.j.info("backChannelRequestTimeoutMs_="+E)),E=x;const Ls=u.g;if(Ls){const kl=Ls.g?Ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kl){var O=E.h;O.g||kl.indexOf("spdy")==-1&&kl.indexOf("quic")==-1&&kl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Cd(O,O.h),O.h=null))}if(E.G){const Od=Ls.g?Ls.g.getResponseHeader("X-HTTP-Session-Id"):null;Od&&(E.wa=Od,Re(E.J,E.G,Od))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),E=x;var W=u;if(E.na=Xg(E,E.L?E.ba:null,E.W),W.L){kg(E.h,W);var he=W,st=E.O;st&&(he.H=st),he.D&&(Td(he),bl(he)),E.g=W}else Gg(E);x.i.length>0&&El(x)}else Te[0]!="stop"&&Te[0]!="close"||kn(x,7);else x.I==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?kn(x,7):Dd(x):Te[0]!="noop"&&x.l&&x.l.qa(Te),x.A=0)}}ya(4)}catch{}}var C_=class{constructor(u,f){this.g=u,this.map=f}};function Eg(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sg(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Tg(u){return u.h?1:u.g?u.g.size:0}function Id(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Cd(u,f){u.g?u.g.add(f):u.h=f}function kg(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Eg.prototype.cancel=function(){if(this.i=Ig(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ig(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const x of u.g.values())f=f.concat(x.G);return f}return v(u.i)}var Cg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function A_(u,f){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const E=u[x].indexOf("=");let L,O=null;E>=0?(L=u[x].substring(0,E),O=u[x].substring(E+1)):L=u[x],f(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Rs(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;u instanceof Rs?(this.l=u.l,ja(this,u.j),this.o=u.o,this.g=u.g,_a(this,u.u),this.h=u.h,Ad(this,Lg(u.i)),this.m=u.m):u&&(f=String(u).match(Cg))?(this.l=!1,ja(this,f[1]||"",!0),this.o=Ea(f[2]||""),this.g=Ea(f[3]||"",!0),_a(this,f[4]),this.h=Ea(f[5]||"",!0),Ad(this,f[6]||"",!0),this.m=Ea(f[7]||"")):(this.l=!1,this.i=new Ta(null,this.l))}Rs.prototype.toString=function(){const u=[];var f=this.j;f&&u.push(Sa(f,Ag,!0),":");var x=this.g;return(x||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Sa(f,Ag,!0),"@"),u.push(wa(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Sa(x,x.charAt(0)=="/"?D_:P_,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Sa(x,L_)),u.join("")},Rs.prototype.resolve=function(u){const f=Pr(this);let x=!!u.j;x?ja(f,u.j):x=!!u.o,x?f.o=u.o:x=!!u.g,x?f.g=u.g:x=u.u!=null;var E=u.h;if(x)_a(f,u.u);else if(x=!!u.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var L=f.h.lastIndexOf("/");L!=-1&&(E=f.h.slice(0,L+1)+E)}if(L=E,L==".."||L==".")E="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){E=L.lastIndexOf("/",0)==0,L=L.split("/");const O=[];for(let W=0;W<L.length;){const he=L[W++];he=="."?E&&W==L.length&&O.push(""):he==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),E&&W==L.length&&O.push("")):(O.push(he),E=!0)}E=O.join("/")}else E=L}return x?f.h=E:x=u.i.toString()!=="",x?Ad(f,Lg(u.i)):x=!!u.m,x&&(f.m=u.m),f};function Pr(u){return new Rs(u)}function ja(u,f,x){u.j=x?Ea(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function _a(u,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);u.u=f}else u.u=null}function Ad(u,f,x){f instanceof Ta?(u.i=f,O_(u.i,u.l)):(x||(f=Sa(f,M_)),u.i=new Ta(f,u.l))}function Re(u,f,x){u.i.set(f,x)}function wl(u){return Re(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ea(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Sa(u,f,x){return typeof u=="string"?(u=encodeURI(u).replace(f,R_),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function R_(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ag=/[#\/\?@]/g,P_=/[#\?:]/g,D_=/[#\?]/g,M_=/[#\?@]/g,L_=/#/g;function Ta(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Tn(u){u.g||(u.g=new Map,u.h=0,u.i&&A_(u.i,function(f,x){u.add(decodeURIComponent(f.replace(/\+/g," ")),x)}))}t=Ta.prototype,t.add=function(u,f){Tn(this),this.i=null,u=ui(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(f),this.h+=1,this};function Rg(u,f){Tn(u),f=ui(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Pg(u,f){return Tn(u),f=ui(u,f),u.g.has(f)}t.forEach=function(u,f){Tn(this),this.g.forEach(function(x,E){x.forEach(function(L){u.call(f,L,E,this)},this)},this)};function Dg(u,f){Tn(u);let x=[];if(typeof f=="string")Pg(u,f)&&(x=x.concat(u.g.get(ui(u,f))));else for(u=Array.from(u.g.values()),f=0;f<u.length;f++)x=x.concat(u[f]);return x}t.set=function(u,f){return Tn(this),this.i=null,u=ui(this,u),Pg(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=Dg(this,u),u.length>0?String(u[0]):f):f};function Mg(u,f,x){Rg(u,f),x.length>0&&(u.i=null,u.g.set(ui(u,f),v(x)),u.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(let E=0;E<f.length;E++){var x=f[E];const L=wa(x);x=Dg(this,x);for(let O=0;O<x.length;O++){let W=L;x[O]!==""&&(W+="="+wa(x[O])),u.push(W)}}return this.i=u.join("&")};function Lg(u){const f=new Ta;return f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),f}function ui(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function O_(u,f){f&&!u.j&&(Tn(u),u.i=null,u.g.forEach(function(x,E){const L=E.toLowerCase();E!=L&&(Rg(this,E),Mg(this,L,x))},u)),u.j=f}function V_(u,f){const x=new ba;if(o.Image){const E=new Image;E.onload=h(Ps,x,"TestLoadImage: loaded",!0,f,E),E.onerror=h(Ps,x,"TestLoadImage: error",!1,f,E),E.onabort=h(Ps,x,"TestLoadImage: abort",!1,f,E),E.ontimeout=h(Ps,x,"TestLoadImage: timeout",!1,f,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else f(!1)}function F_(u,f){const x=new ba,E=new AbortController,L=setTimeout(()=>{E.abort(),Ps(x,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:E.signal}).then(O=>{clearTimeout(L),O.ok?Ps(x,"TestPingServer: ok",!0,f):Ps(x,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Ps(x,"TestPingServer: error",!1,f)})}function Ps(u,f,x,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(x)}catch{}}function U_(){this.g=new N_}function Rd(u){this.i=u.Sb||null,this.h=u.ab||!1}m(Rd,hg),Rd.prototype.g=function(){return new Nl(this.i,this.h)};function Nl(u,f){wt.call(this),this.H=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Nl,wt),t=Nl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=f,this.readyState=1,Ia(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(f.body=u),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ka(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Og(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Og(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?ka(this):Ia(this),this.readyState==3&&Og(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,ka(this))},t.Na=function(u){this.g&&(this.response=u,ka(this))},t.ga=function(){this.g&&ka(this)};function ka(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ia(u)}t.setRequestHeader=function(u,f){this.A.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var x=f.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=f.next();return u.join(`\r
`)};function Ia(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vg(u){let f="";return B(u,function(x,E){f+=E,f+=":",f+=x,f+=`\r
`}),f}function Pd(u,f,x){e:{for(E in x){var E=!1;break e}E=!0}E||(x=Vg(x),typeof u=="string"?x!=null&&wa(x):Re(u,f,x))}function We(u){wt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(We,wt);var z_=/^https?$/i,B_=["POST","PUT"];t=We.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,f,x,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vg.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){Fg(this,O);return}if(u=x||"",x=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)x.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const O of E.keys())x.set(O,E.get(O));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(x.keys()).find(O=>O.toLowerCase()=="content-type"),L=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(B_,f,void 0)>=0)||E||L||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of x)this.g.setRequestHeader(O,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(O){Fg(this,O)}};function Fg(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.o=5,Ug(u),jl(u)}function Ug(u){u.A||(u.A=!0,Pt(u,"complete"),Pt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Pt(this,"complete"),Pt(this,"abort"),jl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jl(this,!0)),We.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?zg(this):this.Xa())},t.Xa=function(){zg(this)};function zg(u){if(u.h&&typeof a<"u"){if(u.v&&Ds(u)==4)setTimeout(u.Ca.bind(u),0);else if(Pt(u,"readystatechange"),Ds(u)==4){u.h=!1;try{const O=u.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var x;if(!(x=f)){var E;if(E=O===0){let W=String(u.D).match(Cg)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),E=!z_.test(W?W.toLowerCase():"")}x=E}if(x)Pt(u,"complete"),Pt(u,"success");else{u.o=6;try{var L=Ds(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Ug(u)}}finally{jl(u)}}}}function jl(u,f){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,f||Pt(u,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ds(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Ds(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),w_(f)}};function Bg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $_(u){const f={};u=(u.g&&Ds(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(C(u[E]))continue;var x=T_(u[E]);const L=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const O=f[L]||[];f[L]=O,O.push(x)}ee(f,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(u,f,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||f}function $g(u){this.za=0,this.i=[],this.j=new ba,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ca("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ca("baseRetryDelayMs",5e3,u),this.Za=Ca("retryDelaySeedMs",1e4,u),this.Ta=Ca("forwardChannelMaxRetries",2,u),this.va=Ca("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Eg(u&&u.concurrentRequestLimit),this.Ba=new U_,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=$g.prototype,t.ka=8,t.I=1,t.connect=function(u,f,x,E){Dt(0),this.W=u,this.H=f||{},x&&E!==void 0&&(this.H.OSID=x,this.H.OAID=E),this.F=this.X,this.J=Xg(this,null,this.W),El(this)};function Dd(u){if(qg(u),u.I==3){var f=u.V++,x=Pr(u.J);if(Re(x,"SID",u.M),Re(x,"RID",f),Re(x,"TYPE","terminate"),Aa(u,x),f=new As(u,u.j,f),f.M=2,f.A=wl(Pr(x)),x=!1,o.navigator&&o.navigator.sendBeacon)try{x=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!x&&o.Image&&(new Image().src=f.A,x=!0),x||(f.g=Zg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),bl(f)}Jg(u)}function _l(u){u.g&&(Ld(u),u.g.cancel(),u.g=null)}function qg(u){_l(u),u.v&&(o.clearTimeout(u.v),u.v=null),Sl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function El(u){if(!Sg(u.h)&&!u.m){u.m=!0;var f=u.Ea;M||_(),D||(M(),D=!0),T.add(f,u),u.D=0}}function q_(u,f){return Tg(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=f.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=va(d(u.Ea,u,f),Yg(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new As(this,this.j,u);let O=this.o;if(this.U&&(O?(O=de(O),Q(O,this.U)):O=this.U),this.u!==null||this.R||(L.J=O,O=null),this.S)e:{for(var f=0,x=0;x<this.i.length;x++){t:{var E=this.i[x];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,f>4096){f=x;break e}if(f===4096||x===this.i.length-1){f=x+1;break e}}f=1e3}else f=1e3;f=Wg(this,L,f),x=Pr(this.J),Re(x,"RID",u),Re(x,"CVER",22),this.G&&Re(x,"X-HTTP-Session-Id",this.G),Aa(this,x),O&&(this.R?f="headers="+wa(Vg(O))+"&"+f:this.u&&Pd(x,this.u,O)),Cd(this.h,L),this.Ra&&Re(x,"TYPE","init"),this.S?(Re(x,"$req",f),Re(x,"SID","null"),L.U=!0,Sd(L,x,null)):Sd(L,x,f),this.I=2}}else this.I==3&&(u?Hg(this,u):this.i.length==0||Sg(this.h)||Hg(this))};function Hg(u,f){var x;f?x=f.l:x=u.V++;const E=Pr(u.J);Re(E,"SID",u.M),Re(E,"RID",x),Re(E,"AID",u.K),Aa(u,E),u.u&&u.o&&Pd(E,u.u,u.o),x=new As(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),f&&(u.i=f.G.concat(u.i)),f=Wg(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Cd(u.h,x),Sd(x,E,f)}function Aa(u,f){u.H&&B(u.H,function(x,E){Re(f,E,x)}),u.l&&B({},function(x,E){Re(f,E,x)})}function Wg(u,f,x){x=Math.min(u.i.length,x);const E=u.l?d(u.l.Ka,u.l,u):null;e:{var L=u.i;let he=-1;for(;;){const st=["count="+x];he==-1?x>0?(he=L[0].g,st.push("ofs="+he)):he=0:st.push("ofs="+he);let Te=!0;for(let ot=0;ot<x;ot++){var O=L[ot].g;const Dr=L[ot].map;if(O-=he,O<0)he=Math.max(0,L[ot].g-100),Te=!1;else try{O="req"+O+"_"||"";try{var W=Dr instanceof Map?Dr:Object.entries(Dr);for(const[In,Ms]of W){let Ls=Ms;l(Ms)&&(Ls=wd(Ms)),st.push(O+In+"="+encodeURIComponent(Ls))}}catch(In){throw st.push(O+"type="+encodeURIComponent("_badmap")),In}}catch{E&&E(Dr)}}if(Te){W=st.join("&");break e}}W=void 0}return u=u.i.splice(0,x),f.G=u,W}function Gg(u){if(!u.g&&!u.v){u.Y=1;var f=u.Da;M||_(),D||(M(),D=!0),T.add(f,u),u.A=0}}function Md(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=va(d(u.Da,u),Yg(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Kg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=va(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),_l(this),Kg(this))};function Ld(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Kg(u){u.g=new As(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var f=Pr(u.na);Re(f,"RID","rpc"),Re(f,"SID",u.M),Re(f,"AID",u.K),Re(f,"CI",u.F?"0":"1"),!u.F&&u.ia&&Re(f,"TO",u.ia),Re(f,"TYPE","xmlhttp"),Aa(u,f),u.u&&u.o&&Pd(f,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=wl(Pr(f)),x.u=null,x.R=!0,Ng(x,u)}t.Va=function(){this.C!=null&&(this.C=null,_l(this),Md(this),Dt(19))};function Sl(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Qg(u,f){var x=null;if(u.g==f){Sl(u),Ld(u),u.g=null;var E=2}else if(Id(u.h,f))x=f.G,kg(u.h,f),E=1;else return;if(u.I!=0){if(f.o)if(E==1){x=f.u?f.u.length:0,f=Date.now()-f.F;var L=u.D;E=yl(),Pt(E,new xg(E,x)),El(u)}else Gg(u);else if(L=f.m,L==3||L==0&&f.X>0||!(E==1&&q_(u,f)||E==2&&Md(u)))switch(x&&x.length>0&&(f=u.h,f.i=f.i.concat(x)),L){case 1:kn(u,5);break;case 4:kn(u,10);break;case 3:kn(u,6);break;default:kn(u,2)}}}function Yg(u,f){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*f}function kn(u,f){if(u.j.info("Error code "+f),f==2){var x=d(u.bb,u),E=u.Ua;const L=!E;E=new Rs(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ja(E,"https"),wl(E),L?V_(E.toString(),x):F_(E.toString(),x)}else Dt(2);u.I=0,u.l&&u.l.pa(f),Jg(u),qg(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Jg(u){if(u.I=0,u.ja=[],u.l){const f=Ig(u.h);(f.length!=0||u.i.length!=0)&&(S(u.ja,f),S(u.ja,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.oa()}}function Xg(u,f,x){var E=x instanceof Rs?Pr(x):new Rs(x);if(E.g!="")f&&(E.g=f+"."+E.g),_a(E,E.u);else{var L=o.location;E=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;const O=new Rs(null);E&&ja(O,E),f&&(O.g=f),L&&_a(O,L),x&&(O.h=x),E=O}return x=u.G,f=u.wa,x&&f&&Re(E,x,f),Re(E,"VER",u.ka),Aa(u,E),E}function Zg(u,f,x){if(f&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Aa&&!u.ma?new We(new Rd({ab:x})):new We(u.ma),f.Fa(u.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ex(){}t=ex.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Tl(){}Tl.prototype.g=function(u,f){return new Kt(u,f)};function Kt(u,f){wt.call(this),this.g=new $g(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(u?u["X-WebChannel-Client-Profile"]=f.sa:u={"X-WebChannel-Client-Profile":f.sa}),this.g.U=u,(u=f&&f.Qb)&&!C(u)&&(this.g.u=u),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!C(f)&&(this.g.G=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new di(this)}m(Kt,wt),Kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Dd(this.g)},Kt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=wd(u),u=x);f.i.push(new C_(f.Ya++,u)),f.I==3&&El(f)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Dd(this.g),delete this.g,Kt.Z.N.call(this)};function tx(u){Nd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const x in f){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}m(tx,Nd);function rx(){jd.call(this),this.status=1}m(rx,jd);function di(u){this.g=u}m(di,ex),di.prototype.ra=function(){Pt(this.g,"a")},di.prototype.qa=function(u){Pt(this.g,new tx(u))},di.prototype.pa=function(u){Pt(this.g,new rx)},di.prototype.oa=function(){Pt(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,TN=function(){return new Tl},SN=function(){return yl()},EN=En,Im={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vl.NO_ERROR=0,vl.TIMEOUT=8,vl.HTTP_ERROR=6,vc=vl,yg.COMPLETE="complete",_N=yg,mg.EventType=xa,xa.OPEN="a",xa.CLOSE="b",xa.ERROR="c",xa.MESSAGE="d",wt.prototype.listen=wt.prototype.J,Ga=mg,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,jN=We}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const Q0="@firebase/firestore",Y0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=new Jp("@firebase/firestore");function pi(){return Zn.logLevel}function G(t,...e){if(Zn.logLevel<=fe.DEBUG){const r=e.map(uf);Zn.debug(`Firestore (${da}): ${t}`,...r)}}function Es(t,...e){if(Zn.logLevel<=fe.ERROR){const r=e.map(uf);Zn.error(`Firestore (${da}): ${t}`,...r)}}function Qi(t,...e){if(Zn.logLevel<=fe.WARN){const r=e.map(uf);Zn.warn(`Firestore (${da}): ${t}`,...r)}}function uf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,r){let s="Unexpected state";typeof e=="string"?s=e:r=e,kN(t,s,r)}function kN(t,e,r){let s=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{s+=" CONTEXT: "+JSON.stringify(r)}catch{s+=" CONTEXT: "+r}throw Es(s),new Error(s)}function Ne(t,e,r,s){let i="Unexpected state";typeof r=="string"?i=r:s=r,t||kN(e,i,s)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends ts{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Et.UNAUTHENTICATED))}shutdown(){}}class WI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class GI{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ne(this.o===void 0,42304);let s=this.i;const i=c=>this.i!==s?(s=this.i,r(c)):Promise.resolve();let a=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new fs,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new fs)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ne(typeof s.accessToken=="string",31837,{l:s}),new IN(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class KI{constructor(e,r,s){this.P=e,this.T=r,this.I=s,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QI{constructor(e,r,s){this.P=e,this.T=r,this.I=s}getToken(){return Promise.resolve(new KI(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YI{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Ne(this.o===void 0,3512);const s=a=>{a.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>s(a))};const i=a=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new J0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ne(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new J0(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let s=0;s<t;s++)r[s]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=JI(40);for(let a=0;a<i.length;++a)s.length<20&&i[a]<r&&(s+=e.charAt(i[a]%62))}return s}}function ge(t,e){return t<e?-1:t>e?1:0}function Cm(t,e){const r=Math.min(t.length,e.length);for(let s=0;s<r;s++){const i=t.charAt(s),a=e.charAt(s);if(i!==a)return vh(i)===vh(a)?ge(i,a):vh(i)?1:-1}return ge(t.length,e.length)}const XI=55296,ZI=57343;function vh(t){const e=t.charCodeAt(0);return e>=XI&&e<=ZI}function Yi(t,e,r){return t.length===e.length&&t.every((s,i)=>r(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="__name__";class Or{constructor(e,r,s){r===void 0?r=0:r>e.length&&se(637,{offset:r,range:e.length}),s===void 0?s=e.length-r:s>e.length-r&&se(1746,{length:s,range:e.length-r}),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let i=0;i<s;i++){const a=Or.compareSegments(e.get(i),r.get(i));if(a!==0)return a}return ge(e.length,r.length)}static compareSegments(e,r){const s=Or.isNumericId(e),i=Or.isNumericId(r);return s&&!i?-1:!s&&i?1:s&&i?Or.extractNumericId(e).compare(Or.extractNumericId(r)):Cm(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return on.fromString(e.substring(4,e.length-2))}}class ke extends Or{construct(e,r,s){return new ke(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new H(V.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(i=>i.length>0))}return new ke(r)}static emptyPath(){return new ke([])}}const eC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends Or{construct(e,r,s){return new ft(e,r,s)}static isValidIdentifier(e){return eC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X0}static keyField(){return new ft([X0])}static fromServerFormat(e){const r=[];let s="",i=0;const a=()=>{if(s.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new H(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(s+=l,i++):(a(),i++)}if(a(),o)throw new H(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(r)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(ke.fromString(e))}static fromName(e){return new J(ke.fromString(e).popFirst(5))}static empty(){return new J(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ke.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e,r){if(!r)throw new H(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tC(t,e,r,s){if(e===!0&&s===!0)throw new H(V.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Z0(t){if(!J.isDocumentKey(t))throw new H(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ey(t){if(J.isDocumentKey(t))throw new H(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function AN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Hu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function Gt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Hu(t);throw new H(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function rC(t,e){if(e<=0)throw new H(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t,e){const r={typeString:t};return e&&(r.value=e),r}function il(t,e){if(!AN(t))throw new H(V.INVALID_ARGUMENT,"JSON must be an object");let r;for(const s in e)if(e[s]){const i=e[s].typeString,a="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){r=`JSON missing required field: '${s}'`;break}const o=t[s];if(i&&typeof o!==i){r=`JSON field '${s}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){r=`Expected '${s}' field to equal '${a.value}'`;break}}if(r)throw new H(V.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=-62135596800,ry=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor((e-1e3*r)*ry);return new De(r,s)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<ty)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ry}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(il(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ty;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:tt("string",De._jsonSchemaVersion),seconds:tt("number"),nanoseconds:tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new De(0,0))}static max(){return new ne(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=-1;function sC(t,e){const r=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(s===1e9?new De(r+1,0):new De(r,s));return new hn(i,J.empty(),e)}function nC(t){return new hn(t.readTime,t.key,Lo)}class hn{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new hn(ne.min(),J.empty(),Lo)}static max(){return new hn(ne.max(),J.empty(),Lo)}}function iC(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=J.comparator(t.documentKey,e.documentKey),r!==0?r:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==aC)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new F((s,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(s,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof F?r:F.resolve(r)}catch(r){return F.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):F.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):F.reject(r)}static resolve(e){return new F((r,s)=>{r(e)})}static reject(e){return new F((r,s)=>{s(e)})}static waitFor(e){return new F((r,s)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&r()},c=>s(c))}),o=!0,a===i&&r()})}static or(e){let r=F.resolve(!1);for(const s of e)r=r.next(i=>i?F.resolve(i):s());return r}static forEach(e,r){const s=[];return e.forEach((i,a)=>{s.push(r.call(this,i,a))}),this.waitFor(s)}static mapArray(e,r){return new F((s,i)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const d=c;r(e[d]).next(h=>{o[d]=h,++l,l===a&&s(o)},h=>i(h))}})}static doWhile(e,r){return new F((s,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):s()};a()})}}function lC(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ma(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>r.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=-1;function Gu(t){return t==null}function ou(t){return t===0&&1/t==-1/0}function cC(t){return typeof t=="number"&&Number.isInteger(t)&&!ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="";function uC(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=sy(e)),e=dC(t.get(r),e);return sy(e)}function dC(t,e){let r=e;const s=t.length;for(let i=0;i<s;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case RN:r+="";break;default:r+=a}}return r}function sy(t){return t+RN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function jn(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function PN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,r){this.comparator=e,this.root=r||pt.EMPTY}insert(e,r){return new He(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new He(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return r+s.left.size;i<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,r,s,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?s(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,r,s,i,a){this.key=e,this.value=r,this.color=s??pt.RED,this.left=i??pt.EMPTY,this.right=a??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,i,a){return new pt(e??this.key,r??this.value,s??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let i=this;const a=s(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,s),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return pt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,r,s,i,a){return this}insert(e,r,s){return new pt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new iy(this.data.getIterator())}getIteratorFrom(e){return new iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=s.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new at(this.comparator);return r.data=e,r}}class iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Zt([])}unionWith(e){let r=new at(ft.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new Zt(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Yi(this.fields,e.fields,(r,s)=>r.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new DN("Invalid base64 string: "+a):a}}(e);return new yt(r)}static fromUint8Array(e){const r=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new yt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let i=0;i<r.length;i++)s[i]=r.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const hC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mn(t){if(Ne(!!t,39018),typeof t=="string"){let e=0;const r=hC.exec(t);if(Ne(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pn(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="server_timestamp",LN="__type__",ON="__previous_value__",VN="__local_write_time__";function Ku(t){var r,s;return((s=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[LN])==null?void 0:s.stringValue)===MN}function Qu(t){const e=t.mapValue.fields[ON];return Ku(e)?Qu(e):e}function Oo(t){const e=mn(t.mapValue.fields[VN].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,r,s,i,a,o,l,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const lu="(default)";class Vo{constructor(e,r){this.projectId=e,this.database=r||lu}static empty(){return new Vo("","")}get isDefaultDatabase(){return this.database===lu}isEqual(e){return e instanceof Vo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="__type__",pC="__max__",Yl={mapValue:{}},UN="__vector__",cu="value";function fn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ku(t)?4:gC(t)?9007199254740991:fC(t)?10:11:se(28295,{value:t})}function Jr(t,e){if(t===e)return!0;const r=fn(t);if(r!==fn(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oo(t).isEqual(Oo(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=mn(i.timestampValue),l=mn(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return pn(i.bytesValue).isEqual(pn(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Ye(i.geoPointValue.latitude)===Ye(a.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Ye(i.integerValue)===Ye(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Ye(i.doubleValue),l=Ye(a.doubleValue);return o===l?ou(o)===ou(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Yi(t.arrayValue.values||[],e.arrayValue.values||[],Jr);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(ny(o)!==ny(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Jr(o[c],l[c])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function Fo(t,e){return(t.values||[]).find(r=>Jr(r,e))!==void 0}function Ji(t,e){if(t===e)return 0;const r=fn(t),s=fn(e);if(r!==s)return ge(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=Ye(a.integerValue||a.doubleValue),c=Ye(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return ay(t.timestampValue,e.timestampValue);case 4:return ay(Oo(t),Oo(e));case 5:return Cm(t.stringValue,e.stringValue);case 6:return function(a,o){const l=pn(a),c=pn(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=ge(l[d],c[d]);if(h!==0)return h}return ge(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=ge(Ye(a.latitude),Ye(o.latitude));return l!==0?l:ge(Ye(a.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return oy(t.arrayValue,e.arrayValue);case 10:return function(a,o){var p,v,S,b;const l=a.fields||{},c=o.fields||{},d=(p=l[cu])==null?void 0:p.arrayValue,h=(v=c[cu])==null?void 0:v.arrayValue,m=ge(((S=d==null?void 0:d.values)==null?void 0:S.length)||0,((b=h==null?void 0:h.values)==null?void 0:b.length)||0);return m!==0?m:oy(d,h)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Yl.mapValue&&o===Yl.mapValue)return 0;if(a===Yl.mapValue)return 1;if(o===Yl.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const p=Cm(c[m],h[m]);if(p!==0)return p;const v=Ji(l[c[m]],d[h[m]]);if(v!==0)return v}return ge(c.length,h.length)}(t.mapValue,e.mapValue);default:throw se(23264,{he:r})}}function ay(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const r=mn(t),s=mn(e),i=ge(r.seconds,s.seconds);return i!==0?i:ge(r.nanos,s.nanos)}function oy(t,e){const r=t.values||[],s=e.values||[];for(let i=0;i<r.length&&i<s.length;++i){const a=Ji(r[i],s[i]);if(a)return a}return ge(r.length,s.length)}function Xi(t){return Am(t)}function Am(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=mn(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return pn(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return J.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let s="[",i=!0;for(const a of r.values||[])i?i=!1:s+=",",s+=Am(a);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of s)a?a=!1:i+=",",i+=`${o}:${Am(r.fields[o])}`;return i+"}"}(t.mapValue):se(61005,{value:t})}function bc(t){switch(fn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qu(t);return e?16+bc(e):16;case 5:return 2*t.stringValue.length;case 6:return pn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,a)=>i+bc(a),0)}(t.arrayValue);case 10:case 11:return function(s){let i=0;return jn(s.fields,(a,o)=>{i+=a.length+bc(o)}),i}(t.mapValue);default:throw se(13486,{value:t})}}function uu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rm(t){return!!t&&"integerValue"in t}function mf(t){return!!t&&"arrayValue"in t}function ly(t){return!!t&&"nullValue"in t}function cy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wc(t){return!!t&&"mapValue"in t}function fC(t){var r,s;return((s=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[FN])==null?void 0:s.stringValue)===UN}function uo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return jn(t.mapValue.fields,(r,s)=>e.mapValue.fields[r]=uo(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=uo(t.arrayValue.values[r]);return e}return{...t}}function gC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!wc(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=uo(r)}setAll(e){let r=ft.emptyPath(),s={},i=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,s,i),s={},i=[],r=l.popLast()}o?s[l.lastSegment()]=uo(o):i.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,s,i)}delete(e){const r=this.field(e.popLast());wc(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Jr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=r.mapValue.fields[e.get(s)];wc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,s){jn(r,(i,a)=>e[i]=a);for(const i of s)delete e[i]}clone(){return new Bt(uo(this.value))}}function zN(t){const e=[];return jn(t.fields,(r,s)=>{const i=new ft([r]);if(wc(s)){const a=zN(s.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,r,s,i,a,o,l){this.key=e,this.documentType=r,this.version=s,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Tt(e,0,ne.min(),ne.min(),ne.min(),Bt.empty(),0)}static newFoundDocument(e,r,s,i){return new Tt(e,1,r,ne.min(),s,i,0)}static newNoDocument(e,r){return new Tt(e,2,r,ne.min(),ne.min(),Bt.empty(),0)}static newUnknownDocument(e,r){return new Tt(e,3,r,ne.min(),ne.min(),Bt.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,r){this.position=e,this.inclusive=r}}function uy(t,e,r){let s=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?s=J.comparator(J.fromName(o.referenceValue),r.key):s=Ji(o,r.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function dy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Jr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,r="asc"){this.field=e,this.dir=r}}function xC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BN=class{};class et extends BN{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,s):new vC(e,r,s):r==="array-contains"?new NC(e,s):r==="in"?new jC(e,s):r==="not-in"?new _C(e,s):r==="array-contains-any"?new EC(e,s):new et(e,r,s)}static createKeyFieldInFilter(e,r,s){return r==="in"?new bC(e,s):new wC(e,s)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Ji(r,this.value)):r!==null&&fn(this.value)===fn(r)&&this.matchesComparison(Ji(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends BN{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Cr(e,r)}matches(e){return $N(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $N(t){return t.op==="and"}function qN(t){return yC(t)&&$N(t)}function yC(t){for(const e of t.filters)if(e instanceof Cr)return!1;return!0}function Pm(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+Xi(t.value);if(qN(t))return t.filters.map(e=>Pm(e)).join(",");{const e=t.filters.map(r=>Pm(r)).join(",");return`${t.op}(${e})`}}function HN(t,e){return t instanceof et?function(s,i){return i instanceof et&&s.op===i.op&&s.field.isEqual(i.field)&&Jr(s.value,i.value)}(t,e):t instanceof Cr?function(s,i){return i instanceof Cr&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((a,o,l)=>a&&HN(o,i.filters[l]),!0):!1}(t,e):void se(19439)}function WN(t){return t instanceof et?function(r){return`${r.field.canonicalString()} ${r.op} ${Xi(r.value)}`}(t):t instanceof Cr?function(r){return r.op.toString()+" {"+r.getFilters().map(WN).join(" ,")+"}"}(t):"Filter"}class vC extends et{constructor(e,r,s){super(e,r,s),this.key=J.fromName(s.referenceValue)}matches(e){const r=J.comparator(e.key,this.key);return this.matchesComparison(r)}}class bC extends et{constructor(e,r){super(e,"in",r),this.keys=GN("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class wC extends et{constructor(e,r){super(e,"not-in",r),this.keys=GN("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function GN(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(s=>J.fromName(s.referenceValue))}class NC extends et{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return mf(r)&&Fo(r.arrayValue,this.value)}}class jC extends et{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Fo(this.value.arrayValue,r)}}class _C extends et{constructor(e,r){super(e,"not-in",r)}matches(e){if(Fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Fo(this.value.arrayValue,r)}}class EC extends et{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!mf(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>Fo(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,r=null,s=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function hy(t,e=null,r=[],s=[],i=null,a=null,o=null){return new SC(t,e,r,s,i,a,o)}function pf(t){const e=ie(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>Pm(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),Gu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>Xi(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>Xi(s)).join(",")),e.Te=r}return e.Te}function ff(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!xC(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!HN(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dy(t.startAt,e.startAt)&&dy(t.endAt,e.endAt)}function Dm(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,r=null,s=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TC(t,e,r,s,i,a,o,l){return new ai(t,e,r,s,i,a,o,l)}function Yu(t){return new ai(t)}function my(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gf(t){return t.collectionGroup!==null}function Ui(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new at(ft.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Uo(a,s))}),r.has(ft.keyField().canonicalString())||e.Ie.push(new Uo(ft.keyField(),s))}return e.Ie}function qr(t){const e=ie(t);return e.Ee||(e.Ee=kC(e,Ui(t))),e.Ee}function kC(t,e){if(t.limitType==="F")return hy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Uo(i.field,a)});const r=t.endAt?new Zi(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Zi(t.startAt.position,t.startAt.inclusive):null;return hy(t.path,t.collectionGroup,e,t.filters,t.limit,r,s)}}function Mm(t,e){const r=t.filters.concat([e]);return new ai(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function du(t,e,r){return new ai(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Ju(t,e){return ff(qr(t),qr(e))&&t.limitType===e.limitType}function KN(t){return`${pf(qr(t))}|lt:${t.limitType}`}function fi(t){return`Query(target=${function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(i=>WN(i)).join(", ")}]`),Gu(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(i=>Xi(i)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(i=>Xi(i)).join(",")),`Target(${s})`}(qr(t))}; limitType=${t.limitType})`}function Xu(t,e){return e.isFoundDocument()&&function(s,i){const a=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):J.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(t,e)&&function(s,i){for(const a of Ui(s))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const a of s.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,l,c){const d=uy(o,l,c);return o.inclusive?d<=0:d<0}(s.startAt,Ui(s),i)||s.endAt&&!function(o,l,c){const d=uy(o,l,c);return o.inclusive?d>=0:d>0}(s.endAt,Ui(s),i))}(t,e)}function IC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QN(t){return(e,r)=>{let s=!1;for(const i of Ui(t)){const a=CC(i,e,r);if(a!==0)return a;s=s||i.field.isKeyField()}return 0}}function CC(t,e,r){const s=t.field.isKeyField()?J.comparator(e.key,r.key):function(a,o,l){const c=o.data.field(a),d=l.data.field(a);return c!==null&&d!==null?Ji(c,d):se(42886)}(t.field,e,r);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(s!==void 0){for(const[i,a]of s)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[r]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jn(this.inner,(r,s)=>{for(const[i,a]of s)e(i,a)})}isEmpty(){return PN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new He(J.comparator);function Ss(){return AC}const YN=new He(J.comparator);function Ka(...t){let e=YN;for(const r of t)e=e.insert(r.key,r);return e}function JN(t){let e=YN;return t.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function On(){return ho()}function XN(){return ho()}function ho(){return new oi(t=>t.toString(),(t,e)=>t.isEqual(e))}const RC=new He(J.comparator),PC=new at(J.comparator);function xe(...t){let e=PC;for(const r of t)e=e.add(r);return e}const DC=new at(ge);function MC(){return DC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ou(e)?"-0":e}}function ZN(t){return{integerValue:""+t}}function ej(t,e){return cC(e)?ZN(e):xf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this._=void 0}}function LC(t,e,r){return t instanceof zo?function(i,a){const o={fields:{[LN]:{stringValue:MN},[VN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Ku(a)&&(a=Qu(a)),a&&(o.fields[ON]=a),{mapValue:o}}(r,e):t instanceof Bo?rj(t,e):t instanceof $o?sj(t,e):function(i,a){const o=tj(i,a),l=py(o)+py(i.Ae);return Rm(o)&&Rm(i.Ae)?ZN(l):xf(i.serializer,l)}(t,e)}function OC(t,e,r){return t instanceof Bo?rj(t,e):t instanceof $o?sj(t,e):r}function tj(t,e){return t instanceof qo?function(s){return Rm(s)||function(a){return!!a&&"doubleValue"in a}(s)}(e)?e:{integerValue:0}:null}class zo extends Zu{}class Bo extends Zu{constructor(e){super(),this.elements=e}}function rj(t,e){const r=nj(e);for(const s of t.elements)r.some(i=>Jr(i,s))||r.push(s);return{arrayValue:{values:r}}}class $o extends Zu{constructor(e){super(),this.elements=e}}function sj(t,e){let r=nj(e);for(const s of t.elements)r=r.filter(i=>!Jr(i,s));return{arrayValue:{values:r}}}class qo extends Zu{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function py(t){return Ye(t.integerValue||t.doubleValue)}function nj(t){return mf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,r){this.field=e,this.transform=r}}function VC(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof Bo&&i instanceof Bo||s instanceof $o&&i instanceof $o?Yi(s.elements,i.elements,Jr):s instanceof qo&&i instanceof qo?Jr(s.Ae,i.Ae):s instanceof zo&&i instanceof zo}(t.transform,e.transform)}class FC{constructor(e,r){this.version=e,this.transformResults=r}}class dr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ed{}function aj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yf(t.key,dr.none()):new al(t.key,t.data,dr.none());{const r=t.data,s=Bt.empty();let i=new at(ft.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?s.delete(a):s.set(a,o),i=i.add(a)}return new _n(t.key,s,new Zt(i.toArray()),dr.none())}}function UC(t,e,r){t instanceof al?function(i,a,o){const l=i.value.clone(),c=gy(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof _n?function(i,a,o){if(!Nc(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=gy(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(oj(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function mo(t,e,r,s){return t instanceof al?function(a,o,l,c){if(!Nc(a.precondition,o))return l;const d=a.value.clone(),h=xy(a.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,r,s):t instanceof _n?function(a,o,l,c){if(!Nc(a.precondition,o))return l;const d=xy(a.fieldTransforms,c,o),h=o.data;return h.setAll(oj(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,r,s):function(a,o,l){return Nc(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function zC(t,e){let r=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),a=tj(s.transform,i||null);a!=null&&(r===null&&(r=Bt.empty()),r.set(s.field,a))}return r||null}function fy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Yi(s,i,(a,o)=>VC(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class al extends ed{constructor(e,r,s,i=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _n extends ed{constructor(e,r,s,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function oj(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=t.data.field(r);e.set(r,s)}}),e}function gy(t,e,r){const s=new Map;Ne(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);s.set(a.field,OC(o,l,r[i]))}return s}function xy(t,e,r){const s=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);s.set(i.field,LC(a,o,e))}return s}class yf extends ed{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BC extends ed{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,r,s,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&UC(a,e,s[i])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=mo(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=mo(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=XN();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(i.key)?null:l;const c=aj(o,l);c!==null&&s.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ne.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),xe())}isEqual(e){return this.batchId===e.batchId&&Yi(this.mutations,e.mutations,(r,s)=>fy(r,s))&&Yi(this.baseMutations,e.baseMutations,(r,s)=>fy(r,s))}}class vf{constructor(e,r,s,i){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=i}static from(e,r,s){Ne(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=function(){return RC}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,s[o].version);return new vf(e,r,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,ye;function WC(t){switch(t){case V.OK:return se(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function lj(t){if(t===void 0)return Es("GRPC error has no .code"),V.UNKNOWN;switch(t){case Xe.OK:return V.OK;case Xe.CANCELLED:return V.CANCELLED;case Xe.UNKNOWN:return V.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return V.INTERNAL;case Xe.UNAVAILABLE:return V.UNAVAILABLE;case Xe.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Xe.NOT_FOUND:return V.NOT_FOUND;case Xe.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Xe.ABORTED:return V.ABORTED;case Xe.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Xe.DATA_LOSS:return V.DATA_LOSS;default:return se(39323,{code:t})}}(ye=Xe||(Xe={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new on([4294967295,4294967295],0);function yy(t){const e=GC().encode(t),r=new NN;return r.update(e),new Uint8Array(r.digest())}function vy(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new on([r,s],0),new on([i,a],0)]}class bf{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new Qa(`Invalid padding: ${r}`);if(s<0)throw new Qa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${s}`);if(e.length===0&&r!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=on.fromNumber(this.ge)}ye(e,r,s){let i=e.add(r.multiply(on.fromNumber(s)));return i.compare(KC)===1&&(i=new on([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=yy(e),[s,i]=vy(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(s,i,a);if(!this.we(o))return!1}return!0}static create(e,r,s){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new bf(a,i,r);return s.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const r=yy(e),[s,i]=vy(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(s,i,a);this.Se(o)}}Se(e){const r=Math.floor(e/8),s=e%8;this.bitmap[r]|=1<<s}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,r,s,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const i=new Map;return i.set(e,ol.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new td(ne.min(),i,new He(ge),Ss(),xe())}}class ol{constructor(e,r,s,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new ol(s,r,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,r,s,i){this.be=e,this.removedTargetIds=r,this.key=s,this.De=i}}class cj{constructor(e,r){this.targetId=e,this.Ce=r}}class uj{constructor(e,r,s=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=i}}class by{constructor(){this.ve=0,this.Fe=wy(),this.Me=yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),r=xe(),s=xe();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:s=s.add(i);break;default:se(38017,{changeType:a})}}),new ol(this.Me,this.xe,e,r,s)}qe(){this.Oe=!1,this.Fe=wy()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ss(),this.Je=Jl(),this.He=Jl(),this.Ye=new He(ge)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const s=this.nt(r);switch(e.state){case 0:this.rt(r)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),s.Le(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((s,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,s=e.Ce.count,i=this.ot(r);if(i){const a=i.target;if(Dm(a))if(s===0){const o=new J(a.path);this.et(r,o,Tt.newNoDocument(o,ne.min()))}else Ne(s===1,20013,{expectedCount:s});else{const o=this._t(r);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(r);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:a=0}=r;let o,l;try{o=pn(s).toUint8Array()}catch(c){if(c instanceof DN)return Qi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new bf(o,i,a)}catch(c){return Qi(c instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,r,s){return r.Ce.count===s-this.Pt(e,r.targetId)?0:2}Pt(e,r){const s=this.Ge.getRemoteKeysForTarget(r);let i=0;return s.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(r,a,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&Dm(l.target)){const c=new J(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Tt.newNoDocument(c,e))}a.Be&&(r.set(o,a.ke()),a.qe())}});let s=xe();this.He.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const i=new td(e,r,this.Ye,this.je,s);return this.je=Ss(),this.Je=Jl(),this.He=Jl(),this.Ye=new He(ge),i}Xe(e,r){if(!this.rt(e))return;const s=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,s),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),s&&(this.je=this.je.insert(r,s))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new by,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new at(ge),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new at(ge),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||G("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new by),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Jl(){return new He(J.comparator)}function wy(){return new He(J.comparator)}const YC={asc:"ASCENDING",desc:"DESCENDING"},JC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XC={and:"AND",or:"OR"};class ZC{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Lm(t,e){return t.useProto3Json||Gu(e)?e:{value:e}}function hu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eA(t,e){return hu(t,e.toTimestamp())}function Hr(t){return Ne(!!t,49232),ne.fromTimestamp(function(r){const s=mn(r);return new De(s.seconds,s.nanos)}(t))}function wf(t,e){return Om(t,e).canonicalString()}function Om(t,e){const r=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function hj(t){const e=ke.fromString(t);return Ne(xj(e),10190,{key:e.toString()}),e}function Vm(t,e){return wf(t.databaseId,e.path)}function bh(t,e){const r=hj(e);if(r.get(1)!==t.databaseId.projectId)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new J(pj(r))}function mj(t,e){return wf(t.databaseId,e)}function tA(t){const e=hj(t);return e.length===4?ke.emptyPath():pj(e)}function Fm(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pj(t){return Ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ny(t,e,r){return{name:Vm(t,e),fields:r.value.mapValue.fields}}function rA(t,e){let r;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Ne(h===void 0||typeof h=="string",58123),yt.fromBase64String(h||"")):(Ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),yt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?V.UNKNOWN:lj(d.code);return new H(h,d.message||"")}(o);r=new uj(s,i,a,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=bh(t,s.document.name),a=Hr(s.document.updateTime),o=s.document.createTime?Hr(s.document.createTime):ne.min(),l=new Bt({mapValue:{fields:s.document.fields}}),c=Tt.newFoundDocument(i,a,o,l),d=s.targetIds||[],h=s.removedTargetIds||[];r=new jc(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=bh(t,s.document),a=s.readTime?Hr(s.readTime):ne.min(),o=Tt.newNoDocument(i,a),l=s.removedTargetIds||[];r=new jc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=bh(t,s.document),a=s.removedTargetIds||[];r=new jc([],a,i,null)}else{if(!("filter"in e))return se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:a}=s,o=new HC(i,a),l=s.targetId;r=new cj(l,o)}}return r}function sA(t,e){let r;if(e instanceof al)r={update:Ny(t,e.key,e.value)};else if(e instanceof yf)r={delete:Vm(t,e.key)};else if(e instanceof _n)r={update:Ny(t,e.key,e.data),updateMask:hA(e.fieldMask)};else{if(!(e instanceof BC))return se(16599,{Vt:e.type});r={verify:Vm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(a,o){const l=o.transform;if(l instanceof zo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof $o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof qo)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw se(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:eA(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:se(27497)}(t,e.precondition)),r}function nA(t,e){return t&&t.length>0?(Ne(e!==void 0,14353),t.map(r=>function(i,a){let o=i.updateTime?Hr(i.updateTime):Hr(a);return o.isEqual(ne.min())&&(o=Hr(a)),new FC(o,i.transformResults||[])}(r,e))):[]}function iA(t,e){return{documents:[mj(t,e.path)]}}function aA(t,e){const r={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=mj(t,i);const a=function(d){if(d.length!==0)return gj(Cr.create(d,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:gi(p.field),direction:cA(p.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Lm(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:r,parent:i}}function oA(t){let e=tA(t.parent);const r=t.structuredQuery,s=r.from?r.from.length:0;let i=null;if(s>0){Ne(s===1,65062);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];r.where&&(a=function(m){const p=fj(m);return p instanceof Cr&&qN(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(m){return m.map(p=>function(S){return new Uo(xi(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Gu(p)?null:p}(r.limit));let c=null;r.startAt&&(c=function(m){const p=!!m.before,v=m.values||[];return new Zi(v,p)}(r.startAt));let d=null;return r.endAt&&(d=function(m){const p=!m.before,v=m.values||[];return new Zi(v,p)}(r.endAt)),TC(e,i,o,a,l,"F",c,d)}function lA(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function fj(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=xi(r.unaryFilter.field);return et.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=xi(r.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=xi(r.unaryFilter.field);return et.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xi(r.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(r){return et.create(xi(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Cr.create(r.compositeFilter.filters.map(s=>fj(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(r.compositeFilter.op))}(t):se(30097,{filter:t})}function cA(t){return YC[t]}function uA(t){return JC[t]}function dA(t){return XC[t]}function gi(t){return{fieldPath:t.canonicalString()}}function xi(t){return ft.fromServerFormat(t.fieldPath)}function gj(t){return t instanceof et?function(r){if(r.op==="=="){if(cy(r.value))return{unaryFilter:{field:gi(r.field),op:"IS_NAN"}};if(ly(r.value))return{unaryFilter:{field:gi(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(cy(r.value))return{unaryFilter:{field:gi(r.field),op:"IS_NOT_NAN"}};if(ly(r.value))return{unaryFilter:{field:gi(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gi(r.field),op:uA(r.op),value:r.value}}}(t):t instanceof Cr?function(r){const s=r.getFilters().map(i=>gj(i));return s.length===1?s[0]:{compositeFilter:{op:dA(r.op),filters:s}}}(t):se(54877,{filter:t})}function hA(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function xj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,r,s,i,a=ne.min(),o=ne.min(),l=yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.yt=e}}function pA(t){const e=oA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?du(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.Cn=new gA}addToCollectionParentIndex(e,r){return this.Cn.add(r),F.resolve()}getCollectionParents(e,r){return F.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return F.resolve()}deleteFieldIndex(e,r){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,r){return F.resolve()}getDocumentsMatchingTarget(e,r){return F.resolve(null)}getIndexType(e,r){return F.resolve(0)}getFieldIndexes(e,r){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,r){return F.resolve(hn.min())}getMinOffsetFromCollectionGroup(e,r){return F.resolve(hn.min())}updateCollectionGroup(e,r,s){return F.resolve()}updateIndexEntries(e,r){return F.resolve()}}class gA{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),i=this.index[r]||new at(ke.comparator),a=!i.has(s);return this.index[r]=i.add(s),a}has(e){const r=e.lastSegment(),s=e.popLast(),i=this.index[r];return i&&i.has(s)}getEntries(e){return(this.index[e]||new at(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yj=41943040;class Ut{static withCacheSize(e){return new Ut(e,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(yj,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ea(0)}static cr(){return new ea(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="LruGarbageCollector",xA=1048576;function Ey([t,e],[r,s]){const i=ge(t,r);return i===0?ge(e,s):i}class yA{constructor(e){this.Ir=e,this.buffer=new at(Ey),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();Ey(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class vA{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){G(_y,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ma(r)?G(_y,"Ignoring IndexedDB error during garbage collection: ",r):await ha(r)}await this.Vr(3e5)})}}class bA{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(r===0)return F.resolve(Wu.ce);const s=new yA(r);return this.mr.forEachTarget(e,i=>s.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>s.Ar(i))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.mr.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(jy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jy):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let s,i,a,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(s=m,l=Date.now(),this.removeTargets(e,s,r))).next(m=>(a=m,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(d=Date.now(),pi()<=fe.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:m})))}}function wA(t,e){return new bA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.changes=new oi(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?F.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,r,s,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(s!==null&&mo(s.mutation,i,Zt.empty(),De.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,xe()).next(()=>s))}getLocalViewOfDocuments(e,r,s=xe()){const i=On();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,s).next(a=>{let o=Ka();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const s=On();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,xe()))}populateOverlays(e,r,s){const i=[];return s.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,s,i){let a=Ss();const o=ho(),l=function(){return ho()}();return r.forEach((c,d)=>{const h=s.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof _n)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),mo(h.mutation,d,h.mutation.getFieldMask(),De.now())):o.set(d.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((d,h)=>o.set(d,h)),r.forEach((d,h)=>l.set(d,new jA(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,r){const s=ho();let i=new He((o,l)=>o-l),a=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=r.get(c);if(d===null)return;let h=s.get(c)||Zt.empty();h=l.applyToLocalView(d,h),s.set(c,h);const m=(i.get(l.batchId)||xe()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,m=XN();h.forEach(p=>{if(!a.has(p)){const v=aj(r.get(p),s.get(p));v!==null&&m.set(p,v),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):gf(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,i):this.getDocumentsMatchingCollectionQuery(e,r,s,i)}getNextDocuments(e,r,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,i-a.size):F.resolve(On());let l=Lo,c=a;return o.next(d=>F.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,c,d,xe())).next(h=>({batchId:l,changes:JN(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new J(r)).next(s=>{let i=Ka();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,s,i){const a=r.collectionGroup;let o=Ka();return this.indexManager.getCollectionParents(e,a).next(l=>F.forEach(l,c=>{const d=function(m,p){return new ai(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(r,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,s,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,a,i))).next(o=>{a.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Tt.newInvalidDocument(h)))});let l=Ka();return o.forEach((c,d)=>{const h=a.get(c);h!==void 0&&mo(h.mutation,d,Zt.empty(),De.now()),Xu(r,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return F.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Hr(i.createTime)}}(r)),F.resolve()}getNamedQuery(e,r){return F.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:pA(i.bundledQuery),readTime:Hr(i.readTime)}}(r)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.overlays=new He(J.comparator),this.qr=new Map}getOverlay(e,r){return F.resolve(this.overlays.get(r))}getOverlays(e,r){const s=On();return F.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&s.set(i,a)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((i,a)=>{this.St(e,r,a)}),F.resolve()}removeOverlaysForBatchId(e,r,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(s)),F.resolve()}getOverlaysForCollection(e,r,s){const i=On(),a=r.length+1,o=new J(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>s&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,r,s,i){let a=new He((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>s){let h=a.get(d.largestBatchId);h===null&&(h=On(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=On(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return F.resolve(l)}St(e,r,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new qC(r,s));let a=this.qr.get(r);a===void 0&&(a=xe(),this.qr.set(r,a)),this.qr.set(r,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this.Qr=new at(lt.$r),this.Ur=new at(lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const s=new lt(e,r);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Gr(new lt(e,r))}zr(e,r){e.forEach(s=>this.removeReference(s,r))}jr(e){const r=new J(new ke([])),s=new lt(r,e),i=new lt(r,e+1),a=[];return this.Ur.forEachInRange([s,i],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new J(new ke([])),s=new lt(r,e),i=new lt(r,e+1);let a=xe();return this.Ur.forEachInRange([s,i],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new lt(e,0),s=this.Qr.firstAfterOrEqual(r);return s!==null&&e.isEqual(s.key)}}class lt{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return J.comparator(e.key,r.key)||ge(e.Yr,r.Yr)}static Kr(e,r){return ge(e.Yr,r.Yr)||J.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new at(lt.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,s,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $C(a,r,s,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new lt(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,r){return F.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const s=r+1,i=this.ei(s),a=i<0?0:i;return F.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?hf:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new lt(r,0),i=new lt(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([s,i],o=>{const l=this.Xr(o.Yr);a.push(l)}),F.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new at(ge);return r.forEach(i=>{const a=new lt(i,0),o=new lt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],l=>{s=s.add(l.Yr)})}),F.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,i=s.length+1;let a=s;J.isDocumentKey(a)||(a=a.child(""));const o=new lt(new J(a),0);let l=new at(ge);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Yr)),!0)},o),F.resolve(this.ti(l))}ti(e){const r=[];return e.forEach(s=>{const i=this.Xr(s);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Ne(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return F.forEach(r.mutations,i=>{const a=new lt(i.key,r.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,r){const s=new lt(r,0),i=this.Zr.firstAfterOrEqual(s);return F.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.ri=e,this.docs=function(){return new He(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,i=this.docs.get(s),a=i?i.size:0,o=this.ri(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return F.resolve(s?s.document.mutableCopy():Tt.newInvalidDocument(r))}getEntries(e,r){let s=Ss();return r.forEach(i=>{const a=this.docs.get(i);s=s.insert(i,a?a.document.mutableCopy():Tt.newInvalidDocument(i))}),F.resolve(s)}getDocumentsMatchingQuery(e,r,s,i){let a=Ss();const o=r.path,l=new J(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||iC(nC(h),s)<=0||(i.has(h.key)||Xu(r,h))&&(a=a.insert(h.key,h.mutableCopy()))}return F.resolve(a)}getAllFromCollectionGroup(e,r,s,i){se(9500)}ii(e,r){return F.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new CA(this)}getSize(e){return F.resolve(this.size)}}class CA extends NA{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)}),F.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.persistence=e,this.si=new oi(r=>pf(r),ff),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Nf,this.targetCount=0,this.ai=ea.ur()}forEachTarget(e,r){return this.si.forEach((s,i)=>r(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.oi&&(this.oi=r),F.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new ea(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,F.resolve()}updateTargetData(e,r){return this.Pr(r),F.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,r,s){let i=0;const a=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&s.get(l.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(a).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,r){const s=this.si.get(r)||null;return F.resolve(s)}addMatchingKeys(e,r,s){return this._i.Wr(r,s),F.resolve()}removeMatchingKeys(e,r,s){this._i.zr(r,s);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),F.resolve()}getMatchingKeysForTargetId(e,r){const s=this._i.Hr(r);return F.resolve(s)}containsKey(e,r){return F.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,r){this.ui={},this.overlays={},this.ci=new Wu(0),this.li=!1,this.li=!0,this.hi=new TA,this.referenceDelegate=e(this),this.Pi=new AA(this),this.indexManager=new fA,this.remoteDocumentCache=function(i){return new IA(i)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new mA(r),this.Ii=new EA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new SA,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.ui[e.toKey()];return s||(s=new kA(r,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,s){G("MemoryPersistence","Starting transaction:",e);const i=new RA(this.ci.next());return this.referenceDelegate.Ei(),s(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,r){return F.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,r)))}}class RA extends oC{constructor(e){super(),this.currentSequenceNumber=e}}class jf{constructor(e){this.persistence=e,this.Ri=new Nf,this.Vi=null}static mi(e){return new jf(e)}get fi(){if(this.Vi)return this.Vi;throw se(60996)}addReference(e,r,s){return this.Ri.addReference(s,r),this.fi.delete(s.toString()),F.resolve()}removeReference(e,r,s){return this.Ri.removeReference(s,r),this.fi.add(s.toString()),F.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),F.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>s.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,s=>{const i=J.fromPath(s);return this.gi(e,i).next(a=>{a||r.removeEntry(i,ne.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(s=>{s?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return F.or([()=>F.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class mu{constructor(e,r){this.persistence=e,this.pi=new oi(s=>uC(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=wA(this,r)}static mi(e,r){return new mu(e,r)}Ei(){}di(e){return F.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>r.next(i=>s+i))}wr(e){let r=0;return this.pr(e,s=>{r++}).next(()=>r)}pr(e,r){return F.forEach(this.pi,(s,i)=>this.br(e,s,i).next(a=>a?F.resolve():r(i)))}removeTargets(e,r,s){return this.persistence.getTargetCache().removeTargets(e,r,s)}removeOrphanedDocuments(e,r){let s=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,r).next(l=>{l||(s++,a.removeEntry(o,ne.min()))})).next(()=>a.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,r,s){return this.pi.set(s,e.currentSequenceNumber),F.resolve()}removeReference(e,r,s){return this.pi.set(s,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=bc(e.data.value)),r}br(e,r,s){return F.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return F.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,r,s,i){this.targetId=e,this.fromCache=r,this.Es=s,this.ds=i}static As(e,r){let s=xe(),i=xe();for(const a of r.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new _f(e,r.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return a4()?8:lC(Rt())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,s,i){const a={result:null};return this.ys(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,r,i,s).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new PA;return this.Ss(e,r,o).next(l=>{if(a.result=l,this.Vs)return this.bs(e,r,o,l.size)})}).next(()=>a.result)}bs(e,r,s,i){return s.documentReadCount<this.fs?(pi()<=fe.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",fi(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(pi()<=fe.DEBUG&&G("QueryEngine","Query:",fi(r),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(pi()<=fe.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",fi(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(r))):F.resolve())}ys(e,r){if(my(r))return F.resolve(null);let s=qr(r);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=du(r,null,"F"),s=qr(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(a=>{const o=xe(...a);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.Ds(r,l);return this.Cs(r,d,o,c.readTime)?this.ys(e,du(r,null,"F")):this.vs(e,d,r,c)}))})))}ws(e,r,s,i){return my(r)||i.isEqual(ne.min())?F.resolve(null):this.ps.getDocuments(e,s).next(a=>{const o=this.Ds(r,a);return this.Cs(r,o,s,i)?F.resolve(null):(pi()<=fe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fi(r)),this.vs(e,o,r,sC(i,Lo)).next(l=>l))})}Ds(e,r){let s=new at(QN(e));return r.forEach((i,a)=>{Xu(e,a)&&(s=s.add(a))}),s}Cs(e,r,s,i){if(e.limit===null)return!1;if(s.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,r,s){return pi()<=fe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",fi(r)),this.ps.getDocumentsMatchingQuery(e,r,hn.min(),s)}vs(e,r,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="LocalStore",MA=3e8;class LA{constructor(e,r,s,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new He(ge),this.xs=new oi(a=>pf(a),ff),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _A(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function OA(t,e,r,s){return new LA(t,e,r,s)}async function bj(t,e){const r=ie(t);return await r.persistence.runTransaction("Handle user change","readonly",s=>{let i;return r.mutationQueue.getAllMutationBatches(s).next(a=>(i=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(s))).next(a=>{const o=[],l=[];let c=xe();for(const d of i){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return r.localDocuments.getDocuments(s,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function VA(t,e){const r=ie(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const m=d.batch,p=m.keys();let v=F.resolve();return p.forEach(S=>{v=v.next(()=>h.getEntry(c,S)).next(b=>{const N=d.docVersions.get(S);Ne(N!==null,48541),b.version.compareTo(N)<0&&(m.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),h.addEntry(b)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(r,s,e,a).next(()=>a.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=xe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>r.localDocuments.getDocuments(s,i))})}function wj(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function FA(t,e){const r=ie(t),s=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const p=i.get(m);if(!p)return;l.push(r.Pi.removeMatchingKeys(a,h.removedDocuments,m).next(()=>r.Pi.addMatchingKeys(a,h.addedDocuments,m)));let v=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(yt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,s)),i=i.insert(m,v),function(b,N,g){return b.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=MA?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(p,v,h)&&l.push(r.Pi.updateTargetData(a,v))});let c=Ss(),d=xe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(UA(a,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!s.isEqual(ne.min())){const h=r.Pi.getLastRemoteSnapshotVersion(a).next(m=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,s));l.push(h)}return F.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,c,d)).next(()=>c)}).then(a=>(r.Ms=i,a))}function UA(t,e,r){let s=xe(),i=xe();return r.forEach(a=>s=s.add(a)),e.getEntries(t,s).next(a=>{let o=Ss();return r.forEach((l,c)=>{const d=a.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):G(Ef,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function zA(t,e){const r=ie(t);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=hf),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function BA(t,e){const r=ie(t);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return r.Pi.getTargetData(s,e).next(a=>a?(i=a,F.resolve(i)):r.Pi.allocateTargetId(s).next(o=>(i=new Qs(e,o,"TargetPurposeListen",s.currentSequenceNumber),r.Pi.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=r.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(s.targetId,s),r.xs.set(e,s.targetId)),s})}async function Um(t,e,r){const s=ie(t),i=s.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await s.persistence.runTransaction("Release target",a,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ma(o))throw o;G(Ef,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function Sy(t,e,r){const s=ie(t);let i=ne.min(),a=xe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const m=ie(c),p=m.xs.get(h);return p!==void 0?F.resolve(m.Ms.get(p)):m.Pi.getTargetData(d,h)}(s,o,qr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,r?i:ne.min(),r?a:xe())).next(l=>($A(s,IC(e),l),{documents:l,Qs:a})))}function $A(t,e,r){let s=t.Os.get(e)||ne.min();r.forEach((i,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),t.Os.set(e,s)}class Ty{constructor(){this.activeTargetIds=MC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qA{constructor(){this.Mo=new Ty,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,s){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ty,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="ConnectivityMonitor";class Iy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){G(ky,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){G(ky,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl=null;function zm(){return Xl===null?Xl=function(){return 268435456+Math.round(2147483648*Math.random())}():Xl++,"0x"+Xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="RestConnection",WA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===lu?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,r,s,i,a){const o=zm(),l=this.zo(e,r.toUriEncodedString());G(wh,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:d}=new URL(l),h=ni(d);return this.Jo(e,l,c,s,h).then(m=>(G(wh,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Qi(wh,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",s),m})}Ho(e,r,s,i,a,o){return this.Go(e,r,s,i,a)}jo(e,r,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>e[a]=i),s&&s.headers.forEach((i,a)=>e[a]=i)}zo(e,r){const s=WA[e];return`${this.Uo}/v1/${r}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class QA extends GA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,s,i,a){const o=zm();return new Promise((l,c)=>{const d=new jN;d.setWithCredentials(!0),d.listenOnce(_N.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case vc.NO_ERROR:const m=d.getResponseJson();G(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case vc.TIMEOUT:G(_t,`RPC '${e}' ${o} timed out`),c(new H(V.DEADLINE_EXCEEDED,"Request time out"));break;case vc.HTTP_ERROR:const p=d.getStatus();if(G(_t,`RPC '${e}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const S=v==null?void 0:v.error;if(S&&S.status&&S.message){const b=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(y)>=0?y:V.UNKNOWN}(S.status);c(new H(b,S.message))}else c(new H(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new H(V.UNAVAILABLE,"Connection failed."));break;default:se(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{G(_t,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);G(_t,`RPC '${e}' ${o} sending request:`,i),d.send(r,"POST",h,s,15)})}T_(e,r,s){const i=zm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=TN(),l=SN(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,s),c.encodeInitMessageHeaders=!0;const h=a.join("");G(_t,`Creating RPC '${e}' stream ${i}: ${h}`,c);const m=o.createWebChannel(h,c);this.I_(m);let p=!1,v=!1;const S=new KA({Yo:N=>{v?G(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(p||(G(_t,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),G(_t,`RPC '${e}' stream ${i} sending:`,N),m.send(N))},Zo:()=>m.close()}),b=(N,g,y)=>{N.listen(g,j=>{try{y(j)}catch(R){setTimeout(()=>{throw R},0)}})};return b(m,Ga.EventType.OPEN,()=>{v||(G(_t,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),b(m,Ga.EventType.CLOSE,()=>{v||(v=!0,G(_t,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(m))}),b(m,Ga.EventType.ERROR,N=>{v||(v=!0,Qi(_t,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),S.a_(new H(V.UNAVAILABLE,"The operation could not be completed")))}),b(m,Ga.EventType.MESSAGE,N=>{var g;if(!v){const y=N.data[0];Ne(!!y,16349);const j=y,R=(j==null?void 0:j.error)||((g=j[0])==null?void 0:g.error);if(R){G(_t,`RPC '${e}' stream ${i} received error:`,R);const M=R.status;let D=function(k){const I=Xe[k];if(I!==void 0)return lj(I)}(M),T=R.message;D===void 0&&(D=V.INTERNAL,T="Unknown error status: "+M+" with message "+R.message),v=!0,S.a_(new H(D,T)),m.close()}else G(_t,`RPC '${e}' stream ${i} received:`,y),S.u_(y)}}),b(l,EN.STAT_EVENT,N=>{N.stat===Im.PROXY?G(_t,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Im.NOPROXY&&G(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function Nh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){return new ZC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,r,s=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=s,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-s);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="PersistentStream";class jj{constructor(e,r,s,i,a,o,l,c){this.Mi=e,this.S_=s,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Nj(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===V.RESOURCE_EXHAUSTED?(Es(r.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.D_===r&&this.G_(s,i)},s=>{e(()=>{const i=new H(V.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)})})}G_(e,r){const s=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{s(()=>this.z_(i))}),this.stream.onMessage(i=>{s(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return G(Cy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(G(Cy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YA extends jj{constructor(e,r,s,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,i,o),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=rA(this.serializer,e),s=function(a){if(!("targetChange"in a))return ne.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?Hr(o.readTime):ne.min()}(e);return this.listener.H_(r,s)}Y_(e){const r={};r.database=Fm(this.serializer),r.addTarget=function(a,o){let l;const c=o.target;if(l=Dm(c)?{documents:iA(a,c)}:{query:aA(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=dj(a,o.resumeToken);const d=Lm(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){l.readTime=hu(a,o.snapshotVersion.toTimestamp());const d=Lm(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=lA(this.serializer,e);s&&(r.labels=s),this.q_(r)}Z_(e){const r={};r.database=Fm(this.serializer),r.removeTarget=e,this.q_(r)}}class JA extends jj{constructor(e,r,s,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=nA(e.writeResults,e.commitTime),s=Hr(e.commitTime);return this.listener.na(s,r)}ra(){const e={};e.database=Fm(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>sA(this.serializer,s))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{}class ZA extends XA{constructor(e,r,s,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,Om(r,s),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H(V.UNKNOWN,a.toString())})}Ho(e,r,s,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Om(r,s),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(V.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class eR{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Es(r),this.aa=!1):G("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="RemoteStore";class tR{constructor(e,r,s,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{li(this)&&(G(ei,"Restarting streams for network reachability change."),await async function(c){const d=ie(c);d.Ea.add(4),await ll(d),d.Ra.set("Unknown"),d.Ea.delete(4),await sd(d)}(this))})}),this.Ra=new eR(s,i)}}async function sd(t){if(li(t))for(const e of t.da)await e(!0)}async function ll(t){for(const e of t.da)await e(!1)}function _j(t,e){const r=ie(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),If(r)?kf(r):pa(r).O_()&&Tf(r,e))}function Sf(t,e){const r=ie(t),s=pa(r);r.Ia.delete(e),s.O_()&&Ej(r,e),r.Ia.size===0&&(s.O_()?s.L_():li(r)&&r.Ra.set("Unknown"))}function Tf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}pa(t).Y_(e)}function Ej(t,e){t.Va.Ue(e),pa(t).Z_(e)}function kf(t){t.Va=new QC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pa(t).start(),t.Ra.ua()}function If(t){return li(t)&&!pa(t).x_()&&t.Ia.size>0}function li(t){return ie(t).Ea.size===0}function Sj(t){t.Va=void 0}async function rR(t){t.Ra.set("Online")}async function sR(t){t.Ia.forEach((e,r)=>{Tf(t,e)})}async function nR(t,e){Sj(t),If(t)?(t.Ra.ha(e),kf(t)):t.Ra.set("Unknown")}async function iR(t,e,r){if(t.Ra.set("Online"),e instanceof uj&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(s){G(ei,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await pu(t,s)}else if(e instanceof jc?t.Va.Ze(e):e instanceof cj?t.Va.st(e):t.Va.tt(e),!r.isEqual(ne.min()))try{const s=await wj(t.localStore);r.compareTo(s)>=0&&await function(a,o){const l=a.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=a.Ia.get(c);if(!h)return;a.Ia.set(c,h.withResumeToken(yt.EMPTY_BYTE_STRING,h.snapshotVersion)),Ej(a,c);const m=new Qs(h.target,c,d,h.sequenceNumber);Tf(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(s){G(ei,"Failed to raise snapshot:",s),await pu(t,s)}}async function pu(t,e,r){if(!ma(e))throw e;t.Ea.add(1),await ll(t),t.Ra.set("Offline"),r||(r=()=>wj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(ei,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await sd(t)})}function Tj(t,e){return e().catch(r=>pu(t,r,e))}async function nd(t){const e=ie(t),r=gn(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hf;for(;aR(e);)try{const i=await zA(e.localStore,s);if(i===null){e.Ta.length===0&&r.L_();break}s=i.batchId,oR(e,i)}catch(i){await pu(e,i)}kj(e)&&Ij(e)}function aR(t){return li(t)&&t.Ta.length<10}function oR(t,e){t.Ta.push(e);const r=gn(t);r.O_()&&r.X_&&r.ea(e.mutations)}function kj(t){return li(t)&&!gn(t).x_()&&t.Ta.length>0}function Ij(t){gn(t).start()}async function lR(t){gn(t).ra()}async function cR(t){const e=gn(t);for(const r of t.Ta)e.ea(r.mutations)}async function uR(t,e,r){const s=t.Ta.shift(),i=vf.from(s,e,r);await Tj(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nd(t)}async function dR(t,e){e&&gn(t).X_&&await async function(s,i){if(function(o){return WC(o)&&o!==V.ABORTED}(i.code)){const a=s.Ta.shift();gn(s).B_(),await Tj(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,i)),await nd(s)}}(t,e),kj(t)&&Ij(t)}async function Ay(t,e){const r=ie(t);r.asyncQueue.verifyOperationInProgress(),G(ei,"RemoteStore received new credentials");const s=li(r);r.Ea.add(3),await ll(r),s&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await sd(r)}async function hR(t,e){const r=ie(t);e?(r.Ea.delete(2),await sd(r)):e||(r.Ea.add(2),await ll(r),r.Ra.set("Unknown"))}function pa(t){return t.ma||(t.ma=function(r,s,i){const a=ie(r);return a.sa(),new YA(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:rR.bind(null,t),t_:sR.bind(null,t),r_:nR.bind(null,t),H_:iR.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),If(t)?kf(t):t.Ra.set("Unknown")):(await t.ma.stop(),Sj(t))})),t.ma}function gn(t){return t.fa||(t.fa=function(r,s,i){const a=ie(r);return a.sa(),new JA(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:lR.bind(null,t),r_:dR.bind(null,t),ta:cR.bind(null,t),na:uR.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await nd(t)):(await t.fa.stop(),t.Ta.length>0&&(G(ei,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,r,s,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=i,this.removalCallback=a,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,i,a){const o=Date.now()+s,l=new Cf(e,r,o,i,a);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Af(t,e){if(Es("AsyncQueue",`${e}: ${t}`),ma(t))return new H(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{static emptySet(e){return new zi(e.comparator)}constructor(e){this.comparator=e?(r,s)=>e(r,s)||J.comparator(r.key,s.key):(r,s)=>J.comparator(r.key,s.key),this.keyedMap=Ka(),this.sortedSet=new He(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof zi)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=s.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const s=new zi;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(){this.ga=new He(J.comparator)}track(e){const r=e.doc.key,s=this.ga.get(r);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(r,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(r,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(r):e.type===1&&s.type===2?this.ga=this.ga.insert(r,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,s)=>{e.push(s)}),e}}class ta{constructor(e,r,s,i,a,o,l,c,d){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,r,s,i,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new ta(e,r,zi.emptySet(r),o,s,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==s[i].type||!r[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class pR{constructor(){this.queries=Py(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,s){const i=ie(r),a=i.queries;i.queries=Py(),a.forEach((o,l)=>{for(const c of l.Sa)c.onError(s)})})(this,new H(V.ABORTED,"Firestore shutting down"))}}function Py(){return new oi(t=>KN(t),Ju)}async function Rf(t,e){const r=ie(t);let s=3;const i=e.query;let a=r.queries.get(i);a?!a.ba()&&e.Da()&&(s=2):(a=new mR,s=e.Da()?0:1);try{switch(s){case 0:a.wa=await r.onListen(i,!0);break;case 1:a.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const l=Af(o,`Initialization of query '${fi(e.query)}' failed`);return void e.onError(l)}r.queries.set(i,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&Df(r)}async function Pf(t,e){const r=ie(t),s=e.query;let i=3;const a=r.queries.get(s);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}}function fR(t,e){const r=ie(t);let s=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const l of o.Sa)l.Fa(i)&&(s=!0);o.wa=i}}s&&Df(r)}function gR(t,e,r){const s=ie(t),i=s.queries.get(e);if(i)for(const a of i.Sa)a.onError(r);s.queries.delete(e)}function Df(t){t.Ca.forEach(e=>{e.next()})}var Bm,Dy;(Dy=Bm||(Bm={})).Ma="default",Dy.Cache="cache";class Mf{constructor(e,r,s){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new ta(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const s=r!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e){this.key=e}}class Aj{constructor(e){this.key=e}}class xR{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=QN(e),this.tu=new zi(this.eu)}get nu(){return this.Ya}ru(e,r){const s=r?r.iu:new Ry,i=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const p=i.get(h),v=Xu(this.query,m)?m:null,S=!!p&&this.mutatedKeys.has(p.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let N=!1;p&&v?p.data.isEqual(v.data)?S!==b&&(s.track({type:3,doc:v}),N=!0):this.su(p,v)||(s.track({type:2,doc:v}),N=!0,(c&&this.eu(v,c)>0||d&&this.eu(v,d)<0)&&(l=!0)):!p&&v?(s.track({type:0,doc:v}),N=!0):p&&!v&&(s.track({type:1,doc:p}),N=!0,(c||d)&&(l=!0)),N&&(v?(o=o.add(v),a=b?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:l,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(v,S){const b=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Rt:N})}};return b(v)-b(S)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(s),i=i??!1;const l=r&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new ta(this.query,e.tu,a,o,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ry,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xe(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const r=[];return e.forEach(s=>{this.Xa.has(s)||r.push(new Aj(s))}),this.Xa.forEach(s=>{e.has(s)||r.push(new Cj(s))}),r}cu(e){this.Ya=e.Qs,this.Xa=xe();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return ta.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lf="SyncEngine";class yR{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class vR{constructor(e){this.key=e,this.hu=!1}}class bR{constructor(e,r,s,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new oi(l=>KN(l),Ju),this.Iu=new Map,this.Eu=new Set,this.du=new He(J.comparator),this.Au=new Map,this.Ru=new Nf,this.Vu={},this.mu=new Map,this.fu=ea.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wR(t,e,r=!0){const s=Oj(t);let i;const a=s.Tu.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Rj(s,e,r,!0),i}async function NR(t,e){const r=Oj(t);await Rj(r,e,!0,!1)}async function Rj(t,e,r,s){const i=await BA(t.localStore,qr(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return s&&(l=await jR(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&_j(t.remoteStore,i),l}async function jR(t,e,r,s,i){t.pu=(m,p,v)=>async function(b,N,g,y){let j=N.view.ru(g);j.Cs&&(j=await Sy(b.localStore,N.query,!1).then(({documents:T})=>N.view.ru(T,j)));const R=y&&y.targetChanges.get(N.targetId),M=y&&y.targetMismatches.get(N.targetId)!=null,D=N.view.applyChanges(j,b.isPrimaryClient,R,M);return Ly(b,N.targetId,D.au),D.snapshot}(t,m,p,v);const a=await Sy(t.localStore,e,!0),o=new xR(e,a.Qs),l=o.ru(a.documents),c=ol.createSynthesizedTargetChangeForCurrentChange(r,s&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,c);Ly(t,r,d.au);const h=new yR(e,r,o);return t.Tu.set(e,h),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function _R(t,e,r){const s=ie(t),i=s.Tu.get(e),a=s.Iu.get(i.targetId);if(a.length>1)return s.Iu.set(i.targetId,a.filter(o=>!Ju(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Um(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),r&&Sf(s.remoteStore,i.targetId),$m(s,i.targetId)}).catch(ha)):($m(s,i.targetId),await Um(s.localStore,i.targetId,!0))}async function ER(t,e){const r=ie(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),Sf(r.remoteStore,s.targetId))}async function SR(t,e,r){const s=PR(t);try{const i=await function(o,l){const c=ie(o),d=De.now(),h=l.reduce((v,S)=>v.add(S.key),xe());let m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let S=Ss(),b=xe();return c.Ns.getEntries(v,h).next(N=>{S=N,S.forEach((g,y)=>{y.isValidDocument()||(b=b.add(g))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,S)).next(N=>{m=N;const g=[];for(const y of l){const j=zC(y,m.get(y.key).overlayedDocument);j!=null&&g.push(new _n(y.key,j,zN(j.value.mapValue),dr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,g,l)}).next(N=>{p=N;const g=N.applyToLocalDocumentSet(m,b);return c.documentOverlayCache.saveOverlays(v,N.batchId,g)})}).then(()=>({batchId:p.batchId,changes:JN(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new He(ge)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(s,i.batchId,r),await cl(s,i.changes),await nd(s.remoteStore)}catch(i){const a=Af(i,"Failed to persist write");r.reject(a)}}async function Pj(t,e){const r=ie(t);try{const s=await FA(r.localStore,e);e.targetChanges.forEach((i,a)=>{const o=r.Au.get(a);o&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ne(o.hu,14607):i.removedDocuments.size>0&&(Ne(o.hu,42227),o.hu=!1))}),await cl(r,s,e)}catch(s){await ha(s)}}function My(t,e,r){const s=ie(t);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const i=[];s.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=ie(o);c.onlineState=l;let d=!1;c.queries.forEach((h,m)=>{for(const p of m.Sa)p.va(l)&&(d=!0)}),d&&Df(c)}(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function TR(t,e,r){const s=ie(t);s.sharedClientState.updateQueryState(e,"rejected",r);const i=s.Au.get(e),a=i&&i.key;if(a){let o=new He(J.comparator);o=o.insert(a,Tt.newNoDocument(a,ne.min()));const l=xe().add(a),c=new td(ne.min(),new Map,new He(ge),o,l);await Pj(s,c),s.du=s.du.remove(a),s.Au.delete(e),Of(s)}else await Um(s.localStore,e,!1).then(()=>$m(s,e,r)).catch(ha)}async function kR(t,e){const r=ie(t),s=e.batch.batchId;try{const i=await VA(r.localStore,e);Mj(r,s,null),Dj(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await cl(r,i)}catch(i){await ha(i)}}async function IR(t,e,r){const s=ie(t);try{const i=await function(o,l){const c=ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(m=>(Ne(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(s.localStore,e);Mj(s,e,r),Dj(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),await cl(s,i)}catch(i){await ha(i)}}function Dj(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function Mj(t,e,r){const s=ie(t);let i=s.Vu[s.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function $m(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),r&&t.Pu.yu(s,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||Lj(t,s)})}function Lj(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(Sf(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),Of(t))}function Ly(t,e,r){for(const s of r)s instanceof Cj?(t.Ru.addReference(s.key,e),CR(t,s)):s instanceof Aj?(G(Lf,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||Lj(t,s.key)):se(19791,{wu:s})}function CR(t,e){const r=e.key,s=r.path.canonicalString();t.du.get(r)||t.Eu.has(s)||(G(Lf,"New document in limbo: "+r),t.Eu.add(s),Of(t))}function Of(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new J(ke.fromString(e)),s=t.fu.next();t.Au.set(s,new vR(r)),t.du=t.du.insert(r,s),_j(t.remoteStore,new Qs(qr(Yu(r.path)),s,"TargetPurposeLimboResolution",Wu.ce))}}async function cl(t,e,r){const s=ie(t),i=[],a=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((l,c)=>{o.push(s.pu(c,e,r).then(d=>{var h;if((d||r)&&s.isPrimaryClient){const m=d?!d.fromCache:(h=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){i.push(d);const m=_f.As(c.targetId,d);a.push(m)}}))}),await Promise.all(o),s.Pu.H_(i),await async function(c,d){const h=ie(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,p=>F.forEach(p.Es,v=>h.persistence.referenceDelegate.addReference(m,p.targetId,v)).next(()=>F.forEach(p.ds,v=>h.persistence.referenceDelegate.removeReference(m,p.targetId,v)))))}catch(m){if(!ma(m))throw m;G(Ef,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const v=h.Ms.get(p),S=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(p,b)}}}(s.localStore,a))}async function AR(t,e){const r=ie(t);if(!r.currentUser.isEqual(e)){G(Lf,"User change. New user:",e.toKey());const s=await bj(r.localStore,e);r.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new H(V.CANCELLED,o))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await cl(r,s.Ls)}}function RR(t,e){const r=ie(t),s=r.Au.get(e);if(s&&s.hu)return xe().add(s.key);{let i=xe();const a=r.Iu.get(e);if(!a)return i;for(const o of a){const l=r.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function Oj(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TR.bind(null,e),e.Pu.H_=fR.bind(null,e.eventManager),e.Pu.yu=gR.bind(null,e.eventManager),e}function PR(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IR.bind(null,e),e}class fu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return OA(this.persistence,new DA,e.initialUser,this.serializer)}Cu(e){return new vj(jf.mi,this.serializer)}Du(e){return new qA}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fu.provider={build:()=>new fu};class DR extends fu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Ne(this.persistence.referenceDelegate instanceof mu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new vA(s,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new vj(s=>mu.mi(s,r),this.serializer)}}class qm{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>My(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=AR.bind(null,this.syncEngine),await hR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pR}()}createDatastore(e){const r=rd(e.databaseInfo.databaseId),s=function(a){return new QA(a)}(e.databaseInfo);return function(a,o,l,c){return new ZA(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,s,r)}createRemoteStore(e){return function(s,i,a,o,l){return new tR(s,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>My(this.syncEngine,r,0),function(){return Iy.v()?new Iy:new HA}())}createSyncEngine(e,r){return function(i,a,o,l,c,d,h){const m=new bR(i,a,o,l,c,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const a=ie(i);G(ei,"RemoteStore shutting down."),a.Ea.add(5),await ll(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}qm.provider={build:()=>new qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="FirestoreClient";class MR{constructor(e,r,s,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=df.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async o=>{G(xn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(G(xn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const s=Af(r,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function jh(t,e){t.asyncQueue.verifyOperationInProgress(),G(xn,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let s=r.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await bj(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Oy(t,e){t.asyncQueue.verifyOperationInProgress();const r=await LR(t);G(xn,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(s=>Ay(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Ay(e.remoteStore,i)),t._onlineComponents=e}async function LR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(xn,"Using user provided OfflineComponentProvider");try{await jh(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Qi("Error using user provided cache. Falling back to memory cache: "+r),await jh(t,new fu)}}else G(xn,"Using default OfflineComponentProvider"),await jh(t,new DR(void 0));return t._offlineComponents}async function Vj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(xn,"Using user provided OnlineComponentProvider"),await Oy(t,t._uninitializedComponentsProvider._online)):(G(xn,"Using default OnlineComponentProvider"),await Oy(t,new qm))),t._onlineComponents}function OR(t){return Vj(t).then(e=>e.syncEngine)}async function gu(t){const e=await Vj(t),r=e.eventManager;return r.onListen=wR.bind(null,e.syncEngine),r.onUnlisten=_R.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=NR.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=ER.bind(null,e.syncEngine),r}function VR(t,e,r={}){const s=new fs;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,d){const h=new Vf({next:p=>{h.Nu(),o.enqueueAndForget(()=>Pf(a,m));const v=p.docs.has(l);!v&&p.fromCache?d.reject(new H(V.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&c&&c.source==="server"?d.reject(new H(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Mf(Yu(l.path),h,{includeMetadataChanges:!0,qa:!0});return Rf(a,m)}(await gu(t),t.asyncQueue,e,r,s)),s.promise}function FR(t,e,r={}){const s=new fs;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,d){const h=new Vf({next:p=>{h.Nu(),o.enqueueAndForget(()=>Pf(a,m)),p.fromCache&&c.source==="server"?d.reject(new H(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Mf(l,h,{includeMetadataChanges:!0,qa:!0});return Rf(a,m)}(await gu(t),t.asyncQueue,e,r,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="firestore.googleapis.com",Fy=!0;class Uy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uj,this.ssl=Fy}else this.host=e.host,this.ssl=e.ssl??Fy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xA)throw new H(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fj(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class id{constructor(e,r,s,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new HI;switch(s.type){case"firstParty":return new QI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new H(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=Vy.get(r);s&&(G("ComponentProvider","Removing Datastore"),Vy.delete(r),s.terminate())}(this),Promise.resolve()}}function UR(t,e,r,s={}){var d;t=Gt(t,id);const i=ni(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;i&&(Qp(`https://${l}`),Yp("Firestore",!0)),a.host!==Uj&&a.host!==l&&Qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:i,emulatorOptions:s};if(!Kn(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,m;if(typeof s.mockUserToken=="string")h=s.mockUserToken,m=Et.MOCK_USER;else{h=Lw(s.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new H(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Et(p)}t._authCredentials=new WI(new IN(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new rs(this.firestore,e,this._query)}}class Ke{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ln(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ke(this.firestore,e,this._key)}toJSON(){return{type:Ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,s){if(il(r,Ke._jsonSchema))return new Ke(e,s||null,new J(ke.fromString(r.referencePath)))}}Ke._jsonSchemaVersion="firestore/documentReference/1.0",Ke._jsonSchema={type:tt("string",Ke._jsonSchemaVersion),referencePath:tt("string")};class ln extends rs{constructor(e,r,s){super(e,r,Yu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new J(e))}withConverter(e){return new ln(this.firestore,e,this._path)}}function te(t,e,...r){if(t=qe(t),CN("collection","path",e),t instanceof id){const s=ke.fromString(e,...r);return ey(s),new ln(t,null,s)}{if(!(t instanceof Ke||t instanceof ln))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ke.fromString(e,...r));return ey(s),new ln(t.firestore,null,s)}}function ce(t,e,...r){if(t=qe(t),arguments.length===1&&(e=df.newId()),CN("doc","path",e),t instanceof id){const s=ke.fromString(e,...r);return Z0(s),new Ke(t,null,new J(s))}{if(!(t instanceof Ke||t instanceof ln))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ke.fromString(e,...r));return Z0(s),new Ke(t.firestore,t instanceof ln?t.converter:null,new J(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="AsyncQueue";class By{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Nj(this,"async_queue_retry"),this._c=()=>{const s=Nh();s&&G(zy,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const r=Nh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Nh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new fs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ma(e))throw e;G(zy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Es("INTERNAL UNHANDLED ERROR: ",$y(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=r,r}enqueueAfterDelay(e,r,s){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=Cf.createAndSchedule(this,e,r,s,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&se(47125,{Pc:$y(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function $y(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){return function(r,s){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of s)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Ts extends id{constructor(e,r,s,i){super(e,r,s,i),this.type="firestore",this._queue=new By,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new By(e),this._firestoreClient=void 0,await e}}}function zR(t,e){const r=typeof t=="object"?t:Zp(),s=typeof t=="string"?t:lu,i=zu(r,"firestore").getImmediate({identifier:s});if(!i._initialized){const a=Pw("firestore");a&&UR(i,...a)}return i}function ad(t){if(t._terminated)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BR(t),t._firestoreClient}function BR(t){var s,i,a;const e=t._freezeSettings(),r=function(l,c,d,h){return new mC(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Fj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new MR(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(yt.fromBase64String(e))}catch(r){throw new H(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new lr(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(il(e,lr._jsonSchema))return lr.fromBase64String(e.bytes)}}lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:tt("string",lr._jsonSchemaVersion),bytes:tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new H(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new H(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new H(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wr._jsonSchemaVersion}}static fromJSON(e){if(il(e,Wr._jsonSchema))return new Wr(e.latitude,e.longitude)}}Wr._jsonSchemaVersion="firestore/geoPoint/1.0",Wr._jsonSchema={type:tt("string",Wr._jsonSchemaVersion),latitude:tt("number"),longitude:tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(il(e,Gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Gr(e.vectorValues);throw new H(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gr._jsonSchemaVersion="firestore/vectorValue/1.0",Gr._jsonSchema={type:tt("string",Gr._jsonSchemaVersion),vectorValues:tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=/^__.*__$/;class qR{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return this.fieldMask!==null?new _n(e,this.data,this.fieldMask,r,this.fieldTransforms):new al(e,this.data,r,this.fieldTransforms)}}class zj{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new _n(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Bj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ac:t})}}class Ff{constructor(e,r,s,i,a,o){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ff({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:r,fc:!1});return s.gc(e),s}yc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:r,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Bj(this.Ac)&&$R.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HR{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||rd(e)}Cc(e,r,s,i=!1){return new Ff({Ac:e,methodName:r,Dc:s,path:ft.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dl(t){const e=t._freezeSettings(),r=rd(t._databaseId);return new HR(t._databaseId,!!e.ignoreUndefinedProperties,r)}function $j(t,e,r,s,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,r,i);Bf("Data must be an object, but it was:",o,s);const l=Hj(s,o);let c,d;if(a.merge)c=new Zt(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const p=Hm(e,m,r);if(!o.contains(p))throw new H(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Gj(h,p)||h.push(p)}c=new Zt(h),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new qR(new Bt(l),c,d)}class ld extends ul{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ld}}class Uf extends ul{_toFieldTransform(e){return new ij(e.path,new zo)}isEqual(e){return e instanceof Uf}}class zf extends ul{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new qo(e.serializer,ej(e.serializer,this.Fc));return new ij(e.path,r)}isEqual(e){return e instanceof zf&&this.Fc===e.Fc}}function WR(t,e,r,s){const i=t.Cc(1,e,r);Bf("Data must be an object, but it was:",i,s);const a=[],o=Bt.empty();jn(s,(c,d)=>{const h=$f(e,c,r);d=qe(d);const m=i.yc(h);if(d instanceof ld)a.push(h);else{const p=hl(d,m);p!=null&&(a.push(h),o.set(h,p))}});const l=new Zt(a);return new zj(o,l,i.fieldTransforms)}function GR(t,e,r,s,i,a){const o=t.Cc(1,e,r),l=[Hm(e,s,r)],c=[i];if(a.length%2!=0)throw new H(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(Hm(e,a[p])),c.push(a[p+1]);const d=[],h=Bt.empty();for(let p=l.length-1;p>=0;--p)if(!Gj(d,l[p])){const v=l[p];let S=c[p];S=qe(S);const b=o.yc(v);if(S instanceof ld)d.push(v);else{const N=hl(S,b);N!=null&&(d.push(v),h.set(v,N))}}const m=new Zt(d);return new zj(h,m,o.fieldTransforms)}function qj(t,e,r,s=!1){return hl(r,t.Cc(s?4:3,e))}function hl(t,e){if(Wj(t=qe(t)))return Bf("Unsupported field value:",e,t),Hj(t,e);if(t instanceof ul)return function(s,i){if(!Bj(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,i){const a=[];let o=0;for(const l of s){let c=hl(l,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(s,i){if((s=qe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ej(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=De.fromDate(s);return{timestampValue:hu(i.serializer,a)}}if(s instanceof De){const a=new De(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:hu(i.serializer,a)}}if(s instanceof Wr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof lr)return{bytesValue:dj(i.serializer,s._byteString)};if(s instanceof Ke){const a=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:wf(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Gr)return function(o,l){return{mapValue:{fields:{[FN]:{stringValue:UN},[cu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return xf(l.serializer,d)})}}}}}}(s,i);throw i.Sc(`Unsupported field value: ${Hu(s)}`)}(t,e)}function Hj(t,e){const r={};return PN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jn(t,(s,i)=>{const a=hl(i,e.mc(s));a!=null&&(r[s]=a)}),{mapValue:{fields:r}}}function Wj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Wr||t instanceof lr||t instanceof Ke||t instanceof ul||t instanceof Gr)}function Bf(t,e,r){if(!Wj(r)||!AN(r)){const s=Hu(r);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Hm(t,e,r){if((e=qe(e))instanceof od)return e._internalPath;if(typeof e=="string")return $f(t,e);throw xu("Field path arguments must be of type string or ",t,!1,void 0,r)}const KR=new RegExp("[~\\*/\\[\\]]");function $f(t,e,r){if(e.search(KR)>=0)throw xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new od(...e.split("."))._internalPath}catch{throw xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function xu(t,e,r,s,i){const a=s&&!s.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new H(V.INVALID_ARGUMENT,l+t+c)}function Gj(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,r,s,i,a){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(cd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class QR extends qf{data(){return super.data()}}function cd(t,e){return typeof e=="string"?$f(t,e):e instanceof od?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hf{}class ud extends Hf{}function _e(t,e,...r){let s=[];e instanceof Hf&&s.push(e),s=s.concat(r),function(a){const o=a.filter(c=>c instanceof pl).length,l=a.filter(c=>c instanceof ml).length;if(o>1||o>0&&l>0)throw new H(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}class ml extends ud{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new ml(e,r,s)}_apply(e){const r=this._parse(e);return Yj(e._query,r),new rs(e.firestore,e.converter,Mm(e._query,r))}_parse(e){const r=dl(e.firestore);return function(a,o,l,c,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Wy(m,h);const S=[];for(const b of m)S.push(Hy(c,a,b));p={arrayValue:{values:S}}}else p=Hy(c,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Wy(m,h),p=qj(l,o,m,h==="in"||h==="not-in");return et.create(d,h,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function ae(t,e,r){const s=e,i=cd("where",t);return ml._create(i,s,r)}class pl extends Hf{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new pl(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return r.length===1?r[0]:Cr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)Yj(o,c),o=Mm(o,c)}(e._query,r),new rs(e.firestore,e.converter,Mm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Qj(...t){return t.forEach(e=>XR("or",e)),pl._create("or",t)}class Wf extends ud{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Wf(e,r)}_apply(e){const r=function(i,a,o){if(i.startAt!==null)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uo(a,o)}(e._query,this._field,this._direction);return new rs(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new ai(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function Ie(t,e="asc"){const r=e,s=cd("orderBy",t);return Wf._create(s,r)}class Gf extends ud{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new Gf(e,r,s)}_apply(e){return new rs(e.firestore,e.converter,du(e._query,this._limit,this._limitType))}}function Kr(t){return rC("limit",t),Gf._create("limit",t,"F")}class Kf extends ud{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Kf(e,r,s)}_apply(e){const r=JR(e,this.type,this._docOrFields,this._inclusive);return new rs(e.firestore,e.converter,function(i,a){return new ai(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,r))}}function YR(...t){return Kf._create("startAfter",t,!1)}function JR(t,e,r,s){if(r[0]=qe(r[0]),r[0]instanceof qf)return function(a,o,l,c,d){if(!c)throw new H(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const m of Ui(a))if(m.field.isKeyField())h.push(uu(o,c.key));else{const p=c.data.field(m.field);if(Ku(p))throw new H(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const v=m.field.canonicalString();throw new H(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(p)}return new Zi(h,d)}(t._query,t.firestore._databaseId,e,r[0]._document,s);{const i=dl(t.firestore);return function(o,l,c,d,h,m){const p=o.explicitOrderBy;if(h.length>p.length)throw new H(V.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let S=0;S<h.length;S++){const b=h[S];if(p[S].field.isKeyField()){if(typeof b!="string")throw new H(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof b}`);if(!gf(o)&&b.indexOf("/")!==-1)throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${b}' contains a slash.`);const N=o.path.child(ke.fromString(b));if(!J.isDocumentKey(N))throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const g=new J(N);v.push(uu(l,g))}else{const N=qj(c,d,b);v.push(N)}}return new Zi(v,m)}(t._query,t.firestore._databaseId,i,e,r,s)}}function Hy(t,e,r){if(typeof(r=qe(r))=="string"){if(r==="")throw new H(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gf(e)&&r.indexOf("/")!==-1)throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child(ke.fromString(r));if(!J.isDocumentKey(s))throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return uu(t,new J(s))}if(r instanceof Ke)return uu(t,r._key);throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hu(r)}.`)}function Wy(t,e){if(!Array.isArray(t)||t.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yj(t,e){const r=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function XR(t,e){if(!(e instanceof ml||e instanceof pl))throw new H(V.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class ZR{convertValue(e,r="none"){switch(fn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(pn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return jn(e,(i,a)=>{s[i]=this.convertValue(a,r)}),s}convertVectorValue(e){var s,i,a;const r=(a=(i=(s=e.fields)==null?void 0:s[cu].arrayValue)==null?void 0:i.values)==null?void 0:a.map(o=>Ye(o.doubleValue));return new Gr(r)}convertGeoPoint(e){return new Wr(Ye(e.latitude),Ye(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=Qu(e);return s==null?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Oo(e));default:return null}}convertTimestamp(e){const r=mn(e);return new De(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=ke.fromString(e);Ne(xj(s),9688,{name:e});const i=new Vo(s.get(1),s.get(3)),a=new J(s.popFirst(5));return i.isEqual(r)||Es(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t,e,r){let s;return s=t?t.toFirestore(e):e,s}class Ya{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Un extends qf{constructor(e,r,s,i,a,o){super(e,r,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(cd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Un._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Un._jsonSchemaVersion="firestore/documentSnapshot/1.0",Un._jsonSchema={type:tt("string",Un._jsonSchemaVersion),bundleSource:tt("string","DocumentSnapshot"),bundleName:tt("string"),bundle:tt("string")};class _c extends Un{data(e={}){return super.data(e)}}class zn{constructor(e,r,s,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Ya(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new _c(this._firestore,this._userDataWriter,s.key,s,new Ya(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new H(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new _c(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ya(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new _c(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ya(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:eP(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=df.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],s=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),s.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t){t=Gt(t,Ke);const e=Gt(t.firestore,Ts);return VR(ad(e),t._key).then(r=>Xj(e,t,r))}zn._jsonSchemaVersion="firestore/querySnapshot/1.0",zn._jsonSchema={type:tt("string",zn._jsonSchemaVersion),bundleSource:tt("string","QuerySnapshot"),bundleName:tt("string"),bundle:tt("string")};class Qf extends ZR{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,r)}}function It(t){t=Gt(t,rs);const e=Gt(t.firestore,Ts),r=ad(e),s=new Qf(e);return Kj(t._query),FR(r,t._query).then(i=>new zn(e,s,t,i))}function Ja(t,e,r){t=Gt(t,Ke);const s=Gt(t.firestore,Ts),i=Jj(t.converter,e);return dd(s,[$j(dl(s),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,dr.none())])}function Ve(t,e,r,...s){t=Gt(t,Ke);const i=Gt(t.firestore,Ts),a=dl(i);let o;return o=typeof(e=qe(e))=="string"||e instanceof od?GR(a,"updateDoc",t._key,e,r,s):WR(a,"updateDoc",t._key,e),dd(i,[o.toMutation(t._key,dr.exists(!0))])}function fl(t){return dd(Gt(t.firestore,Ts),[new yf(t._key,dr.none())])}function dt(t,e){const r=Gt(t.firestore,Ts),s=ce(t),i=Jj(t.converter,e);return dd(r,[$j(dl(t.firestore),"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,dr.exists(!1))]).then(()=>s)}function vt(t,...e){var c,d,h;t=qe(t);let r={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||qy(e[s])||(r=e[s++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(qy(e[s])){const m=e[s];e[s]=(c=m.next)==null?void 0:c.bind(m),e[s+1]=(d=m.error)==null?void 0:d.bind(m),e[s+2]=(h=m.complete)==null?void 0:h.bind(m)}let a,o,l;if(t instanceof Ke)o=Gt(t.firestore,Ts),l=Yu(t._key.path),a={next:m=>{e[s]&&e[s](Xj(o,t,m))},error:e[s+1],complete:e[s+2]};else{const m=Gt(t,rs);o=Gt(m.firestore,Ts),l=m._query;const p=new Qf(o);a={next:v=>{e[s]&&e[s](new zn(o,p,m,v))},error:e[s+1],complete:e[s+2]},Kj(t._query)}return function(p,v,S,b){const N=new Vf(b),g=new Mf(v,N,S);return p.asyncQueue.enqueueAndForget(async()=>Rf(await gu(p),g)),()=>{N.Nu(),p.asyncQueue.enqueueAndForget(async()=>Pf(await gu(p),g))}}(ad(o),l,i,a)}function dd(t,e){return function(s,i){const a=new fs;return s.asyncQueue.enqueueAndForget(async()=>SR(await OR(s),i,a)),a.promise}(ad(t),e)}function Xj(t,e,r){const s=r.docs.get(e._key),i=new Qf(t);return new Un(t,i,e._key,s,new Ya(r.hasPendingWrites,r.fromCache),e.converter)}function ue(){return new Uf("serverTimestamp")}function po(t){return new zf("increment",t)}(function(e,r=!0){(function(i){da=i})(ii),Qn(new dn("firestore",(s,{instanceIdentifier:i,options:a})=>{const o=s.getProvider("app").getImmediate(),l=new Ts(new GI(s.getProvider("auth-internal")),new YI(o,s.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vo(d.options.projectId,h)}(o,i),o);return a={useFetchStreams:r,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),zr(Q0,Y0,e),zr(Q0,Y0,"esm2020")})();var tP="firebase",rP="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr(tP,rP,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="firebasestorage.googleapis.com",sP="storageBucket",nP=2*60*1e3,iP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends ts{constructor(e,r,s=0){super(_h(e),`Firebase Storage: ${r} (${_h(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ss.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _h(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xr||(Xr={}));function _h(t){return"storage/"+t}function aP(){const t="An unknown error occurred, please check the error payload for server response.";return new ss(Xr.UNKNOWN,t)}function oP(){return new ss(Xr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lP(){return new ss(Xr.CANCELED,"User canceled the upload/download.")}function cP(t){return new ss(Xr.INVALID_URL,"Invalid URL '"+t+"'.")}function uP(t){return new ss(Xr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Gy(t){return new ss(Xr.INVALID_ARGUMENT,t)}function e_(){return new ss(Xr.APP_DELETED,"The Firebase app was deleted.")}function dP(t){return new ss(Xr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let s;try{s=_r.makeFromUrl(e,r)}catch{return new _r(e,"")}if(s.path==="")return s;throw uP(e)}static makeFromUrl(e,r){let s=null;const i="([A-Za-z0-9.\\-_]+)";function a(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${h}/b/${i}/o${p}`,"i"),S={bucket:1,path:3},b=r===Zj?"(?:storage.googleapis.com|storage.cloud.google.com)":r,N="([^?#]*)",g=new RegExp(`^https?://${b}/${i}/${N}`,"i"),j=[{regex:l,indices:c,postModify:a},{regex:v,indices:S,postModify:d},{regex:g,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<j.length;R++){const M=j[R],D=M.regex.exec(e);if(D){const T=D[M.indices.bucket];let _=D[M.indices.path];_||(_=""),s=new _r(T,_),M.postModify(s);break}}if(s==null)throw cP(e);return s}}class hP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t,e,r){let s=1,i=null,a=null,o=!1,l=0;function c(){return l===2}let d=!1;function h(...N){d||(d=!0,e.apply(null,N))}function m(N){i=setTimeout(()=>{i=null,t(v,c())},N)}function p(){a&&clearTimeout(a)}function v(N,...g){if(d){p();return}if(N){p(),h.call(null,N,...g);return}if(c()||o){p(),h.call(null,N,...g);return}s<64&&(s*=2);let j;l===1?(l=2,j=0):j=(s+Math.random())*1e3,m(j)}let S=!1;function b(N){S||(S=!0,p(),!d&&(i!==null?(N||(l=2),clearTimeout(i),m(0)):N||(l=1)))}return m(0),a=setTimeout(()=>{o=!0,b(!0)},r),b}function pP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){return t!==void 0}function Ky(t,e,r,s){if(s<e)throw Gy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>r)throw Gy(`Invalid value for '${t}'. Expected ${r} or less.`)}function gP(t){const e=encodeURIComponent;let r="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);r=r+i+"&"}return r=r.slice(0,-1),r}var yu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(yu||(yu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,r,s,i,a,o,l,c,d,h,m,p=!0,v=!1){this.url_=e,this.method_=r,this.headers_=s,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,b)=>{this.resolve_=S,this.reject_=b,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new Zl(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===yu.NO_ERROR,c=a.getStatus();if(!l||xP(c,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===yu.ABORT;s(!1,new Zl(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;s(!0,new Zl(d,a))})},r=(s,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());fP(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=aP();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?e_():lP();o(c)}else{const c=oP();o(c)}};this.canceled_?r(!1,new Zl(!1,null,!0)):this.backoffId_=mP(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&pP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zl{constructor(e,r,s){this.wasSuccessCode=e,this.connection=r,this.canceled=!!s}}function vP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function bP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function jP(t,e,r,s,i,a,o=!0,l=!1){const c=gP(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return wP(h,e),vP(h,r),bP(h,a),NP(h,s),new yP(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function EP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,r){this._service=e,r instanceof _r?this._location=r:this._location=_r.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new vu(e,r)}get root(){const e=new _r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EP(this._location.path)}get storage(){return this._service}get parent(){const e=_P(this._location.path);if(e===null)return null;const r=new _r(this._location.bucket,e);return new vu(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw dP(e)}}function Qy(t,e){const r=e==null?void 0:e[sP];return r==null?null:_r.makeFromBucketSpec(r,t)}function SP(t,e,r,s={}){t.host=`${e}:${r}`;const i=ni(e);i&&(Qp(`https://${t.host}/b`),Yp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=s;a&&(t._overrideAuthToken=typeof a=="string"?a:Lw(a,t.app.options.projectId))}class TP{constructor(e,r,s,i,a,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=s,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=Zj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nP,this._maxUploadRetryTime=iP,this._requests=new Set,i!=null?this._bucket=_r.makeFromBucketSpec(i,this._host):this._bucket=Qy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_r.makeFromBucketSpec(this._url,e):this._bucket=Qy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ky("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ky("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vu(this,e)}_makeRequest(e,r,s,i,a=!0){if(this._deleted)return new hP(e_());{const o=jP(e,this._appId,s,i,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,s,i).getPromise()}}const Yy="@firebase/storage",Jy="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="storage";function kP(t=Zp(),e){t=qe(t);const s=zu(t,t_).getImmediate({identifier:e}),i=Pw("storage");return i&&IP(s,...i),s}function IP(t,e,r,s={}){SP(t,e,r,s)}function CP(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new TP(r,s,i,e,ii)}function AP(){Qn(new dn(t_,CP,"PUBLIC").setMultipleInstances(!0)),zr(Yy,Jy,""),zr(Yy,Jy,"esm2020")}AP();const RP={apiKey:"AIzaSyBbTfR42ZW61pY4x2_3YYsqZyPv5I6tFoU",authDomain:"jonna-8cd90.firebaseapp.com",projectId:"jonna-8cd90",storageBucket:"jonna-8cd90.firebasestorage.app",messagingSenderId:"152710460832",appId:"1:152710460832:web:74928c608ca5c55b71e0c5"};let ec,is,$,PP;try{ec=Fw(RP),is=$I(ec),$=zR(ec),PP=kP(ec)}catch(t){throw console.error("Firebase initialization error:",t),t}class DP{constructor(){Cn(this,"currentUser",null)}async signIn(e,r){try{const s=await Sk(is,e,r),i=await this.getUserData(s.user.uid);if(!i)throw new Error("User data not found");return await this.updateLastLogin(i.uid),this.currentUser=i,i}catch(s){throw console.error("Sign in error:",s),new Error(s.message||"Failed to sign in")}}async signUp(e,r,s){try{const a=(await Ek(is,e,r)).user;s&&await nu(a,{displayName:s});const o={uid:a.uid,email:a.email,role:"user",createdAt:ue(),updatedAt:ue(),lastLoginAt:ue()};return(s||a.displayName)&&(o.displayName=s||a.displayName),a.photoURL&&(o.photoURL=a.photoURL),await Ja(ce($,"users",a.uid),o),this.currentUser=o,o}catch(i){throw console.error("Sign up error:",i),new Error(i.message||"Failed to sign up")}}async signOut(){try{await Rk(is),this.currentUser=null}catch(e){throw console.error("Sign out error:",e),new Error(e.message||"Failed to sign out")}}async resetPassword(e){try{await _k(is,e)}catch(r){throw console.error("Password reset error:",r),new Error(r.message||"Failed to send password reset email")}}async updateUserPassword(e){const r=is.currentUser;if(!r)throw new Error("No user is currently signed in");try{await of(r,e)}catch(s){throw console.error("Update password error:",s),new Error(s.message||"Failed to update password")}}async updateUserProfile(e){const r=is.currentUser;if(!r)throw new Error("No user is currently signed in");try{await nu(r,e),await Ve(ce($,"users",r.uid),{...e,updatedAt:ue()})}catch(s){throw console.error("Update profile error:",s),new Error(s.message||"Failed to update profile")}}async getUserData(e){try{const r=await Yt(ce($,"users",e));return r.exists()?r.data():null}catch(r){return console.error("Get user data error:",r),null}}async updateLastLogin(e){try{await Ve(ce($,"users",e),{lastLoginAt:ue()})}catch(r){console.error("Update last login error:",r)}}async updateUserRole(e,r){const s=this.getCurrentUser();if(!s||s.role!=="admin")throw new Error("Unauthorized: Only admins can update user roles");try{await Ve(ce($,"users",e),{role:r,updatedAt:ue()})}catch(i){throw console.error("Update user role error:",i),new Error(i.message||"Failed to update user role")}}onAuthStateChange(e){return Ak(is,async r=>{if(r){const s=await this.getUserData(r.uid);this.currentUser=s,e(s)}else this.currentUser=null,e(null)})}getCurrentUser(){return this.currentUser}getFirebaseUser(){return is.currentUser}isAuthenticated(){return this.currentUser!==null}isAdmin(){var e;return((e=this.currentUser)==null?void 0:e.role)==="admin"}async checkAdminAccess(){const e=this.getCurrentUser();if(!e)return!1;const r=await this.getUserData(e.uid);return(r==null?void 0:r.role)==="admin"}}const je=new DP;class MP{constructor(){Cn(this,"collectionName","beats")}async getPublishedBeats(){try{const e=_e(te($,this.collectionName),ae("status","==","published"),Ie("createdAt","desc")),r=await It(e),s=[];return r.forEach(i=>{s.push({id:i.id,...i.data()})}),s}catch(e){return console.error("Get published beats error:",e),[]}}async createBeat(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can create beats");try{const s={...e,plays:0,downloads:0,likes:0,createdBy:r.uid,lastUpdatedBy:r.uid,createdAt:ue(),updatedAt:ue()},i=await dt(te($,this.collectionName),s),a=await this.getBeatById(i.id);if(!a)throw new Error("Failed to retrieve created beat");return a}catch(s){throw console.error("Create beat error:",s),new Error(s.message||"Failed to create beat")}}async getBeatById(e){try{const r=await Yt(ce($,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get beat by ID error:",r),null}}async getAllBeats(e){try{const r=[];e!=null&&e.status&&r.push(ae("status","==",e.status)),e!=null&&e.genre&&r.push(ae("genre","==",e.genre)),(e==null?void 0:e.featured)!==void 0&&r.push(ae("featured","==",e.featured)),r.push(Ie("createdAt","desc"));const s=(e==null?void 0:e.pageSize)||20;r.push(Kr(s+1)),e!=null&&e.lastDoc&&r.push(YR(e.lastDoc));const i=_e(te($,this.collectionName),...r),a=await It(i),o=[];a.forEach(c=>{o.length<s&&o.push({id:c.id,...c.data()})});const l=a.docs.length>s;return{data:o,total:o.length,page:0,pageSize:s,hasMore:l}}catch(r){return console.error("Get all beats error:",r),{data:[],total:0,page:0,pageSize:(e==null?void 0:e.pageSize)||20,hasMore:!1}}}async updateBeat(e,r){const s=je.getCurrentUser();if(!s||s.role!=="admin")throw new Error("Unauthorized");try{await Ve(ce($,this.collectionName,e),{...r,lastUpdatedBy:s.uid,updatedAt:ue()})}catch(i){throw console.error("Update beat error:",i),new Error(i.message||"Failed to update beat")}}async deleteBeat(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized");try{await fl(ce($,this.collectionName,e))}catch(s){throw console.error("Delete beat error:",s),new Error(s.message||"Failed to delete beat")}}async getFeaturedBeats(){try{const e=_e(te($,this.collectionName),ae("featured","==",!0),ae("status","==","published"),Ie("createdAt","desc"),Kr(6)),r=await It(e),s=[];return r.forEach(i=>{s.push({id:i.id,...i.data()})}),s}catch(e){return console.error("Get featured beats error:",e),[]}}async getTrendingBeats(){try{const e=_e(te($,this.collectionName),ae("trending","==",!0),ae("status","==","published"),Ie("plays","desc"),Kr(10)),r=await It(e),s=[];return r.forEach(i=>{s.push({id:i.id,...i.data()})}),s}catch(e){return console.error("Get trending beats error:",e),[]}}async getGenres(){try{const e=await It(te($,this.collectionName)),r=new Set;return e.forEach(s=>{const i=s.data();i.genre&&r.add(i.genre)}),Array.from(r).sort()}catch(e){return console.error("Get genres error:",e),[]}}subscribeToBeats(e,r){const s=[Ie("createdAt","desc")];r!=null&&r.status&&s.push(ae("status","==",r.status)),(r==null?void 0:r.featured)!==void 0&&s.push(ae("featured","==",r.featured)),r!=null&&r.genre&&s.push(ae("genre","==",r.genre));const i=_e(te($,this.collectionName),...s);return vt(i,a=>{const o=[];a.forEach(l=>{o.push({id:l.id,...l.data()})}),e(o)},a=>{console.error("Subscribe to beats error:",a)})}async incrementPlays(e){try{await Ve(ce($,this.collectionName,e),{plays:po(1)})}catch(r){console.error("Increment plays error:",r)}}async incrementDownloads(e){try{await Ve(ce($,this.collectionName,e),{downloads:po(1)})}catch(r){console.error("Increment downloads error:",r)}}}const ks=new MP;class LP{constructor(){Cn(this,"collectionName","orders")}generateOrderNumber(){const e=new Date().getFullYear(),r=Math.floor(Math.random()*99999).toString().padStart(5,"0");return`JR-${e}-${r}`}async createOrder(e){try{const r={...e,orderNumber:this.generateOrderNumber(),createdAt:ue(),updatedAt:ue()},s=await dt(te($,this.collectionName),r),i=await this.getOrderById(s.id);if(!i)throw new Error("Failed to retrieve created order");return i}catch(r){throw console.error("Create order error:",r),new Error(r.message||"Failed to create order")}}async getOrderById(e){try{const r=await Yt(ce($,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get order by ID error:",r),null}}async getOrderByNumber(e){try{const r=_e(te($,this.collectionName),ae("orderNumber","==",e),Kr(1)),s=await It(r);if(!s.empty){const i=s.docs[0];return{id:i.id,...i.data()}}return null}catch(r){return console.error("Get order by number error:",r),null}}async getAllOrders(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can view all orders");try{const s=[];e!=null&&e.status&&s.push(ae("status","==",e.status));const i=(e==null?void 0:e.orderByField)||"createdAt",a=(e==null?void 0:e.orderDirection)||"desc";s.push(Ie(i,a)),e!=null&&e.limit&&s.push(Kr(e.limit));const o=_e(te($,this.collectionName),...s),l=await It(o),c=[];return l.forEach(d=>{c.push({id:d.id,...d.data()})}),c}catch(s){throw console.error("Get all orders error:",s),new Error("Failed to fetch orders")}}async getOrdersByCustomer(e){try{const r=_e(te($,this.collectionName),ae("customerEmail","==",e),Ie("createdAt","desc")),s=await It(r),i=[];return s.forEach(a=>{i.push({id:a.id,...a.data()})}),i}catch(r){throw console.error("Get orders by customer error:",r),new Error("Failed to fetch customer orders")}}async updateOrderStatus(e,r,s){const i=je.getCurrentUser();if(!i||i.role!=="admin")throw new Error("Unauthorized: Only admins can update order status");try{const a={status:r,updatedAt:ue()};r==="completed"&&(a.completedAt=ue()),s&&(a.adminNote=s),await Ve(ce($,this.collectionName,e),a)}catch(a){throw console.error("Update order status error:",a),new Error(a.message||"Failed to update order status")}}async updateOrder(e,r){const s=je.getCurrentUser();if(!s||s.role!=="admin")throw new Error("Unauthorized: Only admins can update orders");try{const i={...r,updatedAt:ue()};delete i.id,delete i.createdAt,delete i.orderNumber,await Ve(ce($,this.collectionName,e),i)}catch(i){throw console.error("Update order error:",i),new Error(i.message||"Failed to update order")}}async addDownloadLinks(e,r){try{await Ve(ce($,this.collectionName,e),{downloadLinks:r,updatedAt:ue()})}catch(s){throw console.error("Add download links error:",s),new Error(s.message||"Failed to add download links")}}async addLicensePDFs(e,r){try{await Ve(ce($,this.collectionName,e),{licensePDFs:r,updatedAt:ue()})}catch(s){throw console.error("Add license PDFs error:",s),new Error(s.message||"Failed to add license PDFs")}}async getOrderStatistics(){const e=je.getCurrentUser();if(!e||e.role!=="admin")throw new Error("Unauthorized: Only admins can view statistics");try{const r=await It(te($,this.collectionName));let s=0,i=0,a=0,o=0;r.forEach(c=>{const d=c.data();s++,d.status==="completed"&&(i+=d.total,o++),(d.status==="pending"||d.status==="processing")&&a++});const l=s>0?i/o:0;return{totalOrders:s,totalRevenue:i,pendingOrders:a,completedOrders:o,averageOrderValue:l}}catch(r){throw console.error("Get order statistics error:",r),new Error("Failed to fetch order statistics")}}async getRecentOrders(e=10){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can view recent orders");try{const s=_e(te($,this.collectionName),Ie("createdAt","desc"),Kr(e)),i=await It(s),a=[];return i.forEach(o=>{a.push({id:o.id,...o.data()})}),a}catch(s){return console.error("Get recent orders error:",s),[]}}subscribeToOrders(e,r){const s=je.getCurrentUser();if(!s||s.role!=="admin")throw new Error("Unauthorized: Only admins can subscribe to orders");const i=[Ie("createdAt","desc")];r!=null&&r.status&&i.push(ae("status","==",r.status)),r!=null&&r.customerId&&i.push(ae("customerId","==",r.customerId));const a=_e(te($,this.collectionName),...i);return vt(a,o=>{const l=[];o.forEach(c=>{l.push({id:c.id,...c.data()})}),e(l)},o=>{console.error("Subscribe to orders error:",o)})}subscribeToOrder(e,r){return vt(ce($,this.collectionName,e),s=>{s.exists()?r({id:s.id,...s.data()}):r(null)},s=>{console.error("Subscribe to order error:",s),r(null)})}}const Zr=new LP;class OP{constructor(){Cn(this,"collectionName","content")}async createContent(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can create content");try{const s={...e,author:r.uid,authorName:r.displayName||r.email,views:0,likes:0,shares:0,createdAt:ue(),updatedAt:ue()},i=await dt(te($,this.collectionName),s),a=await this.getContentById(i.id);if(!a)throw new Error("Failed to retrieve created content");return a}catch(s){throw console.error("Create content error:",s),new Error(s.message||"Failed to create content")}}async getContentById(e){try{const r=await Yt(ce($,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get content by ID error:",r),null}}async getContentBySlug(e){try{const r=_e(te($,this.collectionName),ae("slug","==",e),Kr(1)),s=await It(r);if(!s.empty){const i=s.docs[0];return{id:i.id,...i.data()}}return null}catch(r){return console.error("Get content by slug error:",r),null}}async getAllContent(e){try{const r=[];e!=null&&e.type&&r.push(ae("type","==",e.type)),e!=null&&e.status&&r.push(ae("status","==",e.status)),(e==null?void 0:e.featured)!==void 0&&r.push(ae("featured","==",e.featured)),e!=null&&e.category&&r.push(ae("category","==",e.category)),r.push(Ie("createdAt","desc")),e!=null&&e.limitCount&&r.push(Kr(e.limitCount));const s=_e(te($,this.collectionName),...r),i=await It(s),a=[];return i.forEach(o=>{a.push({id:o.id,...o.data()})}),a}catch(r){throw console.error("Get all content error:",r),new Error("Failed to fetch content")}}async getPublishedContent(e,r){try{const s=[ae("status","==","published"),Ie("publishedAt","desc")];e&&s.push(ae("type","==",e)),r&&s.push(Kr(r));const i=_e(te($,this.collectionName),...s),a=await It(i),o=[];return a.forEach(l=>{o.push({id:l.id,...l.data()})}),o}catch(s){return console.error("Get published content error:",s),[]}}async getFeaturedContent(e){try{const r=[ae("featured","==",!0),ae("status","==","published"),Ie("publishedAt","desc")];e&&r.push(ae("type","==",e));const s=_e(te($,this.collectionName),...r),i=await It(s),a=[];return i.forEach(o=>{a.push({id:o.id,...o.data()})}),a}catch(r){return console.error("Get featured content error:",r),[]}}async updateContent(e,r){const s=je.getCurrentUser();if(!s||s.role!=="admin")throw new Error("Unauthorized: Only admins can update content");try{const i={...r,updatedAt:ue()};r.status==="published"&&!r.publishedAt&&(i.publishedAt=ue()),delete i.id,delete i.createdAt,delete i.author,await Ve(ce($,this.collectionName,e),i)}catch(i){throw console.error("Update content error:",i),new Error(i.message||"Failed to update content")}}async deleteContent(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can delete content");try{await fl(ce($,this.collectionName,e))}catch(s){throw console.error("Delete content error:",s),new Error(s.message||"Failed to delete content")}}async incrementViews(e){try{await Ve(ce($,this.collectionName,e),{views:po(1)})}catch(r){console.error("Increment views error:",r)}}async incrementLikes(e){try{await Ve(ce($,this.collectionName,e),{likes:po(1)})}catch(r){console.error("Increment likes error:",r)}}async incrementShares(e){try{await Ve(ce($,this.collectionName,e),{shares:po(1)})}catch(r){console.error("Increment shares error:",r)}}subscribeToContent(e,r){const s=[Ie("createdAt","desc")];r!=null&&r.type&&s.push(ae("type","==",r.type)),r!=null&&r.status&&s.push(ae("status","==",r.status)),(r==null?void 0:r.featured)!==void 0&&s.push(ae("featured","==",r.featured));const i=_e(te($,this.collectionName),...s);return vt(i,a=>{const o=[];a.forEach(l=>{o.push({id:l.id,...l.data()})}),e(o)},a=>{console.error("Subscribe to content error:",a)})}}const VP=new OP;class FP{constructor(){Cn(this,"collectionName","collaborations")}async getAll(){try{const e=await It(te($,this.collectionName)),r=[];return e.forEach(s=>{r.push({id:s.id,...s.data()})}),r}catch(e){return console.error("Get all collaborations error:",e),[]}}async createCollaboration(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can create collaborations");try{const s={...e,paidAmount:0,createdBy:r.uid,createdAt:ue(),updatedAt:ue()},i=await dt(te($,this.collectionName),s),a=await this.getCollaborationById(i.id);if(!a)throw new Error("Failed to retrieve created collaboration");return a}catch(s){throw console.error("Create collaboration error:",s),new Error(s.message||"Failed to create collaboration")}}async getCollaborationById(e){try{const r=await Yt(ce($,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get collaboration by ID error:",r),null}}async getAllCollaborations(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can view collaborations");try{const s=[];e!=null&&e.status&&s.push(ae("status","==",e.status)),e!=null&&e.type&&s.push(ae("type","==",e.type)),s.push(Ie("createdAt","desc")),e!=null&&e.limitCount&&s.push(Kr(e.limitCount));const i=_e(te($,this.collectionName),...s),a=await It(i),o=[];return a.forEach(l=>{o.push({id:l.id,...l.data()})}),o}catch(s){throw console.error("Get all collaborations error:",s),new Error("Failed to fetch collaborations")}}async updateCollaboration(e,r){const s=je.getCurrentUser();if(!s||s.role!=="admin")throw new Error("Unauthorized");try{await Ve(ce($,this.collectionName,e),{...r,updatedAt:ue()})}catch(i){throw console.error("Update collaboration error:",i),new Error(i.message||"Failed to update collaboration")}}async deleteCollaboration(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized");try{await fl(ce($,this.collectionName,e))}catch(s){throw console.error("Delete collaboration error:",s),new Error(s.message||"Failed to delete collaboration")}}subscribeToCollaborations(e,r){try{const s=[Ie("createdAt","desc")];r!=null&&r.status&&s.push(ae("status","==",r.status)),r!=null&&r.type&&s.push(ae("type","==",r.type));const i=_e(te($,this.collectionName),...s);return vt(i,a=>{const o=[];a.forEach(l=>{o.push({id:l.id,...l.data()})}),e(o)})}catch(s){return console.error("Subscribe to collaborations error:",s),()=>{}}}async getCollaborationStats(){try{const e=await this.getAll();return{total:e.length,active:e.filter(s=>["agreed","contract_sent","signed","in_progress"].includes(s.status)).length,completed:e.filter(s=>s.status==="completed").length,totalRevenue:e.reduce((s,i)=>s+i.paidAmount,0),pendingRevenue:e.reduce((s,i)=>s+(i.budget-i.paidAmount),0)}}catch(e){return console.error("Get collaboration stats error:",e),{total:0,active:0,completed:0,totalRevenue:0,pendingRevenue:0}}}}const Ho=new FP;class UP{constructor(){Cn(this,"collectionName","settings")}async getShopSettings(){try{const e=ce($,this.collectionName,"shop"),r=await Yt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get shop settings error:",e),new Error(e.message||"Failed to get shop settings")}}async saveShopSettings(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const s=ce($,this.collectionName,"shop"),i={...e,updatedAt:ue(),updatedBy:r.uid};(await Yt(s)).exists()?await Ve(s,i):await Ja(s,i)}catch(s){throw console.error("Save shop settings error:",s),new Error(s.message||"Failed to save shop settings")}}async getGeneralSettings(){try{const e=ce($,this.collectionName,"general"),r=await Yt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get general settings error:",e),new Error(e.message||"Failed to get general settings")}}async saveGeneralSettings(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const s=ce($,this.collectionName,"general"),i={...e,updatedAt:ue(),updatedBy:r.uid};(await Yt(s)).exists()?await Ve(s,i):await Ja(s,i)}catch(s){throw console.error("Save general settings error:",s),new Error(s.message||"Failed to save general settings")}}async getNotificationSettings(){try{const e=ce($,this.collectionName,"notifications"),r=await Yt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get notification settings error:",e),new Error(e.message||"Failed to get notification settings")}}async saveNotificationSettings(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const s=ce($,this.collectionName,"notifications"),i={...e,updatedAt:ue(),updatedBy:r.uid};(await Yt(s)).exists()?await Ve(s,i):await Ja(s,i)}catch(s){throw console.error("Save notification settings error:",s),new Error(s.message||"Failed to save notification settings")}}async getSecuritySettings(){try{const e=ce($,this.collectionName,"security"),r=await Yt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get security settings error:",e),new Error(e.message||"Failed to get security settings")}}async saveSecuritySettings(e){const r=je.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const s=ce($,this.collectionName,"security"),i={...e,updatedAt:ue(),updatedBy:r.uid};(await Yt(s)).exists()?await Ve(s,i):await Ja(s,i)}catch(s){throw console.error("Save security settings error:",s),new Error(s.message||"Failed to save security settings")}}}const mi=new UP,r_=w.createContext(void 0),Ce=()=>{const t=w.useContext(r_);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},zP=({children:t})=>{const[e,r]=w.useState(null),[s,i]=w.useState(!0);w.useEffect(()=>{const h=je.onAuthStateChange(m=>{r(m),i(!1)});return()=>h()},[]);const d={user:e,loading:s,signIn:async(h,m)=>{const p=await je.signIn(h,m);return r(p),p},signUp:async(h,m,p)=>{const v=await je.signUp(h,m,p);return r(v),v},signOut:async()=>{await je.signOut(),r(null)},resetPassword:async h=>{await je.resetPassword(h)},isAuthenticated:e!==null,isAdmin:(e==null?void 0:e.role)==="admin"};return n.jsx(r_.Provider,{value:d,children:t})};function BP(t){switch(t){case"admin":return"/admin/dashboard";case"artist":return"/artist/dashboard";default:return"/customer/dashboard"}}const ve=({children:t,allowedRoles:e})=>{const{user:r,loading:s}=Ce();return s?n.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:n.jsx("div",{className:"text-white",children:"Loading..."})}):r?e&&!e.includes(r.role)?n.jsx(oo,{to:BP(r.role),replace:!0}):n.jsx(n.Fragment,{children:t}):n.jsx(oo,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $P={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(t,e)=>{const r=w.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...d},h)=>w.createElement("svg",{ref:h,...$P,width:i,height:i,stroke:s,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${qP(t)}`,l].join(" "),...d},[...e.map(([m,p])=>w.createElement(m,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=Y("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=Y("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=Y("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Y("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=Y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Y("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=Y("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=Y("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=Y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=Y("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Y("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=Y("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=Y("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=Y("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=Y("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Y("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=Y("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=Y("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=Y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=Y("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=Y("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=Y("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=Y("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Y("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Y("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=Y("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Y("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Y("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Y("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=Y("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=Y("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=Y("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=Y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=Y("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=Y("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Y("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);function h_({cartItemCount:t=0,onCartClick:e}){const[r,s]=w.useState(!1),[i,a]=w.useState(!1),[o,l]=w.useState("login"),[c,d]=w.useState(!1),[h,m]=w.useState(""),[p,v]=w.useState(""),[S,b]=w.useState(""),[N,g]=w.useState(""),[y,j]=w.useState(!1),{user:R,signIn:M,signUp:D,signOut:T}=Ce(),_=Ar(),k=async U=>{U.preventDefault(),g(""),j(!0);try{if(o==="login")await M(h,p);else{if(p.length<6){g("Password must be at least 6 characters"),j(!1);return}await D(h,p,S||void 0)}a(!1),m(""),v(""),b(""),_("/customer/dashboard")}catch(oe){g(oe.message||"Something went wrong")}finally{j(!1)}};w.useEffect(()=>{const U=()=>{d(window.scrollY>50)};return window.addEventListener("scroll",U,{passive:!0}),()=>window.removeEventListener("scroll",U)},[]);const I=async()=>{try{await T(),_("/")}catch(U){console.error("Sign out error:",U)}},P=()=>{if(!R)return"/login";switch(R.role){case"admin":return"/admin/dashboard";case"artist":return"/artist/dashboard";case"user":return"/customer/dashboard";default:return"/login"}},A=()=>R!=null&&R.displayName?R.displayName.split(" ").map(U=>U[0]).join("").toUpperCase().slice(0,2):R!=null&&R.email?R.email[0].toUpperCase():"U",C=()=>{R?_(P()):(l("login"),a(!0))},me=()=>{l(o==="login"?"signup":"login"),g("")};return n.jsx("nav",{className:"fixed top-0 left-0 right-0 z-30",children:n.jsxs("div",{className:"w-full pl-4 pr-4 py-5",children:[n.jsxs("div",{className:"hidden md:flex items-center justify-between",children:[n.jsx("div",{className:`absolute left-1/2 -translate-x-1/2 transition-opacity duration-500 ${c?"opacity-0 pointer-events-none":"opacity-100"}`,children:n.jsxs(Z,{to:"/",className:"flex flex-col items-center group",children:[n.jsx("span",{className:"text-3xl font-black text-white leading-none",children:"JONNA RINCON"}),n.jsx("span",{className:"text-xs text-purple-400 tracking-wide mt-1 text-center",children:"Producer  DJ  Audio Engineer"})]})}),n.jsx("div",{className:`transition-opacity duration-500 ${c?"opacity-100":"opacity-0"}`,children:n.jsxs(Z,{to:"/",className:"flex flex-col items-center group",children:[n.jsx("span",{className:"text-3xl font-black text-white leading-none",children:"JONNA RINCON"}),n.jsx("span",{className:"text-xs text-purple-400 tracking-wide mt-1 text-center",children:"Producer  DJ  Audio Engineer"})]})}),n.jsxs("div",{className:"flex items-center gap-5",children:[R?n.jsx(Z,{to:P(),className:"rounded-full bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-base hover:scale-110 transition-all duration-300 neon-border-subtle hover:neon-border",style:{width:"60px",height:"60px"},title:R.displayName||R.email||"Profile",children:A()}):n.jsx("button",{onClick:C,className:"rounded-full glass flex items-center justify-center text-white hover:text-gray-200 hover:scale-110 transition-all duration-300 neon-border-subtle hover:neon-border",style:{width:"60px",height:"60px"},title:"Login",children:n.jsx(xs,{className:"w-7 h-7"})}),e&&n.jsxs("button",{onClick:e,className:"relative glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 active:scale-95 group/cart",style:{width:"60px",height:"60px",padding:"16px"},children:[n.jsx(hr,{className:"w-7 h-7 group-hover/cart:animate-pulse"}),t>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-sm font-black neon-border-subtle animate-pulse",style:{width:"32px",height:"32px"},children:t})]}),n.jsx("button",{onClick:()=>s(!r),className:"glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 active:scale-95 flex items-center justify-center",style:{width:"60px",height:"60px"},children:r?n.jsx(kt,{className:"w-7 h-7"}):n.jsx(Bn,{className:"w-7 h-7"})})]})]}),n.jsxs("div",{className:"md:hidden",children:[n.jsxs("div",{className:`transition-opacity duration-500 ${c?"opacity-0 pointer-events-none absolute":"opacity-100"}`,children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsxs(Z,{to:"/",className:"flex flex-col items-center",children:[n.jsx("span",{className:"text-2xl font-black text-white leading-none",children:"JONNA RINCON"}),n.jsx("span",{className:"text-xs text-purple-400 tracking-wide mt-1 text-center",children:"Producer  DJ  Audio Engineer"})]})}),n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[R?n.jsx(Z,{to:P(),className:"rounded-full bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-sm hover:scale-110 transition-all duration-300",style:{width:"30px",height:"30px"},children:A()}):n.jsx("button",{onClick:C,className:"rounded-full glass flex items-center justify-center text-white hover:text-gray-200 hover:scale-110 transition-all duration-300",style:{width:"30px",height:"30px"},children:n.jsx(xs,{className:"w-4 h-4"})}),e&&n.jsxs("button",{onClick:e,className:"relative glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"30px",height:"30px"},children:[n.jsx(hr,{className:"w-4 h-4"}),t>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-purple-600 rounded-full flex items-center justify-center text-xs font-black",style:{width:"16px",height:"16px",fontSize:"8px"},children:t})]}),n.jsx("button",{onClick:()=>s(!r),className:"glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"30px",height:"30px"},children:r?n.jsx(kt,{className:"w-4 h-4"}):n.jsx(Bn,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:`transition-opacity duration-500 flex items-center justify-between ${c?"opacity-100":"opacity-0 pointer-events-none absolute"}`,children:[n.jsxs(Z,{to:"/",className:"flex flex-col items-start",children:[n.jsx("span",{className:"text-xl font-black text-white leading-none",children:"JONNA RINCON"}),n.jsx("span",{className:"text-xs text-purple-400 tracking-wide",children:"Producer  DJ  Audio Engineer"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[R?n.jsx(Z,{to:P(),className:"rounded-full bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-xs hover:scale-110 transition-all duration-300",style:{width:"36px",height:"36px"},children:A()}):n.jsx("button",{onClick:C,className:"rounded-full glass flex items-center justify-center text-white hover:text-gray-200 hover:scale-110 transition-all duration-300",style:{width:"36px",height:"36px"},children:n.jsx(xs,{className:"w-5 h-5"})}),e&&n.jsxs("button",{onClick:e,className:"relative glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"36px",height:"36px"},children:[n.jsx(hr,{className:"w-5 h-5"}),t>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-purple-600 rounded-full flex items-center justify-center text-xs font-black",style:{width:"20px",height:"20px",fontSize:"10px"},children:t})]}),n.jsx("button",{onClick:()=>s(!r),className:"glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"36px",height:"36px"},children:r?n.jsx(kt,{className:"w-5 h-5"}):n.jsx(Bn,{className:"w-5 h-5"})})]})]})]}),i&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-xl z-[120] animate-fade-in",onClick:()=>a(!1)}),n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 pointer-events-none",children:n.jsx("div",{className:"pointer-events-auto bg-black/80 backdrop-blur-xl border-2 border-purple-500/30 rounded-3xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-in",children:n.jsxs("div",{className:"p-8",children:[n.jsx("button",{onClick:()=>a(!1),className:"absolute top-6 right-6 p-2 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 hover:rotate-90",children:n.jsx(kt,{className:"w-5 h-5 text-white"})}),n.jsx("h2",{className:"text-4xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent mb-8",children:o==="login"?"Welcome Back":"Create Account"}),n.jsxs("form",{onSubmit:k,className:"flex flex-col gap-5",children:[N&&n.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-400 px-4 py-3 rounded-xl text-sm",children:N}),o==="signup"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",value:S,onChange:U=>b(U.target.value),className:"w-full px-4 py-3 bg-white/5 border-2 border-purple-500/30 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all",placeholder:"Your name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Email"}),n.jsx("input",{type:"email",value:h,onChange:U=>m(U.target.value),required:!0,className:"w-full px-4 py-3 bg-white/5 border-2 border-purple-500/30 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all",placeholder:"your@email.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Password"}),n.jsx("input",{type:"password",value:p,onChange:U=>v(U.target.value),required:!0,className:"w-full px-4 py-3 bg-white/5 border-2 border-purple-500/30 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all",placeholder:""})]}),o==="login"&&n.jsx("div",{className:"flex justify-end",children:n.jsx("a",{href:"#",className:"text-sm text-purple-400 hover:text-purple-300 transition-colors",children:"Forgot password?"})}),n.jsx("button",{type:"submit",disabled:y,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-xl font-bold text-lg transition-all hover:scale-105 active:scale-95 shadow-xl disabled:opacity-50",children:y?"Loading...":o==="login"?"Sign In":"Create Account"})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx("p",{className:"text-gray-400 text-sm",children:o==="login"?n.jsxs(n.Fragment,{children:["Don't have an account?"," ",n.jsx("button",{onClick:me,className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Create one"})]}):n.jsxs(n.Fragment,{children:["Already have an account?"," ",n.jsx("button",{onClick:me,className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Sign in"})]})})})]})})})]}),r&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"hidden md:block",children:[n.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-xl z-[100] animate-fade-in",onClick:()=>s(!1)}),n.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-8 pointer-events-none",children:n.jsx("div",{className:"pointer-events-auto bg-black/80 backdrop-blur-xl border-2 border-purple-500/30 rounded-3xl shadow-2xl max-w-5xl w-full overflow-hidden animate-scale-in",children:n.jsxs("div",{className:"grid grid-cols-2 min-h-[600px]",children:[n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-purple-900/30 to-black",children:[n.jsx("img",{src:"/menu-artist-image.png",alt:"Jonna Rincon",className:"absolute inset-0 w-full h-full object-cover scale-150",style:{objectPosition:"center 35%",filter:"brightness(0.9) contrast(1.1)"}}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-black/40"})]}),n.jsxs("div",{className:"flex flex-col p-12 justify-center",children:[n.jsx("button",{onClick:()=>s(!1),className:"absolute top-8 right-8 p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 hover:rotate-90",children:n.jsx(kt,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsx(Z,{to:"/",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Home"}),n.jsx("a",{href:"#beats",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Beats"}),n.jsx("a",{href:"#music",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Music"}),n.jsx("a",{href:"#socials",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Socials"}),n.jsx(Z,{to:"/shop/beats",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Shop"}),n.jsx("div",{className:"border-t-2 border-purple-500/30 my-4"}),R?n.jsxs(n.Fragment,{children:[n.jsx(Z,{to:P(),onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Dashboard"}),n.jsx("button",{onClick:()=>{s(!1),I()},className:"text-white hover:text-red-400 transition-all font-black text-4xl text-left hover:translate-x-4 transform duration-300",children:"Sign Out"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Z,{to:"/login",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Sign In"}),n.jsx("div",{className:"mt-4",children:n.jsxs("p",{className:"text-gray-400 text-base",children:["Don't have an account?"," ",n.jsx(Z,{to:"/register",onClick:()=>s(!1),className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Create one"})]})})]})]}),n.jsx("div",{className:"mt-auto pt-8",children:n.jsx("p",{className:"text-sm text-gray-500",children:" 2025 Jonna Rincon"})})]})]})})})]}),n.jsxs("div",{className:"md:hidden",children:[n.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-xl z-[100] animate-fade-in",onClick:()=>s(!1)}),n.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center pointer-events-none",children:n.jsxs("div",{className:"pointer-events-auto bg-black/90 backdrop-blur-2xl border border-purple-500/20 rounded-2xl shadow-2xl w-[92%] max-w-lg max-h-[85vh] overflow-hidden flex flex-col animate-scale-in",children:[n.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-purple-900/20 to-black flex-shrink-0",style:{height:"45vh"},children:[n.jsx("img",{src:"/menu-artist-image.png",alt:"Jonna Rincon",className:"w-full h-full object-cover object-center",style:{objectPosition:"center 35%",filter:"brightness(0.85) contrast(1.15) saturate(1.1)"}}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/80"}),n.jsx("button",{onClick:()=>s(!1),className:"absolute top-5 right-5 w-10 h-10 flex items-center justify-center rounded-full bg-black/40 backdrop-blur-md border border-white/10 hover:bg-black/60 hover:border-white/20 transition-all",children:n.jsx(kt,{className:"w-5 h-5 text-white",strokeWidth:2.5})})]}),n.jsx("div",{className:"flex-1 flex flex-col justify-center px-10 py-8 overflow-y-auto",children:n.jsxs("div",{className:"flex flex-col items-center gap-6 text-center",children:[n.jsx(Z,{to:"/",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Home"}),n.jsx("a",{href:"#beats",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Beats"}),n.jsx("a",{href:"#music",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Music"}),n.jsx("a",{href:"#socials",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Socials"}),n.jsx(Z,{to:"/shop/beats",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Shop"}),n.jsx("div",{className:"w-16 border-t border-purple-500/30 my-2"}),R?n.jsxs(n.Fragment,{children:[n.jsx(Z,{to:P(),onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Dashboard"}),n.jsx("button",{onClick:()=>{s(!1),I()},className:"text-white/80 hover:text-red-400 transition-all font-bold text-xl tracking-tight hover:scale-105 transform duration-200",children:"Sign Out"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Z,{to:"/login",onClick:()=>s(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Sign In"}),n.jsx("div",{className:"mt-2",children:n.jsxs("p",{className:"text-gray-400 text-sm",children:["Don't have an account?"," ",n.jsx(Z,{to:"/register",onClick:()=>s(!1),className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Create one"})]})})]})]})}),n.jsx("div",{className:"flex-shrink-0 py-5 border-t border-white/5",children:n.jsx("p",{className:"text-xs text-gray-500 text-center font-medium tracking-wide",children:" 2025 JONNA RINCON"})})]})})]})]})]})})}function e3(){const t=w.useRef(null),e=w.useRef(null),r=w.useCallback(()=>{const s=window.scrollY,i=window.innerHeight,a=s/i*100;let o;a<10?o=a/10*.3:a<70?o=.3+(a-10)/60*.5:o=.8;const l=Math.min(s/i*10,10);t.current&&(t.current.style.opacity=String(o),t.current.style.backdropFilter=`blur(${l}px)`,t.current.style.webkitBackdropFilter=`blur(${l}px)`),e.current&&(e.current.style.opacity=String(o))},[]);return w.useEffect(()=>(window.addEventListener("scroll",r,{passive:!0}),r(),()=>window.removeEventListener("scroll",r)),[r]),n.jsxs("section",{className:"relative w-full min-h-screen flex items-center justify-center -mt-24",children:[n.jsxs("div",{className:"fixed inset-0 w-full h-screen -z-10",children:[n.jsx("img",{src:"/DJ Screenshot 3-2-26.png",alt:"Jonna Rincon",className:"w-full h-full object-cover",style:{objectFit:"cover",objectPosition:"center"}}),n.jsx("div",{ref:t,className:"absolute inset-0 bg-black",style:{opacity:0}}),n.jsx("div",{ref:e,className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/40",style:{opacity:0}})]}),n.jsx("div",{className:"relative z-10 w-full min-h-screen flex items-center justify-center px-6 pt-24",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 animate-fade-in",children:[n.jsxs("a",{href:"#beats",className:"group relative px-10 py-5 backdrop-blur-md bg-purple-900/20 border-2 border-purple-500/50 rounded-xl font-bold text-xl transition-all duration-300 hover:border-purple-400 hover:bg-purple-600/30 hover:scale-105 active:scale-95 flex items-center justify-center gap-3 min-w-[220px]",children:[n.jsx(Qr,{className:"w-6 h-6",fill:"currentColor"}),n.jsx("span",{children:"Browse Beats"})]}),n.jsx("a",{href:"#music",className:"group relative px-10 py-5 backdrop-blur-md bg-purple-900/20 border-2 border-purple-500/50 rounded-xl font-bold text-xl transition-all duration-300 hover:border-purple-400 hover:bg-purple-600/30 hover:scale-105 active:scale-95 flex items-center justify-center gap-3 min-w-[220px]",children:n.jsx("span",{children:"Listen Now"})})]})})]})}function t3(){const[t,e]=w.useState(0),r=["/DJI_20251115114029_0004_D.JPG","/IMG_1027.jpg","/Maastricht Screenshot 15-12-25.png"],s=()=>{e(a=>(a+1)%r.length)},i=()=>{e(a=>(a-1+r.length)%r.length)};return n.jsx("section",{id:"about",className:"py-8 md:py-80 pb-49 px-4 bg-transparent",children:n.jsx("div",{className:"max-w-[1600px] mx-auto",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-32",children:[n.jsxs("div",{id:"about-gallery",className:"py-12 md:py-0",children:[n.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:r.map((a,o)=>n.jsx("div",{className:`transition-opacity duration-500 ${o===t?"opacity-100":"opacity-0 absolute inset-0"}`,children:n.jsx("img",{src:a,alt:`Jonna Rincon ${o+1}`,className:"w-full h-auto object-cover",style:{minHeight:"300px",maxHeight:"500px"}})},o))}),n.jsxs("div",{className:"flex items-center justify-center gap-6 mt-6",children:[n.jsx("button",{onClick:i,className:"w-10 h-10 lg:w-14 lg:h-14 rounded-full bg-black/60 backdrop-blur-md border border-purple-500/30 flex items-center justify-center hover:bg-purple-600/80 hover:scale-110 transition-all","aria-label":"Previous image",children:n.jsx(md,{className:"w-5 h-5 lg:w-7 lg:h-7 rotate-[-90deg]"})}),n.jsx("div",{className:"flex gap-2",children:r.map((a,o)=>n.jsx("button",{onClick:()=>e(o),className:`h-2 rounded-full transition-all ${o===t?"w-8 bg-purple-400":"w-2 bg-gray-600"}`,"aria-label":`Go to image ${o+1}`},o))}),n.jsx("button",{onClick:s,className:"w-10 h-10 lg:w-14 lg:h-14 rounded-full bg-black/60 backdrop-blur-md border border-purple-500/30 flex items-center justify-center hover:bg-purple-600/80 hover:scale-110 transition-all","aria-label":"Next image",children:n.jsx(hd,{className:"w-5 h-5 lg:w-7 lg:h-7 rotate-[-90deg]"})})]})]}),n.jsxs("div",{id:"about-bio",className:"pt-4 md:pt-0",children:[n.jsx("h3",{className:"text-2xl lg:text-4xl font-bold mb-2 md:mb-4 neon-glow",children:"About Jonna"}),n.jsxs("div",{className:"space-y-2 text-gray-300 text-xs lg:text-lg leading-relaxed",children:[n.jsxs("p",{children:["Jonathan aka ",n.jsx("span",{className:"text-purple-400 font-semibold",children:"j18"})," is a human being with a creative mind which is described by many people as ",n.jsx("span",{className:"italic",children:'"not from this world"'}),". You may already recognize his J18 tag at the beginning and/or end of every track, or by the clock sound in his work."]}),n.jsx("p",{children:"Mostly known for his raw and authentic moombahton style in tracks or beats. But have in mind that this young man has much to offer. From modern rap beats to the dirty old classic hip hop beats, from warm and smooth r&b instrumentals to the world of EDM (electronic dance music) to studying to jonna's lo-fi instrumentals which he made on his trip on earth;"}),n.jsx("p",{children:"Born in Maastricht, The Netherlands & based in Tilburg he began making music when first made contact with any music instrument nearby. When he visited his nephews in Dominican Republic, he was shown FL Studio for the first time. When Jonna saw that it was possible to make a track with a PC, he made his first track immediately together with his oldest nephew and that's where the music production journey started."}),n.jsxs("p",{children:["10+ Years later and the stuff what he can do with a creative program like that is absolute crazy. From the most little things and the most weird noises....never-mind, Jonna Rincon is able to make something out of it... And you can hear that on songs like ",n.jsx("span",{className:"text-purple-400",children:"___"})," and ",n.jsx("span",{className:"text-purple-400",children:"___"})," which have been played on MTV and the Dutch Radio. Not there yet, but on the way. J18"]}),n.jsx("p",{className:"text-purple-300 font-semibold text-xs lg:text-xl italic",children:"(J18=Jeighteen) (Jeighteen=his tag & clothing/brand & nickname)"}),n.jsx("p",{className:"text-purple-300 font-semibold text-xs lg:text-xl",children:"Based in the Netherlands, working with artists worldwide."})]})]})]})})})}function r3({onAddToCart:t}){const[e,r]=w.useState([]),[s,i]=w.useState([]),[a,o]=w.useState(""),[l,c]=w.useState("All"),[d,h]=w.useState(!0),[m,p]=w.useState(null),[v,S]=w.useState("list"),[b,N]=w.useState(null),[g,y]=w.useState(0);w.useEffect(()=>{h(!0),p(null);const A=_e(te($,"beats"),ae("status","==","published"),Ie("createdAt","desc")),C=vt(A,me=>{const U=me.docs.map(oe=>{var q,B,ee,de;const we=oe.data();return{id:oe.id,...we,price:((B=(q=we.licenses)==null?void 0:q.basic)==null?void 0:B.price)||we.price||29,created_at:((ee=we.createdAt)==null?void 0:ee.toDate().toISOString())||new Date().toISOString(),updated_at:((de=we.updatedAt)==null?void 0:de.toDate().toISOString())||new Date().toISOString()}});r(U),i(U),h(!1)},me=>{console.error("Firebase error:",me),p("Failed to load beats. Please try again."),h(!1)});return()=>C()},[]),w.useEffect(()=>{j()},[a,l,e]),w.useEffect(()=>{y(0)},[v]);const j=()=>{let A=[...e];if(a){const C=a.toLowerCase();A=A.filter(me=>me.title.toLowerCase().includes(C)||me.genre.toLowerCase().includes(C)||me.tags.some(U=>U.toLowerCase().includes(C)))}l!=="All"&&(A=A.filter(C=>C.genre===l)),i(A),y(0)},R=["All",...Array.from(new Set(e.map(A=>A.genre)))],D=v==="grid"?window.innerWidth<768?6:12:window.innerWidth<768?5:7,T=Math.ceil(s.length/D),_=s.slice(g*D,(g+1)*D),k=()=>{g<T-1&&y(g+1)},I=()=>{g>0&&y(g-1)},P=e.filter(A=>A.featured).slice(0,6);return n.jsx("section",{id:"beats",className:"min-h-screen py-24 px-4 bg-transparent flex flex-col",children:n.jsxs("div",{className:"max-w-7xl mx-auto w-full flex-1 flex flex-col",children:[n.jsx("div",{className:"text-center mb-6 md:mb-12",children:n.jsx("h2",{className:"text-3xl md:text-6xl font-bold neon-glow",children:"Beat Store"})}),!d&&P.length>0&&n.jsxs("div",{className:"mb-8 md:mb-12",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("span",{className:"text-2xl",children:""}),n.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-purple-400",children:"Featured Beats"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 md:gap-4",children:P.map(A=>n.jsxs("div",{className:"glass rounded-xl overflow-hidden hover:scale-105 transition-all group flex flex-col relative neon-border",children:[n.jsx("div",{className:"absolute top-2 right-2 z-10 bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-2 py-1 rounded-full text-xs font-bold shadow-lg",children:" FEATURED"}),n.jsxs("div",{className:"relative aspect-square",children:[n.jsx("img",{src:A.artwork_url,alt:A.title,className:"w-full h-full object-cover"}),n.jsx("button",{onClick:()=>N(b===A.id?null:A.id),className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity",children:b===A.id?n.jsx(Ec,{className:"w-8 h-8 text-white",fill:"currentColor"}):n.jsx(Qr,{className:"w-8 h-8 text-white ml-1",fill:"currentColor"})})]}),n.jsxs("div",{className:"p-3 flex-1 flex flex-col",children:[n.jsx("h3",{className:"text-sm md:text-base font-bold mb-1 truncate",children:A.title}),n.jsx("p",{className:"text-xs text-gray-400 mb-2 truncate",children:A.artist}),n.jsxs("div",{className:"flex gap-1 mb-2",children:[n.jsx("span",{className:"px-2 py-0.5 bg-purple-900/30 rounded text-xs",children:A.bpm}),n.jsx("span",{className:"px-2 py-0.5 bg-purple-900/30 rounded text-xs",children:A.key})]}),n.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[n.jsxs("span",{className:"text-base md:text-lg font-black text-purple-400",children:["",A.price.toFixed(0)]}),n.jsx("button",{onClick:()=>t(A,"basic"),className:"p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-all hover:scale-110",children:n.jsx(hr,{className:"w-4 h-4"})})]})]})]},A.id))}),n.jsx("div",{className:"my-8 border-t border-purple-900/50"})]}),n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"All Beats"})}),n.jsxs("div",{className:"mb-6 flex gap-2 items-center",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(tg,{className:"absolute left-3 md:left-4 top-1/2 -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 text-purple-400"}),n.jsx("input",{type:"text",placeholder:"Search beats...",value:a,onChange:A=>o(A.target.value),className:"w-full pl-10 md:pl-12 pr-3 md:pr-4 py-2.5 md:py-4 glass rounded-xl text-white text-sm md:text-base placeholder-gray-500 focus:outline-none focus:neon-border transition-all"})]}),n.jsxs("div",{className:"relative w-24 md:w-auto",children:[n.jsx(l_,{className:"absolute left-2 md:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 md:w-4 md:h-4 text-purple-400"}),n.jsx("select",{value:l,onChange:A=>c(A.target.value),className:"w-full pl-7 md:pl-10 pr-2 md:pr-3 py-2.5 md:py-4 glass rounded-xl text-white text-xs md:text-sm focus:outline-none focus:neon-border transition-all appearance-none cursor-pointer",children:R.map(A=>n.jsx("option",{value:A,className:"bg-gray-900",children:A},A))})]}),n.jsx("button",{onClick:()=>S(v==="list"?"grid":"list"),className:"p-2.5 md:p-4 glass rounded-xl text-white hover:bg-purple-600/30 transition-all neon-border-subtle",children:v==="list"?n.jsx(KP,{className:"w-4 h-4 md:w-5 md:h-5"}):n.jsx(QP,{className:"w-4 h-4 md:w-5 md:h-5"})})]}),d?n.jsx("div",{className:"flex justify-center items-center flex-1",children:n.jsx("div",{className:"w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full animate-spin neon-border"})}):m?n.jsx("div",{className:"text-center flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"glass p-8 rounded-xl neon-border max-w-md",children:[n.jsxs("p",{className:"text-2xl text-red-400 mb-4",children:[" ",m]}),n.jsx("button",{onClick:()=>window.location.reload(),className:"bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-xl font-semibold transition-all",children:"Retry"})]})}):s.length===0?n.jsx("div",{className:"text-center flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"glass p-8 rounded-xl neon-border max-w-md",children:[n.jsx("p",{className:"text-2xl text-gray-400 mb-4",children:"No beats found"}),e.length===0?n.jsx("p",{className:"text-gray-500",children:"Add beats via the admin dashboard"}):n.jsx("p",{className:"text-gray-500",children:"Try adjusting your search filters"})]})}):v==="list"?n.jsx("div",{className:"space-y-1 md:space-y-2",children:_.map((A,C)=>n.jsx("div",{className:"glass hover:bg-purple-900/20 rounded-xl p-2 md:p-4 transition-all hover:scale-[1.02] group",children:n.jsxs("div",{className:"grid grid-cols-12 gap-2 md:gap-4 items-center",children:[n.jsx("div",{className:"col-span-1 text-gray-400 text-xs md:text-sm font-semibold",children:g*D+C+1}),n.jsxs("div",{className:"col-span-5 flex items-center gap-2 md:gap-4",children:[n.jsxs("div",{className:"relative w-10 h-10 md:w-16 md:h-16 flex-shrink-0",children:[n.jsx("img",{src:A.artwork_url,alt:A.title,className:"w-full h-full object-cover rounded-lg"}),n.jsx("button",{onClick:()=>N(b===A.id?null:A.id),className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:b===A.id?n.jsx(Ec,{className:"w-4 h-4 md:w-6 md:h-6 text-white",fill:"currentColor"}):n.jsx(Qr,{className:"w-4 h-4 md:w-6 md:h-6 text-white ml-1",fill:"currentColor"})})]}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-white text-xs md:text-base font-semibold truncate",children:A.title}),A.featured&&n.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-1.5 py-0.5 rounded-full text-xs font-bold whitespace-nowrap flex-shrink-0",children:" FEATURED"})]}),n.jsx("p",{className:"text-gray-400 text-xs md:text-sm truncate",children:A.artist})]})]}),n.jsx("div",{className:"col-span-2 text-gray-400 text-xs md:text-sm truncate",children:A.genre}),n.jsxs("div",{className:"col-span-2 text-gray-400 text-xs md:text-sm",children:[A.bpm," BPM  ",A.key]}),n.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2 md:gap-3",children:[n.jsxs("span",{className:"text-sm md:text-xl font-bold text-purple-400",children:["",A.price.toFixed(2)]}),n.jsx("button",{onClick:()=>t(A,"basic"),className:"p-1.5 md:p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-all hover:scale-110",children:n.jsx(hr,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]})},A.id))}):n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-6 gap-1.5 md:gap-3",children:_.map(A=>n.jsxs("div",{className:"glass rounded-xl overflow-hidden hover:scale-[1.02] transition-all group flex flex-col",style:{minHeight:window.innerWidth<768?"130px":"180px"},children:[n.jsxs("div",{className:"relative aspect-square",children:[n.jsx("img",{src:A.artwork_url,alt:A.title,className:"w-full h-full object-cover"}),n.jsx("button",{onClick:()=>N(b===A.id?null:A.id),className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity",children:b===A.id?n.jsx(Ec,{className:"w-5 h-5 md:w-8 md:h-8 text-white",fill:"currentColor"}):n.jsx(Qr,{className:"w-5 h-5 md:w-8 md:h-8 text-white ml-1",fill:"currentColor"})}),A.featured&&n.jsx("div",{className:"absolute top-0.5 right-0.5 md:top-2 md:right-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-1.5 py-0.5 md:px-2 md:py-1 rounded-full text-xs font-bold shadow-lg",children:""})]}),n.jsxs("div",{className:"p-1.5 md:p-3 flex-1 flex flex-col",children:[n.jsx("h3",{className:"text-xs md:text-sm font-bold mb-0.5 md:mb-1 truncate leading-tight",children:A.title}),n.jsx("p",{className:"text-xs text-gray-400 mb-0.5 md:mb-2 truncate",children:A.genre}),n.jsxs("div",{className:"flex gap-0.5 md:gap-1 mb-0.5 md:mb-1",children:[n.jsx("span",{className:"px-1 md:px-2 py-0.5 bg-purple-900/30 rounded text-xs leading-none",children:A.bpm}),n.jsx("span",{className:"px-1 md:px-2 py-0.5 bg-purple-900/30 rounded text-xs leading-none",children:A.key})]}),n.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[n.jsxs("span",{className:"text-xs md:text-base font-black text-purple-400",children:["",A.price.toFixed(0)]}),n.jsx("button",{onClick:()=>t(A,"basic"),className:"p-1.5 md:p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-all hover:scale-110",children:n.jsx(hr,{className:"w-3 h-3 md:w-4 md:h-4"})})]})]})]},A.id))}),s.length>D&&n.jsxs("div",{className:"mt-3 md:mt-4 flex items-center justify-center gap-3 md:gap-4",children:[n.jsx("button",{onClick:I,disabled:g===0,className:"p-2 md:p-3 glass rounded-xl hover:bg-purple-600/30 transition-all disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous page",children:n.jsx(n_,{className:"w-5 h-5 md:w-6 md:h-6"})}),n.jsx("span",{className:"text-xl md:text-2xl font-bold text-purple-400 px-3 md:px-4 min-w-[40px] md:min-w-[50px] text-center",children:g+1}),n.jsx("button",{onClick:k,disabled:g>=T-1,className:"p-2 md:p-3 glass rounded-xl hover:bg-purple-600/30 transition-all disabled:opacity-30 disabled:cursor-not-allowed",title:"Next page",children:n.jsx(i_,{className:"w-5 h-5 md:w-6 md:h-6"})})]})]})})}function s3(){const[t,e]=w.useState(0),r=[{name:"Top Tracks",embedUrl:"https://open.spotify.com/embed/artist/6o3BlWTeK4EKUyByo35y6F?utm_source=generator"},{name:"Playlist 2",embedUrl:"https://open.spotify.com/embed/playlist/5SaEeqVSV9vyLUvqsrrfJ7?utm_source=generator&theme=0"},{name:"Playlist 3",embedUrl:"https://open.spotify.com/embed/playlist/7mIjrYgNeQxVw2lBBsEDjE?utm_source=generator&theme=0"},{name:"Playlist 4",embedUrl:"https://open.spotify.com/embed/playlist/5smfHiU4egb6uyHYzgmqdC?utm_source=generator"},{name:"This is Jonna Rincon",embedUrl:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3LPWh3?utm_source=generator"}],s=[{id:"This Is Jonna Rincon",name:"This Is",url:"https://open.spotify.com/playlist/37i9dQZF1DZ06evO3LPWh3?si=9f9b5ebdf6de4887",cover:"ThisIsJonna.png"},{id:"DJ Sets",name:"DJ SETS",url:"https://youtube.com/playlist?list=PLgWPe6V88vwBmK5X5WCsj5kvvCb4IXjkM&si=iC-9_BTA0seIFWfr",cover:"TN-DJSet.jpg"},{id:"Mix & Master",name:"Mix & Master",url:"https://open.spotify.com/playlist/5smfHiU4egb6uyHYzgmqdC?si=b9cc2a2438b640ef",cover:"MixedBy.png"},{id:"Moombahton",name:"Moombah Time",url:"https://open.spotify.com/playlist/37i9dQZF1DZ06evO3LPWh3?si=3cf757f3a9604be9",cover:"MoombahTime.png"},{id:"Vlog",name:"Vlogs",url:"https://youtube.com/playlist?list=PLgWPe6V88vwAoxr8xVTv85989fwEe5a10&si=yGwkn0Y3sYluSLcs",cover:"Vlog Foto.png",isYoutube:!0}];return n.jsxs(n.Fragment,{children:[n.jsx("section",{id:"music",className:"py-12 md:py-24 px-4 bg-transparent md:min-h-0 min-h-screen flex items-center",children:n.jsxs("div",{className:"max-w-7xl mx-auto w-full scale-85 md:scale-100 origin-center",children:[n.jsx("div",{className:"text-center mb-8 md:mb-16",children:n.jsxs("h2",{className:"text-3xl md:text-6xl font-bold neon-glow",children:[n.jsx("span",{className:"md:hidden",children:r[t].name}),n.jsx("span",{className:"hidden md:block",children:"Music"})]})}),n.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[n.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[n.jsx("p",{className:"hidden md:block text-2xl md:text-3xl font-bold neon-glow",children:r[t].name}),n.jsx("div",{className:"flex gap-3",children:r.map((i,a)=>n.jsx("button",{onClick:()=>e(a),className:`w-4 h-4 rounded-full transition-all ${t===a?"bg-purple-500 w-8":"bg-gray-600 hover:bg-gray-500"}`,title:i.name,"aria-label":`Switch to ${i.name}`},a))})]}),n.jsx("div",{className:"rounded-xl overflow-hidden relative",children:r.map((i,a)=>n.jsx("div",{className:`transition-opacity duration-500 ${a===t?"opacity-100":"opacity-0 absolute inset-0"}`,children:n.jsx("iframe",{style:{borderRadius:"12px"},src:i.embedUrl,width:"100%",height:"400",frameBorder:"0",allowFullScreen:!0,allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})},a))}),n.jsx("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"mt-6 w-full inline-block text-center py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Open in Spotify"})]})]})}),n.jsx("section",{id:"compilations",className:"py-12 md:py-0 px-4 bg-transparent md:min-h-0 min-h-screen flex items-center",children:n.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[n.jsx("div",{className:"text-center mb-8 md:hidden",children:n.jsx("h2",{className:"text-3xl font-bold neon-glow",children:"Playlists"})}),n.jsx("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-5 gap-3 max-w-5xl",children:s.map(i=>n.jsxs("a",{href:i.url.replace("/embed/","/"),target:"_blank",rel:"noopener noreferrer",className:"group text-center",children:[n.jsx("h4",{className:"text-sm font-bold mb-2 text-purple-300 truncate",children:i.name}),n.jsx("div",{className:"aspect-square rounded-lg overflow-hidden hover:scale-105 transition-all glass neon-border-subtle hover:neon-border",children:n.jsx("img",{src:i.cover,alt:i.name,className:"w-full h-full object-cover"})})]},i.id))})})})]})}),n.jsx("section",{id:"youtube",className:"py-12 md:py-44 md:mt-96 px-4 bg-transparent md:min-h-0 min-h-screen flex items-center",children:n.jsxs("div",{className:"max-w-7xl mx-auto w-full scale-[0.70] md:scale-100 origin-center",children:[n.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[n.jsx("h2",{className:"text-3xl md:text-6xl font-bold mb-4 neon-glow",children:"YouTube"}),n.jsx("p",{className:"text-base md:text-xl text-gray-400",children:"Watch my latest DJ sets and vlogs"})]}),n.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[n.jsxs("div",{className:"relative rounded-xl overflow-hidden group cursor-pointer",children:[n.jsxs("div",{className:"absolute inset-0 z-10 transition-opacity duration-500 group-[.playing]:opacity-0 group-[.playing]:pointer-events-none",onClick:i=>{const a=i.currentTarget.closest(".relative");a==null||a.classList.add("playing");const o=a==null?void 0:a.querySelector("iframe");if(o){const l=o.src;o.src=l+(l.includes("?")?"&":"?")+"autoplay=1"}},children:[n.jsx("img",{src:"DJI_20251017150728_0019_D.JPG",alt:"YouTube thumbnail",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/20 transition-all",children:n.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:n.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),n.jsx("iframe",{width:"100%",height:"500",src:"https://www.youtube.com/embed/videoseries?si=-lcpC5aW0SSgSOXa&list=PLgWPe6V88vwBmK5X5WCsj5kvvCb4IXjkM",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0,style:{borderRadius:"12px"}})]}),n.jsx("a",{href:"https://youtube.com/@jonnarincon?si=zp6ECLUFUSCXIhhn",target:"_blank",rel:"noopener noreferrer",className:"mt-6 w-full inline-block text-center py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Visit Channel"})]})]})})]})}function n3(){const t=[{name:"Instagram",icon:gs,url:"https://www.instagram.com/jonnarincon/",color:"from-pink-600 to-purple-600"},{name:"TikTok",icon:wu,url:"#",color:"from-black to-teal-600"},{name:"Apple Music",icon:wu,url:"#",color:"from-red-600 to-pink-600"},{name:"YouTube Music",icon:ti,url:"#",color:"from-red-600 to-orange-600"}];return n.jsx("section",{id:"socials",className:"py-64 pb-64 px-4 bg-transparent",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl md:text-6xl font-bold mb-4 neon-glow",children:"Social Media"}),n.jsx("p",{className:"text-xl text-gray-400"})]}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:t.map(e=>{const r=e.icon;return n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"glass rounded-2xl p-8 neon-border-subtle hover:neon-border transition-all hover:scale-105 flex flex-col items-center text-center group",children:[n.jsx("div",{className:`w-20 h-20 rounded-full bg-gradient-to-br ${e.color} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:n.jsx(r,{className:"w-10 h-10 text-white"})}),n.jsx("h3",{className:"text-xl font-bold mb-2",children:e.name}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Follow me"})]},e.name)})}),n.jsxs("div",{className:"glass rounded-2xl p-8 neon-border text-center",children:[n.jsx("h3",{className:"text-2xl font-bold mb-4 text-purple-300",children:"Want exclusive releases?"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Subscribe to get early access to new beats, free downloads, and special offers"}),n.jsxs("div",{className:"flex gap-4 max-w-md mx-auto",children:[n.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all"}),n.jsx("button",{className:"px-8 py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Subscribe"})]})]})]})})}function i3(){return n.jsx("section",{className:"py-48 pb-64 px-4 bg-transparent",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("div",{className:"inline-flex items-center gap-3 mb-4",children:n.jsx("h2",{className:"text-3xl md:text-6xl font-bold neon-glow",children:"Live Studio"})}),n.jsx("p",{className:"text-xl text-gray-400"})]}),n.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2",children:[n.jsx("div",{className:"glass rounded-2xl overflow-hidden neon-border aspect-video relative",children:n.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-purple-900/20 to-black flex items-center justify-center relative",children:[n.jsx("img",{src:"https://images.pexels.com/photos/164938/pexels-photo-164938.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Studio",className:"absolute inset-0 w-full h-full object-cover opacity-30"}),n.jsxs("div",{className:"relative text-center z-10",children:[n.jsx(YP,{className:"w-20 h-20 text-purple-400 mx-auto mb-4"}),n.jsx("p",{className:"text-2xl font-bold text-purple-300 mb-2",children:"Currently Offline"}),n.jsx("p",{className:"text-gray-400",children:"Check back soon for the next session"})]})]})}),n.jsxs("div",{className:"mt-6 glass rounded-2xl p-6 neon-border-subtle",children:[n.jsx("h3",{className:"text-2xl font-bold mb-4 text-purple-300",children:"About Live Sessions"}),n.jsx("p",{className:"text-gray-400 leading-relaxed",children:"Join me in the studio as I create beats from scratch. Watch the creative process, ask questions in real-time, and get insider tips on production techniques. Sessions include beat making, mixing, sound design, and more."})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),n.jsx("span",{className:"font-semibold text-lg",children:"OFFLINE"})]}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Next stream coming soon"})]}),n.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Wm,{className:"w-6 h-6 text-purple-400"}),n.jsx("h3",{className:"text-xl font-bold",children:"Upcoming Streams"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border-l-2 border-purple-500 pl-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Er,{className:"w-4 h-4 text-purple-400"}),n.jsx("span",{className:"text-sm text-gray-400",children:"This Friday, 8:00 PM"})]}),n.jsx("p",{className:"font-semibold text-purple-200",children:"Beat Making Session"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Trap & Drill production"})]}),n.jsxs("div",{className:"border-l-2 border-purple-500 pl-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Er,{className:"w-4 h-4 text-purple-400"}),n.jsx("span",{className:"text-sm text-gray-400",children:"Next Monday, 7:00 PM"})]}),n.jsx("p",{className:"font-semibold text-purple-200",children:"Q&A + Production Tips"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Ask me anything"})]})]})]}),n.jsx("button",{className:"w-full py-4 bg-purple-600 hover:bg-purple-700 rounded-xl font-bold transition-all neon-border hover:scale-105",children:"Set Reminder"}),n.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[n.jsx("h3",{className:"text-lg font-bold mb-3 text-purple-300",children:"Follow on Socials"}),n.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Get notified when I go live and never miss a session"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 bg-purple-900/30 hover:bg-purple-900/50 rounded-lg text-center font-medium transition-all",children:"YouTube"}),n.jsx("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 bg-purple-900/30 hover:bg-purple-900/50 rounded-lg text-center font-medium transition-all",children:"Instagram"})]})]})]})]})]})})}function a3(){const[t,e]=w.useState({name:"",email:"",subject:"commission",message:""}),r=s=>{s.preventDefault(),console.log("Form submitted:",t)};return n.jsx("section",{id:"contact",className:"py-24 pb-32 px-4 bg-transparent",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-3xl md:text-6xl font-bold mb-4 neon-glow",children:"Get In Touch"}),n.jsx("p",{className:"text-xl text-gray-400",children:"Let's create something amazing together"})]}),n.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle mb-8",children:[n.jsx("h3",{className:"text-3xl font-bold mb-6 text-purple-300",children:"Contact Info"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(Zf,{className:"w-6 h-6 text-purple-400 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold mb-1",children:"Email"}),n.jsx("a",{href:"mailto:contact@jonnarincon.com",className:"text-purple-400 hover:text-purple-300 transition-colors",children:"contact@jonnarincon.com"})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(Le,{className:"w-6 h-6 text-purple-400 mt-1"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold mb-1",children:"Response Time"}),n.jsx("p",{className:"text-gray-400",children:"Usually within 24 hours"})]})]})]})]}),n.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[n.jsx("h3",{className:"text-2xl font-bold mb-6 text-purple-300",children:"Connect"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[n.jsx(gs,{className:"w-6 h-6 text-purple-400"}),n.jsx("span",{className:"font-semibold",children:"Instagram"})]}),n.jsxs("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[n.jsx(ti,{className:"w-6 h-6 text-purple-400"}),n.jsx("span",{className:"font-semibold",children:"YouTube"})]}),n.jsxs("a",{href:"https://soundcloud.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[n.jsx(a_,{className:"w-6 h-6 text-purple-400"}),n.jsx("span",{className:"font-semibold",children:"SoundCloud"})]}),n.jsxs("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[n.jsx(Le,{className:"w-6 h-6 text-purple-400"}),n.jsx("span",{className:"font-semibold",children:"Spotify"})]})]})]})]}),n.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[n.jsx("h3",{className:"text-3xl font-bold mb-6 text-purple-300",children:"Send a Message"}),n.jsxs("form",{onSubmit:r,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Name"}),n.jsx("input",{type:"text",required:!0,value:t.name,onChange:s=>e({...t,name:s.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all",placeholder:"Your name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Email"}),n.jsx("input",{type:"email",required:!0,value:t.email,onChange:s=>e({...t,email:s.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all",placeholder:"your@email.com"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Subject"}),n.jsxs("select",{value:t.subject,onChange:s=>e({...t,subject:s.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white focus:outline-none focus:neon-border-subtle transition-all appearance-none cursor-pointer",children:[n.jsx("option",{value:"commission",children:"Beat Commission"}),n.jsx("option",{value:"collaboration",children:"Collaboration"}),n.jsx("option",{value:"booking",children:"Booking"}),n.jsx("option",{value:"general",children:"General Inquiry"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Message"}),n.jsx("textarea",{required:!0,value:t.message,onChange:s=>e({...t,message:s.target.value}),rows:6,className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all resize-none",placeholder:"Tell me about your project..."})]}),n.jsx("button",{type:"submit",className:"w-full py-4 bg-purple-600 hover:bg-purple-700 rounded-xl font-bold text-lg transition-all neon-border hover:scale-105",children:"Send Message"})]})]})]})]})})}function o3(){return n.jsx("footer",{className:"bg-transparent border-t border-purple-500/30 py-12 px-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-12 mb-8",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Le,{className:"w-8 h-8 text-purple-400 neon-glow"}),n.jsx("span",{className:"text-2xl font-bold neon-glow",children:"JONNA RINCON"})]}),n.jsx("p",{className:"text-gray-400 mb-4",children:"Professional producer and beatmaker crafting premium beats for artists worldwide."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-300",children:"Quick Links"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("a",{href:"#beats",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Browse Beats"}),n.jsx("a",{href:"#music",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Listen to Music"}),n.jsx("a",{href:"#contact",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Get in Touch"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-300",children:"Follow"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:n.jsx(gs,{className:"w-5 h-5"})}),n.jsx("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:n.jsx(ti,{className:"w-5 h-5"})}),n.jsx("a",{href:"https://soundcloud.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:n.jsx(a_,{className:"w-5 h-5"})}),n.jsx("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:n.jsx(Le,{className:"w-5 h-5"})})]})]})]}),n.jsxs("div",{className:"border-t border-purple-500/30 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Copyright  2025 Jonna Rincon. All Rights Reserved."}),n.jsxs("div",{className:"flex gap-6 text-sm",children:[n.jsx("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Privacy Policy"}),n.jsx("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Terms of Service"})]})]})]})})}function l3({isOpen:t,onClose:e,items:r,onRemoveItem:s,onCheckout:i}){const a=r.reduce((o,l)=>o+l.price,0);return t?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-xl z-[100] animate-fade-in",onClick:e}),n.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"pointer-events-auto bg-black/80 backdrop-blur-2xl border-2 border-purple-500/30 rounded-3xl shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col animate-scale-in",children:[n.jsxs("div",{className:"flex items-center justify-between p-8 border-b border-purple-500/20 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(hr,{className:"w-8 h-8 text-purple-400"}),n.jsx("h2",{className:"text-3xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Shopping Cart"})]}),n.jsx("button",{onClick:e,className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 hover:rotate-90",children:n.jsx(kt,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:r.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx(hr,{className:"w-24 h-24 text-purple-400/30 mx-auto mb-6"}),n.jsx("p",{className:"text-gray-400 text-xl font-medium mb-2",children:"Your cart is empty"}),n.jsx("p",{className:"text-gray-500 text-sm mb-8",children:"Add some beats to get started!"}),n.jsx("button",{onClick:e,className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-xl font-bold text-lg transition-all hover:scale-105 shadow-xl",children:"Browse Beats"})]}):n.jsx("div",{className:"space-y-4",children:r.map((o,l)=>n.jsx("div",{className:"glass rounded-2xl p-5 neon-border-subtle hover:neon-border transition-all",children:n.jsxs("div",{className:"flex gap-5",children:[n.jsx("img",{src:o.beat.artwork_url,alt:o.beat.title,className:"w-24 h-24 rounded-xl object-cover flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-bold text-xl text-purple-200 mb-1 truncate",children:o.beat.title}),n.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:[o.beat.artist,"  ",o.beat.bpm," BPM  ",o.beat.key]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"px-3 py-1 bg-purple-600/30 rounded-lg text-xs font-semibold text-purple-300 uppercase",children:[o.license," License"]}),n.jsxs("span",{className:"text-2xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:["",o.price.toFixed(2)]})]})]}),n.jsx("button",{onClick:()=>s(o.beat.id),className:"p-3 hover:bg-red-600/20 rounded-xl transition-all group flex-shrink-0",title:"Remove from cart",children:n.jsx(rg,{className:"w-5 h-5 text-gray-400 group-hover:text-red-400 transition-colors"})})]})},`${o.beat.id}-${o.license}-${l}`))})}),r.length>0&&n.jsxs("div",{className:"border-t-2 border-purple-500/20 p-8 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("span",{className:"text-xl font-bold text-gray-300",children:"Total:"}),n.jsxs("span",{className:"text-4xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:["",a.toFixed(2)]})]}),n.jsx("button",{onClick:i,className:"w-full py-5 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-2xl font-black text-xl transition-all hover:scale-105 active:scale-95 shadow-2xl",children:"Proceed to Checkout"}),n.jsx("p",{className:"text-center text-xs text-gray-500 mt-4",children:"Secure checkout  All licenses included"})]})]})})]}):null}function c3(){const[t,e]=w.useState([]),[r,s]=w.useState(!1),[i,a]=w.useState(0),[o,l]=w.useState("down"),[c,d]=w.useState(!1),h=()=>window.innerWidth<768?["hero","about","beats","music","compilations","youtube","socials","live-studio","contact"]:["hero","about","beats","music","youtube","socials","live-studio","contact"],[m,p]=w.useState(h()),v=(R,M)=>{let D=R.price;M==="premium"&&(D=R.price*1.5),M==="exclusive"&&(D=R.price*3);const T={beat:R,license:M,price:D};e([...t,T]),s(!0)},S=R=>{e(t.filter(M=>M.beat.id!==R))},b=async()=>{const R={customerEmail:"customer@example.com",items:t.map(M=>({beatId:M.beat.id,beatTitle:M.beat.title,licenseType:M.license,price:M.price})),total:t.reduce((M,D)=>M+D.price,0),status:"pending",createdAt:new Date};try{await dt(te($,"orders"),R),alert("Order created successfully!"),e([])}catch(M){console.error("Order creation failed:",M),alert("Failed to create order")}},N=()=>{const R=window.innerWidth<768;if(c||d(!0),o==="down"){const M=Math.min(i+1,m.length-1),D=document.getElementById(m[M]);if(D)if(m[M]==="music"&&!R){const T=D.offsetTop;window.scrollTo({top:T-50,behavior:"smooth"}),a(M)}else D.scrollIntoView({behavior:"smooth",block:"start"}),a(M);M===m.length-1&&l("up")}else{const M=Math.max(i-1,0),D=document.getElementById(m[M]);if(D)if(m[M]==="music"&&!R){const T=D.offsetTop;window.scrollTo({top:T-50,behavior:"smooth"}),a(M)}else D.scrollIntoView({behavior:"smooth",block:"start"}),a(M);M===0&&l("down")}};w.useEffect(()=>{const R=()=>{const M=window.scrollY+window.innerHeight/2;for(let D=m.length-1;D>=0;D--){const T=document.getElementById(m[D]);if(T&&T.offsetTop<=M){a(_=>_!==D?(D===0&&l("down"),D===m.length-1&&l("up"),D):_);break}}};return window.addEventListener("scroll",R,{passive:!0}),R(),()=>window.removeEventListener("scroll",R)},[m]),w.useEffect(()=>{let R=0,M=!1;const D=()=>{M||(M=!0,R=window.scrollY)},T=()=>{M&&(window.scrollTo({top:R,behavior:"auto"}),p(h()),M=!1)};let _;const k=()=>{D(),clearTimeout(_),_=setTimeout(T,200)};return window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k),clearTimeout(_)}},[]);const g=i===m.length-1,y=!c||g,j=o==="up"?"Back":"Click Me!";return n.jsxs("div",{className:"min-h-screen",children:[n.jsx(h_,{cartItemCount:t.length,onCartClick:()=>s(!0)}),n.jsx(l3,{isOpen:r,onClose:()=>s(!1),items:t,onRemoveItem:S,onCheckout:b}),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"hidden md:block fixed bottom-8 left-8 z-50",children:n.jsx("button",{onClick:N,className:"animate-bounce cursor-pointer hover:scale-110 transition-all focus:outline-none backdrop-blur-md bg-purple-900/20 px-4 py-3 rounded-full border-2 border-purple-500/50 hover:border-purple-400 hover:bg-purple-600/30 duration-300",style:{width:y?"80px":"56px"},children:n.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-h-[44px]",children:[y&&n.jsx("span",{className:"text-sm text-purple-300 font-light whitespace-nowrap",children:j}),n.jsx("svg",{className:`w-5 h-5 text-purple-400 transition-transform duration-300 ${o==="up"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})})}),n.jsx("div",{className:"md:hidden fixed bottom-8 left-8 z-50",children:n.jsx("button",{onClick:N,className:"cursor-pointer hover:scale-110 transition-all focus:outline-none backdrop-blur-md bg-purple-900/20 px-4 py-3 rounded-full border-2 border-purple-500/50 hover:border-purple-400 hover:bg-purple-600/30 duration-300",style:{width:y?"100px":"56px"},children:n.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-h-[44px]",children:[y&&n.jsx("span",{className:"text-xs text-purple-300 font-light whitespace-nowrap",children:j}),n.jsx("svg",{className:`w-5 h-5 text-purple-400 transition-transform duration-300 ${o==="up"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})})})]}),n.jsxs("main",{className:"pt-20",children:[n.jsx("div",{id:"hero",className:"h-screen overflow-hidden",children:n.jsx(e3,{})}),n.jsx(t3,{}),n.jsx(r3,{onAddToCart:v}),n.jsx(s3,{}),n.jsx(n3,{}),n.jsx("div",{id:"live-studio",children:n.jsx(i3,{})}),n.jsx(a3,{})]}),n.jsx(o3,{})]})}const u3=()=>{const[t,e]=w.useState(""),[r,s]=w.useState(""),[i,a]=w.useState(""),[o,l]=w.useState(!1),{signIn:c}=Ce(),d=Ar(),h=async m=>{m.preventDefault(),a(""),l(!0);try{const p=await c(t,r);p.role==="admin"?d("/admin/dashboard"):p.role==="artist"?d("/artist/dashboard"):d("/customer/dashboard")}catch(p){a(p.message||"Failed to sign in")}finally{l(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center p-4",children:n.jsx("div",{className:"max-w-md w-full",children:n.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl p-8 border border-purple-500/20",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Welcome Back"}),n.jsx("p",{className:"text-gray-400",children:"Sign in to your account"})]}),n.jsxs("form",{onSubmit:h,className:"space-y-6",children:[i&&n.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-3 rounded-lg",children:i}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),n.jsx("input",{id:"email",type:"email",value:t,onChange:m=>e(m.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"your@email.com"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),n.jsx("input",{id:"password",type:"password",value:r,onChange:m=>s(m.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),n.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:o?"Signing in...":"Sign In"})]}),n.jsxs("div",{className:"mt-6 text-center space-y-2",children:[n.jsxs("p",{className:"text-sm text-gray-400",children:["Don't have an account?"," ",n.jsx(Z,{to:"/register",className:"text-purple-400 hover:text-purple-300",children:"Create one"})]}),n.jsx("p",{className:"text-sm text-gray-400",children:n.jsx(Z,{to:"/",className:"text-purple-400 hover:text-purple-300",children:"Back to home"})})]})]})})})},d3=()=>{const[t,e]=w.useState(""),[r,s]=w.useState(""),[i,a]=w.useState(""),[o,l]=w.useState(""),[c,d]=w.useState(""),[h,m]=w.useState(!1),{signUp:p}=Ce(),v=Ar(),S=async b=>{if(b.preventDefault(),d(""),r!==i){d("Passwords do not match");return}if(r.length<6){d("Password must be at least 6 characters");return}m(!0);try{const N=await p(t,r,o);v("/customer/dashboard")}catch(N){d(N.message||"Failed to create account")}finally{m(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center p-4",children:n.jsx("div",{className:"max-w-md w-full",children:n.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl p-8 border border-purple-500/20",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Create Account"}),n.jsx("p",{className:"text-gray-400",children:"Join Jonna Rincon's beat store"})]}),n.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c&&n.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-3 rounded-lg",children:c}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),n.jsx("input",{id:"displayName",type:"text",value:o,onChange:b=>l(b.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Your name"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),n.jsx("input",{id:"email",type:"email",value:t,onChange:b=>e(b.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"your@email.com"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),n.jsx("input",{id:"password",type:"password",value:r,onChange:b=>s(b.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),n.jsx("input",{id:"confirmPassword",type:"password",value:i,onChange:b=>a(b.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),n.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:h?"Creating Account...":"Create Account"})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsxs("p",{className:"text-sm text-gray-400",children:["Already have an account?"," ",n.jsx(Z,{to:"/login",className:"text-purple-400 hover:text-purple-300",children:"Sign in"})]})})]})})})},h3=()=>{const[t,e]=w.useState([]),[r,s]=w.useState(!0),[i,a]=w.useState({sortBy:"newest"});w.useEffect(()=>{o()},[i]);const o=async()=>{try{s(!0);let d=await ks.getPublishedBeats();if(i.genre&&(d=d.filter(h=>h.genre===i.genre)),i.search){const h=i.search.toLowerCase();d=d.filter(m=>m.title.toLowerCase().includes(h)||m.artist.toLowerCase().includes(h)||m.tags.some(p=>p.toLowerCase().includes(h)))}d.sort((h,m)=>{var p,v,S,b;switch(i.sortBy){case"newest":return m.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return m.plays-h.plays;case"price_low":return(((p=h.licenses.basic)==null?void 0:p.price)||0)-(((v=m.licenses.basic)==null?void 0:v.price)||0);case"price_high":return(((S=m.licenses.basic)==null?void 0:S.price)||0)-(((b=h.licenses.basic)==null?void 0:b.price)||0);default:return 0}}),e(d)}catch(c){console.error("Failed to load beats:",c)}finally{s(!1)}},l=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return n.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[n.jsx(h_,{}),n.jsxs("div",{className:"container mx-auto px-4 pt-28 pb-12",children:[n.jsxs("div",{className:"mb-12 text-center",children:[n.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Premium Beats"}),n.jsx("p",{className:"text-xl text-gray-400",children:"Explore high-quality beats by Jonna Rincon"})]}),n.jsx("div",{className:"mb-8 bg-gray-800 rounded-lg p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("input",{type:"text",placeholder:"Search beats...",value:i.search||"",onChange:c=>a({...i,search:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500"}),n.jsxs("select",{value:i.genre||"",onChange:c=>a({...i,genre:c.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[n.jsx("option",{value:"",children:"All Genres"}),l.map(c=>n.jsx("option",{value:c,children:c},c))]}),n.jsxs("select",{value:i.sortBy,onChange:c=>a({...i,sortBy:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[n.jsx("option",{value:"newest",children:"Newest First"}),n.jsx("option",{value:"popular",children:"Most Popular"}),n.jsx("option",{value:"price_low",children:"Price: Low to High"}),n.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(i.genre||i.search)&&n.jsx("button",{onClick:()=>a({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 transition",children:"Clear Filters"})]})}),r?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"text-xl",children:"Loading beats..."})}):t.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("p",{className:"text-xl mb-2",children:"No beats found"}),n.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>{var d;return n.jsxs(Z,{to:`/shop/beats/${c.id}`,className:"bg-gray-800 rounded-lg overflow-hidden hover:transform hover:scale-105 transition-all duration-200",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:c.artworkUrl||"/placeholder-beat.png",alt:c.title,className:"w-full h-48 object-cover"}),c.featured&&n.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),c.trending&&n.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"font-bold text-lg mb-2",children:c.title}),n.jsx("div",{className:"text-sm text-gray-400 mb-3",children:c.artist}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[n.jsxs("span",{children:[c.bpm," BPM"]}),n.jsx("span",{children:""}),n.jsx("span",{children:c.key}),n.jsx("span",{children:""}),n.jsx("span",{children:c.genre})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[n.jsxs("span",{children:[" ",c.plays.toLocaleString()]}),n.jsxs("span",{children:[" ",c.likes.toLocaleString()]}),n.jsxs("span",{children:[" ",c.downloads.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),n.jsxs("div",{className:"font-bold text-lg",children:["",((d=c.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),n.jsx("div",{className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded transition",children:"View Beat"})]})]})]},c.id)})}),!r&&t.length>0&&n.jsxs("div",{className:"mt-8 text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})]})},Ot=({children:t})=>{var h,m;const[e,r]=w.useState(!0),{user:s,signOut:i}=Ce(),a=yr(),o=Ar(),l=async()=>{await i(),o("/")},c=[{name:"Dashboard",href:"/customer/dashboard",icon:pd},{name:"Shop Beats",href:"/customer/shop",icon:Le},{name:"My Orders",href:"/customer/orders",icon:hr},{name:"Downloads",href:"/customer/downloads",icon:Ct},{name:"Free Downloads",href:"/customer/free-downloads",icon:Ct},{name:"Collaborations",href:"/customer/collaborations",icon:gr},{name:"Become Artist",href:"/customer/request-artist-role",icon:sg},{name:"Chat",href:"/customer/chat",icon:Qe},{name:"Profile",href:"/customer/profile",icon:xs},{name:"Settings",href:"/customer/settings",icon:fd}],d=p=>a.pathname===p;return n.jsxs("div",{className:"min-h-screen bg-gray-900",children:[n.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Customer"})]}),n.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:n.jsx(kt,{size:20})})]}),n.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:n.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[n.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=s==null?void 0:s.displayName)==null?void 0:h[0])||((m=s==null?void 0:s.email)==null?void 0:m[0])||"C"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(s==null?void 0:s.displayName)||"Customer"}),n.jsx("p",{className:"text-xs text-gray-400 truncate",children:s==null?void 0:s.email})]})]})}),n.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:c.map(p=>{const v=p.icon;return n.jsxs(Z,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[n.jsx(v,{size:18,className:"flex-shrink-0"}),n.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),n.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:n.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[n.jsx(fa,{size:18,className:"flex-shrink-0"}),n.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),n.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[n.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[n.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:n.jsx(Bn,{size:24})}),n.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:n.jsx("div",{className:"text-right hidden sm:block",children:n.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),n.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},m3=()=>{const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState(!0),[a,o]=w.useState({totalOrders:0,totalSpent:0,totalDownloads:0});w.useEffect(()=>{if(!t)return;(async()=>{try{const d=await Zr.getOrdersByCustomer(t.email),h=d.slice(0,5);r(h);const m=d.filter(v=>v.status==="completed").reduce((v,S)=>v+S.total,0),p=d.filter(v=>v.status==="completed").reduce((v,S)=>v+S.items.length,0);o({totalOrders:d.length,totalSpent:m,totalDownloads:p})}catch(d){console.error("Failed to load dashboard data:",d)}finally{i(!1)}})()},[t]);const l=[{name:"Total Orders",value:a.totalOrders,icon:fo,change:a.totalOrders>0?`${a.totalOrders} orders placed`:"No orders yet",changeType:"neutral"},{name:"Total Spent",value:`${a.totalSpent.toFixed(2)}`,icon:ra,change:a.totalSpent>0?"On beats & licenses":"Start shopping",changeType:"neutral"},{name:"Total Downloads",value:a.totalDownloads,icon:Ct,change:`${a.totalDownloads} beats owned`,changeType:"positive"}];return s?n.jsx(Ot,{children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"text-xl text-white",children:"Loading..."})})}):n.jsx(Ot,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Dashboard"}),n.jsxs("p",{className:"text-gray-400 mt-2",children:["Welcome back, ",(t==null?void 0:t.displayName)||"Customer","!"]})]}),n.jsxs(Z,{to:"/",className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 px-4 py-2 rounded-lg text-white font-medium transition-all flex items-center gap-2",children:[n.jsx(Xf,{size:18}),"Back to Home"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:l.map(c=>{const d=c.icon;return n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-blue-500/50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:c.name}),n.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:c.value}),n.jsx("p",{className:"text-sm mt-2 text-gray-400",children:c.change})]}),n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 rounded-xl",children:n.jsx(d,{size:32,className:"text-white"})})]})},c.name)})}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Recent Orders"}),n.jsx(Z,{to:"/customer/orders",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View All "})]}),e.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("p",{className:"text-xl text-gray-300 mb-2",children:"No orders yet"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Start shopping to see your orders here"}),n.jsx(Z,{to:"/shop/beats",className:"inline-block bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-3 rounded-lg text-white font-medium hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Browse Beats"})]}):n.jsx("div",{className:"space-y-4",children:e.map(c=>{var d,h,m;return n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-white font-medium",children:c.orderNumber}),n.jsxs("p",{className:"text-sm text-gray-400",children:[c.items.length," item(s)  ",((m=(h=(d=c.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:m.toLocaleDateString())||"N/A"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-white font-semibold",children:["",c.total.toFixed(2)]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${c.status==="completed"?"bg-green-500/20 text-green-400":c.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:c.status})]})]},c.id)})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(Z,{to:"/shop/beats",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[n.jsx(fo,{size:32,className:"text-white mb-3"}),n.jsx("h3",{className:"text-white font-semibold",children:"Browse Beats"}),n.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Find your next hit"})]}),n.jsxs(Z,{to:"/customer/orders",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-6 rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[n.jsx(fo,{size:32,className:"text-white mb-3"}),n.jsx("h3",{className:"text-white font-semibold",children:"My Orders"}),n.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"View order history"})]}),n.jsxs(Z,{to:"/customer/downloads",className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[n.jsx(Ct,{size:32,className:"text-white mb-3"}),n.jsx("h3",{className:"text-white font-semibold",children:"Downloads"}),n.jsx("p",{className:"text-green-100 text-sm mt-1",children:"Access your beats"})]}),n.jsxs(Z,{to:"/customer/profile",className:"bg-gradient-to-r from-orange-600 to-red-600 p-6 rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[n.jsx(gl,{size:32,className:"text-white mb-3"}),n.jsx("h3",{className:"text-white font-semibold",children:"Profile"}),n.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Manage account"})]})]})]})})},p3=()=>{const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState(!0),[a,o]=w.useState("all");w.useEffect(()=>{if(!t)return;(async()=>{try{const d=await Zr.getOrdersByCustomer(t.email);r(d)}catch(d){console.error("Failed to load orders:",d)}finally{i(!1)}})()},[t]);const l=e.filter(c=>a==="all"?!0:c.status===a);return s?n.jsx(Ot,{children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"text-xl text-white",children:"Loading orders..."})})}):n.jsx(Ot,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Orders"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"View and manage your order history"})]}),n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:n.jsx("div",{className:"flex gap-4",children:["all","completed","processing","pending"].map(c=>n.jsxs("button",{onClick:()=>o(c),className:`px-4 py-2 rounded-lg capitalize transition ${a===c?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[c,n.jsxs("span",{className:"ml-2 text-xs",children:["(",c==="all"?e.length:e.filter(d=>d.status===c).length,")"]})]},c))})}),l.length===0?n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(c_,{size:64,className:"mx-auto mb-4 text-gray-600"}),n.jsx("p",{className:"text-xl text-white mb-2",children:"No orders found"}),n.jsx("p",{className:"text-gray-400 mb-6",children:a==="all"?"You haven't placed any orders yet":`No ${a} orders`}),n.jsx(Z,{to:"/shop/beats",className:"inline-block bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-3 rounded-lg text-white font-medium hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Browse Beats"})]}):n.jsx("div",{className:"space-y-4",children:l.map(c=>{var d,h,m;return n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gray-700/50 p-4 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-lg text-white mb-1",children:c.orderNumber}),n.jsxs("div",{className:"text-sm text-gray-400",children:["Placed on ",((m=(h=(d=c.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:m.toLocaleDateString())||"N/A"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2 ${c.status==="completed"?"bg-green-500/20 text-green-400":c.status==="processing"?"bg-blue-500/20 text-blue-400":c.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:c.status}),n.jsxs("div",{className:"font-bold text-white",children:["",c.total.toFixed(2)]})]})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"space-y-3",children:c.items.map((p,v)=>{var S;return n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("img",{src:p.artworkUrl||"/placeholder-beat.png",alt:p.beatTitle,className:"w-16 h-16 rounded object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-white",children:p.beatTitle}),n.jsxs("div",{className:"text-sm text-gray-400 capitalize",children:[p.licenseType," License"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-semibold text-white",children:["",p.price.toFixed(2)]}),c.status==="completed"&&((S=c.downloadLinks)==null?void 0:S[p.beatId])&&n.jsxs("a",{href:c.downloadLinks[p.beatId],className:"inline-flex items-center gap-1 text-sm text-blue-400 hover:text-blue-300 mt-1",download:!0,children:[n.jsx(Ct,{size:14}),"Download"]})]})]},v)})}),c.status==="completed"&&n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700 flex gap-4",children:n.jsx(Z,{to:"/customer/downloads",className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"View All Downloads "})})]})]},c.id)})})]})})},f3=()=>{const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState([]),[a,o]=w.useState(!0),[l,c]=w.useState("all");return w.useEffect(()=>{if(!t)return;(async()=>{try{const h=await Zr.getOrdersByCustomer(t.email);i(h);const m=[];h.filter(p=>p.status==="completed").forEach(p=>{p.items.forEach(v=>{var N,g,y,j,R,M;const S=(N=p.downloadLinks)==null?void 0:N[v.beatId],b=(g=p.licensePDFs)==null?void 0:g[v.beatId];S&&m.push({...v,orderId:p.id,orderNumber:p.orderNumber,downloadUrl:S,licenseUrl:b,purchasedAt:((j=(y=p.completedAt)==null?void 0:y.toDate)==null?void 0:j.call(y))||((M=(R=p.createdAt)==null?void 0:R.toDate)==null?void 0:M.call(R))||new Date})})}),m.sort((p,v)=>v.purchasedAt.getTime()-p.purchasedAt.getTime()),r(m)}catch(h){console.error("Failed to load downloads:",h)}finally{o(!1)}})()},[t]),a?n.jsx(Ot,{children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"text-xl text-white",children:"Loading downloads..."})})}):n.jsx(Ot,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Downloads"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Access all your purchased beats and licenses"})]}),n.jsxs("div",{className:"flex gap-2 border-b border-gray-700 mb-6",children:[n.jsx("button",{onClick:()=>c("all"),className:`px-4 py-2 font-medium transition-all ${l==="all"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"All Downloads"}),n.jsx("button",{onClick:()=>c("orders"),className:`px-4 py-2 font-medium transition-all ${l==="orders"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"My Orders"}),n.jsx("button",{onClick:()=>c("completed"),className:`px-4 py-2 font-medium transition-all ${l==="completed"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"Completed"})]}),l==="all"&&n.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-8",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"text-2xl",children:""}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold mb-1",children:"Download Tips"}),n.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[n.jsx("li",{children:" All purchases include unlimited re-downloads"}),n.jsx("li",{children:" Download your license agreement for legal protection"}),n.jsx("li",{children:" Files are available in high-quality formats"})]})]})]})}),l==="orders"?s.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("p",{className:"text-xl mb-2",children:"No orders yet"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Start shopping for beats"}),n.jsx(Z,{to:"/customer/shop",className:"inline-block bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg transition",children:"Browse Beats"})]}):n.jsx("div",{className:"space-y-4",children:s.map(d=>{var h,m,p;return n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-white",children:["Order #",d.orderNumber]}),n.jsx("p",{className:"text-sm text-gray-400",children:((p=(m=(h=d.createdAt)==null?void 0:h.toDate)==null?void 0:m.call(h))==null?void 0:p.toLocaleDateString())||"N/A"})]}),n.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium ${d.status==="completed"?"bg-green-600/20 text-green-400":d.status==="pending"?"bg-yellow-600/20 text-yellow-400":"bg-blue-600/20 text-blue-400"}`,children:d.status})]}),n.jsx("div",{className:"space-y-2",children:d.items.map((v,S)=>n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-300",children:[v.beatTitle," (",v.licenseType,")"]}),n.jsxs("span",{className:"text-white font-medium",children:["",v.price.toFixed(2)]})]},S))}),n.jsx("div",{className:"border-t border-gray-700 mt-4 pt-4",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-400",children:"Total"}),n.jsxs("span",{className:"text-xl font-bold text-white",children:["",d.totalAmount.toFixed(2)]})]})})]},d.id)})}):e.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("p",{className:"text-xl mb-2",children:"No downloads available"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Purchase beats to access downloads"}),n.jsx(Z,{to:"/customer/shop",className:"inline-block bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg transition",children:"Browse Beats"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((d,h)=>n.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-750 transition",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:d.artworkUrl||"/placeholder-beat.png",alt:d.beatTitle,className:"w-full h-48 object-cover"}),n.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-xs capitalize",children:[d.licenseType," License"]})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"font-bold text-lg mb-2",children:d.beatTitle}),n.jsxs("div",{className:"text-sm text-gray-400 mb-4",children:["Purchased: ",d.purchasedAt.toLocaleDateString()]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("a",{href:d.downloadUrl,className:"block w-full bg-purple-600 hover:bg-purple-700 text-center py-2 rounded transition",download:!0,children:" Download Beat"}),d.licenseUrl&&n.jsx("a",{href:d.licenseUrl,className:"block w-full bg-gray-700 hover:bg-gray-600 text-center py-2 rounded transition text-sm",download:!0,children:" Download License"})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:n.jsxs(Z,{to:"/customer/orders",className:"text-xs text-gray-400 hover:text-gray-300",children:["Order: ",d.orderNumber," "]})})]})]},h))}),l!=="orders"&&e.length>0&&n.jsxs("div",{className:"mt-12 bg-gray-800 rounded-lg p-6 text-center",children:[n.jsx("h3",{className:"font-bold mb-2",children:"Need Help?"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"Having trouble downloading? Contact support for assistance."}),n.jsx("a",{href:"mailto:support@jonnarincon.com",className:"text-purple-400 hover:text-purple-300",children:"support@jonnarincon.com"})]})]})})},g3=()=>{const[t,e]=w.useState("all"),r=[{id:"1",title:"Summer Vibes Remix",category:"remix",description:"Tropical house remix with uplifting melodies",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"8.5 MB",releaseDate:"2024-01-15"},{id:"2",title:"Free Type Beat",category:"beat",description:"Trap beat with hard 808s - free for non-profit use",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"12.3 MB",releaseDate:"2024-02-01"},{id:"3",title:"Neon Dreams Wallpaper",category:"wallpaper",description:"iPhone wallpaper with neon aesthetic",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"2.1 MB",releaseDate:"2024-01-20"}],s=t==="all"?r:r.filter(o=>o.category===t),i=o=>{switch(o){case"remix":return n.jsx(Le,{size:20});case"beat":return n.jsx(bu,{size:20});case"wallpaper":return n.jsx(sa,{size:20});default:return n.jsx(Ct,{size:20})}},a=o=>{switch(o){case"remix":return"bg-purple-600/20 text-purple-400";case"beat":return"bg-orange-600/20 text-orange-400";case"wallpaper":return"bg-blue-600/20 text-blue-400";default:return"bg-gray-600/20 text-gray-400"}};return n.jsx(Ot,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Free Downloads"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Get free remixes, beats, and wallpapers"})]}),n.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-xl p-4",children:n.jsxs("p",{className:"text-sm text-green-200",children:[" ",n.jsx("strong",{children:"100% Free!"})," Download any of these items for personal use. For commercial use of beats and remixes, please contact us for licensing."]})}),n.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[n.jsx("button",{onClick:()=>e("all"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 ${t==="all"?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:"All Downloads"}),n.jsxs("button",{onClick:()=>e("remix"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="remix"?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[n.jsx(Le,{size:16}),"Remixes"]}),n.jsxs("button",{onClick:()=>e("beat"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="beat"?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[n.jsx(bu,{size:16}),"Beats"]}),n.jsxs("button",{onClick:()=>e("wallpaper"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="wallpaper"?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[n.jsx(sa,{size:16}),"Wallpapers"]})]}),s.length===0?n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(Ct,{size:64,className:"mx-auto mb-4 text-gray-600"}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No downloads available"}),n.jsx("p",{className:"text-gray-400",children:"Check back soon for new free content"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(o=>n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-blue-500 transition-all",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:o.imageUrl,alt:o.title,className:"w-full h-48 object-cover"}),n.jsxs("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-lg text-xs font-medium flex items-center gap-1 ${a(o.category)}`,children:[i(o.category),n.jsx("span",{className:"capitalize",children:o.category})]})]}),n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:o.title}),n.jsx("p",{className:"text-sm text-gray-400",children:o.description})]}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[n.jsx("span",{children:o.fileSize}),n.jsx("span",{children:new Date(o.releaseDate).toLocaleDateString()})]}),n.jsxs("a",{href:o.downloadUrl,download:!0,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-3 rounded-lg text-white font-semibold transition-all flex items-center justify-center gap-2",children:[n.jsx(Ct,{size:18}),"Download Free"]})]})]},o.id))})]})})},x3=()=>{var D,T;const{user:t,signOut:e}=Ce(),[r,s]=w.useState(!1),[i,a]=w.useState((t==null?void 0:t.displayName)||""),[o,l]=w.useState(""),[c,d]=w.useState(""),[h,m]=w.useState(!1),[p,v]=w.useState(null),[S,b]=w.useState(!1),[N,g]=w.useState({artistName:"",region:"",city:"",roles:{producer:!1,beatmaker:!1,engineer:!1,rapper:!1,vocalist:!1,songwriter:!1},instagram:"",spotify:""}),y=async _=>{_.preventDefault(),m(!0),v(null);try{await je.updateUserProfile({displayName:i}),v({type:"success",text:"Profile updated successfully!"}),s(!1)}catch(k){v({type:"error",text:k.message||"Failed to update profile"})}finally{m(!1)}},j=async _=>{if(_.preventDefault(),m(!0),v(null),o!==c){v({type:"error",text:"Passwords do not match"}),m(!1);return}if(o.length<6){v({type:"error",text:"Password must be at least 6 characters"}),m(!1);return}try{await je.updateUserPassword(o),v({type:"success",text:"Password updated successfully!"}),l(""),d("")}catch(k){v({type:"error",text:k.message||"Failed to update password"})}finally{m(!1)}},R=async()=>{try{await e()}catch(_){console.error("Sign out error:",_)}},M=async _=>{_.preventDefault(),m(!0),v(null);try{if(!Object.values(N.roles).some(I=>I)){v({type:"error",text:"Please select at least one artist role"}),m(!1);return}await dt(te($,"artistRoleRequests"),{userId:t==null?void 0:t.uid,userEmail:t==null?void 0:t.email,artistName:N.artistName,region:N.region,city:N.city,roles:Object.entries(N.roles).filter(([I,P])=>P).map(([I,P])=>I),instagram:N.instagram,spotify:N.spotify,status:"pending",createdAt:ue()}),v({type:"success",text:"Artist role request submitted successfully! We will review your request soon."}),b(!1),g({artistName:"",region:"",city:"",roles:{producer:!1,beatmaker:!1,engineer:!1,rapper:!1,vocalist:!1,songwriter:!1},instagram:"",spotify:""})}catch(k){v({type:"error",text:k.message||"Failed to submit artist role request"})}finally{m(!1)}};return n.jsx(Ot,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 text-center",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4",children:((T=(D=t==null?void 0:t.displayName)==null?void 0:D.charAt(0))==null?void 0:T.toUpperCase())||n.jsx(xs,{size:32,className:"text-white"})}),n.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:(t==null?void 0:t.displayName)||"Customer"}),n.jsx("p",{className:"text-gray-400 text-sm mb-4",children:t==null?void 0:t.email}),n.jsx("div",{className:"inline-block px-3 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs font-semibold border border-blue-700",children:"Customer Account"})]})}),n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[p&&n.jsx("div",{className:`p-4 rounded-lg border ${p.type==="success"?"bg-green-900/30 border-green-700 text-green-300":"bg-red-900/30 border-red-700 text-red-300"}`,children:p.text}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile Information"}),!r&&n.jsx("button",{onClick:()=>s(!0),className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"Edit"})]}),r?n.jsxs("form",{onSubmit:y,children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[n.jsx(xs,{size:16,className:"inline mr-1"})," Display Name"]}),n.jsx("input",{type:"text",value:i,onChange:_=>a(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[n.jsx(Zf,{size:16,className:"inline mr-1"})," Email"]}),n.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-gray-400 opacity-50 cursor-not-allowed",disabled:!0}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[n.jsx(Yr,{size:16})," ",h?"Saving...":"Save Changes"]}),n.jsx("button",{type:"button",onClick:()=>{s(!1),a((t==null?void 0:t.displayName)||"")},className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Cancel"})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Display Name"}),n.jsx("div",{className:"font-semibold text-white",children:(t==null?void 0:t.displayName)||"Not set"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Email"}),n.jsx("div",{className:"font-semibold text-white",children:t==null?void 0:t.email})]})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Change Password"}),n.jsxs("form",{onSubmit:j,children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[n.jsx(yn,{size:16,className:"inline mr-1"})," New Password"]}),n.jsx("input",{type:"password",value:o,onChange:_=>l(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"Enter new password",minLength:6})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[n.jsx(yn,{size:16,className:"inline mr-1"})," Confirm New Password"]}),n.jsx("input",{type:"password",value:c,onChange:_=>d(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"Confirm new password",minLength:6})]}),n.jsxs("button",{type:"submit",disabled:h||!o||!c,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[n.jsx(Yr,{size:16})," ",h?"Updating...":"Update Password"]})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[n.jsx(wu,{size:24,className:"text-purple-400"}),"Request Artist Role"]}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Apply to become an artist on the platform"})]}),!S&&n.jsx("button",{onClick:()=>b(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-4 py-2 rounded-lg text-white font-medium transition-all text-sm",children:"Apply Now"})]}),S?n.jsxs("form",{onSubmit:M,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Artist Name *"}),n.jsx("input",{type:"text",value:N.artistName,onChange:_=>g({...N,artistName:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"Your stage name",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Region *"}),n.jsx("input",{type:"text",value:N.region,onChange:_=>g({...N,region:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., North Holland",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"City *"}),n.jsx("input",{type:"text",value:N.city,onChange:_=>g({...N,city:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., Amsterdam",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[n.jsx(gs,{size:16,className:"inline mr-1"})," Instagram"]}),n.jsx("input",{type:"text",value:N.instagram,onChange:_=>g({...N,instagram:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"@username or full URL"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[n.jsx(Le,{size:16,className:"inline mr-1"})," Spotify Link"]}),n.jsx("input",{type:"url",value:N.spotify,onChange:_=>g({...N,spotify:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"https://open.spotify.com/artist/..."})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-3",children:"Artist Roles * (Select all that apply)"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[{key:"producer",label:"Producer"},{key:"beatmaker",label:"Beatmaker"},{key:"engineer",label:"Engineer"},{key:"rapper",label:"Rapper"},{key:"vocalist",label:"Vocalist/Singer"},{key:"songwriter",label:"Songwriter"}].map(_=>n.jsxs("label",{className:"flex items-center space-x-2 p-3 bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:[n.jsx("input",{type:"checkbox",checked:N.roles[_.key],onChange:k=>g({...N,roles:{...N.roles,[_.key]:k.target.checked}}),className:"w-4 h-4 rounded border-gray-600 text-purple-600 focus:ring-purple-500"}),n.jsx("span",{className:"text-sm text-gray-300",children:_.label})]},_.key))})]}),n.jsxs("div",{className:"flex gap-4 pt-4",children:[n.jsxs("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[n.jsx(Yr,{size:16})," ",h?"Submitting...":"Submit Request"]}),n.jsx("button",{type:"button",onClick:()=>b(!1),className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Cancel"})]})]}):n.jsxs("div",{className:"text-center py-8 text-gray-400",children:[n.jsx(wu,{size:48,className:"mx-auto mb-4 text-purple-400 opacity-50"}),n.jsx("p",{children:"Become an artist and start collaborating with others!"}),n.jsx("p",{className:"text-sm mt-2",children:'Click "Apply Now" to submit your artist application.'})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Actions"}),n.jsxs("button",{onClick:R,className:"w-full bg-red-600 hover:bg-red-700 py-3 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:[n.jsx(fa,{size:20})," Sign Out"]})]})]})]})]})})},y3=()=>{var g;const{user:t}=Ce(),[e,r]=w.useState((t==null?void 0:t.displayName)||""),[s,i]=w.useState(!1),[a,o]=w.useState(null),[l,c]=w.useState(""),[d,h]=w.useState(""),[m,p]=w.useState(!1),[v,S]=w.useState(null),b=async y=>{if(y.preventDefault(),!(!t||!e.trim())){i(!0),o(null);try{await nu(t,{displayName:e.trim()}),o({type:"success",text:" Username updated successfully!"}),setTimeout(()=>{window.location.reload()},1e3)}catch(j){console.error("Failed to update profile:",j),o({type:"error",text:" Failed to update username. Please try again."})}finally{i(!1)}}},N=async y=>{if(y.preventDefault(),!!t){if(l.length<6){S({type:"error",text:" Password must be at least 6 characters long."});return}if(l!==d){S({type:"error",text:" Passwords do not match."});return}p(!0),S(null);try{await of(t,l),S({type:"success",text:" Password updated successfully!"}),c(""),h("")}catch(j){console.error("Failed to update password:",j),j.code==="auth/requires-recent-login"?S({type:"error",text:" For security reasons, please sign out and sign in again before changing your password."}):S({type:"error",text:" Failed to update password. Please try again."})}finally{p(!1)}}};return n.jsx(Ot,{children:n.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsx("div",{className:"pb-6 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center text-white font-semibold text-2xl",children:(e==null?void 0:e[0])||((g=t==null?void 0:t.email)==null?void 0:g[0])||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-semibold text-lg",children:(t==null?void 0:t.displayName)||"User"}),n.jsx("p",{className:"text-gray-400 text-sm",children:t==null?void 0:t.email}),n.jsx("span",{className:"px-2 py-0.5 bg-blue-600 text-blue-100 rounded text-xs mt-1 inline-block",children:"Customer"})]})]})}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Display Name ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:e,onChange:y=>r(y.target.value),placeholder:"Enter your display name",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This name will be displayed across the platform"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),n.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",disabled:!0,className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-500 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),a&&n.jsx("div",{className:`p-4 rounded-lg ${a.type==="success"?"bg-green-900/30 border border-green-700 text-green-300":"bg-red-900/30 border border-red-700 text-red-300"}`,children:a.text}),n.jsx("button",{type:"submit",disabled:s||!e.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?n.jsx(n.Fragment,{children:"Saving..."}):n.jsxs(n.Fragment,{children:[n.jsx(Yr,{size:20}),"Save Changes"]})})]})}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(yn,{size:20}),"Change Password"]}),n.jsxs("form",{onSubmit:N,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["New Password ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"password",required:!0,value:l,onChange:y=>c(y.target.value),placeholder:"Enter new password (min. 6 characters)",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Confirm Password ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"password",required:!0,value:d,onChange:y=>h(y.target.value),placeholder:"Confirm new password",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"})]}),v&&n.jsx("div",{className:`p-4 rounded-lg ${v.type==="success"?"bg-green-900/30 border border-green-700 text-green-300":"bg-red-900/30 border border-red-700 text-red-300"}`,children:v.text}),n.jsx("button",{type:"submit",disabled:m||!l||!d,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsx(n.Fragment,{children:"Changing Password..."}):n.jsxs(n.Fragment,{children:[n.jsx(yn,{size:20}),"Change Password"]})})]})]}),n.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:n.jsxs("p",{className:"text-sm text-blue-200",children:[" ",n.jsx("strong",{children:"Note:"})," Changing your display name will update how you appear across all messages, orders, and interactions on the platform."]})})]})})},v3=()=>{const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState(!0),[a,o]=w.useState(null),[l,c]=w.useState({}),[d,h]=w.useState("");w.useEffect(()=>{if(!t)return;const p=te($,"collaborations"),v=_e(p,ae("clientEmail","==",t.email),Ie("createdAt","desc")),S=vt(v,b=>{const N=[];b.forEach(g=>{N.push({id:g.id,...g.data()})}),r(N),i(!1)});return()=>S()},[t]),w.useEffect(()=>{if(!a)return;const p=te($,"collaborationMessages"),v=_e(p,ae("collaborationId","==",a),Ie("createdAt","asc")),S=vt(v,b=>{const N=[];b.forEach(g=>{N.push({id:g.id,...g.data()})}),c(g=>({...g,[a]:N}))});return()=>S()},[a]);const m=async p=>{if(!(!d.trim()||!t))try{await dt(te($,"collaborationMessages"),{collaborationId:p,senderId:t.uid,senderName:t.displayName||"Customer",senderEmail:t.email,message:d.trim(),createdAt:ue()}),h("")}catch(v){console.error("Failed to send message:",v)}};return s?n.jsx(Ot,{children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"text-xl text-white",children:"Loading collaborations..."})})}):n.jsx(Ot,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Collaborations"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Track your collaborations with Jonna Rincon"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:e.length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Active"}),n.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:e.filter(p=>["agreed","contract_sent","signed","in_progress"].includes(p.status)).length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),n.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:e.filter(p=>p.status==="completed").length})]})]}),e.length===0?n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(gr,{size:64,className:"mx-auto mb-4 text-gray-600"}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No collaborations yet"}),n.jsx("p",{className:"text-gray-400",children:"When you start a collaboration, it will appear here"})]}):n.jsx("div",{className:"space-y-4",children:e.map(p=>{var v,S,b,N;return n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[n.jsx("div",{onClick:()=>o(a===p.id?null:p.id),className:"p-6 cursor-pointer hover:bg-gray-750 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:p.title}),n.jsx("span",{className:`px-2 py-1 rounded text-xs ${p.status==="completed"?"bg-green-600/20 text-green-400":p.status==="in_progress"?"bg-cyan-500/20 text-cyan-400":p.status==="signed"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:p.status.replace("_"," ")})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Type:"}),n.jsx("p",{className:"text-white font-medium capitalize",children:p.type})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Budget:"}),n.jsx("p",{className:"text-white font-medium",children:p.budget?`${p.budget.toFixed(2)}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Payment:"}),n.jsxs("p",{className:`font-medium ${p.paymentStatus==="paid"?"text-green-400":p.paymentStatus==="partial"?"text-yellow-400":"text-gray-400"}`,children:["",p.paidAmount.toFixed(2)," (",p.paymentStatus,")"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Started:"}),n.jsx("p",{className:"text-white font-medium",children:((b=(S=(v=p.startDate)==null?void 0:v.toDate)==null?void 0:S.call(v))==null?void 0:b.toLocaleDateString())||"TBD"})]})]})]}),n.jsx("button",{className:"text-gray-400 hover:text-white transition ml-4",children:a===p.id?n.jsx(md,{size:24}):n.jsx(hd,{size:24})})]})}),a===p.id&&n.jsxs("div",{className:"border-t border-gray-700 p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Description"}),n.jsx("p",{className:"text-gray-200",children:p.description})]}),n.jsxs("div",{className:"bg-gray-900 rounded-lg p-4",children:[n.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-4",children:[n.jsx(Qe,{size:20,className:"text-blue-400"}),"Collaboration Chat"]}),n.jsx("div",{className:"bg-gray-800 rounded-lg p-4 max-h-80 overflow-y-auto space-y-3 mb-4",children:!l[p.id]||l[p.id].length===0?n.jsxs("div",{className:"text-center text-gray-400 py-8",children:[n.jsx(Qe,{size:48,className:"mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No messages yet. Start the conversation!"})]}):(N=l[p.id])==null?void 0:N.map(g=>{var y,j,R;return n.jsxs("div",{className:`p-3 rounded-lg ${g.senderId===(t==null?void 0:t.uid)?"bg-blue-900/30 ml-8":"bg-gray-700 mr-8"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-1",children:[n.jsx("span",{className:"font-semibold text-sm text-white",children:g.senderId===(t==null?void 0:t.uid)?"You":g.senderName}),n.jsx("span",{className:"text-xs text-gray-400",children:((R=(j=(y=g.createdAt)==null?void 0:y.toDate)==null?void 0:j.call(y))==null?void 0:R.toLocaleString())||"Just now"})]}),n.jsx("p",{className:"text-gray-300 text-sm",children:g.message})]},g.id)})}),n.jsxs("form",{onSubmit:g=>{g.preventDefault(),m(p.id)},className:"flex gap-2",children:[n.jsx("input",{type:"text",value:d,onChange:g=>h(g.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),n.jsxs("button",{type:"submit",disabled:!d.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(rr,{size:18}),"Send"]})]})]})]})]},p.id)})})]})})},b3=()=>{const{user:t}=Ce(),e=Ar(),[r,s]=w.useState(!1),[i,a]=w.useState({artistName:"",region:"",city:"",roles:[],instagram:"",spotify:"",additionalInfo:""}),o=["Producer","Beatmaker","Engineer","Rapper","Singer/Vocalist","Songwriter"],l=d=>{a(h=>({...h,roles:h.roles.includes(d)?h.roles.filter(m=>m!==d):[...h.roles,d]}))},c=async d=>{if(d.preventDefault(),!!t){s(!0);try{await dt(te($,"artistRoleRequests"),{userId:t.uid,userEmail:t.email,userName:t.displayName||"Customer",artistName:i.artistName,region:i.region,city:i.city,roles:i.roles,instagram:i.instagram,spotify:i.spotify,additionalInfo:i.additionalInfo,status:"pending",createdAt:ue()}),alert(" Artist role request submitted! Admin will review it soon."),e("/customer/dashboard")}catch(h){console.error("Failed to submit artist role request:",h),alert(" Failed to submit request. Please try again.")}finally{s(!1)}}};return n.jsx(Ot,{children:n.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4 rounded-full",children:n.jsx(Le,{size:48,className:"text-white"})})}),n.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Request Artist Role"}),n.jsx("p",{className:"text-gray-400",children:"Apply to become an artist on the Jonna Rincon platform"})]}),n.jsxs("form",{onSubmit:c,className:"bg-gray-800 border border-gray-700 rounded-xl p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Artist Name ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:i.artistName,onChange:d=>a({...i,artistName:d.target.value}),placeholder:"Your stage/artist name",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Region ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:i.region,onChange:d=>a({...i,region:d.target.value}),placeholder:"e.g., North Holland",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["City ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:i.city,onChange:d=>a({...i,city:d.target.value}),placeholder:"e.g., Amsterdam",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["What do you do? ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:o.map(d=>n.jsx("button",{type:"button",onClick:()=>l(d),className:`p-3 rounded-lg border transition ${i.roles.includes(d)?"bg-purple-600 border-purple-500 text-white":"bg-gray-700 border-gray-600 text-gray-300 hover:border-purple-500"}`,children:d},d))}),i.roles.length===0&&n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Select at least one role"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Instagram"}),n.jsx("input",{type:"text",value:i.instagram,onChange:d=>a({...i,instagram:d.target.value}),placeholder:"@yourhandle or full URL",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Spotify Link"}),n.jsx("input",{type:"text",value:i.spotify,onChange:d=>a({...i,spotify:d.target.value}),placeholder:"Your Spotify profile URL",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Information"}),n.jsx("textarea",{rows:4,value:i.additionalInfo,onChange:d=>a({...i,additionalInfo:d.target.value}),placeholder:"Tell us more about your music, experience, or why you want to join...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),n.jsx("button",{type:"submit",disabled:r||i.roles.length===0,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-4 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?n.jsx(n.Fragment,{children:"Submitting..."}):n.jsxs(n.Fragment,{children:[n.jsx(rr,{size:20}),"Submit Application"]})})]}),n.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:n.jsxs("p",{className:"text-sm text-blue-200",children:[" ",n.jsx("strong",{children:"What happens next?"})," Your application will be reviewed by our admin team. We'll notify you via email once your request has been processed."]})})]})})},w3=()=>{const[t,e]=w.useState([]),[r,s]=w.useState(!0),[i,a]=w.useState({sortBy:"newest"});w.useEffect(()=>{o()},[i]);const o=async()=>{try{s(!0);let d=await ks.getPublishedBeats();if(i.genre&&(d=d.filter(h=>h.genre===i.genre)),i.search){const h=i.search.toLowerCase();d=d.filter(m=>m.title.toLowerCase().includes(h)||m.artist.toLowerCase().includes(h)||m.tags.some(p=>p.toLowerCase().includes(h)))}d.sort((h,m)=>{var p,v,S,b;switch(i.sortBy){case"newest":return m.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return m.plays-h.plays;case"price_low":return(((p=h.licenses.basic)==null?void 0:p.price)||0)-(((v=m.licenses.basic)==null?void 0:v.price)||0);case"price_high":return(((S=m.licenses.basic)==null?void 0:S.price)||0)-(((b=h.licenses.basic)==null?void 0:b.price)||0);default:return 0}}),e(d)}catch(c){console.error("Failed to load beats:",c)}finally{s(!1)}},l=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return n.jsx(Ot,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Shop Premium Beats"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Browse and purchase high-quality beats by Jonna Rincon"})]}),n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("input",{type:"text",placeholder:"Search beats...",value:i.search||"",onChange:c=>a({...i,search:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),n.jsxs("select",{value:i.genre||"",onChange:c=>a({...i,genre:c.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[n.jsx("option",{value:"",children:"All Genres"}),l.map(c=>n.jsx("option",{value:c,children:c},c))]}),n.jsxs("select",{value:i.sortBy,onChange:c=>a({...i,sortBy:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[n.jsx("option",{value:"newest",children:"Newest First"}),n.jsx("option",{value:"popular",children:"Most Popular"}),n.jsx("option",{value:"price_low",children:"Price: Low to High"}),n.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(i.genre||i.search)&&n.jsx("button",{onClick:()=>a({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 text-white transition",children:"Clear Filters"})]})}),r?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"text-xl text-white",children:"Loading beats..."})}):t.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-800 border border-gray-700 rounded-xl",children:[n.jsx(Le,{size:64,className:"mx-auto mb-4 text-gray-600"}),n.jsx("p",{className:"text-xl text-white mb-2",children:"No beats found"}),n.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>{var d;return n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-blue-500/50 transition-all hover:transform hover:scale-105",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:c.artworkUrl||"/placeholder-beat.png",alt:c.title,className:"w-full h-48 object-cover"}),c.featured&&n.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),c.trending&&n.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"}),n.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:n.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 rounded-full p-4 transition-all hover:scale-110",children:n.jsx(Qr,{size:32,className:"text-white"})})})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:c.title}),n.jsx("div",{className:"text-sm text-gray-400 mb-3",children:c.artist}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[n.jsxs("span",{children:[c.bpm," BPM"]}),n.jsx("span",{children:""}),n.jsx("span",{children:c.key}),n.jsx("span",{children:""}),n.jsx("span",{children:c.genre})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Qr,{size:12})," ",c.plays.toLocaleString()]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Jf,{size:12})," ",c.likes.toLocaleString()]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ct,{size:12})," ",c.downloads.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),n.jsxs("div",{className:"font-bold text-lg text-white",children:["",((d=c.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),n.jsx(Z,{to:`/customer/shop/${c.id}`,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all",children:"View Beat"})]})]})]},c.id)})}),!r&&t.length>0&&n.jsxs("div",{className:"text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})})},N3=()=>{var p,v,S;const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState(null),[a,o]=w.useState([]),[l,c]=w.useState(""),[d,h]=w.useState([]);w.useEffect(()=>{if(!t)return;const b=te($,"supportMessages"),N=_e(b,Qj(ae("senderId","==",t.uid),ae("recipientId","==",t.uid)),Ie("createdAt","asc")),g=vt(N,y=>{const j=[];y.forEach(R=>{j.push({id:R.id,...R.data()})}),h(j)});return()=>g()},[t]),w.useEffect(()=>{if(!t||d.length===0)return;const b=new Map;d.forEach(g=>{const y=g.senderId===t.uid?g.recipientId:g.senderId;if(!y)return;const j=g.senderId===t.uid?"Support":g.senderName,R=g.senderId===t.uid?"":g.senderEmail;if(!b.has(y))b.set(y,{userId:y,userName:j,userEmail:R,lastMessage:g.message,lastMessageTime:g.createdAt,unreadCount:0});else{const M=b.get(y);g.createdAt.toMillis()>M.lastMessageTime.toMillis()&&(M.lastMessage=g.message,M.lastMessageTime=g.createdAt)}});const N=Array.from(b.values()).sort((g,y)=>y.lastMessageTime.toMillis()-g.lastMessageTime.toMillis());r(N),!s&&N.length>0&&i(N[0].userId)},[d,t,s]),w.useEffect(()=>{if(!s||!t){o([]);return}const b=d.filter(N=>N.senderId===t.uid&&N.recipientId===s||N.senderId===s&&N.recipientId===t.uid||N.senderId===s&&!N.recipientId||N.senderId===t.uid&&!N.recipientId);o(b)},[s,d,t]);const m=async b=>{if(b.preventDefault(),!(!l.trim()||!t||!s))try{await dt(te($,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Customer",senderEmail:t.email,senderRole:"customer",recipientId:s,message:l.trim(),createdAt:ue()}),c("")}catch(N){console.error("Failed to send message:",N)}};return e.length===0?n.jsx(Ot,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Get help from the Jonna Rincon team"})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(Qe,{size:64,className:"mx-auto mb-4 text-gray-600"}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No conversations yet"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Start a conversation with our support team by sending a message below"}),n.jsx("form",{onSubmit:async b=>{if(b.preventDefault(),!(!l.trim()||!t))try{await dt(te($,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Customer",senderEmail:t.email,senderRole:"customer",message:l.trim(),createdAt:ue()}),c("")}catch(N){console.error("Failed to send message:",N)}},className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Type your message to support...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"}),n.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(rr,{size:20}),"Send"]})]})})]})]})}):n.jsx(Ot,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Get help from the Jonna Rincon team"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-700",children:n.jsx("h2",{className:"font-semibold text-white",children:"Conversations"})}),n.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 350px)"},children:e.map(b=>{var N,g,y;return n.jsx("button",{onClick:()=>i(b.userId),className:`w-full p-4 text-left transition border-b border-gray-700 ${s===b.userId?"bg-blue-900/30 border-l-4 border-l-blue-500":"hover:bg-gray-750"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold flex-shrink-0",children:b.userName[0]||"S"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("p",{className:"font-semibold text-white text-sm truncate",children:b.userName}),n.jsx("span",{className:"text-xs text-gray-400",children:((y=(g=(N=b.lastMessageTime)==null?void 0:N.toDate)==null?void 0:g.call(N))==null?void 0:y.toLocaleDateString())||""})]}),n.jsx("p",{className:"text-xs text-gray-400 truncate",children:b.lastMessage})]})]})},b.userId)})})]}),n.jsxs("div",{className:"lg:col-span-2 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 300px)"},children:[n.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-750",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold",children:((p=e.find(b=>b.userId===s))==null?void 0:p.userName[0])||"S"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-white",children:((v=e.find(b=>b.userId===s))==null?void 0:v.userName)||"Support"}),n.jsx("p",{className:"text-xs text-gray-400",children:((S=e.find(b=>b.userId===s))==null?void 0:S.userEmail)||""})]})]})}),n.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:a.length===0?n.jsxs("div",{className:"text-center text-gray-400 py-12",children:[n.jsx(Qe,{size:48,className:"mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No messages yet"})]}):a.map(b=>{var N,g,y;return n.jsxs("div",{className:`p-4 rounded-lg ${b.senderId===(t==null?void 0:t.uid)?"bg-blue-900/30 ml-12":"bg-gray-700 mr-12"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-white",children:b.senderId===(t==null?void 0:t.uid)?"You":b.senderName}),b.senderRole&&b.senderId!==(t==null?void 0:t.uid)&&n.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-600 text-purple-100 rounded text-xs capitalize",children:b.senderRole})]}),n.jsx("span",{className:"text-xs text-gray-400",children:((y=(g=(N=b.createdAt)==null?void 0:N.toDate)==null?void 0:g.call(N))==null?void 0:y.toLocaleString())||"Just now"})]}),n.jsx("p",{className:"text-gray-300",children:b.message})]},b.id)})}),n.jsx("form",{onSubmit:m,className:"p-4 border-t border-gray-700 bg-gray-750",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"}),n.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(rr,{size:20}),"Send"]})]})})]})]}),n.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:n.jsxs("p",{className:"text-sm text-blue-200",children:[" ",n.jsx("strong",{children:"Support Hours:"}),' Our team typically responds within 24 hours during business days. For urgent matters, please include "URGENT" in your message.']})})]})})},sr=({children:t})=>{var h,m;const[e,r]=w.useState(!0),{user:s,signOut:i}=Ce(),a=yr(),o=Ar(),l=async()=>{await i(),o("/")},c=[{name:"Dashboard",href:"/artist/dashboard",icon:pd},{name:"Collaborations",href:"/artist/collaborations",icon:gr},{name:"Request Collab",href:"/artist/request-collab",icon:eg},{name:"Shop Beats",href:"/artist/beats",icon:Le},{name:"My Purchases",href:"/artist/orders",icon:hr},{name:"Free Downloads",href:"/artist/free-downloads",icon:Ct},{name:"Chat",href:"/artist/chat",icon:Qe},{name:"Profile",href:"/artist/profile",icon:xs},{name:"Settings",href:"/artist/settings",icon:fd}],d=p=>a.pathname===p;return n.jsxs("div",{className:"min-h-screen bg-gray-900",children:[n.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Artist"})]}),n.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:n.jsx(kt,{size:20})})]}),n.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:n.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[n.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=s==null?void 0:s.displayName)==null?void 0:h[0])||((m=s==null?void 0:s.email)==null?void 0:m[0])||"A"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(s==null?void 0:s.displayName)||"Artist"}),n.jsx("p",{className:"text-xs text-gray-400 truncate",children:s==null?void 0:s.email})]})]})}),n.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:c.map(p=>{const v=p.icon;return n.jsxs(Z,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-orange-600 to-red-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[n.jsx(v,{size:18,className:"flex-shrink-0"}),n.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),n.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:n.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[n.jsx(fa,{size:18,className:"flex-shrink-0"}),n.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),n.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[n.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[n.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:n.jsx(Bn,{size:24})}),n.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:n.jsx("div",{className:"text-right hidden sm:block",children:n.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),n.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},j3=()=>{const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState([]),[a,o]=w.useState(!0),[l,c]=w.useState({activeCollaborations:0,completedCollaborations:0,beatsPurchased:0,totalSpent:0});w.useEffect(()=>{if(!t)return;(async()=>{try{const p=(await Ho.getAll()).filter(y=>y.clientEmail===t.email||y.assignedTo===t.uid);r(p.slice(0,5));const v=await Zr.getOrdersByCustomer(t.email);i(v);const S=p.filter(y=>y.status==="in_progress"||y.status==="agreed"||y.status==="signed").length,b=p.filter(y=>y.status==="completed").length,N=v.filter(y=>y.status==="completed").reduce((y,j)=>y+j.items.length,0),g=v.filter(y=>y.status==="completed").reduce((y,j)=>y+j.total,0);c({activeCollaborations:S,completedCollaborations:b,beatsPurchased:N,totalSpent:g})}catch(m){console.error("Failed to load dashboard data:",m)}finally{o(!1)}})()},[t]);const d=[{name:"Active Collaborations",value:l.activeCollaborations,icon:gr,change:`${l.completedCollaborations} completed`,changeType:"positive"},{name:"Beats Purchased",value:l.beatsPurchased,icon:Le,change:l.beatsPurchased>0?"From Jonna Rincon":"Browse beats",changeType:"neutral"},{name:"Total Spent",value:`${l.totalSpent.toFixed(2)}`,icon:ra,change:"On beats & licenses",changeType:"neutral"}];return a?n.jsx(sr,{children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"text-xl text-white",children:"Loading..."})})}):n.jsx(sr,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Artist Dashboard"}),n.jsxs("p",{className:"text-gray-400 mt-2",children:["Welcome back, ",(t==null?void 0:t.displayName)||"Artist","!"]})]}),n.jsxs(Z,{to:"/",className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 px-4 py-2 rounded-lg text-white font-medium transition-all flex items-center gap-2",children:[n.jsx(Xf,{size:18}),"Back to Home"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.map(h=>{const m=h.icon;return n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-orange-500/50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:h.name}),n.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:h.value}),n.jsx("p",{className:`text-sm mt-2 ${h.changeType==="positive"?"text-green-400":"text-gray-400"}`,children:h.change})]}),n.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 p-4 rounded-xl",children:n.jsx(m,{size:32,className:"text-white"})})]})},h.name)})}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Active Collaborations"}),n.jsx(Z,{to:"/artist/collaborations",className:"text-orange-400 hover:text-orange-300 text-sm",children:"View All "})]}),e.filter(h=>h.status==="in_progress"||h.status==="signed").length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("p",{className:"text-xl text-gray-300 mb-2",children:"No active collaborations"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Check your collaboration page for inquiries"}),n.jsx(Z,{to:"/artist/collaborations",className:"inline-block bg-gradient-to-r from-orange-600 to-red-600 px-6 py-3 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"View Collaborations"})]}):n.jsx("div",{className:"space-y-4",children:e.filter(h=>h.status==="in_progress"||h.status==="signed").map(h=>{var m,p,v;return n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-white font-medium",children:h.title}),n.jsxs("p",{className:"text-sm text-gray-400 capitalize",children:[h.type,"  ",h.status.replace("_"," ")]})]}),n.jsxs("div",{className:"text-right",children:[h.budget&&n.jsxs("p",{className:"text-white font-semibold",children:["",h.budget.toFixed(2)]}),h.deadline&&n.jsxs("p",{className:"text-xs text-yellow-400",children:["Due: ",((v=(p=(m=h.deadline).toDate)==null?void 0:p.call(m))==null?void 0:v.toLocaleDateString())||"N/A"]})]})]},h.id)})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(Z,{to:"/artist/collaborations",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[n.jsx(gr,{size:32,className:"text-white mb-3"}),n.jsx("h3",{className:"text-white font-semibold",children:"Collaborations"}),n.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Manage projects"})]}),n.jsxs(Z,{to:"/artist/beats",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-6 rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[n.jsx(Le,{size:32,className:"text-white mb-3"}),n.jsx("h3",{className:"text-white font-semibold",children:"Browse Beats"}),n.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Shop from Jonna"})]}),n.jsxs(Z,{to:"/artist/orders",className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[n.jsx(ra,{size:32,className:"text-white mb-3"}),n.jsx("h3",{className:"text-white font-semibold",children:"My Purchases"}),n.jsx("p",{className:"text-green-100 text-sm mt-1",children:"View orders"})]}),n.jsxs(Z,{to:"/artist/profile",className:"bg-gradient-to-r from-orange-600 to-red-600 p-6 rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[n.jsx(gl,{size:32,className:"text-white mb-3"}),n.jsx("h3",{className:"text-white font-semibold",children:"Profile"}),n.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Manage account"})]})]}),n.jsx("div",{className:"bg-orange-900/30 border border-orange-700 rounded-xl p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"text-3xl",children:""}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-white mb-2",children:"Collaborate with Jonna Rincon"}),n.jsx("p",{className:"text-gray-300 mb-4",children:"Work together on exclusive tracks, remixes, and productions. Get access to premium beats and collaborate on exciting projects."}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(Z,{to:"/artist/collaborations",className:"bg-gradient-to-r from-orange-600 to-red-600 px-6 py-2 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"View Collaborations"}),n.jsx(Z,{to:"/artist/beats",className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Browse Beats"})]})]})]})})]})})},_3=()=>{const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState(!0),[a,o]=w.useState("all"),[l,c]=w.useState(null),[d,h]=w.useState({}),[m,p]=w.useState("");w.useEffect(()=>{if(!t)return;(async()=>{try{const g=(await Ho.getAll()).filter(y=>y.clientEmail===t.email||y.assignedTo===t.uid);r(g)}catch(N){console.error("Failed to load collaborations:",N)}finally{i(!1)}})()},[t]),w.useEffect(()=>{if(!l)return;const b=te($,"collaborationMessages"),N=_e(b,ae("collaborationId","==",l),Ie("createdAt","asc")),g=vt(N,y=>{const j=[];y.forEach(R=>{j.push({id:R.id,...R.data()})}),h(R=>({...R,[l]:j}))});return()=>g()},[l]);const v=async b=>{if(!(!m.trim()||!t))try{await dt(te($,"collaborationMessages"),{collaborationId:b,senderId:t.uid,senderName:t.displayName||"Artist",senderEmail:t.email,message:m.trim(),createdAt:ue()}),p("")}catch(N){console.error("Failed to send message:",N)}},S=e.filter(b=>a==="all"?!0:b.status===a);return s?n.jsx(sr,{children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"text-xl text-white",children:"Loading collaborations..."})})}):n.jsx(sr,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Collaborations"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your collaboration projects with Jonna Rincon"})]}),n.jsx("div",{className:"flex gap-4 mb-8 border-b border-gray-700",children:["all","inquiry","in_progress","completed"].map(b=>n.jsxs("button",{onClick:()=>o(b),className:`px-4 py-2 capitalize transition ${a===b?"border-b-2 border-purple-500 text-white":"text-gray-400 hover:text-white"}`,children:[b==="all"?"All":b.replace("_"," "),n.jsxs("span",{className:"ml-2 text-sm",children:["(",b==="all"?e.length:e.filter(N=>N.status===b).length,")"]})]},b))}),S.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[n.jsx("div",{className:"text-4xl mb-4",children:""}),n.jsx("p",{className:"text-xl mb-2",children:"No collaborations found"}),n.jsx("p",{className:"text-gray-400 mb-6",children:a==="all"?"Start collaborating with Jonna Rincon today":`No ${a.replace("_"," ")} collaborations`}),n.jsx("a",{href:"mailto:info@jonnarincon.com",className:"inline-block bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition",children:"Contact for Collaboration"})]}):n.jsx("div",{className:"space-y-6",children:S.map(b=>{var N,g,y,j,R,M,D,T,_,k,I,P,A,C,me;return n.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[n.jsx("div",{className:"bg-gray-700 p-4",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-xl mb-2",children:b.title}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[n.jsx("span",{className:"capitalize",children:b.type}),b.budget&&n.jsxs("span",{children:["Budget: ",b.budget.toFixed(2)]}),b.startDate&&n.jsxs("span",{children:["Started: ",((y=(g=(N=b.startDate).toDate)==null?void 0:g.call(N))==null?void 0:y.toLocaleDateString())||"N/A"]})]})]}),n.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${b.status==="completed"?"bg-green-900 text-green-300":b.status==="in_progress"?"bg-blue-900 text-blue-300":b.status==="signed"?"bg-purple-900 text-purple-300":b.status==="inquiry"?"bg-yellow-900 text-yellow-300":"bg-gray-600 text-gray-300"}`,children:b.status.replace("_"," ")})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-200",children:b.description})]}),(b.startDate||b.endDate||b.deadline)&&n.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Timeline"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[b.startDate&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Start: "}),((M=(R=(j=b.startDate).toDate)==null?void 0:R.call(j))==null?void 0:M.toLocaleDateString())||"N/A"]}),b.deadline&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Deadline: "}),n.jsx("span",{className:"text-yellow-400",children:((_=(T=(D=b.deadline).toDate)==null?void 0:T.call(D))==null?void 0:_.toLocaleDateString())||"N/A"})]}),b.endDate&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"End: "}),((P=(I=(k=b.endDate).toDate)==null?void 0:I.call(k))==null?void 0:P.toLocaleDateString())||"N/A"]})]})]}),b.budget&&n.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-700",children:[n.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Payment"}),n.jsxs("div",{className:"flex gap-8 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Budget: "}),"",b.budget.toFixed(2)]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400",children:"Paid: "}),"",b.paidAmount.toFixed(2)]}),n.jsx("div",{children:n.jsx("span",{className:`font-semibold ${b.paymentStatus==="paid"?"text-green-400":b.paymentStatus==="partial"?"text-yellow-400":"text-red-400"}`,children:b.paymentStatus==="paid"?"Paid in Full":b.paymentStatus==="partial"?"Partially Paid":"Unpaid"})})]})]}),(b.contractPDF||b.attachments&&b.attachments.length>0)&&n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Documents"}),n.jsxs("div",{className:"flex gap-2",children:[b.contractPDF&&n.jsx("a",{href:b.contractPDF,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm transition",children:" Contract"}),(A=b.attachments)==null?void 0:A.map((U,oe)=>n.jsxs("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm transition",children:[" Attachment ",oe+1]},oe))]})]}),b.notes&&n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-300",children:b.notes})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:l===b.id?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[n.jsx(Qe,{size:20,className:"text-blue-400"}),"Messages"]}),n.jsx("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-white transition",children:n.jsx(kt,{size:20})})]}),n.jsx("div",{className:"bg-gray-900 rounded-lg p-4 max-h-96 overflow-y-auto space-y-3",children:((C=d[b.id])==null?void 0:C.length)===0?n.jsxs("div",{className:"text-center text-gray-400 py-8",children:[n.jsx(Qe,{size:48,className:"mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No messages yet. Start the conversation!"})]}):(me=d[b.id])==null?void 0:me.map(U=>{var oe,we,q;return n.jsxs("div",{className:`p-3 rounded-lg ${U.senderId===(t==null?void 0:t.uid)?"bg-purple-900/30 ml-8":"bg-gray-800 mr-8"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-1",children:[n.jsx("span",{className:"font-semibold text-sm text-white",children:U.senderId===(t==null?void 0:t.uid)?"You":U.senderName}),n.jsx("span",{className:"text-xs text-gray-400",children:((q=(we=(oe=U.createdAt)==null?void 0:oe.toDate)==null?void 0:we.call(oe))==null?void 0:q.toLocaleString())||"Just now"})]}),n.jsx("p",{className:"text-gray-300 text-sm",children:U.message})]},U.id)})}),n.jsxs("form",{onSubmit:U=>{U.preventDefault(),v(b.id)},className:"flex gap-2",children:[n.jsx("input",{type:"text",value:m,onChange:U=>p(U.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),n.jsxs("button",{type:"submit",disabled:!m.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(rr,{size:18}),"Send"]})]})]}):n.jsxs("button",{onClick:()=>c(b.id),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-3 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:[n.jsx(Qe,{size:20}),"Open Messages"]})})]})]},b.id)})})]})})},E3=()=>{const{user:t}=Ce(),e=Ar(),[r,s]=w.useState(!1),[i,a]=w.useState({title:"",type:"music_video",description:"",budget:"",preferredStartDate:"",message:""}),o=async l=>{if(l.preventDefault(),!!t){s(!0);try{await dt(te($,"collabRequests"),{artistId:t.uid,artistName:t.displayName||"Unknown Artist",artistEmail:t.email,title:i.title,type:i.type,description:i.description,budget:i.budget?parseFloat(i.budget):null,preferredStartDate:i.preferredStartDate||null,message:i.message,status:"pending",createdAt:ue()}),alert(" Collaboration request submitted! Admin will review it soon."),e("/artist/collaborations")}catch(c){console.error("Failed to submit collab request:",c),alert(" Failed to submit request. Please try again.")}finally{s(!1)}}};return n.jsx(sr,{children:n.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4 rounded-full",children:n.jsx(gr,{size:48,className:"text-white"})})}),n.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Request Collaboration"}),n.jsx("p",{className:"text-gray-400",children:"Submit a collaboration request to work with Jonna Rincon"})]}),n.jsxs("form",{onSubmit:o,className:"bg-gray-800 border border-gray-700 rounded-xl p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Project Title ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:i.title,onChange:l=>a({...i,title:l.target.value}),placeholder:"e.g., Music Video for Summer Track",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Collaboration Type ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsxs("select",{required:!0,value:i.type,onChange:l=>a({...i,type:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500",children:[n.jsx("option",{value:"music_video",children:"Music Video"}),n.jsx("option",{value:"live_performance",children:"Live Performance"}),n.jsx("option",{value:"studio_session",children:"Studio Session"}),n.jsx("option",{value:"event",children:"Event"}),n.jsx("option",{value:"other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Project Description ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("textarea",{required:!0,rows:5,value:i.description,onChange:l=>a({...i,description:l.target.value}),placeholder:"Describe what you want to collaborate on...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Budget ()"}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:i.budget,onChange:l=>a({...i,budget:l.target.value}),placeholder:"e.g., 5000",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Optional - if you have a budget in mind"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Start Date"}),n.jsx("input",{type:"date",value:i.preferredStartDate,onChange:l=>a({...i,preferredStartDate:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Message"}),n.jsx("textarea",{rows:3,value:i.message,onChange:l=>a({...i,message:l.target.value}),placeholder:"Any additional information you'd like to share...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),n.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-4 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?n.jsx(n.Fragment,{children:"Submitting..."}):n.jsxs(n.Fragment,{children:[n.jsx(rr,{size:20}),"Submit Request"]})})]}),n.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:n.jsxs("p",{className:"text-sm text-blue-200",children:[" ",n.jsx("strong",{children:"What happens next?"})," Your request will be reviewed by the admin team. You'll receive an email once your request is approved or if we need more information."]})})]})})},S3=()=>{const[t,e]=w.useState([]),[r,s]=w.useState(!0),[i,a]=w.useState({sortBy:"newest"});w.useEffect(()=>{o()},[i]);const o=async()=>{try{s(!0);let d=await ks.getPublishedBeats();if(i.genre&&(d=d.filter(h=>h.genre===i.genre)),i.search){const h=i.search.toLowerCase();d=d.filter(m=>m.title.toLowerCase().includes(h)||m.artist.toLowerCase().includes(h)||m.tags.some(p=>p.toLowerCase().includes(h)))}d.sort((h,m)=>{var p,v,S,b;switch(i.sortBy){case"newest":return m.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return m.plays-h.plays;case"price_low":return(((p=h.licenses.basic)==null?void 0:p.price)||0)-(((v=m.licenses.basic)==null?void 0:v.price)||0);case"price_high":return(((S=m.licenses.basic)==null?void 0:S.price)||0)-(((b=h.licenses.basic)==null?void 0:b.price)||0);default:return 0}}),e(d)}catch(c){console.error("Failed to load beats:",c)}finally{s(!1)}},l=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return n.jsx(sr,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Shop Premium Beats"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Browse and license high-quality beats by Jonna Rincon"})]}),n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("input",{type:"text",placeholder:"Search beats...",value:i.search||"",onChange:c=>a({...i,search:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500"}),n.jsxs("select",{value:i.genre||"",onChange:c=>a({...i,genre:c.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",children:[n.jsx("option",{value:"",children:"All Genres"}),l.map(c=>n.jsx("option",{value:c,children:c},c))]}),n.jsxs("select",{value:i.sortBy,onChange:c=>a({...i,sortBy:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",children:[n.jsx("option",{value:"newest",children:"Newest First"}),n.jsx("option",{value:"popular",children:"Most Popular"}),n.jsx("option",{value:"price_low",children:"Price: Low to High"}),n.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(i.genre||i.search)&&n.jsx("button",{onClick:()=>a({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 text-white transition",children:"Clear Filters"})]})}),r?n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"text-xl text-white",children:"Loading beats..."})}):t.length===0?n.jsxs("div",{className:"text-center py-12 bg-gray-800 border border-gray-700 rounded-xl",children:[n.jsx(Le,{size:64,className:"mx-auto mb-4 text-gray-600"}),n.jsx("p",{className:"text-xl text-white mb-2",children:"No beats found"}),n.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>{var d;return n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-orange-500/50 transition-all hover:transform hover:scale-105",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:c.artworkUrl||"/placeholder-beat.png",alt:c.title,className:"w-full h-48 object-cover"}),c.featured&&n.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),c.trending&&n.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"}),n.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:n.jsx("button",{className:"bg-orange-600 hover:bg-orange-700 rounded-full p-4 transition-all hover:scale-110",children:n.jsx(Qr,{size:32,className:"text-white"})})})]}),n.jsxs("div",{className:"p-4",children:[n.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:c.title}),n.jsx("div",{className:"text-sm text-gray-400 mb-3",children:c.artist}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[n.jsxs("span",{children:[c.bpm," BPM"]}),n.jsx("span",{children:""}),n.jsx("span",{children:c.key}),n.jsx("span",{children:""}),n.jsx("span",{children:c.genre})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Qr,{size:12})," ",c.plays.toLocaleString()]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Jf,{size:12})," ",c.likes.toLocaleString()]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ct,{size:12})," ",c.downloads.toLocaleString()]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),n.jsxs("div",{className:"font-bold text-lg text-white",children:["",((d=c.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),n.jsx(Z,{to:`/artist/shop/${c.id}`,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-4 py-2 rounded-lg text-white font-medium transition-all",children:"View Beat"})]})]})]},c.id)})}),!r&&t.length>0&&n.jsxs("div",{className:"text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})})},T3=()=>{const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState(!0),[a,o]=w.useState("all");w.useEffect(()=>{if(!t)return;(async()=>{try{const d=await Zr.getOrdersByCustomer(t.email);r(d)}catch(d){console.error("Failed to load orders:",d)}finally{i(!1)}})()},[t]);const l=e.filter(c=>a==="all"?!0:c.status===a);return s?n.jsx(sr,{children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"text-xl text-white",children:"Loading orders..."})})}):n.jsx(sr,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Purchases"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"View your beat purchases and licenses"})]}),n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:n.jsx("div",{className:"flex gap-4",children:["all","completed","processing","pending"].map(c=>n.jsxs("button",{onClick:()=>o(c),className:`px-4 py-2 rounded-lg capitalize transition ${a===c?"bg-gradient-to-r from-orange-600 to-red-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[c,n.jsxs("span",{className:"ml-2 text-xs",children:["(",c==="all"?e.length:e.filter(d=>d.status===c).length,")"]})]},c))})}),l.length===0?n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(c_,{size:64,className:"mx-auto mb-4 text-gray-600"}),n.jsx("p",{className:"text-xl text-white mb-2",children:"No purchases found"}),n.jsx("p",{className:"text-gray-400 mb-6",children:a==="all"?"You haven't purchased any beats yet":`No ${a} orders`}),n.jsx(Z,{to:"/artist/beats",className:"inline-block bg-gradient-to-r from-orange-600 to-red-600 px-6 py-3 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"Browse Beats"})]}):n.jsx("div",{className:"space-y-4",children:l.map(c=>{var d,h,m;return n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-gray-700/50 p-4 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-lg text-white mb-1",children:c.orderNumber}),n.jsxs("div",{className:"text-sm text-gray-400",children:["Placed on ",((m=(h=(d=c.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:m.toLocaleDateString())||"N/A"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2 ${c.status==="completed"?"bg-green-500/20 text-green-400":c.status==="processing"?"bg-blue-500/20 text-blue-400":c.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:c.status}),n.jsxs("div",{className:"font-bold text-white",children:["",c.total.toFixed(2)]})]})]}),n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"space-y-3",children:c.items.map((p,v)=>{var S;return n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("img",{src:p.artworkUrl||"/placeholder-beat.png",alt:p.beatTitle,className:"w-16 h-16 rounded object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-white",children:p.beatTitle}),n.jsxs("div",{className:"text-sm text-gray-400 capitalize",children:[p.licenseType," License"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-semibold text-white",children:["",p.price.toFixed(2)]}),c.status==="completed"&&((S=c.downloadLinks)==null?void 0:S[p.beatId])&&n.jsxs("a",{href:c.downloadLinks[p.beatId],className:"inline-flex items-center gap-1 text-sm text-orange-400 hover:text-orange-300 mt-1",download:!0,children:[n.jsx(Ct,{size:14}),"Download"]})]})]},v)})})})]},c.id)})})]})})},k3=()=>{const[t,e]=w.useState("all"),r=[{id:"1",title:"Summer Vibes Remix",category:"remix",description:"Tropical house remix with uplifting melodies",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"8.5 MB",releaseDate:"2024-01-15"},{id:"2",title:"Free Type Beat",category:"beat",description:"Trap beat with hard 808s - free for non-profit use",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"12.3 MB",releaseDate:"2024-02-01"},{id:"3",title:"Neon Dreams Wallpaper",category:"wallpaper",description:"iPhone wallpaper with neon aesthetic",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"2.1 MB",releaseDate:"2024-01-20"}],s=t==="all"?r:r.filter(o=>o.category===t),i=o=>{switch(o){case"remix":return n.jsx(Le,{size:20});case"beat":return n.jsx(bu,{size:20});case"wallpaper":return n.jsx(sa,{size:20});default:return n.jsx(Ct,{size:20})}},a=o=>{switch(o){case"remix":return"bg-purple-600/20 text-purple-400";case"beat":return"bg-orange-600/20 text-orange-400";case"wallpaper":return"bg-blue-600/20 text-blue-400";default:return"bg-gray-600/20 text-gray-400"}};return n.jsx(sr,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Free Downloads"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Get free remixes, beats, and wallpapers"})]}),n.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-xl p-4",children:n.jsxs("p",{className:"text-sm text-green-200",children:[" ",n.jsx("strong",{children:"100% Free!"})," Download any of these items for personal use. For commercial use of beats and remixes, please contact us for licensing."]})}),n.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[n.jsx("button",{onClick:()=>e("all"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 ${t==="all"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:"All Downloads"}),n.jsxs("button",{onClick:()=>e("remix"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="remix"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[n.jsx(Le,{size:16}),"Remixes"]}),n.jsxs("button",{onClick:()=>e("beat"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="beat"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[n.jsx(bu,{size:16}),"Beats"]}),n.jsxs("button",{onClick:()=>e("wallpaper"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="wallpaper"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[n.jsx(sa,{size:16}),"Wallpapers"]})]}),s.length===0?n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(Ct,{size:64,className:"mx-auto mb-4 text-gray-600"}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No downloads available"}),n.jsx("p",{className:"text-gray-400",children:"Check back soon for new free content"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(o=>n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-purple-500 transition-all",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:o.imageUrl,alt:o.title,className:"w-full h-48 object-cover"}),n.jsxs("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-lg text-xs font-medium flex items-center gap-1 ${a(o.category)}`,children:[i(o.category),n.jsx("span",{className:"capitalize",children:o.category})]})]}),n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:o.title}),n.jsx("p",{className:"text-sm text-gray-400",children:o.description})]}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[n.jsx("span",{children:o.fileSize}),n.jsx("span",{children:new Date(o.releaseDate).toLocaleDateString()})]}),n.jsxs("a",{href:o.downloadUrl,download:!0,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-4 py-3 rounded-lg text-white font-semibold transition-all flex items-center justify-center gap-2",children:[n.jsx(Ct,{size:18}),"Download Free"]})]})]},o.id))})]})})},I3=()=>{var p,v,S;const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState(null),[a,o]=w.useState([]),[l,c]=w.useState(""),[d,h]=w.useState([]);w.useEffect(()=>{if(!t)return;const b=te($,"supportMessages"),N=_e(b,Qj(ae("senderId","==",t.uid),ae("recipientId","==",t.uid)),Ie("createdAt","asc")),g=vt(N,y=>{const j=[];y.forEach(R=>{j.push({id:R.id,...R.data()})}),h(j)});return()=>g()},[t]),w.useEffect(()=>{if(!t||d.length===0)return;const b=new Map;d.forEach(g=>{const y=g.senderId===t.uid?g.recipientId:g.senderId;if(!y)return;const j=g.senderId===t.uid?"Support":g.senderName,R=g.senderId===t.uid?"":g.senderEmail;if(!b.has(y))b.set(y,{userId:y,userName:j,userEmail:R,lastMessage:g.message,lastMessageTime:g.createdAt,unreadCount:0});else{const M=b.get(y);g.createdAt.toMillis()>M.lastMessageTime.toMillis()&&(M.lastMessage=g.message,M.lastMessageTime=g.createdAt)}});const N=Array.from(b.values()).sort((g,y)=>y.lastMessageTime.toMillis()-g.lastMessageTime.toMillis());r(N),!s&&N.length>0&&i(N[0].userId)},[d,t,s]),w.useEffect(()=>{if(!s||!t){o([]);return}const b=d.filter(N=>N.senderId===t.uid&&N.recipientId===s||N.senderId===s&&N.recipientId===t.uid||N.senderId===s&&!N.recipientId||N.senderId===t.uid&&!N.recipientId);o(b)},[s,d,t]);const m=async b=>{if(b.preventDefault(),!(!l.trim()||!t||!s))try{await dt(te($,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Artist",senderEmail:t.email,senderRole:"artist",recipientId:s,message:l.trim(),createdAt:ue()}),c("")}catch(N){console.error("Failed to send message:",N)}};return e.length===0?n.jsx(sr,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Get help from the Jonna Rincon team"})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(Qe,{size:64,className:"mx-auto mb-4 text-gray-600"}),n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No conversations yet"}),n.jsx("p",{className:"text-gray-400 mb-6",children:"Start a conversation with our support team"}),n.jsx("form",{onSubmit:async b=>{if(b.preventDefault(),!(!l.trim()||!t))try{await dt(te($,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Artist",senderEmail:t.email,senderRole:"artist",message:l.trim(),createdAt:ue()}),c("")}catch(N){console.error("Failed to send message:",N)}},className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Type your message to support...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),n.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(rr,{size:20}),"Send"]})]})})]})]})}):n.jsx(sr,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Get help from the Jonna Rincon team"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-700",children:n.jsx("h2",{className:"font-semibold text-white",children:"Conversations"})}),n.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 350px)"},children:e.map(b=>{var N,g,y;return n.jsx("button",{onClick:()=>i(b.userId),className:`w-full p-4 text-left transition border-b border-gray-700 ${s===b.userId?"bg-purple-900/30 border-l-4 border-l-purple-500":"hover:bg-gray-750"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold flex-shrink-0",children:b.userName[0]||"S"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("p",{className:"font-semibold text-white text-sm truncate",children:b.userName}),n.jsx("span",{className:"text-xs text-gray-400",children:((y=(g=(N=b.lastMessageTime)==null?void 0:N.toDate)==null?void 0:g.call(N))==null?void 0:y.toLocaleDateString())||""})]}),n.jsx("p",{className:"text-xs text-gray-400 truncate",children:b.lastMessage})]})]})},b.userId)})})]}),n.jsxs("div",{className:"lg:col-span-2 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 300px)"},children:[n.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-750",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold",children:((p=e.find(b=>b.userId===s))==null?void 0:p.userName[0])||"S"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-white",children:((v=e.find(b=>b.userId===s))==null?void 0:v.userName)||"Support"}),n.jsx("p",{className:"text-xs text-gray-400",children:((S=e.find(b=>b.userId===s))==null?void 0:S.userEmail)||""})]})]})}),n.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:a.length===0?n.jsxs("div",{className:"text-center text-gray-400 py-12",children:[n.jsx(Qe,{size:48,className:"mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No messages yet"})]}):a.map(b=>{var N,g,y;return n.jsxs("div",{className:`p-4 rounded-lg ${b.senderId===(t==null?void 0:t.uid)?"bg-purple-900/30 ml-12":"bg-gray-700 mr-12"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-white",children:b.senderId===(t==null?void 0:t.uid)?"You":b.senderName}),b.senderRole&&b.senderId!==(t==null?void 0:t.uid)&&n.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-600 text-purple-100 rounded text-xs capitalize",children:b.senderRole})]}),n.jsx("span",{className:"text-xs text-gray-400",children:((y=(g=(N=b.createdAt)==null?void 0:N.toDate)==null?void 0:g.call(N))==null?void 0:y.toLocaleString())||"Just now"})]}),n.jsx("p",{className:"text-gray-300",children:b.message})]},b.id)})}),n.jsx("form",{onSubmit:m,className:"p-4 border-t border-gray-700 bg-gray-750",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),n.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(rr,{size:20}),"Send"]})]})})]})]}),n.jsx("div",{className:"bg-purple-900/20 border border-purple-700 rounded-xl p-4",children:n.jsxs("p",{className:"text-sm text-purple-200",children:[" ",n.jsx("strong",{children:"Support Hours:"})," Our team typically responds within 24 hours during business days."]})})]})})},C3=()=>{var g,y;const{user:t,signOut:e}=Ce(),[r,s]=w.useState(!1),[i,a]=w.useState((t==null?void 0:t.displayName)||""),[o,l]=w.useState(""),[c,d]=w.useState(""),[h,m]=w.useState(!1),[p,v]=w.useState(null),S=async j=>{j.preventDefault(),m(!0),v(null);try{await je.updateUserProfile({displayName:i}),v({type:"success",text:"Profile updated successfully!"}),s(!1)}catch(R){v({type:"error",text:R.message||"Failed to update profile"})}finally{m(!1)}},b=async j=>{if(j.preventDefault(),m(!0),v(null),o!==c){v({type:"error",text:"Passwords do not match"}),m(!1);return}if(o.length<6){v({type:"error",text:"Password must be at least 6 characters"}),m(!1);return}try{await je.updateUserPassword(o),v({type:"success",text:"Password updated successfully!"}),l(""),d("")}catch(R){v({type:"error",text:R.message||"Failed to update password"})}finally{m(!1)}},N=async()=>{try{await e()}catch(j){console.error("Sign out error:",j)}};return n.jsx(sr,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 text-center",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-orange-600 to-red-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4",children:((y=(g=t==null?void 0:t.displayName)==null?void 0:g.charAt(0))==null?void 0:y.toUpperCase())||n.jsx(xs,{size:32,className:"text-white"})}),n.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:(t==null?void 0:t.displayName)||"Artist"}),n.jsx("p",{className:"text-gray-400 text-sm mb-4",children:t==null?void 0:t.email}),n.jsx("div",{className:"inline-block px-3 py-1 bg-orange-900/30 text-orange-300 rounded-full text-xs font-semibold border border-orange-700",children:"Artist Account"})]})}),n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[p&&n.jsx("div",{className:`p-4 rounded-lg border ${p.type==="success"?"bg-green-900/30 border-green-700 text-green-300":"bg-red-900/30 border-red-700 text-red-300"}`,children:p.text}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile Information"}),!r&&n.jsx("button",{onClick:()=>s(!0),className:"text-orange-400 hover:text-orange-300 text-sm font-medium",children:"Edit"})]}),r?n.jsxs("form",{onSubmit:S,children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[n.jsx(xs,{size:16,className:"inline mr-1"})," Display Name"]}),n.jsx("input",{type:"text",value:i,onChange:j=>a(j.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",required:!0})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[n.jsx(Zf,{size:16,className:"inline mr-1"})," Email"]}),n.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-gray-400 opacity-50 cursor-not-allowed",disabled:!0}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[n.jsx(Yr,{size:16})," ",h?"Saving...":"Save Changes"]}),n.jsx("button",{type:"button",onClick:()=>{s(!1),a((t==null?void 0:t.displayName)||"")},className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Cancel"})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Display Name"}),n.jsx("div",{className:"font-semibold text-white",children:(t==null?void 0:t.displayName)||"Not set"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Email"}),n.jsx("div",{className:"font-semibold text-white",children:t==null?void 0:t.email})]})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Change Password"}),n.jsxs("form",{onSubmit:b,children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[n.jsx(yn,{size:16,className:"inline mr-1"})," New Password"]}),n.jsx("input",{type:"password",value:o,onChange:j=>l(j.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"Enter new password",minLength:6})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[n.jsx(yn,{size:16,className:"inline mr-1"})," Confirm New Password"]}),n.jsx("input",{type:"password",value:c,onChange:j=>d(j.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"Confirm new password",minLength:6})]}),n.jsxs("button",{type:"submit",disabled:h||!o||!c,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[n.jsx(Yr,{size:16})," ",h?"Updating...":"Update Password"]})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Actions"}),n.jsxs("button",{onClick:N,className:"w-full bg-red-600 hover:bg-red-700 py-3 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:[n.jsx(fa,{size:20})," Sign Out"]})]})]})]})]})})},A3=()=>{var g;const{user:t}=Ce(),[e,r]=w.useState((t==null?void 0:t.displayName)||""),[s,i]=w.useState(!1),[a,o]=w.useState(null),[l,c]=w.useState(""),[d,h]=w.useState(""),[m,p]=w.useState(!1),[v,S]=w.useState(null),b=async y=>{if(y.preventDefault(),!(!t||!e.trim())){i(!0),o(null);try{await nu(t,{displayName:e.trim()}),o({type:"success",text:" Username updated successfully!"}),setTimeout(()=>{window.location.reload()},1e3)}catch(j){console.error("Failed to update profile:",j),o({type:"error",text:" Failed to update username. Please try again."})}finally{i(!1)}}},N=async y=>{if(y.preventDefault(),!!t){if(l.length<6){S({type:"error",text:" Password must be at least 6 characters long."});return}if(l!==d){S({type:"error",text:" Passwords do not match."});return}p(!0),S(null);try{await of(t,l),S({type:"success",text:" Password updated successfully!"}),c(""),h("")}catch(j){console.error("Failed to update password:",j),j.code==="auth/requires-recent-login"?S({type:"error",text:" For security reasons, please sign out and sign in again before changing your password."}):S({type:"error",text:" Failed to update password. Please try again."})}finally{p(!1)}}};return n.jsx(sr,{children:n.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsx("div",{className:"pb-6 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold text-2xl",children:(e==null?void 0:e[0])||((g=t==null?void 0:t.email)==null?void 0:g[0])||"A"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-semibold text-lg",children:(t==null?void 0:t.displayName)||"Artist"}),n.jsx("p",{className:"text-gray-400 text-sm",children:t==null?void 0:t.email}),n.jsx("span",{className:"px-2 py-0.5 bg-purple-600 text-purple-100 rounded text-xs mt-1 inline-block",children:"Artist"})]})]})}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Display Name ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"text",required:!0,value:e,onChange:y=>r(y.target.value),placeholder:"Enter your display name",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This name will be displayed across the platform"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),n.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",disabled:!0,className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-500 cursor-not-allowed"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),a&&n.jsx("div",{className:`p-4 rounded-lg ${a.type==="success"?"bg-green-900/30 border border-green-700 text-green-300":"bg-red-900/30 border border-red-700 text-red-300"}`,children:a.text}),n.jsx("button",{type:"submit",disabled:s||!e.trim(),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?n.jsx(n.Fragment,{children:"Saving..."}):n.jsxs(n.Fragment,{children:[n.jsx(Yr,{size:20}),"Save Changes"]})})]})}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(yn,{size:20}),"Change Password"]}),n.jsxs("form",{onSubmit:N,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["New Password ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"password",required:!0,value:l,onChange:y=>c(y.target.value),placeholder:"Enter new password (min. 6 characters)",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Confirm Password ",n.jsx("span",{className:"text-red-400",children:"*"})]}),n.jsx("input",{type:"password",required:!0,value:d,onChange:y=>h(y.target.value),placeholder:"Confirm new password",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),v&&n.jsx("div",{className:`p-4 rounded-lg ${v.type==="success"?"bg-green-900/30 border border-green-700 text-green-300":"bg-red-900/30 border border-red-700 text-red-300"}`,children:v.text}),n.jsx("button",{type:"submit",disabled:m||!l||!d,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsx(n.Fragment,{children:"Changing Password..."}):n.jsxs(n.Fragment,{children:[n.jsx(yn,{size:20}),"Change Password"]})})]})]}),n.jsx("div",{className:"bg-purple-900/20 border border-purple-700 rounded-xl p-4",children:n.jsxs("p",{className:"text-sm text-purple-200",children:[" ",n.jsx("strong",{children:"Note:"})," Changing your display name will update how you appear in collaborations, messages, and all platform interactions."]})})]})})},ns=({children:t})=>{var h,m;const[e,r]=w.useState(!0),{user:s,signOut:i}=Ce(),a=yr(),o=Ar(),l=async()=>{await i(),o("/admin/login")},c=[{name:"Dashboard",href:"/admin/dashboard",icon:pd},{name:"Beats",href:"/admin/beats",icon:Le},{name:"Orders",href:"/admin/orders",icon:hr},{name:"Social Media",href:"/admin/content",icon:WP},{name:"Collaborations",href:"/admin/collaborations",icon:gr},{name:"Collab Requests",href:"/admin/collab-requests",icon:Er},{name:"Artist Requests",href:"/admin/artist-role-requests",icon:sg},{name:"Analytics",href:"/admin/analytics",icon:HP},{name:"Chat",href:"/admin/chat",icon:Qe},{name:"Settings",href:"/admin/settings",icon:fd}],d=p=>a.pathname===p;return n.jsxs("div",{className:"min-h-screen bg-gray-900",children:[n.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Admin"})]}),n.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:n.jsx(kt,{size:20})})]}),n.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:n.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[n.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=s==null?void 0:s.displayName)==null?void 0:h[0])||((m=s==null?void 0:s.email)==null?void 0:m[0])||"A"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(s==null?void 0:s.displayName)||"Admin"}),n.jsx("p",{className:"text-xs text-gray-400 truncate",children:s==null?void 0:s.email})]})]})}),n.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:c.map(p=>{const v=p.icon;return n.jsxs(Z,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[n.jsx(v,{size:18,className:"flex-shrink-0"}),n.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),n.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:n.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[n.jsx(fa,{size:18,className:"flex-shrink-0"}),n.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),n.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[n.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[n.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:n.jsx(Bn,{size:24})}),n.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:n.jsx("div",{className:"text-right hidden sm:block",children:n.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),n.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},m_=t=>{const[e,r]=w.useState([]),[s,i]=w.useState(!0),[a,o]=w.useState(null);return w.useEffect(()=>{try{const l=Zr.subscribeToOrders(c=>{r(c),i(!1)},t);return()=>l()}catch(l){o(l.message),i(!1)}},[t==null?void 0:t.status,t==null?void 0:t.customerId]),{orders:e,loading:s,error:a}},R3=()=>{const[t,e]=w.useState({totalOrders:0,totalRevenue:0,pendingOrders:0,completedOrders:0,averageOrderValue:0}),[r,s]=w.useState(!0),[i,a]=w.useState(null);return w.useEffect(()=>{(async()=>{try{const l=await Zr.getOrderStatistics();e(l)}catch(l){a(l.message)}finally{s(!1)}})()},[]),{stats:t,loading:r,error:i,refetch:async()=>{s(!0);const o=await Zr.getOrderStatistics();e(o),s(!1)}}},ng=t=>{const[e,r]=w.useState([]),[s,i]=w.useState(!0),[a,o]=w.useState(null);return w.useEffect(()=>{try{const l=Ho.subscribeToCollaborations(c=>{r(c),i(!1)},t);return()=>l()}catch(l){o(l.message),i(!1)}},[t==null?void 0:t.status,t==null?void 0:t.type]),{collaborations:e,loading:s,error:a}},P3=()=>{const[t,e]=w.useState({total:0,active:0,completed:0,totalRevenue:0,pendingRevenue:0}),[r,s]=w.useState(!0),[i,a]=w.useState(null);return w.useEffect(()=>{(async()=>{try{const l=await Ho.getCollaborationStats();e(l)}catch(l){a(l.message)}finally{s(!1)}})()},[]),{stats:t,loading:r,error:i,refetch:async()=>{s(!0);const o=await Ho.getCollaborationStats();e(o),s(!1)}}},D3=()=>{const{stats:t}=R3(),{stats:e}=P3(),[r,s]=w.useState(0),[i,a]=w.useState([]);w.useEffect(()=>{(async()=>{const c=await ks.getAllBeats();s(c.data.length);const d=await Zr.getRecentOrders(5);a(d)})()},[]);const o=[{name:"Total Revenue",value:`${t.totalRevenue.toFixed(2)}`,icon:ra,change:"+12.5%",changeType:"positive"},{name:"Total Orders",value:t.totalOrders,icon:fo,change:`${t.pendingOrders} pending`,changeType:"neutral"},{name:"Total Beats",value:r,icon:Le,change:"In catalog",changeType:"neutral"},{name:"Active Collaborations",value:e.active,icon:gr,change:`${e.completed} completed`,changeType:"positive"},{name:"Avg Order Value",value:`${t.averageOrderValue.toFixed(2)}`,icon:gl,change:"+8.2%",changeType:"positive"},{name:"Pending Revenue",value:`${e.pendingRevenue.toFixed(2)}`,icon:ra,change:"From collaborations",changeType:"neutral"}];return n.jsx(ns,{children:n.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Dashboard"}),n.jsx("p",{className:"text-sm sm:text-base text-gray-400 mt-1 sm:mt-2",children:"Welcome back! Here's what's happening today."})]}),n.jsxs(Z,{to:"/",className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 px-3 sm:px-4 py-2 rounded-lg text-white font-medium transition-all flex items-center gap-2 text-sm sm:text-base flex-shrink-0",children:[n.jsx(Xf,{size:18}),n.jsx("span",{className:"hidden sm:inline",children:"Back to Home"}),n.jsx("span",{className:"sm:hidden",children:"Home"})]})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:o.map(l=>{const c=l.icon;return n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg sm:rounded-xl p-4 sm:p-6 hover:border-purple-500/50 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-xs sm:text-sm text-gray-400 truncate",children:l.name}),n.jsx("p",{className:"text-xl sm:text-3xl font-bold text-white mt-1 sm:mt-2",children:l.value}),n.jsx("p",{className:`text-xs sm:text-sm mt-1 sm:mt-2 ${l.changeType==="positive"?"text-green-400":l.changeType==="negative"?"text-red-400":"text-gray-400"}`,children:l.change})]}),n.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-2 sm:p-4 rounded-lg sm:rounded-xl flex-shrink-0",children:n.jsx(c,{size:20,className:"sm:w-8 sm:h-8 text-white"})})]})},l.name)})}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg sm:rounded-xl p-4 sm:p-6",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white mb-3 sm:mb-4",children:"Recent Orders"}),n.jsx("div",{className:"space-y-2 sm:space-y-4",children:i.length===0?n.jsx("p",{className:"text-gray-400 text-center py-6 sm:py-8 text-sm sm:text-base",children:"No orders yet"}):i.map(l=>n.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gray-700/50 rounded hover:bg-gray-700 transition-colors gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-white font-medium text-sm sm:text-base truncate",children:l.orderNumber}),n.jsx("p",{className:"text-xs sm:text-sm text-gray-400 truncate",children:l.customerEmail})]}),n.jsxs("div",{className:"text-right flex-shrink-0",children:[n.jsxs("p",{className:"text-white font-semibold text-sm sm:text-base",children:["",l.total.toFixed(2)]}),n.jsx("span",{className:`text-xs px-2 py-0.5 sm:py-1 rounded-full inline-block ${l.status==="completed"?"bg-green-500/20 text-green-400":l.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:l.status})]})]},l.id))})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[n.jsxs("a",{href:"/admin/beats",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[n.jsx(Le,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),n.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Manage Beats"}),n.jsx("p",{className:"text-purple-100 text-xs sm:text-sm mt-1",children:"Add or edit beats"})]}),n.jsxs("a",{href:"/admin/orders",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[n.jsx(fo,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),n.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"View Orders"}),n.jsx("p",{className:"text-blue-100 text-xs sm:text-sm mt-1",children:"Process orders"})]}),n.jsxs("a",{href:"/admin/content",className:"bg-gradient-to-r from-green-600 to-teal-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[n.jsx(ZP,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),n.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Content"}),n.jsx("p",{className:"text-green-100 text-xs sm:text-sm mt-1",children:"Manage content"})]}),n.jsxs("a",{href:"/admin/collaborations",className:"bg-gradient-to-r from-orange-600 to-red-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[n.jsx(gr,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),n.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Collaborations"}),n.jsx("p",{className:"text-orange-100 text-xs sm:text-sm mt-1",children:"Manage deals"})]})]})]})})},gd=t=>{const[e,r]=w.useState([]),[s,i]=w.useState(!0),[a,o]=w.useState(null);return w.useEffect(()=>{const l=ks.subscribeToBeats(c=>{r(c),i(!1)},t);return()=>l()},[t==null?void 0:t.status,t==null?void 0:t.featured,t==null?void 0:t.genre]),{beats:e,loading:s,error:a,setError:o}},M3=()=>{const{beats:t,loading:e}=gd(),[r,s]=w.useState(!1),[i,a]=w.useState(null),[o,l]=w.useState(null),c=()=>{a(null),s(!0)},d=p=>{a(p),s(!0)},h=async p=>{if(confirm("Are you sure you want to delete this beat?"))try{await ks.deleteBeat(p),alert("Beat deleted successfully")}catch(v){alert(v.message)}},m=p=>{l(o===p?null:p)};return n.jsxs(ns,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Beats Management"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your beat catalog"})]}),n.jsxs("button",{onClick:c,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all flex items-center space-x-2",children:[n.jsx(eg,{size:20}),n.jsx("span",{children:"Add Beat"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Beats"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Published"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(p=>p.status==="published").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Featured"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(p=>p.featured).length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Plays"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.reduce((p,v)=>p+v.plays,0)})]})]}),n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Beat"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Genre"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"BPM / Key"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Type"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Plays"}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-700",children:e?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Loading beats..."})}):t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"No beats yet. Create your first beat!"})}):t.map(p=>n.jsxs("tr",{className:"hover:bg-gray-700/50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("img",{src:p.artworkUrl,alt:p.title,className:"w-12 h-12 rounded object-cover"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:p.title}),n.jsx("p",{className:"text-sm text-gray-400",children:p.artist})]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-sm",children:p.genre})}),n.jsxs("td",{className:"px-6 py-4 text-gray-300",children:[p.bpm," BPM / ",p.key]}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-2 py-1 rounded text-sm ${p.status==="published"?"bg-green-500/20 text-green-400":p.status==="draft"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:p.status})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-2 py-1 rounded text-sm capitalize ${p.beatType==="free"?"bg-green-500/20 text-green-400":p.beatType==="exclusive"?"bg-orange-500/20 text-orange-400":p.beatType==="premium"?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:p.beatType||"basic"})}),n.jsx("td",{className:"px-6 py-4 text-gray-300",children:p.plays}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("button",{onClick:()=>m(p.id),className:"p-2 text-gray-400 hover:text-purple-400 transition-colors",title:"Play preview",children:o===p.id?n.jsx(Ec,{size:18}):n.jsx(Qr,{size:18})}),n.jsx("button",{onClick:()=>d(p),className:"p-2 text-gray-400 hover:text-blue-400 transition-colors",title:"Edit",children:n.jsx(u_,{size:18})}),n.jsx("button",{onClick:()=>h(p.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Delete",children:n.jsx(rg,{size:18})})]})})]},p.id))})]})})})]}),r&&n.jsx(L3,{beat:i,onClose:()=>s(!1),onSave:()=>{s(!1),a(null)}})]})},L3=({beat:t,onClose:e,onSave:r})=>{var h,m,p,v,S,b,N;const[s,i]=w.useState({title:(t==null?void 0:t.title)||"",artist:(t==null?void 0:t.artist)||"Jonna Rincon",bpm:(t==null?void 0:t.bpm)||120,key:(t==null?void 0:t.key)||"",genre:(t==null?void 0:t.genre)||"",tags:((h=t==null?void 0:t.tags)==null?void 0:h.join(", "))||"",audioUrl:(t==null?void 0:t.audioUrl)||"",artworkUrl:(t==null?void 0:t.artworkUrl)||"",slug:(t==null?void 0:t.slug)||"",status:(t==null?void 0:t.status)||"draft",beatType:(t==null?void 0:t.beatType)||"basic",featured:(t==null?void 0:t.featured)||!1,basicPrice:((p=(m=t==null?void 0:t.licenses)==null?void 0:m.basic)==null?void 0:p.price)||29,premiumPrice:((S=(v=t==null?void 0:t.licenses)==null?void 0:v.premium)==null?void 0:S.price)||49,exclusivePrice:((N=(b=t==null?void 0:t.licenses)==null?void 0:b.exclusive)==null?void 0:N.price)||199}),[a,o]=w.useState(!1),[l,c]=w.useState(!1),d=async g=>{g.preventDefault(),c(!0);try{const y={title:s.title,artist:s.artist,bpm:s.bpm,key:s.key,genre:s.genre,tags:s.tags.split(",").map(j=>j.trim()),audioUrl:s.audioUrl,artworkUrl:s.artworkUrl,slug:s.slug||s.title.toLowerCase().replace(/\s+/g,"-"),status:s.status,beatType:s.beatType,featured:s.featured,trending:!1,licenses:{basic:{type:"basic",price:s.basicPrice,features:["MP3 Download","Non-exclusive rights","Personal use"],downloads:1,streams:1e4,videos:1,distribution:!1},premium:{type:"premium",price:s.premiumPrice,features:["WAV + MP3","Non-exclusive rights","Commercial use","Unlimited streams"],downloads:5,streams:1e6,videos:5,distribution:!0},exclusive:{type:"exclusive",price:s.exclusivePrice,features:["All files","Exclusive rights","Full ownership","Unlimited use"],downloads:-1,streams:-1,videos:-1,distribution:!0}}};t?(await ks.updateBeat(t.id,y),alert("Beat updated successfully")):(await ks.createBeat(y),alert("Beat created successfully")),r()}catch(y){alert(y.message)}finally{c(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full my-8",children:[n.jsx("div",{className:"p-6 border-b border-gray-700",children:n.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Edit Beat":"Add New Beat"})}),n.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),n.jsx("input",{type:"text",value:s.title,onChange:g=>i({...s,title:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Artist"}),n.jsx("input",{type:"text",value:s.artist,onChange:g=>i({...s,artist:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"BPM"}),n.jsx("input",{type:"number",value:s.bpm,onChange:g=>i({...s,bpm:parseInt(g.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key"}),n.jsx("input",{type:"text",value:s.key,onChange:g=>i({...s,key:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Genre"}),n.jsx("input",{type:"text",value:s.genre,onChange:g=>i({...s,genre:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),n.jsxs("select",{value:s.status,onChange:g=>i({...s,status:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"archived",children:"Archived"})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Beat Type"}),n.jsxs("select",{value:s.beatType,onChange:g=>i({...s,beatType:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[n.jsx("option",{value:"free",children:"Free"}),n.jsx("option",{value:"basic",children:"Basic"}),n.jsx("option",{value:"premium",children:"Premium"}),n.jsx("option",{value:"exclusive",children:"Exclusive"})]}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Classify this beat (free beats have no cost, basic/premium/exclusive are paid tiers)"})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),n.jsx("input",{type:"text",value:s.tags,onChange:g=>i({...s,tags:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"trap, dark, atmospheric"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Slug"}),n.jsx("input",{type:"text",value:s.slug,onChange:g=>i({...s,slug:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"auto-generated from title"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Basic Price ()"}),n.jsx("input",{type:"number",value:s.basicPrice,onChange:g=>i({...s,basicPrice:parseFloat(g.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Premium Price ()"}),n.jsx("input",{type:"number",value:s.premiumPrice,onChange:g=>i({...s,premiumPrice:parseFloat(g.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Exclusive Price ()"}),n.jsx("input",{type:"number",value:s.exclusivePrice,onChange:g=>i({...s,exclusivePrice:parseFloat(g.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:s.featured,onChange:g=>i({...s,featured:g.target.checked}),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm text-gray-300",children:"Featured Beat"})]})}),n.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-700",children:[n.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:l||a,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:l?"Saving...":t?"Update Beat":"Create Beat"})]})]})]})})},O3=()=>{const{orders:t,loading:e}=m_(),[r,s]=w.useState("all"),i=r==="all"?t:t.filter(l=>l.status===r),a=async(l,c)=>{try{await Zr.updateOrderStatus(l,c),alert("Order status updated")}catch(d){alert(d.message)}},o=l=>({pending:"bg-yellow-500/20 text-yellow-400",processing:"bg-blue-500/20 text-blue-400",completed:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400",refunded:"bg-gray-500/20 text-gray-400",cancelled:"bg-gray-500/20 text-gray-400"})[l];return n.jsx(ns,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Orders Management"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Manage and process customer orders"})]})}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("select",{value:r,onChange:l=>s(l.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white",children:[n.jsx("option",{value:"all",children:"All Orders"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"failed",children:"Failed"}),n.jsx("option",{value:"refunded",children:"Refunded"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Orders"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Pending"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:t.filter(l=>l.status==="pending").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),n.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(l=>l.status==="completed").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["",t.reduce((l,c)=>c.status==="completed"?l+c.total:l,0).toFixed(2)]})]})]}),n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Order Number"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Customer"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Items"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Total"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Date"}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-700",children:e?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Loading orders..."})}):i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"No orders found"})}):i.map(l=>n.jsxs("tr",{className:"hover:bg-gray-700/50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsx("p",{className:"font-medium text-white",children:l.orderNumber})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-white",children:l.customerName||"Guest"}),n.jsx("p",{className:"text-sm text-gray-400",children:l.customerEmail})]})}),n.jsxs("td",{className:"px-6 py-4 text-gray-300",children:[l.items.length," item(s)"]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("p",{className:"font-semibold text-white",children:["",l.total.toFixed(2)]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("select",{value:l.status,onChange:c=>a(l.id,c.target.value),className:`px-2 py-1 rounded text-sm ${o(l.status)} bg-transparent border-0`,children:[n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"processing",children:"Processing"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"failed",children:"Failed"}),n.jsx("option",{value:"refunded",children:"Refunded"}),n.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),n.jsx("td",{className:"px-6 py-4 text-gray-300 text-sm",children:l.createdAt&&new Date(l.createdAt.seconds*1e3).toLocaleDateString()}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"flex items-center justify-end space-x-2",children:n.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-400 transition-colors",title:"View details",children:n.jsx(Yf,{size:18})})})})]},l.id))})]})})})]})})},p_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InRlY2huaWVrQGpvbm5hcmluY29uLm5sIiwiZXhwIjo0OTI0NDk3Nzc0LCJqdGkiOiIwZjY2YjZmNS01OTg2LTRmMzYtYTVlMy01Yzc4MTFhYjJiOGUifQ.o_SjqVg7uIvu5TL9hsjkPD6_Io5CODTMi9XY7kM-f-0",f_="/api/upload-post",V3=()=>localStorage.getItem("uploadpost_username")||"",F3=t=>localStorage.setItem("uploadpost_username",t),Sh=async(t,e)=>{const r=await fetch(`${f_}${t}`,{...e,headers:{Authorization:`Apikey ${p_}`,...(e==null?void 0:e.headers)||{}}});if(!r.ok){const s=await r.json().catch(()=>({message:"Request failed"}));throw new Error(s.message||`API error ${r.status}`)}return r.json()},U3=()=>{const[t,e]=w.useState("calendar"),[r,s]=w.useState(new Date),[i,a]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(!0),[h,m]=w.useState(!1),[p,v]=w.useState(!1),[S,b]=w.useState(null),[N,g]=w.useState(!1),[y,j]=w.useState(V3()),R=w.useCallback(async()=>{try{g(!0);const U=await Sh("/uploadposts/schedule").catch(()=>({scheduled:[]})),oe=(U.scheduled||U.data||[]).map(B=>({id:B.id||B.job_id||B._id||String(Math.random()),jobId:B.job_id||B.id||B._id,title:B.title||B.caption||"Untitled",platforms:B.platforms||[],scheduledDate:B.scheduled_date||B.scheduledDate||B.date||"",status:B.status||"scheduled",mediaType:B.media_type||B.type||"photo",mediaUrl:B.media_url||B.file_url||"",thumbnailUrl:B.thumbnail_url||B.cover_url||""}));a(oe);const we=await Sh("/uploadposts/history?limit=50").catch(()=>({uploads:[]})),q=(we.uploads||we.data||[]).map(B=>({id:B.id||B.request_id||B._id||String(Math.random()),title:B.title||B.caption||"Untitled",platforms:B.platforms||[],createdAt:B.created_at||B.createdAt||B.date||"",status:B.status||"completed",mediaType:B.media_type||B.type||"photo",request_id:B.request_id}));l(q)}catch(U){console.error("Failed to fetch social media data:",U)}finally{d(!1),g(!1)}},[]);w.useEffect(()=>{R()},[R]),w.useEffect(()=>{y||v(!0)},[y]);const M=()=>{const U=r.getFullYear(),oe=r.getMonth(),we=new Date(U,oe,1),q=new Date(U,oe+1,0),B=we.getDay()===0?6:we.getDay()-1,ee=new Date;ee.setHours(0,0,0,0);const de=[];for(let Q=B-1;Q>=0;Q--){const X=new Date(U,oe,-Q);de.push({date:X,isCurrentMonth:!1,isToday:!1,posts:[]})}for(let Q=1;Q<=q.getDate();Q++){const X=new Date(U,oe,Q),Ue=X.toISOString().split("T")[0],ht=X.getTime()===ee.getTime(),bt=[];i.forEach(rt=>{rt.scheduledDate&&rt.scheduledDate.startsWith(Ue)&&bt.push(rt)}),o.forEach(rt=>{rt.createdAt&&rt.createdAt.startsWith(Ue)&&bt.push(rt)}),de.push({date:X,isCurrentMonth:!0,isToday:ht,posts:bt})}const Se=42-de.length;for(let Q=1;Q<=Se;Q++){const X=new Date(U,oe+1,Q);de.push({date:X,isCurrentMonth:!1,isToday:!1,posts:[]})}return de},D=()=>s(new Date(r.getFullYear(),r.getMonth()-1,1)),T=()=>s(new Date(r.getFullYear(),r.getMonth()+1,1)),_=()=>s(new Date),k=async U=>{if(confirm("Cancel this scheduled post?"))try{await Sh(`/uploadposts/schedule/${U}`,{method:"DELETE"}),await R()}catch(oe){alert("Failed to cancel: "+oe.message)}},I=U=>{if(U.isCurrentMonth){if(!y){v(!0);return}b(U.date),m(!0)}},P=r.toLocaleDateString("en-US",{month:"long",year:"numeric"}),A=M(),C=U=>{switch(U.toLowerCase()){case"instagram":return n.jsx(gs,{size:14,className:"text-pink-400"});case"youtube":return n.jsx(ti,{size:14,className:"text-red-400"});default:return n.jsx(rr,{size:14,className:"text-gray-400"})}},me=U=>{switch(U){case"completed":case"published":return n.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-400",children:[n.jsx(Eh,{size:12})," Published"]});case"scheduled":case"pending":return n.jsxs("span",{className:"flex items-center gap-1 text-xs text-blue-400",children:[n.jsx(Er,{size:12})," Scheduled"]});case"failed":case"error":return n.jsxs("span",{className:"flex items-center gap-1 text-xs text-red-400",children:[n.jsx(Xy,{size:12})," Failed"]});default:return n.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-400",children:[n.jsx(Er,{size:12})," ",U]})}};return n.jsxs(ns,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Social Media Planner"}),n.jsx("p",{className:"text-gray-400 mt-2",children:y?n.jsxs(n.Fragment,{children:["Schedule and manage posts for ",n.jsxs("span",{className:"text-purple-400",children:["@",y]})]}):n.jsx(n.Fragment,{children:"Configure your username to get started"})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>v(!0),className:"p-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-400 hover:text-white transition",title:"Settings",children:n.jsx(fd,{size:20})}),n.jsx("button",{onClick:R,disabled:N,className:"p-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-400 hover:text-white transition disabled:opacity-50",title:"Refresh",children:n.jsx(Gm,{size:20,className:N?"animate-spin":""})}),n.jsxs("button",{onClick:()=>{if(!y){v(!0);return}b(null),m(!0)},className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all flex items-center space-x-2",children:[n.jsx(eg,{size:20}),n.jsx("span",{children:"Create Post"})]})]})]}),!y&&n.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-700 rounded-xl p-4 flex items-center gap-3",children:[n.jsx(Xy,{size:24,className:"text-yellow-400 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-yellow-400 font-bold",children:"Username Not Configured"}),n.jsx("p",{className:"text-yellow-300/80 text-sm mt-1",children:"Please configure your Upload-Post.com username in settings to start posting."})]}),n.jsx("button",{onClick:()=>v(!0),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-semibold transition",children:"Configure"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Scheduled"}),n.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:i.length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Published"}),n.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:o.filter(U=>U.status==="completed"||U.status==="published").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 flex items-center gap-3",children:[n.jsx(gs,{size:24,className:"text-pink-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Instagram"}),n.jsx("p",{className:"text-white font-bold",children:y?"Ready":"Not configured"})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 flex items-center gap-3",children:[n.jsx(ti,{size:24,className:"text-red-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"YouTube"}),n.jsx("p",{className:"text-white font-bold",children:y?"Ready":"Not configured"})]})]})]}),n.jsxs("div",{className:"flex gap-2 border-b border-gray-700",children:[n.jsxs("button",{onClick:()=>e("calendar"),className:`px-4 py-2 font-medium transition flex items-center gap-2 ${t==="calendar"?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-gray-300"}`,children:[n.jsx(Wm,{size:18})," Calendar"]}),n.jsxs("button",{onClick:()=>e("scheduled"),className:`px-4 py-2 font-medium transition flex items-center gap-2 ${t==="scheduled"?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-gray-300"}`,children:[n.jsx(Er,{size:18})," Scheduled (",i.length,")"]}),n.jsxs("button",{onClick:()=>e("history"),className:`px-4 py-2 font-medium transition flex items-center gap-2 ${t==="history"?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-gray-300"}`,children:[n.jsx(Eh,{size:18})," History (",o.length,")"]})]}),t==="calendar"&&n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[n.jsx("button",{onClick:D,className:"p-2 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white transition",children:n.jsx(n_,{size:20})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:P}),n.jsx("button",{onClick:_,className:"text-xs px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition",children:"Today"})]}),n.jsx("button",{onClick:T,className:"p-2 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white transition",children:n.jsx(i_,{size:20})})]}),n.jsx("div",{className:"grid grid-cols-7 bg-gray-700/50",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(U=>n.jsx("div",{className:"p-2 text-center text-xs font-semibold text-gray-400 uppercase",children:U},U))}),n.jsx("div",{className:"grid grid-cols-7",children:A.map((U,oe)=>n.jsxs("div",{onClick:()=>I(U),className:`min-h-[100px] border-t border-r border-gray-700/50 p-1.5 transition cursor-pointer ${U.isCurrentMonth?U.isToday?"bg-purple-900/20 border-l-2 border-l-purple-500":"hover:bg-gray-700/30":"bg-gray-900/30 opacity-40"}`,children:[n.jsx("div",{className:`text-xs font-medium mb-1 ${U.isToday?"text-purple-400 font-bold":U.isCurrentMonth?"text-gray-300":"text-gray-600"}`,children:U.date.getDate()}),n.jsxs("div",{className:"space-y-0.5",children:[U.posts.slice(0,3).map((we,q)=>{var ee;const B="scheduledDate"in we;return n.jsx("div",{className:`text-[10px] px-1 py-0.5 rounded truncate ${B?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-green-500/20 text-green-300 border border-green-500/30"}`,title:we.title,children:n.jsxs("div",{className:"flex items-center gap-0.5",children:[(ee=we.platforms)==null?void 0:ee.slice(0,2).map((de,Se)=>n.jsx("span",{children:C(typeof de=="string"?de:de.name)},Se)),n.jsx("span",{className:"truncate",children:we.title})]})},q)}),U.posts.length>3&&n.jsxs("div",{className:"text-[10px] text-gray-500 text-center",children:["+",U.posts.length-3," more"]})]})]},oe))})]}),t==="scheduled"&&n.jsx("div",{className:"space-y-3",children:c?n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading scheduled posts..."}):i.length===0?n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(Er,{size:48,className:"mx-auto mb-4 text-gray-600"}),n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No scheduled posts"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"Create your first scheduled post to get started"}),n.jsx("button",{onClick:()=>{if(!y){v(!0);return}m(!0)},className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Schedule Post"})]}):i.map(U=>n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-700 flex items-center justify-center flex-shrink-0",children:U.mediaType==="video"?n.jsx(o_,{size:20,className:"text-red-400"}):U.mediaType==="photo"?n.jsx(sa,{size:20,className:"text-blue-400"}):n.jsx(d_,{size:20,className:"text-green-400"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h3",{className:"font-bold text-white truncate",children:U.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[n.jsx("div",{className:"flex items-center gap-1",children:U.platforms.map((oe,we)=>n.jsx("span",{children:C(oe)},we))}),n.jsxs("span",{className:"text-xs text-gray-400",children:[n.jsx(Wm,{size:12,className:"inline mr-1"}),new Date(U.scheduledDate).toLocaleString()]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[me(U.status),U.jobId&&n.jsx("button",{onClick:()=>k(U.jobId),className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Cancel scheduled post",children:n.jsx(rg,{size:18})})]})]})},U.id))}),t==="history"&&n.jsx("div",{className:"space-y-3",children:c?n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading history..."}):o.length===0?n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(Eh,{size:48,className:"mx-auto mb-4 text-gray-600"}),n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No posts yet"}),n.jsx("p",{className:"text-gray-400",children:"Your published posts will appear here"})]}):o.map(U=>n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h3",{className:"font-bold text-white truncate",children:U.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1 flex-wrap",children:[n.jsx("div",{className:"flex items-center gap-1",children:U.platforms.map((oe,we)=>{const q=typeof oe=="string"?oe:oe.name,B=typeof oe=="string"?void 0:oe.url;return n.jsxs("span",{className:"flex items-center gap-0.5",children:[C(q),B&&n.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-purple-400 hover:underline",children:"View"})]},we)})}),n.jsx("span",{className:"text-xs text-gray-400",children:U.createdAt?new Date(U.createdAt).toLocaleString():"N/A"})]})]})}),n.jsx("div",{className:"flex-shrink-0",children:me(U.status)})]})},U.id))})]}),p&&n.jsx(z3,{currentUsername:y,onClose:()=>v(!1),onSave:U=>{j(U),F3(U),v(!1)}}),h&&y&&n.jsx(B3,{profileUsername:y,onClose:()=>{m(!1),b(null)},onSave:()=>{m(!1),b(null),R()},preselectedDate:S})]})},z3=({currentUsername:t,onClose:e,onSave:r})=>{const[s,i]=w.useState(t),a=o=>{if(o.preventDefault(),!s.trim()){alert("Please enter a username");return}r(s.trim())};return n.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-md w-full",children:[n.jsxs("div",{className:"p-6 border-b border-gray-700 flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:"Settings"}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition",children:n.jsx(kt,{size:24})})]}),n.jsxs("form",{onSubmit:a,className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Upload-Post.com Username *"}),n.jsx("input",{type:"text",value:s,onChange:o=>i(o.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"your-username",required:!0}),n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"This is your profile username on Upload-Post.com (not your email)"})]}),n.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-3",children:n.jsxs("p",{className:"text-xs text-blue-300",children:[n.jsx("strong",{children:"Note:"})," Make sure this username exists in your Upload-Post.com account and is properly connected to Instagram/YouTube."]})}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-700",children:[n.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all",children:"Save Username"})]})]})]})})},B3=({profileUsername:t,onClose:e,onSave:r,preselectedDate:s})=>{const[i,a]=w.useState("photo"),[o,l]=w.useState(["instagram"]),[c,d]=w.useState(""),[h,m]=w.useState(""),[p,v]=w.useState(null),[S,b]=w.useState(""),[N,g]=w.useState(""),[y,j]=w.useState(!!s),[R,M]=w.useState(s?`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}T12:00`:""),[D,T]=w.useState(!1),[_,k]=w.useState(""),[I,P]=w.useState("IMAGE"),[A,C]=w.useState("public"),[me,U]=w.useState(""),[oe,we]=w.useState("22"),q=Q=>{l(X=>X.includes(Q)?X.filter(Ue=>Ue!==Q):[...X,Q])},B=Q=>{var Ue;const X=(Ue=Q.target.files)==null?void 0:Ue[0];X&&(v(X),b(URL.createObjectURL(X)),X.type.startsWith("video/")?a("video"):X.type.startsWith("image/")&&a("photo"))},ee=async Q=>{if(Q.preventDefault(),!c.trim()){alert("Please enter a caption/title");return}if(i!=="text"&&!p&&!N){alert("Please upload a file or provide a media URL");return}if(o.length===0){alert("Please select at least one platform");return}T(!0),k("Preparing upload...");try{const X=new FormData;if(X.append("user",t),X.append("title",c),o.forEach(rt=>X.append("platform[]",rt)),h&&X.append("description",h),y&&R){const rt=new Date(R).toISOString();X.append("scheduled_date",rt),X.append("timezone",Intl.DateTimeFormat().resolvedOptions().timeZone)}o.includes("instagram")&&(i==="video"?X.append("media_type",I==="IMAGE"?"REELS":I):i==="photo"&&X.append("media_type",I==="REELS"?"IMAGE":I)),o.includes("youtube")&&(X.append("privacyStatus",A),me&&me.split(",").map(rt=>rt.trim()).filter(Boolean).forEach(rt=>X.append("tags[]",rt)),X.append("categoryId",oe),h&&X.append("youtube_description",h));let Ue="/upload";i==="photo"?(Ue="/upload_photos",p?X.append("photos[]",p):N&&X.append("photos[]",N)):i==="video"?(Ue="/upload",p?X.append("video",p):N&&X.append("video",N)):Ue="/upload_text",k("Uploading to platforms...");const ht=await fetch(`${f_}${Ue}`,{method:"POST",headers:{Authorization:`Apikey ${p_}`},body:X}),bt=await ht.json();if(!ht.ok)throw new Error(bt.message||`Upload failed (${ht.status})`);if(bt.success===!1)throw new Error(bt.message||"Upload failed");k(""),alert(y?"Post scheduled successfully!":"Post published successfully!"),r()}catch(X){console.error("Upload failed:",X),k(""),alert("Upload failed: "+X.message)}finally{T(!1)}},de=i==="text"?[{id:"instagram",label:"Instagram",icon:gs,color:"pink"}]:[{id:"instagram",label:"Instagram",icon:gs,color:"pink"},{id:"youtube",label:"YouTube",icon:ti,color:"red"}],Se=i==="photo"?de.filter(Q=>Q.id!=="youtube"):de;return n.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full my-8",children:[n.jsxs("div",{className:"p-6 border-b border-gray-700 flex items-center justify-between",children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:y?"Schedule Post":"Create Post"}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition",children:n.jsx(kt,{size:24})})]}),n.jsxs("form",{onSubmit:ee,className:"p-6 space-y-5 max-h-[calc(100vh-200px)] overflow-y-auto",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Content Type"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>a("photo"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${i==="photo"?"bg-blue-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:[n.jsx(sa,{size:18})," Photo"]}),n.jsxs("button",{type:"button",onClick:()=>a("video"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${i==="video"?"bg-red-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:[n.jsx(o_,{size:18})," Video"]}),n.jsxs("button",{type:"button",onClick:()=>a("text"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${i==="text"?"bg-green-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:[n.jsx(d_,{size:18})," Text"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Post to Platforms"}),n.jsx("div",{className:"flex gap-2",children:Se.map(Q=>{const X=Q.icon,Ue=o.includes(Q.id);return n.jsxs("button",{type:"button",onClick:()=>q(Q.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition border ${Ue?`bg-${Q.color}-600/20 border-${Q.color}-500 text-${Q.color}-400`:"bg-gray-700 border-gray-600 text-gray-400 hover:bg-gray-600"}`,style:Ue?{backgroundColor:Q.color==="pink"?"rgba(236,72,153,0.2)":"rgba(239,68,68,0.2)",borderColor:Q.color==="pink"?"#ec4899":"#ef4444",color:Q.color==="pink"?"#f472b6":"#f87171"}:{},children:[n.jsx(X,{size:18}),Q.label]},Q.id)})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Caption / Title *"}),n.jsx("textarea",{value:c,onChange:Q=>d(Q.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500 resize-none",rows:3,placeholder:"Write your caption or title...",required:!0}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c.length," characters"]})]}),o.includes("youtube")&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"YouTube Description"}),n.jsx("textarea",{value:h,onChange:Q=>m(Q.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500 resize-none",rows:3,placeholder:"YouTube video description..."})]}),i!=="text"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:i==="video"?"Upload Video":"Upload Photo"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center justify-center gap-2 px-4 py-4 bg-gray-700 border-2 border-dashed border-gray-600 rounded-lg text-gray-400 hover:border-purple-500 hover:text-purple-400 cursor-pointer transition",children:[n.jsx(XP,{size:20}),n.jsx("span",{children:p?p.name:`Choose ${i==="video"?"video":"image"} file`}),n.jsx("input",{type:"file",accept:i==="video"?"video/*":"image/*",onChange:B,className:"hidden"})]}),n.jsx("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:n.jsx("span",{children:"or"})}),n.jsx("input",{type:"url",value:N,onChange:Q=>g(Q.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"Paste media URL..."}),S&&n.jsx("div",{className:"mt-2",children:i==="video"?n.jsx("video",{src:S,controls:!0,className:"w-full h-48 rounded-lg object-cover"}):n.jsx("img",{src:S,alt:"Preview",className:"w-full h-48 rounded-lg object-cover"})})]})]}),o.includes("instagram")&&i!=="text"&&n.jsxs("div",{className:"bg-gradient-to-r from-pink-900/20 to-purple-900/20 border border-pink-700/30 rounded-lg p-4",children:[n.jsxs("h4",{className:"text-sm font-semibold text-pink-400 flex items-center gap-2 mb-3",children:[n.jsx(gs,{size:16})," Instagram Options"]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Media Type"}),n.jsx("select",{value:I,onChange:Q=>P(Q.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-pink-500",children:i==="video"?n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"REELS",children:"Reels"}),n.jsx("option",{value:"STORIES",children:"Story"})]}):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"IMAGE",children:"Feed Post"}),n.jsx("option",{value:"STORIES",children:"Story"})]})})]})]}),o.includes("youtube")&&i==="video"&&n.jsxs("div",{className:"bg-red-900/20 border border-red-700/30 rounded-lg p-4",children:[n.jsxs("h4",{className:"text-sm font-semibold text-red-400 flex items-center gap-2 mb-3",children:[n.jsx(ti,{size:16})," YouTube Options"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Privacy"}),n.jsxs("select",{value:A,onChange:Q=>C(Q.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-red-500",children:[n.jsx("option",{value:"public",children:"Public"}),n.jsx("option",{value:"unlisted",children:"Unlisted"}),n.jsx("option",{value:"private",children:"Private"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Category"}),n.jsxs("select",{value:oe,onChange:Q=>we(Q.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-red-500",children:[n.jsx("option",{value:"10",children:"Music"}),n.jsx("option",{value:"22",children:"People & Blogs"}),n.jsx("option",{value:"24",children:"Entertainment"}),n.jsx("option",{value:"26",children:"Howto & Style"}),n.jsx("option",{value:"20",children:"Gaming"}),n.jsx("option",{value:"1",children:"Film & Animation"})]})]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Tags (comma separated)"}),n.jsx("input",{type:"text",value:me,onChange:Q=>U(Q.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-red-500",placeholder:"music, beats, producer"})]})]}),n.jsxs("div",{className:"bg-gray-900/50 border border-gray-700 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[n.jsx(Er,{size:16})," Schedule Post"]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:y,onChange:Q=>j(Q.target.checked),className:"w-4 h-4 rounded"}),n.jsx("span",{className:"text-sm text-gray-300",children:"Schedule for later"})]})]}),y&&n.jsx("input",{type:"datetime-local",value:R,onChange:Q=>M(Q.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",required:y})]}),_&&n.jsxs("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-3 flex items-center gap-2",children:[n.jsx(Gm,{size:16,className:"animate-spin text-blue-400"}),n.jsx("span",{className:"text-blue-300 text-sm",children:_})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-700",children:[n.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:D||!c.trim()||o.length===0,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:D?n.jsxs(n.Fragment,{children:[n.jsx(Gm,{size:18,className:"animate-spin"})," Uploading..."]}):y?n.jsxs(n.Fragment,{children:[n.jsx(Er,{size:18})," Schedule Post"]}):n.jsxs(n.Fragment,{children:[n.jsx(rr,{size:18})," Publish Now"]})})]})]})]})})},$3=t=>{const[e,r]=w.useState([]),[s,i]=w.useState(!0);return w.useEffect(()=>{const a=VP.subscribeToContent(o=>{r(o),i(!1)},t);return()=>a()},[t==null?void 0:t.type,t==null?void 0:t.status,t==null?void 0:t.featured]),{content:e,loading:s}},q3=()=>{const{beats:t}=gd(),{orders:e,statistics:r}=m_(),{content:s}=$3(),{collaborations:i,statistics:a}=ng(),[o,l]=w.useState("30d"),c=(r==null?void 0:r.totalRevenue)||0,d=e.length,h=t.length,m=s.reduce((D,T)=>D+T.views,0),p=t.reduce((D,T)=>D+T.plays,0),v=t.reduce((D,T)=>D+T.downloads,0),S=[...t].sort((D,T)=>T.plays-D.plays).slice(0,5),b=[...s].sort((D,T)=>T.views-D.views).slice(0,5),N=[...e].sort((D,T)=>{var I,P,A,C;const _=((P=(I=D.createdAt)==null?void 0:I.toDate)==null?void 0:P.call(I))||new Date(0);return(((C=(A=T.createdAt)==null?void 0:A.toDate)==null?void 0:C.call(A))||new Date(0)).getTime()-_.getTime()}).slice(0,5),g=12.5,y=t.filter(D=>D.status==="published").length,j=t.filter(D=>D.featured).length,R=s.filter(D=>D.status==="published").length,M=i.filter(D=>D.status==="active").length;return n.jsx(ns,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Analytics Dashboard"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Overview of your platform performance"})]}),n.jsx("div",{children:n.jsxs("select",{value:o,onChange:D=>l(D.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[n.jsx("option",{value:"7d",children:"Last 7 days"}),n.jsx("option",{value:"30d",children:"Last 30 days"}),n.jsx("option",{value:"90d",children:"Last 90 days"}),n.jsx("option",{value:"all",children:"All time"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),n.jsx(ra,{className:"text-green-400",size:20})]}),n.jsxs("p",{className:"text-3xl font-bold text-white",children:["",c.toLocaleString()]}),n.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[n.jsx(gl,{className:"text-green-400 mr-1",size:16}),n.jsxs("span",{className:"text-green-400",children:["+",g,"%"]}),n.jsx("span",{className:"text-gray-500 ml-1",children:"vs last period"})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Orders"}),n.jsx(hr,{className:"text-blue-400",size:20})]}),n.jsx("p",{className:"text-3xl font-bold text-white",children:d}),n.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[e.filter(D=>D.status==="completed").length," completed"]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Beats"}),n.jsx(Le,{className:"text-purple-400",size:20})]}),n.jsx("p",{className:"text-3xl font-bold text-white",children:h}),n.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[y," published  ",j," featured"]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Content Views"}),n.jsx(Yf,{className:"text-pink-400",size:20})]}),n.jsx("p",{className:"text-3xl font-bold text-white",children:m.toLocaleString()}),n.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[R," published articles"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Beat Performance"}),n.jsx(Le,{className:"text-purple-400",size:20})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:"Total Plays"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:p.toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:"Total Downloads"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:v.toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:"Avg Plays per Beat"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:h>0?Math.round(p/h):0})]})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Content Engagement"}),n.jsx(GP,{className:"text-blue-400",size:20})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:"Total Articles"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:s.length})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:"Total Likes"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:s.reduce((D,T)=>D+T.likes,0).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:"Total Shares"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:s.reduce((D,T)=>D+T.shares,0).toLocaleString()})]})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Collaborations"}),n.jsx(gr,{className:"text-green-400",size:20})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:"Total Collaborations"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:i.length})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:"Active"}),n.jsx("p",{className:"text-2xl font-bold text-white",children:M})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-400",children:"Total Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-white",children:["",((a==null?void 0:a.totalRevenue)||0).toLocaleString()]})]})]})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Performing Beats"}),n.jsx("div",{className:"space-y-3",children:S.length===0?n.jsx("p",{className:"text-gray-400 text-center py-4",children:"No beats available"}):S.map((D,T)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("span",{className:"text-2xl font-bold text-gray-500",children:["#",T+1]}),n.jsx("img",{src:D.artworkUrl,alt:D.title,className:"w-12 h-12 rounded object-cover"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:D.title}),n.jsx("p",{className:"text-sm text-gray-400",children:D.artist})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"font-semibold text-white",children:[D.plays.toLocaleString()," plays"]}),n.jsxs("p",{className:"text-sm text-gray-400",children:[D.downloads," downloads"]})]})]},D.id))})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Content by Views"}),n.jsx("div",{className:"space-y-3",children:b.length===0?n.jsx("p",{className:"text-gray-400 text-center py-4",children:"No content available"}):b.map((D,T)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[n.jsxs("span",{className:"text-lg font-bold text-gray-500",children:["#",T+1]}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"font-medium text-white truncate",children:D.title}),n.jsx("p",{className:"text-xs text-gray-400 capitalize",children:D.type})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-semibold text-white",children:D.views.toLocaleString()}),n.jsx("p",{className:"text-xs text-gray-400",children:"views"})]})]},D.id))})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Orders"}),n.jsx("div",{className:"space-y-3",children:N.length===0?n.jsx("p",{className:"text-gray-400 text-center py-4",children:"No orders yet"}):N.map(D=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"font-medium text-white",children:["Order #",D.id.slice(0,8)]}),n.jsx("p",{className:"text-sm text-gray-400",children:D.customerEmail})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"font-semibold text-white",children:["",D.totalAmount]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded ${D.status==="completed"?"bg-green-500/20 text-green-400":D.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:D.status})]})]},D.id))})]})]})]})})},H3=()=>{const{collaborations:t,loading:e}=ng(),{user:r}=Ce(),[s,i]=w.useState(null),[a,o]=w.useState({}),[l,c]=w.useState(""),d=m=>({inquiry:"bg-gray-500/20 text-gray-400",negotiating:"bg-yellow-500/20 text-yellow-400",agreed:"bg-blue-500/20 text-blue-400",contract_sent:"bg-purple-500/20 text-purple-400",signed:"bg-green-500/20 text-green-400",in_progress:"bg-cyan-500/20 text-cyan-400",completed:"bg-green-600/20 text-green-500",cancelled:"bg-red-500/20 text-red-400"})[m];w.useEffect(()=>{if(!s)return;const m=te($,"collaborationMessages"),p=_e(m,ae("collaborationId","==",s),Ie("createdAt","asc")),v=vt(p,S=>{const b=[];S.forEach(N=>{b.push({id:N.id,...N.data()})}),o(N=>({...N,[s]:b}))});return()=>v()},[s]);const h=async m=>{if(!(!l.trim()||!r))try{await dt(te($,"collaborationMessages"),{collaborationId:m,senderId:r.uid,senderName:r.displayName||"Admin",senderEmail:r.email,message:l.trim(),createdAt:ue()}),c("")}catch(p){console.error("Failed to send message:",p)}};return n.jsx(ns,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Collaborations & Contracts"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Manage partnerships and deals"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Active"}),n.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:t.filter(m=>["agreed","contract_sent","signed","in_progress"].includes(m.status)).length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),n.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(m=>m.status==="completed").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["",t.reduce((m,p)=>m+p.paidAmount,0).toFixed(2)]})]})]}),n.jsx("div",{className:"space-y-4",children:e?n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading..."}):t.length===0?n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"No collaborations yet"}):t.map(m=>{var p;return n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[n.jsx("div",{onClick:()=>i(s===m.id?null:m.id),className:"p-4 cursor-pointer hover:bg-gray-750 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("h3",{className:"text-lg font-bold text-white truncate",children:m.title}),n.jsx("span",{className:`px-2 py-1 rounded text-xs flex-shrink-0 ${d(m.status)}`,children:m.status.replace("_"," ")})]}),n.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[n.jsx("div",{className:"text-sm text-gray-400 hidden md:block",children:n.jsx("span",{className:"text-white font-medium",children:m.clientName})}),n.jsx("button",{className:"text-gray-400 hover:text-white transition",children:s===m.id?n.jsx(md,{size:20}):n.jsx(hd,{size:20})})]})]})}),s===m.id&&n.jsxs("div",{className:"border-t border-gray-700 p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Client:"}),n.jsx("p",{className:"text-white font-medium",children:m.clientName}),n.jsx("p",{className:"text-gray-400 text-xs",children:m.clientEmail})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Type:"}),n.jsx("p",{className:"text-white font-medium capitalize",children:m.type})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Budget:"}),n.jsx("p",{className:"text-white font-medium",children:m.budget?`${m.budget.toFixed(2)}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Payment:"}),n.jsxs("p",{className:`font-medium ${m.paymentStatus==="paid"?"text-green-400":m.paymentStatus==="partial"?"text-yellow-400":"text-gray-400"}`,children:["",m.paidAmount.toFixed(2)," (",m.paymentStatus,")"]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Description"}),n.jsx("p",{className:"text-gray-200",children:m.description})]}),n.jsxs("div",{className:"bg-gray-900 rounded-lg p-4",children:[n.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-4",children:[n.jsx(Qe,{size:20,className:"text-blue-400"}),"Messages"]}),n.jsx("div",{className:"bg-gray-800 rounded-lg p-4 max-h-80 overflow-y-auto space-y-3 mb-4",children:!a[m.id]||a[m.id].length===0?n.jsxs("div",{className:"text-center text-gray-400 py-8",children:[n.jsx(Qe,{size:48,className:"mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No messages yet. Start the conversation!"})]}):(p=a[m.id])==null?void 0:p.map(v=>{var S,b,N;return n.jsxs("div",{className:`p-3 rounded-lg ${v.senderId===(r==null?void 0:r.uid)?"bg-purple-900/30 ml-8":"bg-gray-700 mr-8"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-1",children:[n.jsx("span",{className:"font-semibold text-sm text-white",children:v.senderId===(r==null?void 0:r.uid)?"You (Admin)":v.senderName}),n.jsx("span",{className:"text-xs text-gray-400",children:((N=(b=(S=v.createdAt)==null?void 0:S.toDate)==null?void 0:b.call(S))==null?void 0:N.toLocaleString())||"Just now"})]}),n.jsx("p",{className:"text-gray-300 text-sm",children:v.message})]},v.id)})}),n.jsxs("form",{onSubmit:v=>{v.preventDefault(),h(m.id)},className:"flex gap-2",children:[n.jsx("input",{type:"text",value:l,onChange:v=>c(v.target.value),placeholder:"Type your message to the artist...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),n.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(rr,{size:18}),"Send"]})]})]})]})]},m.id)})})]})})},W3=()=>{const[t,e]=w.useState([]),[r,s]=w.useState(!0),[i,a]=w.useState("pending");w.useEffect(()=>{const h=te($,"collabRequests"),m=_e(h,Ie("createdAt","desc")),p=vt(m,v=>{const S=[];v.forEach(b=>{S.push({id:b.id,...b.data()})}),e(S),s(!1)});return()=>p()},[]);const o=async h=>{try{await dt(te($,"collaborations"),{clientName:h.artistName,clientEmail:h.artistEmail,assignedTo:h.artistId,title:h.title,type:h.type,description:h.description,budget:h.budget||0,paidAmount:0,paymentStatus:"unpaid",status:"inquiry",startDate:h.preferredStartDate?new Date(h.preferredStartDate):null,deadline:null,endDate:null,contractPDF:null,attachments:[],notes:h.message||"",createdAt:ue(),updatedAt:ue()}),await Ve(ce($,"collabRequests",h.id),{status:"approved"}),alert(" Request approved and collaboration created!")}catch(m){console.error("Failed to approve request:",m),alert(" Failed to approve request")}},l=async h=>{if(confirm("Are you sure you want to reject this request?"))try{await Ve(ce($,"collabRequests",h),{status:"rejected"}),alert(" Request rejected")}catch(m){console.error("Failed to reject request:",m),alert(" Failed to reject request")}},c=async h=>{if(confirm("Are you sure you want to permanently delete this request?"))try{await fl(ce($,"collabRequests",h)),alert(" Request deleted")}catch(m){console.error("Failed to delete request:",m),alert(" Failed to delete request")}},d=t.filter(h=>i==="all"?!0:h.status===i);return n.jsx(ns,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Collaboration Requests"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Review and approve collaboration requests from artists"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Requests"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),n.jsxs("div",{className:"bg-gray-800 border border-yellow-600 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Pending"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:t.filter(h=>h.status==="pending").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-green-600 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Approved"}),n.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(h=>h.status==="approved").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-red-600 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Rejected"}),n.jsx("p",{className:"text-2xl font-bold text-red-400 mt-1",children:t.filter(h=>h.status==="rejected").length})]})]}),n.jsx("div",{className:"flex gap-4 border-b border-gray-700",children:["all","pending","approved","rejected"].map(h=>n.jsxs("button",{onClick:()=>a(h),className:`px-4 py-2 capitalize transition ${i===h?"border-b-2 border-purple-500 text-white":"text-gray-400 hover:text-white"}`,children:[h,n.jsxs("span",{className:"ml-2 text-sm",children:["(",h==="all"?t.length:t.filter(m=>m.status===h).length,")"]})]},h))}),n.jsx("div",{className:"space-y-4",children:r?n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading requests..."}):d.length===0?n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(gr,{size:48,className:"mx-auto mb-4 text-gray-600"}),n.jsxs("p",{className:"text-gray-400",children:["No ",i!=="all"?i:""," requests found"]})]}):d.map(h=>{var m,p,v;return n.jsxs("div",{className:`bg-gray-800 border rounded-xl p-6 ${h.status==="pending"?"border-yellow-600":h.status==="approved"?"border-green-600":"border-red-600"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:h.title}),n.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h.status==="pending"?"bg-yellow-900 text-yellow-300":h.status==="approved"?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:[h.status==="pending"&&n.jsx(Er,{size:12,className:"inline mr-1"}),h.status]})]}),n.jsxs("div",{className:"text-sm text-gray-400",children:[n.jsx("p",{className:"font-medium text-white",children:h.artistName}),n.jsx("p",{children:h.artistEmail}),n.jsxs("p",{className:"text-xs mt-1",children:["Submitted: ",((v=(p=(m=h.createdAt)==null?void 0:m.toDate)==null?void 0:p.call(m))==null?void 0:v.toLocaleString())||"Unknown"]})]})]}),h.status==="pending"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>o(h),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-white font-medium transition flex items-center gap-2",children:[n.jsx(s_,{size:18}),"Approve"]}),n.jsxs("button",{onClick:()=>l(h.id),className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-white font-medium transition flex items-center gap-2",children:[n.jsx(kt,{size:18}),"Reject"]})]}),h.status!=="pending"&&n.jsx("button",{onClick:()=>c(h.id),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-white text-sm transition",children:"Delete"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 p-4 bg-gray-900 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Type:"}),n.jsx("p",{className:"text-white font-medium capitalize",children:h.type.replace("_"," ")})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Budget:"}),n.jsx("p",{className:"text-white font-medium",children:h.budget?`${h.budget.toFixed(2)}`:"Not specified"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Preferred Start:"}),n.jsx("p",{className:"text-white font-medium",children:h.preferredStartDate?new Date(h.preferredStartDate).toLocaleDateString():"Flexible"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Artist ID:"}),n.jsxs("p",{className:"text-white font-mono text-xs",children:[h.artistId.slice(0,8),"..."]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Description"}),n.jsx("p",{className:"text-gray-200 bg-gray-900 p-4 rounded-lg",children:h.description})]}),h.message&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Additional Message"}),n.jsx("p",{className:"text-gray-200 bg-gray-900 p-4 rounded-lg",children:h.message})]})]},h.id)})})]})})},G3=()=>{const[t,e]=w.useState([]),[r,s]=w.useState(!0),[i,a]=w.useState("pending");w.useEffect(()=>{const h=te($,"artistRoleRequests"),m=_e(h,Ie("createdAt","desc")),p=vt(m,v=>{const S=[];v.forEach(b=>{S.push({id:b.id,...b.data()})}),e(S),s(!1)});return()=>p()},[]);const o=async h=>{if(confirm(`Approve ${h.artistName} as an artist?`))try{await Ve(ce($,"artistRoleRequests",h.id),{status:"approved"}),await Ve(ce($,"users",h.userId),{role:"artist",artistName:h.artistName,region:h.region,city:h.city,artistRoles:h.roles,instagram:h.instagram,spotify:h.spotify}),alert(" Request approved! User role has been updated to artist. User needs to log out and log back in to see changes.")}catch(m){console.error("Failed to approve request:",m),alert(" Failed to approve request. Make sure the user document exists in Firestore.")}},l=async h=>{if(confirm("Are you sure you want to reject this request?"))try{await Ve(ce($,"artistRoleRequests",h),{status:"rejected"}),alert(" Request rejected")}catch(m){console.error("Failed to reject request:",m),alert(" Failed to reject request")}},c=async h=>{if(confirm("Are you sure you want to permanently delete this request?"))try{await fl(ce($,"artistRoleRequests",h)),alert(" Request deleted")}catch(m){console.error("Failed to delete request:",m),alert(" Failed to delete request")}},d=t.filter(h=>i==="all"?!0:h.status===i);return n.jsx(ns,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Artist Role Requests"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Review and approve artist role applications"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Requests"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),n.jsxs("div",{className:"bg-gray-800 border border-yellow-600 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Pending"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:t.filter(h=>h.status==="pending").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-green-600 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Approved"}),n.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(h=>h.status==="approved").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-red-600 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Rejected"}),n.jsx("p",{className:"text-2xl font-bold text-red-400 mt-1",children:t.filter(h=>h.status==="rejected").length})]})]}),n.jsx("div",{className:"flex gap-4 border-b border-gray-700",children:["all","pending","approved","rejected"].map(h=>n.jsxs("button",{onClick:()=>a(h),className:`px-4 py-2 capitalize transition ${i===h?"border-b-2 border-purple-500 text-white":"text-gray-400 hover:text-white"}`,children:[h,n.jsxs("span",{className:"ml-2 text-sm",children:["(",h==="all"?t.length:t.filter(m=>m.status===h).length,")"]})]},h))}),n.jsx("div",{className:"space-y-4",children:r?n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading requests..."}):d.length===0?n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[n.jsx(sg,{size:48,className:"mx-auto mb-4 text-gray-600"}),n.jsxs("p",{className:"text-gray-400",children:["No ",i!=="all"?i:""," requests found"]})]}):d.map(h=>{var m,p,v;return n.jsxs("div",{className:`bg-gray-800 border rounded-xl p-6 ${h.status==="pending"?"border-yellow-600":h.status==="approved"?"border-green-600":"border-red-600"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:h.artistName}),n.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h.status==="pending"?"bg-yellow-900 text-yellow-300":h.status==="approved"?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:[h.status==="pending"&&n.jsx(Er,{size:12,className:"inline mr-1"}),h.status]})]}),n.jsxs("div",{className:"text-sm text-gray-400",children:[n.jsx("p",{className:"font-medium text-white",children:h.userName}),n.jsx("p",{children:h.userEmail}),n.jsxs("p",{className:"text-xs mt-1",children:["Submitted: ",((v=(p=(m=h.createdAt)==null?void 0:m.toDate)==null?void 0:p.call(m))==null?void 0:v.toLocaleString())||"Unknown"]})]})]}),h.status==="pending"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>o(h),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-white font-medium transition flex items-center gap-2",children:[n.jsx(s_,{size:18}),"Approve"]}),n.jsxs("button",{onClick:()=>l(h.id),className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-white font-medium transition flex items-center gap-2",children:[n.jsx(kt,{size:18}),"Reject"]})]}),h.status!=="pending"&&n.jsx("button",{onClick:()=>c(h.id),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-white text-sm transition",children:"Delete"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 p-4 bg-gray-900 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Location:"}),n.jsxs("p",{className:"text-white font-medium",children:[h.city,", ",h.region]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Instagram:"}),n.jsx("p",{className:"text-white font-medium",children:h.instagram||"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Spotify:"}),n.jsx("p",{className:"text-white font-medium truncate",title:h.spotify,children:h.spotify?"Yes":"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"User ID:"}),n.jsxs("p",{className:"text-white font-mono text-xs",children:[h.userId.slice(0,8),"..."]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Artist Roles"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:h.roles.map(S=>n.jsx("span",{className:"px-3 py-1 bg-purple-600/30 text-purple-300 rounded-full text-sm",children:S},S))})]}),h.additionalInfo&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Additional Information"}),n.jsx("p",{className:"text-gray-200 bg-gray-900 p-4 rounded-lg",children:h.additionalInfo})]})]},h.id)})})]})})},K3=()=>{const[t,e]=w.useState("shop"),[r,s]=w.useState(!0),[i,a]=w.useState({storeName:"",storeDescription:"",heroTitle:"",heroSubtitle:"",featuredEnabled:!0,trendingEnabled:!0,genres:[],currency:"EUR",taxRate:21,enableDownloads:!0,watermarkPreviews:!0}),[o,l]=w.useState({emailOrderNotifications:!0,emailCollaborationNotifications:!0,emailAnalyticsReports:!1,emailSecurityAlerts:!0,emailNewFeatures:!1,pushNotifications:!0}),[c,d]=w.useState({twoFactorEnabled:!1,passwordMinLength:12,sessionTimeout:30,enableAutoBackup:!0,backupFrequency:"daily"}),[h,m]=w.useState(null);w.useEffect(()=>{(async()=>{try{s(!0);const[g,y,j]=await Promise.all([mi.getShopSettings(),mi.getNotificationSettings(),mi.getSecuritySettings()]);g&&a(g),y&&l(y),j&&d(j)}catch(g){console.error("Failed to load settings:",g)}finally{s(!1)}})()},[]);const p=async()=>{try{await mi.saveShopSettings(i),m({type:"success",text:"Shop settings saved successfully!"}),setTimeout(()=>m(null),3e3)}catch(N){console.error("Failed to save shop settings:",N),m({type:"error",text:"Failed to save settings. Please try again."})}},v=async()=>{try{await mi.saveNotificationSettings(o),m({type:"success",text:"Notification settings saved successfully!"}),setTimeout(()=>m(null),3e3)}catch(N){console.error("Failed to save notification settings:",N),m({type:"error",text:"Failed to save settings. Please try again."})}},S=async()=>{try{await mi.saveSecuritySettings(c),m({type:"success",text:"Security settings saved successfully!"}),setTimeout(()=>m(null),3e3)}catch(N){console.error("Failed to save security settings:",N),m({type:"error",text:"Failed to save settings. Please try again."})}},b=[{id:"shop",name:"Shop Settings",icon:JP},{id:"notifications",name:"Notifications",icon:Zy},{id:"security",name:"Security",icon:ev}];return n.jsx(ns,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Settings"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your platform configuration and preferences"})]}),r&&n.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:n.jsx("p",{className:"text-blue-300",children:"Loading settings..."})}),n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:n.jsx("div",{className:"flex gap-2 overflow-x-auto",children:b.map(N=>{const g=N.icon;return n.jsxs("button",{onClick:()=>e(N.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition ${t===N.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[n.jsx(g,{size:18}),n.jsx("span",{className:"font-medium",children:N.name})]},N.id)})})}),h&&n.jsx("div",{className:`p-4 rounded-lg border ${h.type==="success"?"bg-green-900/20 border-green-700 text-green-400":"bg-red-900/20 border-red-700 text-red-400"}`,children:h.text}),t==="shop"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Shop Features"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Featured Beats"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Show featured badge on selected beats"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:i.featuredEnabled,onChange:N=>a({...i,featuredEnabled:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Trending Beats"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Show trending badge on popular beats"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:i.trendingEnabled,onChange:N=>a({...i,trendingEnabled:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Enable Downloads"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Allow customers to download purchased beats"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:i.enableDownloads,onChange:N=>a({...i,enableDownloads:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Watermark Previews"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Add watermark to preview audio files"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:i.watermarkPreviews,onChange:N=>a({...i,watermarkPreviews:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Payment Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),n.jsxs("select",{value:i.currency,onChange:N=>a({...i,currency:N.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",children:[n.jsx("option",{value:"EUR",children:"EUR ()"}),n.jsx("option",{value:"USD",children:"USD ($)"}),n.jsx("option",{value:"GBP",children:"GBP ()"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:i.taxRate,onChange:N=>a({...i,taxRate:parseFloat(N.target.value)}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500"})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:p,className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[n.jsx(Yr,{size:20}),"Save Shop Settings"]})})]}),t==="notifications"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(Zy,{size:24,className:"text-yellow-400"}),"Notification Settings"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Email on New Orders"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Get notified when customers place orders"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:o.emailOrderNotifications,onChange:N=>l({...o,emailOrderNotifications:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Email on Collaborations"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Get notified about collaboration requests"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:o.emailCollaborationNotifications,onChange:N=>l({...o,emailCollaborationNotifications:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Email Analytics Reports"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Receive weekly analytics reports"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:o.emailAnalyticsReports,onChange:N=>l({...o,emailAnalyticsReports:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Email Security Alerts"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Important security notifications"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:o.emailSecurityAlerts,onChange:N=>l({...o,emailSecurityAlerts:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Email New Features"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Learn about new features and updates"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:o.emailNewFeatures,onChange:N=>l({...o,emailNewFeatures:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Push Notifications"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Receive browser push notifications"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:o.pushNotifications,onChange:N=>l({...o,pushNotifications:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:v,className:"flex items-center gap-2 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[n.jsx(Yr,{size:20}),"Save Notification Settings"]})})]}),t==="security"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[n.jsx(ev,{size:24,className:"text-red-400"}),"Security Settings"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Two-Factor Authentication"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Require 2FA for admin accounts"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:c.twoFactorEnabled,onChange:N=>d({...c,twoFactorEnabled:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Minimum Password Length"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("input",{type:"range",min:"8",max:"20",value:c.passwordMinLength,onChange:N=>d({...c,passwordMinLength:parseInt(N.target.value)}),className:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),n.jsx("span",{className:"text-white font-medium w-12 text-center",children:c.passwordMinLength})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Timeout (minutes)"}),n.jsx("input",{type:"number",min:"5",max:"480",value:c.sessionTimeout,onChange:N=>d({...c,sessionTimeout:parseInt(N.target.value)}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-red-500"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Users will be logged out after this period of inactivity"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:"Enable Auto Backup"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Automatically backup database daily"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:c.enableAutoBackup,onChange:N=>d({...c,enableAutoBackup:N.target.checked}),className:"sr-only peer"}),n.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Backup Frequency"}),n.jsxs("select",{value:c.backupFrequency,onChange:N=>d({...c,backupFrequency:N.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-red-500",children:[n.jsx("option",{value:"daily",children:"Daily"}),n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"monthly",children:"Monthly"})]})]})]})]}),n.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:n.jsxs("p",{className:"text-sm text-blue-300",children:[" ",n.jsx("strong",{children:"Tip:"})," Strong security settings protect your platform and user data. We recommend enabling 2FA and auto-backups."]})}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:S,className:"flex items-center gap-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[n.jsx(Yr,{size:20}),"Save Security Settings"]})})]})]})})},Q3=()=>{var N;const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState([]),[a,o]=w.useState(null),[l,c]=w.useState([]),[d,h]=w.useState(""),[m,p]=w.useState(""),[v,S]=w.useState("all");w.useEffect(()=>{const g=te($,"supportMessages"),y=_e(g,Ie("createdAt","desc")),j=vt(y,R=>{const M=[];R.forEach(D=>{M.push({id:D.id,...D.data()})}),r(M)});return()=>j()},[]),w.useEffect(()=>{if(e.length===0)return;const g=new Map;e.forEach(j=>{if(j.senderRole==="admin")return;const R=j.senderId;if(!g.has(R))g.set(R,{userId:R,userName:j.senderName,userEmail:j.senderEmail,userRole:j.senderRole,lastMessage:j.message,lastMessageTime:j.createdAt,unreadCount:0});else{const M=g.get(R);j.createdAt.toMillis()>M.lastMessageTime.toMillis()&&(M.lastMessage=j.message,M.lastMessageTime=j.createdAt)}});let y=Array.from(g.values()).sort((j,R)=>R.lastMessageTime.toMillis()-j.lastMessageTime.toMillis());v!=="all"&&(y=y.filter(j=>j.userRole===v)),m&&(y=y.filter(j=>j.userName.toLowerCase().includes(m.toLowerCase())||j.userEmail.toLowerCase().includes(m.toLowerCase())||j.lastMessage.toLowerCase().includes(m.toLowerCase()))),i(y)},[e,v,m]),w.useEffect(()=>{if(!a){c([]);return}const g=e.filter(y=>y.senderId===a||y.recipientId===a&&y.senderRole==="admin").sort((y,j)=>y.createdAt.toMillis()-j.createdAt.toMillis());c(g)},[a,e]);const b=async g=>{if(g.preventDefault(),!(!d.trim()||!t||!a))try{await dt(te($,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Admin",senderEmail:t.email,senderRole:"admin",recipientId:a,message:d.trim(),createdAt:ue()}),h("")}catch(y){console.error("Failed to send message:",y)}};return n.jsx(ns,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Manage customer, artist, and manager communications"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Messages"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:e.length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Customers"}),n.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:e.filter(g=>g.senderRole==="customer").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Artists"}),n.jsx("p",{className:"text-2xl font-bold text-purple-400 mt-1",children:e.filter(g=>g.senderRole==="artist").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Managers"}),n.jsx("p",{className:"text-2xl font-bold text-cyan-400 mt-1",children:e.filter(g=>g.senderRole==="manager").length})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(tg,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),n.jsx("input",{type:"text",value:m,onChange:g=>p(g.target.value),placeholder:"Search conversations...",className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(l_,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),n.jsxs("select",{value:v,onChange:g=>S(g.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500 appearance-none",children:[n.jsx("option",{value:"all",children:"All Roles"}),n.jsx("option",{value:"customer",children:"Customers"}),n.jsx("option",{value:"artist",children:"Artists"}),n.jsx("option",{value:"manager",children:"Managers"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-700",children:n.jsxs("h2",{className:"font-semibold text-white",children:["Conversations (",s.length,")"]})}),n.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 450px)"},children:s.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-400",children:[n.jsx(Qe,{size:48,className:"mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No conversations found"})]}):s.map(g=>{var y,j,R;return n.jsx("button",{onClick:()=>o(g.userId),className:`w-full p-4 text-left transition border-b border-gray-700 ${a===g.userId?"bg-purple-900/30 border-l-4 border-l-purple-500":"hover:bg-gray-750"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold flex-shrink-0 ${g.userRole==="customer"?"bg-gradient-to-r from-blue-500 to-cyan-500":g.userRole==="artist"?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-gradient-to-r from-green-500 to-teal-500"}`,children:g.userName[0]||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("p",{className:"font-semibold text-white text-sm truncate",children:g.userName}),n.jsx("span",{className:"text-xs text-gray-400",children:((R=(j=(y=g.lastMessageTime)==null?void 0:y.toDate)==null?void 0:j.call(y))==null?void 0:R.toLocaleDateString())||""})]}),n.jsx("div",{className:"flex items-center gap-2 mb-1",children:n.jsx("span",{className:`px-2 py-0.5 rounded text-xs capitalize ${g.userRole==="customer"?"bg-blue-900 text-blue-300":g.userRole==="artist"?"bg-purple-900 text-purple-300":"bg-cyan-900 text-cyan-300"}`,children:g.userRole})}),n.jsx("p",{className:"text-xs text-gray-400 truncate",children:g.lastMessage})]})]})},g.userId)})})]}),n.jsx("div",{className:"lg:col-span-2 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 450px)"},children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-750",children:n.jsx("div",{className:"flex items-center gap-3",children:(()=>{const g=s.find(y=>y.userId===a);return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold ${(g==null?void 0:g.userRole)==="customer"?"bg-gradient-to-r from-blue-500 to-cyan-500":(g==null?void 0:g.userRole)==="artist"?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-gradient-to-r from-green-500 to-teal-500"}`,children:(g==null?void 0:g.userName[0])||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-white",children:(g==null?void 0:g.userName)||"User"}),n.jsx("p",{className:"text-xs text-gray-400",children:(g==null?void 0:g.userEmail)||""})]}),n.jsx("span",{className:`ml-auto px-3 py-1 rounded text-xs capitalize ${(g==null?void 0:g.userRole)==="customer"?"bg-blue-900 text-blue-300":(g==null?void 0:g.userRole)==="artist"?"bg-purple-900 text-purple-300":"bg-cyan-900 text-cyan-300"}`,children:g==null?void 0:g.userRole})]})})()})}),n.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:l.length===0?n.jsxs("div",{className:"text-center text-gray-400 py-12",children:[n.jsx(Qe,{size:48,className:"mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No messages yet"})]}):l.map(g=>{var y,j,R;return n.jsxs("div",{className:`p-4 rounded-lg ${g.senderRole==="admin"?"bg-purple-900/30 ml-12":"bg-gray-700 mr-12"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-white",children:g.senderRole==="admin"?"You (Admin)":g.senderName}),n.jsx("span",{className:`ml-2 px-2 py-0.5 rounded text-xs capitalize ${g.senderRole==="customer"?"bg-blue-600 text-blue-100":g.senderRole==="artist"?"bg-purple-600 text-purple-100":g.senderRole==="manager"?"bg-cyan-600 text-cyan-100":"bg-gray-600 text-gray-100"}`,children:g.senderRole})]}),n.jsx("span",{className:"text-xs text-gray-400",children:((R=(j=(y=g.createdAt)==null?void 0:y.toDate)==null?void 0:j.call(y))==null?void 0:R.toLocaleString())||"Just now"})]}),n.jsx("p",{className:"text-gray-300",children:g.message})]},g.id)})}),n.jsxs("form",{onSubmit:b,className:"p-4 border-t border-gray-700 bg-gray-750",children:[n.jsxs("div",{className:"mb-2 text-sm text-gray-400",children:["Replying to:"," ",n.jsx("span",{className:"text-white font-semibold",children:(N=s.find(g=>g.userId===a))==null?void 0:N.userName})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:d,onChange:g=>h(g.target.value),placeholder:"Type your reply...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),n.jsxs("button",{type:"submit",disabled:!d.trim(),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(rr,{size:20}),"Send"]})]})]})]}):n.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Qe,{size:64,className:"mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-xl",children:"Select a conversation to start chatting"})]})})})]})]})})},xd=({children:t})=>{var h,m;const[e,r]=w.useState(!0),{user:s,signOut:i}=Ce(),a=yr(),o=Ar(),l=async()=>{await i(),o("/")},c=[{name:"Dashboard",href:"/manager/dashboard",icon:pd},{name:"Beats",href:"/manager/beats",icon:Le},{name:"Collaborations",href:"/manager/collaborations",icon:gr},{name:"Chat",href:"/manager/chat",icon:Qe}],d=p=>a.pathname===p;return n.jsxs("div",{className:"min-h-screen bg-gray-900",children:[n.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Manager"})]}),n.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:n.jsx(kt,{size:20})})]}),n.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:n.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[n.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=s==null?void 0:s.displayName)==null?void 0:h[0])||((m=s==null?void 0:s.email)==null?void 0:m[0])||"M"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(s==null?void 0:s.displayName)||"Manager"}),n.jsx("p",{className:"text-xs text-gray-400 truncate",children:s==null?void 0:s.email})]})]})}),n.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:c.map(p=>{const v=p.icon;return n.jsxs(Z,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[n.jsx(v,{size:18,className:"flex-shrink-0"}),n.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),n.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:n.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[n.jsx(fa,{size:18,className:"flex-shrink-0"}),n.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),n.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[n.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[n.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:n.jsx(Bn,{size:24})}),n.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:n.jsx("div",{className:"text-right hidden sm:block",children:n.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),n.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},Y3=()=>{const{beats:t}=gd(),e={totalBeats:t.length,publishedBeats:t.filter(r=>r.status==="published").length,totalPlays:t.reduce((r,s)=>r+s.plays,0),featuredBeats:t.filter(r=>r.featured).length};return n.jsx(xd,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manager Dashboard"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Overview of beats and platform activity"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-cyan-600 rounded-xl p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Beats"}),n.jsx("p",{className:"text-3xl font-bold mt-2",children:e.totalBeats})]}),n.jsx(Le,{size:40,className:"opacity-20"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Published"}),n.jsx("p",{className:"text-3xl font-bold mt-2",children:e.publishedBeats})]}),n.jsx(gl,{size:40,className:"opacity-20"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Total Plays"}),n.jsx("p",{className:"text-3xl font-bold mt-2",children:e.totalPlays.toLocaleString()})]}),n.jsx(Yf,{size:40,className:"opacity-20"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-yellow-600 to-orange-600 rounded-xl p-6 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Featured"}),n.jsx("p",{className:"text-3xl font-bold mt-2",children:e.featuredBeats})]}),n.jsx(Le,{size:40,className:"opacity-20"})]})})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[n.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Quick Actions"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("a",{href:"/manager/beats",className:"flex items-center gap-3 p-4 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-colors group",children:[n.jsx("div",{className:"p-3 bg-blue-600 rounded-lg group-hover:bg-blue-500 transition-colors",children:n.jsx(Le,{size:24,className:"text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-white",children:"Manage Beats"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Edit and update beat information"})]})]}),n.jsxs("a",{href:"/manager/chat",className:"flex items-center gap-3 p-4 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-colors group",children:[n.jsx("div",{className:"p-3 bg-cyan-600 rounded-lg group-hover:bg-cyan-500 transition-colors",children:n.jsx(Qe,{size:24,className:"text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-white",children:"Chat"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Communicate with team and artists"})]})]})]})]}),n.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-2",children:"Manager Access"}),n.jsx("p",{className:"text-blue-200 text-sm",children:"As a manager, you have access to edit beats and communicate via chat. You can view all platform data but cannot delete or modify other settings."})]})]})})},J3=()=>{const{beats:t,loading:e}=gd(),[r,s]=w.useState("all"),[i,a]=w.useState(null),o=t.filter(d=>r==="all"?!0:d.status===r),l=d=>{a(d)},c=async(d,h)=>{try{await ks.updateBeat(d,h),alert("Beat updated successfully!"),a(null)}catch(m){alert("Failed to update beat: "+m.message)}};return n.jsx(xd,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Beats Management"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"View and edit beat information"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Beats"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Published"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(d=>d.status==="published").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Featured"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(d=>d.featured).length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Plays"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.reduce((d,h)=>d+h.plays,0).toLocaleString()})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Filter by Status"}),n.jsxs("select",{value:r,onChange:d=>s(d.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"archived",children:"Archived"})]})]}),n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Beat"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Genre"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"BPM"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Stats"}),n.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-700",children:e?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"Loading beats..."})}):o.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"No beats found"})}):o.map(d=>n.jsxs("tr",{className:"hover:bg-gray-700/50",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("img",{src:d.artworkUrl,alt:d.title,className:"w-12 h-12 rounded object-cover"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:d.title}),n.jsx("p",{className:"text-sm text-gray-400",children:d.artist}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.featured&&n.jsx("span",{className:"px-2 py-0.5 bg-yellow-500/20 text-yellow-400 rounded text-xs",children:"Featured"}),d.trending&&n.jsx("span",{className:"px-2 py-0.5 bg-pink-500/20 text-pink-400 rounded text-xs",children:"Trending"})]})]})]})}),n.jsx("td",{className:"px-6 py-4 text-gray-300",children:d.genre}),n.jsx("td",{className:"px-6 py-4 text-gray-300",children:d.bpm}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-2 py-1 rounded text-sm capitalize ${d.status==="published"?"bg-green-500/20 text-green-400":d.status==="draft"?"bg-gray-500/20 text-gray-400":"bg-orange-500/20 text-orange-400"}`,children:d.status})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-400",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Qr,{size:14}),n.jsx("span",{children:d.plays})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ct,{size:14}),n.jsx("span",{children:d.downloads})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Jf,{size:14}),n.jsx("span",{children:d.likes})]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("div",{className:"flex items-center justify-end",children:n.jsx("button",{onClick:()=>l(d),className:"p-2 text-blue-400 hover:bg-blue-500/20 rounded transition-colors",title:"Edit",children:n.jsx(u_,{size:18})})})})]},d.id))})]})})}),i&&n.jsx(X3,{beat:i,onClose:()=>a(null),onSave:c})]})})},X3=({beat:t,onClose:e,onSave:r})=>{const[s,i]=w.useState({title:t.title,genre:t.genre,bpm:t.bpm,key:t.key,tags:t.tags.join(", "),featured:t.featured,trending:t.trending,status:t.status}),a=o=>{o.preventDefault(),r(t.id,{...s,tags:s.tags.split(",").map(l=>l.trim()).filter(l=>l)})};return n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Edit Beat"}),n.jsxs("form",{onSubmit:a,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),n.jsx("input",{type:"text",value:s.title,onChange:o=>i({...s,title:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Genre"}),n.jsx("input",{type:"text",value:s.genre,onChange:o=>i({...s,genre:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"BPM"}),n.jsx("input",{type:"number",value:s.bpm,onChange:o=>i({...s,bpm:parseInt(o.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key"}),n.jsx("input",{type:"text",value:s.key,onChange:o=>i({...s,key:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),n.jsx("input",{type:"text",value:s.tags,onChange:o=>i({...s,tags:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),n.jsxs("select",{value:s.status,onChange:o=>i({...s,status:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[n.jsx("option",{value:"draft",children:"Draft"}),n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"archived",children:"Archived"})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:s.featured,onChange:o=>i({...s,featured:o.target.checked}),className:"w-4 h-4 rounded"}),n.jsx("span",{className:"text-sm text-gray-300",children:"Featured"})]}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:s.trending,onChange:o=>i({...s,trending:o.target.checked}),className:"w-4 h-4 rounded"}),n.jsx("span",{className:"text-sm text-gray-300",children:"Trending"})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-700",children:[n.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Save Changes"})]})]})]})})},Z3=()=>{const{collaborations:t,loading:e}=ng(),{user:r}=Ce(),[s,i]=w.useState(null),[a,o]=w.useState({}),l=c=>({inquiry:"bg-gray-500/20 text-gray-400",negotiating:"bg-yellow-500/20 text-yellow-400",agreed:"bg-blue-500/20 text-blue-400",contract_sent:"bg-purple-500/20 text-purple-400",signed:"bg-green-500/20 text-green-400",in_progress:"bg-cyan-500/20 text-cyan-400",completed:"bg-green-600/20 text-green-500",cancelled:"bg-red-500/20 text-red-400"})[c];return w.useEffect(()=>{if(!s)return;const c=te($,"collaborationMessages"),d=_e(c,ae("collaborationId","==",s),Ie("createdAt","asc")),h=vt(d,m=>{const p=[];m.forEach(v=>{p.push({id:v.id,...v.data()})}),o(v=>({...v,[s]:p}))});return()=>h()},[s]),n.jsx(xd,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Collaborations & Contracts"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"View partnerships and deals (Read-Only)"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total"}),n.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Active"}),n.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:t.filter(c=>["agreed","contract_sent","signed","in_progress"].includes(c.status)).length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),n.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(c=>c.status==="completed").length})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["",t.reduce((c,d)=>c+d.paidAmount,0).toFixed(2)]})]})]}),n.jsx("div",{className:"space-y-4",children:e?n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading..."}):t.length===0?n.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"No collaborations yet"}):t.map(c=>{var d;return n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[n.jsx("div",{onClick:()=>i(s===c.id?null:c.id),className:"p-4 cursor-pointer hover:bg-gray-750 transition-colors",children:n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("h3",{className:"text-lg font-bold text-white truncate",children:c.title}),n.jsx("span",{className:`px-2 py-1 rounded text-xs flex-shrink-0 ${l(c.status)}`,children:c.status.replace("_"," ")})]}),n.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[n.jsx("div",{className:"text-sm text-gray-400 hidden md:block",children:n.jsx("span",{className:"text-white font-medium",children:c.clientName})}),n.jsx("button",{className:"text-gray-400 hover:text-white transition",children:s===c.id?n.jsx(md,{size:20}):n.jsx(hd,{size:20})})]})]})}),s===c.id&&n.jsxs("div",{className:"border-t border-gray-700 p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Client:"}),n.jsx("p",{className:"text-white font-medium",children:c.clientName}),n.jsx("p",{className:"text-gray-400 text-xs",children:c.clientEmail})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Type:"}),n.jsx("p",{className:"text-white font-medium capitalize",children:c.type})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Budget:"}),n.jsx("p",{className:"text-white font-medium",children:c.budget?`${c.budget.toFixed(2)}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-400 text-sm",children:"Payment:"}),n.jsxs("p",{className:`font-medium ${c.paymentStatus==="paid"?"text-green-400":c.paymentStatus==="partial"?"text-yellow-400":"text-gray-400"}`,children:["",c.paidAmount.toFixed(2)," (",c.paymentStatus,")"]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Description"}),n.jsx("p",{className:"text-gray-200",children:c.description})]}),n.jsxs("div",{className:"bg-gray-900 rounded-lg p-4",children:[n.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-4",children:[n.jsx(Qe,{size:20,className:"text-blue-400"}),"Messages"]}),n.jsx("div",{className:"bg-gray-800 rounded-lg p-4 max-h-80 overflow-y-auto space-y-3",children:!a[c.id]||a[c.id].length===0?n.jsxs("div",{className:"text-center text-gray-400 py-8",children:[n.jsx(Qe,{size:48,className:"mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No messages yet"})]}):(d=a[c.id])==null?void 0:d.map(h=>{var m,p,v;return n.jsxs("div",{className:`p-3 rounded-lg ${h.senderId===(r==null?void 0:r.uid)?"bg-purple-900/30 ml-8":"bg-gray-700 mr-8"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-1",children:[n.jsx("span",{className:"font-semibold text-sm text-white",children:h.senderName}),n.jsx("span",{className:"text-xs text-gray-400",children:((v=(p=(m=h.createdAt)==null?void 0:m.toDate)==null?void 0:p.call(m))==null?void 0:v.toLocaleString())||"Just now"})]}),n.jsx("p",{className:"text-gray-300 text-sm",children:h.message})]},h.id)})})]})]})]},c.id)})})]})})},e6=()=>{const{user:t}=Ce(),[e,r]=w.useState([]),[s,i]=w.useState(""),[a,o]=w.useState("");w.useEffect(()=>{const d=te($,"collaborationMessages"),h=_e(d,Ie("createdAt","desc")),m=vt(h,p=>{const v=[];p.forEach(S=>{v.push({id:S.id,...S.data()})}),r(v)});return()=>m()},[]);const l=async d=>{if(d.preventDefault(),!(!s.trim()||!t))try{await dt(te($,"collaborationMessages"),{senderId:t.uid,senderName:t.displayName||"Manager",senderEmail:t.email,senderRole:"manager",message:s.trim(),createdAt:ue()}),i("")}catch(h){console.error("Failed to send message:",h)}},c=e.filter(d=>d.message.toLowerCase().includes(a.toLowerCase())||d.senderName.toLowerCase().includes(a.toLowerCase()));return n.jsx(xd,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Chat"}),n.jsx("p",{className:"text-gray-400 mt-2",children:"Communicate with artists and team"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(tg,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),n.jsx("input",{type:"text",value:a,onChange:d=>o(d.target.value),placeholder:"Search messages...",className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500"})]}),n.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 400px)"},children:[n.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:c.length===0?n.jsxs("div",{className:"text-center text-gray-400 py-12",children:[n.jsx(Qe,{size:48,className:"mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No messages yet"})]}):c.map(d=>{var h,m,p;return n.jsxs("div",{className:`p-4 rounded-lg ${d.senderId===(t==null?void 0:t.uid)?"bg-blue-900/30 ml-12":"bg-gray-700 mr-12"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-white",children:d.senderId===(t==null?void 0:t.uid)?"You":d.senderName}),d.senderRole&&n.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-600 text-gray-300 rounded text-xs capitalize",children:d.senderRole})]}),n.jsx("span",{className:"text-xs text-gray-400",children:((p=(m=(h=d.createdAt)==null?void 0:h.toDate)==null?void 0:m.call(h))==null?void 0:p.toLocaleString())||"Just now"})]}),n.jsx("p",{className:"text-gray-300",children:d.message})]},d.id)})}),n.jsx("form",{onSubmit:l,className:"p-4 border-t border-gray-700 bg-gray-750",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:s,onChange:d=>i(d.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"}),n.jsxs("button",{type:"submit",disabled:!s.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(rr,{size:20}),"Send"]})]})})]}),n.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:n.jsxs("p",{className:"text-sm text-blue-200",children:[" ",n.jsx("strong",{children:"Manager Chat Access:"})," You can view and send messages across all collaborations. Use this to coordinate with artists and the team."]})})]})})},t6=()=>n.jsx(zP,{children:n.jsx(PS,{children:n.jsxs(uS,{children:[n.jsx(le,{path:"/",element:n.jsx(c3,{})}),n.jsx(le,{path:"/login",element:n.jsx(u3,{})}),n.jsx(le,{path:"/register",element:n.jsx(d3,{})}),n.jsx(le,{path:"/shop/beats",element:n.jsx(h3,{})}),n.jsx(le,{path:"/customer/dashboard",element:n.jsx(ve,{allowedRoles:["user"],children:n.jsx(m3,{})})}),n.jsx(le,{path:"/customer/shop",element:n.jsx(ve,{allowedRoles:["user"],children:n.jsx(w3,{})})}),n.jsx(le,{path:"/customer/orders",element:n.jsx(ve,{allowedRoles:["user"],children:n.jsx(p3,{})})}),n.jsx(le,{path:"/customer/downloads",element:n.jsx(ve,{allowedRoles:["user"],children:n.jsx(f3,{})})}),n.jsx(le,{path:"/customer/free-downloads",element:n.jsx(ve,{allowedRoles:["user"],children:n.jsx(g3,{})})}),n.jsx(le,{path:"/customer/profile",element:n.jsx(ve,{allowedRoles:["user"],children:n.jsx(x3,{})})}),n.jsx(le,{path:"/customer/collaborations",element:n.jsx(ve,{allowedRoles:["user"],children:n.jsx(v3,{})})}),n.jsx(le,{path:"/customer/chat",element:n.jsx(ve,{allowedRoles:["user"],children:n.jsx(N3,{})})}),n.jsx(le,{path:"/customer/settings",element:n.jsx(ve,{allowedRoles:["user"],children:n.jsx(y3,{})})}),n.jsx(le,{path:"/customer/request-artist-role",element:n.jsx(ve,{allowedRoles:["user"],children:n.jsx(b3,{})})}),n.jsx(le,{path:"/artist/dashboard",element:n.jsx(ve,{allowedRoles:["artist"],children:n.jsx(j3,{})})}),n.jsx(le,{path:"/artist/collaborations",element:n.jsx(ve,{allowedRoles:["artist"],children:n.jsx(_3,{})})}),n.jsx(le,{path:"/artist/request-collab",element:n.jsx(ve,{allowedRoles:["artist"],children:n.jsx(E3,{})})}),n.jsx(le,{path:"/artist/beats",element:n.jsx(ve,{allowedRoles:["artist"],children:n.jsx(S3,{})})}),n.jsx(le,{path:"/artist/orders",element:n.jsx(ve,{allowedRoles:["artist"],children:n.jsx(T3,{})})}),n.jsx(le,{path:"/artist/free-downloads",element:n.jsx(ve,{allowedRoles:["artist"],children:n.jsx(k3,{})})}),n.jsx(le,{path:"/artist/chat",element:n.jsx(ve,{allowedRoles:["artist"],children:n.jsx(I3,{})})}),n.jsx(le,{path:"/artist/profile",element:n.jsx(ve,{allowedRoles:["artist"],children:n.jsx(C3,{})})}),n.jsx(le,{path:"/artist/settings",element:n.jsx(ve,{allowedRoles:["artist"],children:n.jsx(A3,{})})}),n.jsx(le,{path:"/admin/dashboard",element:n.jsx(ve,{allowedRoles:["admin"],children:n.jsx(D3,{})})}),n.jsx(le,{path:"/admin/beats",element:n.jsx(ve,{allowedRoles:["admin"],children:n.jsx(M3,{})})}),n.jsx(le,{path:"/admin/orders",element:n.jsx(ve,{allowedRoles:["admin"],children:n.jsx(O3,{})})}),n.jsx(le,{path:"/admin/content",element:n.jsx(ve,{allowedRoles:["admin"],children:n.jsx(U3,{})})}),n.jsx(le,{path:"/admin/analytics",element:n.jsx(ve,{allowedRoles:["admin"],children:n.jsx(q3,{})})}),n.jsx(le,{path:"/admin/collaborations",element:n.jsx(ve,{allowedRoles:["admin"],children:n.jsx(H3,{})})}),n.jsx(le,{path:"/admin/collab-requests",element:n.jsx(ve,{allowedRoles:["admin"],children:n.jsx(W3,{})})}),n.jsx(le,{path:"/admin/artist-role-requests",element:n.jsx(ve,{allowedRoles:["admin"],children:n.jsx(G3,{})})}),n.jsx(le,{path:"/admin/settings",element:n.jsx(ve,{allowedRoles:["admin"],children:n.jsx(K3,{})})}),n.jsx(le,{path:"/admin/chat",element:n.jsx(ve,{allowedRoles:["admin"],children:n.jsx(Q3,{})})}),n.jsx(le,{path:"/admin",element:n.jsx(oo,{to:"/admin/dashboard",replace:!0})}),n.jsx(le,{path:"/manager/dashboard",element:n.jsx(ve,{allowedRoles:["manager"],children:n.jsx(Y3,{})})}),n.jsx(le,{path:"/manager/beats",element:n.jsx(ve,{allowedRoles:["manager"],children:n.jsx(J3,{})})}),n.jsx(le,{path:"/manager/collaborations",element:n.jsx(ve,{allowedRoles:["manager"],children:n.jsx(Z3,{})})}),n.jsx(le,{path:"/manager/chat",element:n.jsx(ve,{allowedRoles:["manager"],children:n.jsx(e6,{})})}),n.jsx(le,{path:"/manager",element:n.jsx(oo,{to:"/manager/dashboard",replace:!0})}),n.jsx(le,{path:"*",element:n.jsx(oo,{to:"/",replace:!0})})]})})}),tv=new URLSearchParams(window.location.search).get("redirect");if(tv){const t=decodeURIComponent(tv);window.history.replaceState(null,"",t)}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("Service Worker registered successfully:",t.scope)}).catch(t=>{console.log("Service Worker registration failed:",t)})});pw(document.getElementById("root")).render(n.jsx(w.StrictMode,{children:n.jsx(t6,{})}));
