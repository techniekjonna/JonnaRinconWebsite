var I1=Object.defineProperty;var C1=(t,e,r)=>e in t?I1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var js=(t,e,r)=>C1(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var $y={exports:{}},fu={},qy={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=Symbol.for("react.element"),A1=Symbol.for("react.portal"),R1=Symbol.for("react.fragment"),P1=Symbol.for("react.strict_mode"),D1=Symbol.for("react.profiler"),O1=Symbol.for("react.provider"),L1=Symbol.for("react.context"),M1=Symbol.for("react.forward_ref"),V1=Symbol.for("react.suspense"),F1=Symbol.for("react.memo"),U1=Symbol.for("react.lazy"),qg=Symbol.iterator;function B1(t){return t===null||typeof t!="object"?null:(t=qg&&t[qg]||t["@@iterator"],typeof t=="function"?t:null)}var Hy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wy=Object.assign,Gy={};function Ji(t,e,r){this.props=t,this.context=e,this.refs=Gy,this.updater=r||Hy}Ji.prototype.isReactComponent={};Ji.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ji.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ky(){}Ky.prototype=Ji.prototype;function Vf(t,e,r){this.props=t,this.context=e,this.refs=Gy,this.updater=r||Hy}var Ff=Vf.prototype=new Ky;Ff.constructor=Vf;Wy(Ff,Ji.prototype);Ff.isPureReactComponent=!0;var Hg=Array.isArray,Qy=Object.prototype.hasOwnProperty,Uf={current:null},Yy={key:!0,ref:!0,__self:!0,__source:!0};function Jy(t,e,r){var n,s={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Qy.call(e,n)&&!Yy.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Fo,type:t,key:a,ref:o,props:s,_owner:Uf.current}}function z1(t,e){return{$$typeof:Fo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fo}function $1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Wg=/\/+/g;function Cd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$1(""+t.key):e.toString(36)}function Wl(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fo:case A1:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Cd(o,0):n,Hg(s)?(r="",t!=null&&(r=t.replace(Wg,"$&/")+"/"),Wl(s,e,r,"",function(d){return d})):s!=null&&(Bf(s)&&(s=z1(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Wg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Hg(t))for(var l=0;l<t.length;l++){a=t[l];var u=n+Cd(a,l);o+=Wl(a,e,r,u,s)}else if(u=B1(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=n+Cd(a,l++),o+=Wl(a,e,r,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wl(t,e,r){if(t==null)return t;var n=[],s=0;return Wl(t,n,"","",function(a){return e.call(r,a,s++)}),n}function q1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},Gl={transition:null},H1={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:Gl,ReactCurrentOwner:Uf};function Xy(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:wl,forEach:function(t,e,r){wl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return wl(t,function(){e++}),e},toArray:function(t){return wl(t,function(e){return e})||[]},only:function(t){if(!Bf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=Ji;ie.Fragment=R1;ie.Profiler=D1;ie.PureComponent=Vf;ie.StrictMode=P1;ie.Suspense=V1;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H1;ie.act=Xy;ie.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Wy({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Uf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Qy.call(e,u)&&!Yy.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Fo,type:t.type,key:s,ref:a,props:n,_owner:o}};ie.createContext=function(t){return t={$$typeof:L1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:O1,_context:t},t.Consumer=t};ie.createElement=Jy;ie.createFactory=function(t){var e=Jy.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:M1,render:t}};ie.isValidElement=Bf;ie.lazy=function(t){return{$$typeof:U1,_payload:{_status:-1,_result:t},_init:q1}};ie.memo=function(t,e){return{$$typeof:F1,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Gl.transition;Gl.transition={};try{t()}finally{Gl.transition=e}};ie.unstable_act=Xy;ie.useCallback=function(t,e){return Et.current.useCallback(t,e)};ie.useContext=function(t){return Et.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};ie.useEffect=function(t,e){return Et.current.useEffect(t,e)};ie.useId=function(){return Et.current.useId()};ie.useImperativeHandle=function(t,e,r){return Et.current.useImperativeHandle(t,e,r)};ie.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Et.current.useMemo(t,e)};ie.useReducer=function(t,e,r){return Et.current.useReducer(t,e,r)};ie.useRef=function(t){return Et.current.useRef(t)};ie.useState=function(t){return Et.current.useState(t)};ie.useSyncExternalStore=function(t,e,r){return Et.current.useSyncExternalStore(t,e,r)};ie.useTransition=function(){return Et.current.useTransition()};ie.version="18.3.1";qy.exports=ie;var E=qy.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1=E,G1=Symbol.for("react.element"),K1=Symbol.for("react.fragment"),Q1=Object.prototype.hasOwnProperty,Y1=W1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,J1={key:!0,ref:!0,__self:!0,__source:!0};function Zy(t,e,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Q1.call(e,n)&&!J1.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:G1,type:t,key:a,ref:o,props:s,_owner:Y1.current}}fu.Fragment=K1;fu.jsx=Zy;fu.jsxs=Zy;$y.exports=fu;var i=$y.exports,ev={exports:{}},Ht={},tv={exports:{}},rv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,K){var te=$.length;$.push(K);e:for(;0<te;){var ve=te-1>>>1,Ue=$[ve];if(0<s(Ue,K))$[ve]=K,$[te]=Ue,te=ve;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var K=$[0],te=$.pop();if(te!==K){$[0]=te;e:for(var ve=0,Ue=$.length,xs=Ue>>>1;ve<xs;){var Gt=2*(ve+1)-1,ys=$[Gt],or=Gt+1,wn=$[or];if(0>s(ys,te))or<Ue&&0>s(wn,ys)?($[ve]=wn,$[or]=te,ve=or):($[ve]=ys,$[Gt]=te,ve=Gt);else if(or<Ue&&0>s(wn,te))$[ve]=wn,$[or]=te,ve=or;else break e}}return K}function s($,K){var te=$.sortIndex-K.sortIndex;return te!==0?te:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,f=null,p=3,y=!1,S=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var K=r(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=$)n(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=r(d)}}function P($){if(v=!1,N($),!S)if(r(u)!==null)S=!0,et(L);else{var K=r(d);K!==null&&St(P,K.startTime-$)}}function L($,K){S=!1,v&&(v=!1,w(_),_=-1),y=!0;var te=p;try{for(N(K),f=r(u);f!==null&&(!(f.expirationTime>K)||$&&!R());){var ve=f.callback;if(typeof ve=="function"){f.callback=null,p=f.priorityLevel;var Ue=ve(f.expirationTime<=K);K=t.unstable_now(),typeof Ue=="function"?f.callback=Ue:f===r(u)&&n(u),N(K)}else n(u);f=r(u)}if(f!==null)var xs=!0;else{var Gt=r(d);Gt!==null&&St(P,Gt.startTime-K),xs=!1}return xs}finally{f=null,p=te,y=!1}}var D=!1,T=null,_=-1,k=5,C=-1;function R(){return!(t.unstable_now()-C<k)}function A(){if(T!==null){var $=t.unstable_now();C=$;var K=!0;try{K=T(!0,$)}finally{K?I():(D=!1,T=null)}}else D=!1}var I;if(typeof b=="function")I=function(){b(A)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,re=me.port2;me.port1.onmessage=A,I=function(){re.postMessage(null)}}else I=function(){x(A,0)};function et($){T=$,D||(D=!0,I())}function St($,K){_=x(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){S||y||(S=!0,et(L))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var te=p;p=K;try{return $()}finally{p=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var te=p;p=$;try{return K()}finally{p=te}},t.unstable_scheduleCallback=function($,K,te){var ve=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ve+te:ve):te=ve,$){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=te+Ue,$={id:h++,callback:K,priorityLevel:$,startTime:te,expirationTime:Ue,sortIndex:-1},te>ve?($.sortIndex=te,e(d,$),r(u)===null&&$===r(d)&&(v?(w(_),_=-1):v=!0,St(P,te-ve))):($.sortIndex=Ue,e(u,$),S||y||(S=!0,et(L))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var K=p;return function(){var te=p;p=K;try{return $.apply(this,arguments)}finally{p=te}}}})(rv);tv.exports=rv;var X1=tv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1=E,qt=X1;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nv=new Set,lo={};function Ys(t,e){Li(t,e),Li(t+"Capture",e)}function Li(t,e){for(lo[t]=e,t=0;t<e.length;t++)nv.add(e[t])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xh=Object.prototype.hasOwnProperty,ej=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gg={},Kg={};function tj(t){return xh.call(Kg,t)?!0:xh.call(Gg,t)?!1:ej.test(t)?Kg[t]=!0:(Gg[t]=!0,!1)}function rj(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nj(t,e,r,n){if(e===null||typeof e>"u"||rj(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,r,n,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var zf=/[\-:]([a-z])/g;function $f(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zf,$f);ct[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zf,$f);ct[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zf,$f);ct[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function qf(t,e,r,n){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nj(e,r,s,n)&&(r=null),n||s===null?tj(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var xn=Z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),hi=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),Hf=Symbol.for("react.strict_mode"),yh=Symbol.for("react.profiler"),sv=Symbol.for("react.provider"),iv=Symbol.for("react.context"),Wf=Symbol.for("react.forward_ref"),vh=Symbol.for("react.suspense"),wh=Symbol.for("react.suspense_list"),Gf=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),av=Symbol.for("react.offscreen"),Qg=Symbol.iterator;function Ea(t){return t===null||typeof t!="object"?null:(t=Qg&&t[Qg]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Ad;function Da(t){if(Ad===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ad=e&&e[1]||""}return`
`+Ad+t}var Rd=!1;function Pd(t,e){if(!t||Rd)return"";Rd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Rd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Da(t):""}function sj(t){switch(t.tag){case 5:return Da(t.type);case 16:return Da("Lazy");case 13:return Da("Suspense");case 19:return Da("SuspenseList");case 0:case 2:case 15:return t=Pd(t.type,!1),t;case 11:return t=Pd(t.type.render,!1),t;case 1:return t=Pd(t.type,!0),t;default:return""}}function bh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fi:return"Fragment";case hi:return"Portal";case yh:return"Profiler";case Hf:return"StrictMode";case vh:return"Suspense";case wh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iv:return(t.displayName||"Context")+".Consumer";case sv:return(t._context.displayName||"Context")+".Provider";case Wf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gf:return e=t.displayName||null,e!==null?e:bh(t.type)||"Memo";case In:e=t._payload,t=t._init;try{return bh(t(e))}catch{}}return null}function ij(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bh(e);case 8:return e===Hf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ov(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aj(t){var e=ov(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _l(t){t._valueTracker||(t._valueTracker=aj(t))}function lv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=ov(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function xc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _h(t,e){var r=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Yg(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Zn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cv(t,e){e=e.checked,e!=null&&qf(t,"checked",e,!1)}function Nh(t,e){cv(t,e);var r=Zn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jh(t,e.type,r):e.hasOwnProperty("defaultValue")&&jh(t,e.type,Zn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function jh(t,e,r){(e!=="number"||xc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Oa=Array.isArray;function Ei(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Zn(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Eh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(U(92));if(Oa(r)){if(1<r.length)throw Error(U(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Zn(r)}}function uv(t,e){var r=Zn(e.value),n=Zn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Zg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Th(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nl,hv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nl=Nl||document.createElement("div"),Nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function co(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ha={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oj=["Webkit","ms","Moz","O"];Object.keys(Ha).forEach(function(t){oj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ha[e]=Ha[t]})});function fv(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ha.hasOwnProperty(t)&&Ha[t]?(""+e).trim():e+"px"}function mv(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=fv(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var lj=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sh(t,e){if(e){if(lj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function kh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ih=null;function Kf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ch=null,Ti=null,Si=null;function ex(t){if(t=zo(t)){if(typeof Ch!="function")throw Error(U(280));var e=t.stateNode;e&&(e=yu(e),Ch(t.stateNode,t.type,e))}}function pv(t){Ti?Si?Si.push(t):Si=[t]:Ti=t}function gv(){if(Ti){var t=Ti,e=Si;if(Si=Ti=null,ex(t),e)for(t=0;t<e.length;t++)ex(e[t])}}function xv(t,e){return t(e)}function yv(){}var Dd=!1;function vv(t,e,r){if(Dd)return t(e,r);Dd=!0;try{return xv(t,e,r)}finally{Dd=!1,(Ti!==null||Si!==null)&&(yv(),gv())}}function uo(t,e){var r=t.stateNode;if(r===null)return null;var n=yu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(U(231,e,typeof r));return r}var Ah=!1;if(sn)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){Ah=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{Ah=!1}function cj(t,e,r,n,s,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var Wa=!1,yc=null,vc=!1,Rh=null,uj={onError:function(t){Wa=!0,yc=t}};function dj(t,e,r,n,s,a,o,l,u){Wa=!1,yc=null,cj.apply(uj,arguments)}function hj(t,e,r,n,s,a,o,l,u){if(dj.apply(this,arguments),Wa){if(Wa){var d=yc;Wa=!1,yc=null}else throw Error(U(198));vc||(vc=!0,Rh=d)}}function Js(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function wv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tx(t){if(Js(t)!==t)throw Error(U(188))}function fj(t){var e=t.alternate;if(!e){if(e=Js(t),e===null)throw Error(U(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return tx(s),t;if(a===n)return tx(s),e;a=a.sibling}throw Error(U(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(r.alternate!==n)throw Error(U(190))}if(r.tag!==3)throw Error(U(188));return r.stateNode.current===r?t:e}function bv(t){return t=fj(t),t!==null?_v(t):null}function _v(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_v(t);if(e!==null)return e;t=t.sibling}return null}var Nv=qt.unstable_scheduleCallback,rx=qt.unstable_cancelCallback,mj=qt.unstable_shouldYield,pj=qt.unstable_requestPaint,ze=qt.unstable_now,gj=qt.unstable_getCurrentPriorityLevel,Qf=qt.unstable_ImmediatePriority,jv=qt.unstable_UserBlockingPriority,wc=qt.unstable_NormalPriority,xj=qt.unstable_LowPriority,Ev=qt.unstable_IdlePriority,mu=null,kr=null;function yj(t){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(mu,t,void 0,(t.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:bj,vj=Math.log,wj=Math.LN2;function bj(t){return t>>>=0,t===0?32:31-(vj(t)/wj|0)|0}var jl=64,El=4194304;function La(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=La(l):(a&=o,a!==0&&(n=La(a)))}else o=r&~s,o!==0?n=La(o):a!==0&&(n=La(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-mr(e),s=1<<r,n|=t[r],e&=~s;return n}function _j(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nj(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-mr(a),l=1<<o,u=s[o];u===-1?(!(l&r)||l&n)&&(s[o]=_j(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function Ph(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tv(){var t=jl;return jl<<=1,!(jl&4194240)&&(jl=64),t}function Od(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Uo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mr(e),t[e]=r}function jj(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-mr(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function Yf(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-mr(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var ye=0;function Sv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kv,Jf,Iv,Cv,Av,Dh=!1,Tl=[],Un=null,Bn=null,zn=null,ho=new Map,fo=new Map,An=[],Ej="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nx(t,e){switch(t){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(e.pointerId)}}function Sa(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=zo(e),e!==null&&Jf(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Tj(t,e,r,n,s){switch(e){case"focusin":return Un=Sa(Un,t,e,r,n,s),!0;case"dragenter":return Bn=Sa(Bn,t,e,r,n,s),!0;case"mouseover":return zn=Sa(zn,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return ho.set(a,Sa(ho.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,fo.set(a,Sa(fo.get(a)||null,t,e,r,n,s)),!0}return!1}function Rv(t){var e=ks(t.target);if(e!==null){var r=Js(e);if(r!==null){if(e=r.tag,e===13){if(e=wv(r),e!==null){t.blockedOn=e,Av(t.priority,function(){Iv(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Oh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ih=n,r.target.dispatchEvent(n),Ih=null}else return e=zo(r),e!==null&&Jf(e),t.blockedOn=r,!1;e.shift()}return!0}function sx(t,e,r){Kl(t)&&r.delete(e)}function Sj(){Dh=!1,Un!==null&&Kl(Un)&&(Un=null),Bn!==null&&Kl(Bn)&&(Bn=null),zn!==null&&Kl(zn)&&(zn=null),ho.forEach(sx),fo.forEach(sx)}function ka(t,e){t.blockedOn===e&&(t.blockedOn=null,Dh||(Dh=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,Sj)))}function mo(t){function e(s){return ka(s,t)}if(0<Tl.length){ka(Tl[0],t);for(var r=1;r<Tl.length;r++){var n=Tl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Un!==null&&ka(Un,t),Bn!==null&&ka(Bn,t),zn!==null&&ka(zn,t),ho.forEach(e),fo.forEach(e),r=0;r<An.length;r++)n=An[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<An.length&&(r=An[0],r.blockedOn===null);)Rv(r),r.blockedOn===null&&An.shift()}var ki=xn.ReactCurrentBatchConfig,_c=!0;function kj(t,e,r,n){var s=ye,a=ki.transition;ki.transition=null;try{ye=1,Xf(t,e,r,n)}finally{ye=s,ki.transition=a}}function Ij(t,e,r,n){var s=ye,a=ki.transition;ki.transition=null;try{ye=4,Xf(t,e,r,n)}finally{ye=s,ki.transition=a}}function Xf(t,e,r,n){if(_c){var s=Oh(t,e,r,n);if(s===null)Hd(t,e,n,Nc,r),nx(t,n);else if(Tj(s,t,e,r,n))n.stopPropagation();else if(nx(t,n),e&4&&-1<Ej.indexOf(t)){for(;s!==null;){var a=zo(s);if(a!==null&&kv(a),a=Oh(t,e,r,n),a===null&&Hd(t,e,n,Nc,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Hd(t,e,n,null,r)}}var Nc=null;function Oh(t,e,r,n){if(Nc=null,t=Kf(n),t=ks(t),t!==null)if(e=Js(t),e===null)t=null;else if(r=e.tag,r===13){if(t=wv(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nc=t,null}function Pv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gj()){case Qf:return 1;case jv:return 4;case wc:case xj:return 16;case Ev:return 536870912;default:return 16}default:return 16}}var Mn=null,Zf=null,Ql=null;function Dv(){if(Ql)return Ql;var t,e=Zf,r=e.length,n,s="value"in Mn?Mn.value:Mn.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[a-n];n++);return Ql=s.slice(t,1<n?1-n:void 0)}function Yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sl(){return!0}function ix(){return!1}function Wt(t){function e(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Sl:ix,this.isPropagationStopped=ix,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),e}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},em=Wt(Xi),Bo=Re({},Xi,{view:0,detail:0}),Cj=Wt(Bo),Ld,Md,Ia,pu=Re({},Bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ia&&(Ia&&t.type==="mousemove"?(Ld=t.screenX-Ia.screenX,Md=t.screenY-Ia.screenY):Md=Ld=0,Ia=t),Ld)},movementY:function(t){return"movementY"in t?t.movementY:Md}}),ax=Wt(pu),Aj=Re({},pu,{dataTransfer:0}),Rj=Wt(Aj),Pj=Re({},Bo,{relatedTarget:0}),Vd=Wt(Pj),Dj=Re({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Oj=Wt(Dj),Lj=Re({},Xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mj=Wt(Lj),Vj=Re({},Xi,{data:0}),ox=Wt(Vj),Fj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bj[t])?!!e[t]:!1}function tm(){return zj}var $j=Re({},Bo,{key:function(t){if(t.key){var e=Fj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tm,charCode:function(t){return t.type==="keypress"?Yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qj=Wt($j),Hj=Re({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lx=Wt(Hj),Wj=Re({},Bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tm}),Gj=Wt(Wj),Kj=Re({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qj=Wt(Kj),Yj=Re({},pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jj=Wt(Yj),Xj=[9,13,27,32],rm=sn&&"CompositionEvent"in window,Ga=null;sn&&"documentMode"in document&&(Ga=document.documentMode);var Zj=sn&&"TextEvent"in window&&!Ga,Ov=sn&&(!rm||Ga&&8<Ga&&11>=Ga),cx=" ",ux=!1;function Lv(t,e){switch(t){case"keyup":return Xj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mi=!1;function eE(t,e){switch(t){case"compositionend":return Mv(e);case"keypress":return e.which!==32?null:(ux=!0,cx);case"textInput":return t=e.data,t===cx&&ux?null:t;default:return null}}function tE(t,e){if(mi)return t==="compositionend"||!rm&&Lv(t,e)?(t=Dv(),Ql=Zf=Mn=null,mi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ov&&e.locale!=="ko"?null:e.data;default:return null}}var rE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rE[t.type]:e==="textarea"}function Vv(t,e,r,n){pv(n),e=jc(e,"onChange"),0<e.length&&(r=new em("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ka=null,po=null;function nE(t){Qv(t,0)}function gu(t){var e=xi(t);if(lv(e))return t}function sE(t,e){if(t==="change")return e}var Fv=!1;if(sn){var Fd;if(sn){var Ud="oninput"in document;if(!Ud){var hx=document.createElement("div");hx.setAttribute("oninput","return;"),Ud=typeof hx.oninput=="function"}Fd=Ud}else Fd=!1;Fv=Fd&&(!document.documentMode||9<document.documentMode)}function fx(){Ka&&(Ka.detachEvent("onpropertychange",Uv),po=Ka=null)}function Uv(t){if(t.propertyName==="value"&&gu(po)){var e=[];Vv(e,po,t,Kf(t)),vv(nE,e)}}function iE(t,e,r){t==="focusin"?(fx(),Ka=e,po=r,Ka.attachEvent("onpropertychange",Uv)):t==="focusout"&&fx()}function aE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gu(po)}function oE(t,e){if(t==="click")return gu(e)}function lE(t,e){if(t==="input"||t==="change")return gu(e)}function cE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gr=typeof Object.is=="function"?Object.is:cE;function go(t,e){if(gr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!xh.call(e,s)||!gr(t[s],e[s]))return!1}return!0}function mx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function px(t,e){var r=mx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=mx(r)}}function Bv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zv(){for(var t=window,e=xc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=xc(t.document)}return e}function nm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uE(t){var e=zv(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Bv(r.ownerDocument.documentElement,r)){if(n!==null&&nm(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=px(r,a);var o=px(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dE=sn&&"documentMode"in document&&11>=document.documentMode,pi=null,Lh=null,Qa=null,Mh=!1;function gx(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Mh||pi==null||pi!==xc(n)||(n=pi,"selectionStart"in n&&nm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Qa&&go(Qa,n)||(Qa=n,n=jc(Lh,"onSelect"),0<n.length&&(e=new em("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=pi)))}function kl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var gi={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},Bd={},$v={};sn&&($v=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function xu(t){if(Bd[t])return Bd[t];if(!gi[t])return t;var e=gi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in $v)return Bd[t]=e[r];return t}var qv=xu("animationend"),Hv=xu("animationiteration"),Wv=xu("animationstart"),Gv=xu("transitionend"),Kv=new Map,xx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(t,e){Kv.set(t,e),Ys(e,[t])}for(var zd=0;zd<xx.length;zd++){var $d=xx[zd],hE=$d.toLowerCase(),fE=$d[0].toUpperCase()+$d.slice(1);us(hE,"on"+fE)}us(qv,"onAnimationEnd");us(Hv,"onAnimationIteration");us(Wv,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us(Gv,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function yx(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,hj(n,e,void 0,t),t.currentTarget=null}function Qv(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;yx(s,l,d),a=u}else for(o=0;o<n.length;o++){if(l=n[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;yx(s,l,d),a=u}}}if(vc)throw t=Rh,vc=!1,Rh=null,t}function je(t,e){var r=e[zh];r===void 0&&(r=e[zh]=new Set);var n=t+"__bubble";r.has(n)||(Yv(e,t,2,!1),r.add(n))}function qd(t,e,r){var n=0;e&&(n|=4),Yv(r,t,n,e)}var Il="_reactListening"+Math.random().toString(36).slice(2);function xo(t){if(!t[Il]){t[Il]=!0,nv.forEach(function(r){r!=="selectionchange"&&(mE.has(r)||qd(r,!1,t),qd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Il]||(e[Il]=!0,qd("selectionchange",!1,e))}}function Yv(t,e,r,n){switch(Pv(e)){case 1:var s=kj;break;case 4:s=Ij;break;default:s=Xf}r=s.bind(null,e,r,t),s=void 0,!Ah||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Hd(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ks(l),o===null)return;if(u=o.tag,u===5||u===6){n=a=o;continue e}l=l.parentNode}}n=n.return}vv(function(){var d=a,h=Kf(r),f=[];e:{var p=Kv.get(t);if(p!==void 0){var y=em,S=t;switch(t){case"keypress":if(Yl(r)===0)break e;case"keydown":case"keyup":y=qj;break;case"focusin":S="focus",y=Vd;break;case"focusout":S="blur",y=Vd;break;case"beforeblur":case"afterblur":y=Vd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ax;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Rj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Gj;break;case qv:case Hv:case Wv:y=Oj;break;case Gv:y=Qj;break;case"scroll":y=Cj;break;case"wheel":y=Jj;break;case"copy":case"cut":case"paste":y=Mj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=lx}var v=(e&4)!==0,x=!v&&t==="scroll",w=v?p!==null?p+"Capture":null:p;v=[];for(var b=d,N;b!==null;){N=b;var P=N.stateNode;if(N.tag===5&&P!==null&&(N=P,w!==null&&(P=uo(b,w),P!=null&&v.push(yo(b,P,N)))),x)break;b=b.return}0<v.length&&(p=new y(p,S,null,r,h),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&r!==Ih&&(S=r.relatedTarget||r.fromElement)&&(ks(S)||S[an]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(S=r.relatedTarget||r.toElement,y=d,S=S?ks(S):null,S!==null&&(x=Js(S),S!==x||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=d),y!==S)){if(v=ax,P="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(v=lx,P="onPointerLeave",w="onPointerEnter",b="pointer"),x=y==null?p:xi(y),N=S==null?p:xi(S),p=new v(P,b+"leave",y,r,h),p.target=x,p.relatedTarget=N,P=null,ks(h)===d&&(v=new v(w,b+"enter",S,r,h),v.target=N,v.relatedTarget=x,P=v),x=P,y&&S)t:{for(v=y,w=S,b=0,N=v;N;N=ai(N))b++;for(N=0,P=w;P;P=ai(P))N++;for(;0<b-N;)v=ai(v),b--;for(;0<N-b;)w=ai(w),N--;for(;b--;){if(v===w||w!==null&&v===w.alternate)break t;v=ai(v),w=ai(w)}v=null}else v=null;y!==null&&vx(f,p,y,v,!1),S!==null&&x!==null&&vx(f,x,S,v,!0)}}e:{if(p=d?xi(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var L=sE;else if(dx(p))if(Fv)L=lE;else{L=aE;var D=iE}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=oE);if(L&&(L=L(t,d))){Vv(f,L,r,h);break e}D&&D(t,p,d),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&jh(p,"number",p.value)}switch(D=d?xi(d):window,t){case"focusin":(dx(D)||D.contentEditable==="true")&&(pi=D,Lh=d,Qa=null);break;case"focusout":Qa=Lh=pi=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,gx(f,r,h);break;case"selectionchange":if(dE)break;case"keydown":case"keyup":gx(f,r,h)}var T;if(rm)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else mi?Lv(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Ov&&r.locale!=="ko"&&(mi||_!=="onCompositionStart"?_==="onCompositionEnd"&&mi&&(T=Dv()):(Mn=h,Zf="value"in Mn?Mn.value:Mn.textContent,mi=!0)),D=jc(d,_),0<D.length&&(_=new ox(_,t,null,r,h),f.push({event:_,listeners:D}),T?_.data=T:(T=Mv(r),T!==null&&(_.data=T)))),(T=Zj?eE(t,r):tE(t,r))&&(d=jc(d,"onBeforeInput"),0<d.length&&(h=new ox("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:d}),h.data=T))}Qv(f,e)})}function yo(t,e,r){return{instance:t,listener:e,currentTarget:r}}function jc(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=uo(t,r),a!=null&&n.unshift(yo(t,a,s)),a=uo(t,e),a!=null&&n.push(yo(t,a,s))),t=t.return}return n}function ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vx(t,e,r,n,s){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,u=l.alternate,d=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&d!==null&&(l=d,s?(u=uo(r,a),u!=null&&o.unshift(yo(r,u,l))):s||(u=uo(r,a),u!=null&&o.push(yo(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var pE=/\r\n?/g,gE=/\u0000|\uFFFD/g;function wx(t){return(typeof t=="string"?t:""+t).replace(pE,`
`).replace(gE,"")}function Cl(t,e,r){if(e=wx(e),wx(t)!==e&&r)throw Error(U(425))}function Ec(){}var Vh=null,Fh=null;function Uh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bh=typeof setTimeout=="function"?setTimeout:void 0,xE=typeof clearTimeout=="function"?clearTimeout:void 0,bx=typeof Promise=="function"?Promise:void 0,yE=typeof queueMicrotask=="function"?queueMicrotask:typeof bx<"u"?function(t){return bx.resolve(null).then(t).catch(vE)}:Bh;function vE(t){setTimeout(function(){throw t})}function Wd(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),mo(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);mo(e)}function $n(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _x(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),Sr="__reactFiber$"+Zi,vo="__reactProps$"+Zi,an="__reactContainer$"+Zi,zh="__reactEvents$"+Zi,wE="__reactListeners$"+Zi,bE="__reactHandles$"+Zi;function ks(t){var e=t[Sr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[an]||r[Sr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=_x(t);t!==null;){if(r=t[Sr])return r;t=_x(t)}return e}t=r,r=t.parentNode}return null}function zo(t){return t=t[Sr]||t[an],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function yu(t){return t[vo]||null}var $h=[],yi=-1;function ds(t){return{current:t}}function Te(t){0>yi||(t.current=$h[yi],$h[yi]=null,yi--)}function _e(t,e){yi++,$h[yi]=t.current,t.current=e}var es={},vt=ds(es),Rt=ds(!1),Ms=es;function Mi(t,e){var r=t.type.contextTypes;if(!r)return es;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(t){return t=t.childContextTypes,t!=null}function Tc(){Te(Rt),Te(vt)}function Nx(t,e,r){if(vt.current!==es)throw Error(U(168));_e(vt,e),_e(Rt,r)}function Jv(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(U(108,ij(t)||"Unknown",s));return Re({},r,n)}function Sc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,Ms=vt.current,_e(vt,t),_e(Rt,Rt.current),!0}function jx(t,e,r){var n=t.stateNode;if(!n)throw Error(U(169));r?(t=Jv(t,e,Ms),n.__reactInternalMemoizedMergedChildContext=t,Te(Rt),Te(vt),_e(vt,t)):Te(Rt),_e(Rt,r)}var Kr=null,vu=!1,Gd=!1;function Xv(t){Kr===null?Kr=[t]:Kr.push(t)}function _E(t){vu=!0,Xv(t)}function hs(){if(!Gd&&Kr!==null){Gd=!0;var t=0,e=ye;try{var r=Kr;for(ye=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Kr=null,vu=!1}catch(s){throw Kr!==null&&(Kr=Kr.slice(t+1)),Nv(Qf,hs),s}finally{ye=e,Gd=!1}}return null}var vi=[],wi=0,kc=null,Ic=0,Kt=[],Qt=0,Vs=null,Qr=1,Yr="";function Es(t,e){vi[wi++]=Ic,vi[wi++]=kc,kc=t,Ic=e}function Zv(t,e,r){Kt[Qt++]=Qr,Kt[Qt++]=Yr,Kt[Qt++]=Vs,Vs=t;var n=Qr;t=Yr;var s=32-mr(n)-1;n&=~(1<<s),r+=1;var a=32-mr(e)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Qr=1<<32-mr(e)+s|r<<s|n,Yr=a+t}else Qr=1<<a|r<<s|n,Yr=t}function sm(t){t.return!==null&&(Es(t,1),Zv(t,1,0))}function im(t){for(;t===kc;)kc=vi[--wi],vi[wi]=null,Ic=vi[--wi],vi[wi]=null;for(;t===Vs;)Vs=Kt[--Qt],Kt[Qt]=null,Yr=Kt[--Qt],Kt[Qt]=null,Qr=Kt[--Qt],Kt[Qt]=null}var $t=null,Bt=null,Se=!1,dr=null;function ew(t,e){var r=Jt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Ex(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,Bt=$n(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,Bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Vs!==null?{id:Qr,overflow:Yr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Jt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,$t=t,Bt=null,!0):!1;default:return!1}}function qh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hh(t){if(Se){var e=Bt;if(e){var r=e;if(!Ex(t,e)){if(qh(t))throw Error(U(418));e=$n(r.nextSibling);var n=$t;e&&Ex(t,e)?ew(n,r):(t.flags=t.flags&-4097|2,Se=!1,$t=t)}}else{if(qh(t))throw Error(U(418));t.flags=t.flags&-4097|2,Se=!1,$t=t}}}function Tx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function Al(t){if(t!==$t)return!1;if(!Se)return Tx(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Uh(t.type,t.memoizedProps)),e&&(e=Bt)){if(qh(t))throw tw(),Error(U(418));for(;e;)ew(t,e),e=$n(e.nextSibling)}if(Tx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Bt=$n(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Bt=null}}else Bt=$t?$n(t.stateNode.nextSibling):null;return!0}function tw(){for(var t=Bt;t;)t=$n(t.nextSibling)}function Vi(){Bt=$t=null,Se=!1}function am(t){dr===null?dr=[t]:dr.push(t)}var NE=xn.ReactCurrentBatchConfig;function Ca(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(U(309));var n=r.stateNode}if(!n)throw Error(U(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(U(284));if(!r._owner)throw Error(U(290,t))}return t}function Rl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Sx(t){var e=t._init;return e(t._payload)}function rw(t){function e(w,b){if(t){var N=w.deletions;N===null?(w.deletions=[b],w.flags|=16):N.push(b)}}function r(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function n(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function s(w,b){return w=Gn(w,b),w.index=0,w.sibling=null,w}function a(w,b,N){return w.index=N,t?(N=w.alternate,N!==null?(N=N.index,N<b?(w.flags|=2,b):N):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,b,N,P){return b===null||b.tag!==6?(b=eh(N,w.mode,P),b.return=w,b):(b=s(b,N),b.return=w,b)}function u(w,b,N,P){var L=N.type;return L===fi?h(w,b,N.props.children,P,N.key):b!==null&&(b.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===In&&Sx(L)===b.type)?(P=s(b,N.props),P.ref=Ca(w,b,N),P.return=w,P):(P=nc(N.type,N.key,N.props,null,w.mode,P),P.ref=Ca(w,b,N),P.return=w,P)}function d(w,b,N,P){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=th(N,w.mode,P),b.return=w,b):(b=s(b,N.children||[]),b.return=w,b)}function h(w,b,N,P,L){return b===null||b.tag!==7?(b=Ps(N,w.mode,P,L),b.return=w,b):(b=s(b,N),b.return=w,b)}function f(w,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return b=eh(""+b,w.mode,N),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bl:return N=nc(b.type,b.key,b.props,null,w.mode,N),N.ref=Ca(w,null,b),N.return=w,N;case hi:return b=th(b,w.mode,N),b.return=w,b;case In:var P=b._init;return f(w,P(b._payload),N)}if(Oa(b)||Ea(b))return b=Ps(b,w.mode,N,null),b.return=w,b;Rl(w,b)}return null}function p(w,b,N,P){var L=b!==null?b.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return L!==null?null:l(w,b,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case bl:return N.key===L?u(w,b,N,P):null;case hi:return N.key===L?d(w,b,N,P):null;case In:return L=N._init,p(w,b,L(N._payload),P)}if(Oa(N)||Ea(N))return L!==null?null:h(w,b,N,P,null);Rl(w,N)}return null}function y(w,b,N,P,L){if(typeof P=="string"&&P!==""||typeof P=="number")return w=w.get(N)||null,l(b,w,""+P,L);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case bl:return w=w.get(P.key===null?N:P.key)||null,u(b,w,P,L);case hi:return w=w.get(P.key===null?N:P.key)||null,d(b,w,P,L);case In:var D=P._init;return y(w,b,N,D(P._payload),L)}if(Oa(P)||Ea(P))return w=w.get(N)||null,h(b,w,P,L,null);Rl(b,P)}return null}function S(w,b,N,P){for(var L=null,D=null,T=b,_=b=0,k=null;T!==null&&_<N.length;_++){T.index>_?(k=T,T=null):k=T.sibling;var C=p(w,T,N[_],P);if(C===null){T===null&&(T=k);break}t&&T&&C.alternate===null&&e(w,T),b=a(C,b,_),D===null?L=C:D.sibling=C,D=C,T=k}if(_===N.length)return r(w,T),Se&&Es(w,_),L;if(T===null){for(;_<N.length;_++)T=f(w,N[_],P),T!==null&&(b=a(T,b,_),D===null?L=T:D.sibling=T,D=T);return Se&&Es(w,_),L}for(T=n(w,T);_<N.length;_++)k=y(T,w,_,N[_],P),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?_:k.key),b=a(k,b,_),D===null?L=k:D.sibling=k,D=k);return t&&T.forEach(function(R){return e(w,R)}),Se&&Es(w,_),L}function v(w,b,N,P){var L=Ea(N);if(typeof L!="function")throw Error(U(150));if(N=L.call(N),N==null)throw Error(U(151));for(var D=L=null,T=b,_=b=0,k=null,C=N.next();T!==null&&!C.done;_++,C=N.next()){T.index>_?(k=T,T=null):k=T.sibling;var R=p(w,T,C.value,P);if(R===null){T===null&&(T=k);break}t&&T&&R.alternate===null&&e(w,T),b=a(R,b,_),D===null?L=R:D.sibling=R,D=R,T=k}if(C.done)return r(w,T),Se&&Es(w,_),L;if(T===null){for(;!C.done;_++,C=N.next())C=f(w,C.value,P),C!==null&&(b=a(C,b,_),D===null?L=C:D.sibling=C,D=C);return Se&&Es(w,_),L}for(T=n(w,T);!C.done;_++,C=N.next())C=y(T,w,_,C.value,P),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?_:C.key),b=a(C,b,_),D===null?L=C:D.sibling=C,D=C);return t&&T.forEach(function(A){return e(w,A)}),Se&&Es(w,_),L}function x(w,b,N,P){if(typeof N=="object"&&N!==null&&N.type===fi&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case bl:e:{for(var L=N.key,D=b;D!==null;){if(D.key===L){if(L=N.type,L===fi){if(D.tag===7){r(w,D.sibling),b=s(D,N.props.children),b.return=w,w=b;break e}}else if(D.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===In&&Sx(L)===D.type){r(w,D.sibling),b=s(D,N.props),b.ref=Ca(w,D,N),b.return=w,w=b;break e}r(w,D);break}else e(w,D);D=D.sibling}N.type===fi?(b=Ps(N.props.children,w.mode,P,N.key),b.return=w,w=b):(P=nc(N.type,N.key,N.props,null,w.mode,P),P.ref=Ca(w,b,N),P.return=w,w=P)}return o(w);case hi:e:{for(D=N.key;b!==null;){if(b.key===D)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){r(w,b.sibling),b=s(b,N.children||[]),b.return=w,w=b;break e}else{r(w,b);break}else e(w,b);b=b.sibling}b=th(N,w.mode,P),b.return=w,w=b}return o(w);case In:return D=N._init,x(w,b,D(N._payload),P)}if(Oa(N))return S(w,b,N,P);if(Ea(N))return v(w,b,N,P);Rl(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,b!==null&&b.tag===6?(r(w,b.sibling),b=s(b,N),b.return=w,w=b):(r(w,b),b=eh(N,w.mode,P),b.return=w,w=b),o(w)):r(w,b)}return x}var Fi=rw(!0),nw=rw(!1),Cc=ds(null),Ac=null,bi=null,om=null;function lm(){om=bi=Ac=null}function cm(t){var e=Cc.current;Te(Cc),t._currentValue=e}function Wh(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ii(t,e){Ac=t,om=bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function rr(t){var e=t._currentValue;if(om!==t)if(t={context:t,memoizedValue:e,next:null},bi===null){if(Ac===null)throw Error(U(308));bi=t,Ac.dependencies={lanes:0,firstContext:t}}else bi=bi.next=t;return e}var Is=null;function um(t){Is===null?Is=[t]:Is.push(t)}function sw(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,um(e)):(r.next=s.next,s.next=r),e.interleaved=r,on(t,n)}function on(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Cn=!1;function dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,fe&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,on(t,r)}return s=n.interleaved,s===null?(e.next=e,um(n)):(e.next=s.next,s.next=e),n.interleaved=e,on(t,r)}function Jl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Yf(t,r)}}function kx(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Rc(t,e,r,n){var s=t.updateQueue;Cn=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(a!==null){var f=s.baseState;o=0,h=d=u=null,l=a;do{var p=l.lane,y=l.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=t,v=l;switch(p=e,y=r,v.tag){case 1:if(S=v.payload,typeof S=="function"){f=S.call(y,f,p);break e}f=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=v.payload,p=typeof S=="function"?S.call(y,f,p):S,p==null)break e;f=Re({},f,p);break e;case 2:Cn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,u=f):h=h.next=y,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Us|=o,t.lanes=o,t.memoizedState=f}}function Ix(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(U(191,s));s.call(n)}}}var $o={},Ir=ds($o),wo=ds($o),bo=ds($o);function Cs(t){if(t===$o)throw Error(U(174));return t}function hm(t,e){switch(_e(bo,e),_e(wo,t),_e(Ir,$o),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Th(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Th(e,t)}Te(Ir),_e(Ir,e)}function Ui(){Te(Ir),Te(wo),Te(bo)}function aw(t){Cs(bo.current);var e=Cs(Ir.current),r=Th(e,t.type);e!==r&&(_e(wo,t),_e(Ir,r))}function fm(t){wo.current===t&&(Te(Ir),Te(wo))}var Ce=ds(0);function Pc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kd=[];function mm(){for(var t=0;t<Kd.length;t++)Kd[t]._workInProgressVersionPrimary=null;Kd.length=0}var Xl=xn.ReactCurrentDispatcher,Qd=xn.ReactCurrentBatchConfig,Fs=0,Ae=null,Ye=null,nt=null,Dc=!1,Ya=!1,_o=0,jE=0;function ht(){throw Error(U(321))}function pm(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!gr(t[r],e[r]))return!1;return!0}function gm(t,e,r,n,s,a){if(Fs=a,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xl.current=t===null||t.memoizedState===null?kE:IE,t=r(n,s),Ya){a=0;do{if(Ya=!1,_o=0,25<=a)throw Error(U(301));a+=1,nt=Ye=null,e.updateQueue=null,Xl.current=CE,t=r(n,s)}while(Ya)}if(Xl.current=Oc,e=Ye!==null&&Ye.next!==null,Fs=0,nt=Ye=Ae=null,Dc=!1,e)throw Error(U(300));return t}function xm(){var t=_o!==0;return _o=0,t}function Er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Ae.memoizedState=nt=t:nt=nt.next=t,nt}function nr(){if(Ye===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=nt===null?Ae.memoizedState:nt.next;if(e!==null)nt=e,Ye=t;else{if(t===null)throw Error(U(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},nt===null?Ae.memoizedState=nt=t:nt=nt.next=t}return nt}function No(t,e){return typeof e=="function"?e(t):e}function Yd(t){var e=nr(),r=e.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=t;var n=Ye,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,u=null,d=a;do{var h=d.lane;if((Fs&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=f,o=n):u=u.next=f,Ae.lanes|=h,Us|=h}d=d.next}while(d!==null&&d!==a);u===null?o=n:u.next=l,gr(n,e.memoizedState)||(At=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,Ae.lanes|=a,Us|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Jd(t){var e=nr(),r=e.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);gr(a,e.memoizedState)||(At=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function ow(){}function lw(t,e){var r=Ae,n=nr(),s=e(),a=!gr(n.memoizedState,s);if(a&&(n.memoizedState=s,At=!0),n=n.queue,ym(dw.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||nt!==null&&nt.memoizedState.tag&1){if(r.flags|=2048,jo(9,uw.bind(null,r,n,s,e),void 0,null),st===null)throw Error(U(349));Fs&30||cw(r,e,s)}return s}function cw(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function uw(t,e,r,n){e.value=r,e.getSnapshot=n,hw(e)&&fw(t)}function dw(t,e,r){return r(function(){hw(e)&&fw(t)})}function hw(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!gr(t,r)}catch{return!0}}function fw(t){var e=on(t,1);e!==null&&pr(e,t,1,-1)}function Cx(t){var e=Er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},e.queue=t,t=t.dispatch=SE.bind(null,Ae,t),[e.memoizedState,t]}function jo(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function mw(){return nr().memoizedState}function Zl(t,e,r,n){var s=Er();Ae.flags|=t,s.memoizedState=jo(1|e,r,void 0,n===void 0?null:n)}function wu(t,e,r,n){var s=nr();n=n===void 0?null:n;var a=void 0;if(Ye!==null){var o=Ye.memoizedState;if(a=o.destroy,n!==null&&pm(n,o.deps)){s.memoizedState=jo(e,r,a,n);return}}Ae.flags|=t,s.memoizedState=jo(1|e,r,a,n)}function Ax(t,e){return Zl(8390656,8,t,e)}function ym(t,e){return wu(2048,8,t,e)}function pw(t,e){return wu(4,2,t,e)}function gw(t,e){return wu(4,4,t,e)}function xw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yw(t,e,r){return r=r!=null?r.concat([t]):null,wu(4,4,xw.bind(null,e,t),r)}function vm(){}function vw(t,e){var r=nr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pm(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function ww(t,e){var r=nr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pm(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function bw(t,e,r){return Fs&21?(gr(r,e)||(r=Tv(),Ae.lanes|=r,Us|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=r)}function EE(t,e){var r=ye;ye=r!==0&&4>r?r:4,t(!0);var n=Qd.transition;Qd.transition={};try{t(!1),e()}finally{ye=r,Qd.transition=n}}function _w(){return nr().memoizedState}function TE(t,e,r){var n=Wn(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Nw(t))jw(e,r);else if(r=sw(t,e,r,n),r!==null){var s=jt();pr(r,t,n,s),Ew(r,e,n)}}function SE(t,e,r){var n=Wn(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Nw(t))jw(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,gr(l,o)){var u=e.interleaved;u===null?(s.next=s,um(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=sw(t,e,s,n),r!==null&&(s=jt(),pr(r,t,n,s),Ew(r,e,n))}}function Nw(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function jw(t,e){Ya=Dc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Ew(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Yf(t,r)}}var Oc={readContext:rr,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},kE={readContext:rr,useCallback:function(t,e){return Er().memoizedState=[t,e===void 0?null:e],t},useContext:rr,useEffect:Ax,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Zl(4194308,4,xw.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Zl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zl(4,2,t,e)},useMemo:function(t,e){var r=Er();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Er();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=TE.bind(null,Ae,t),[n.memoizedState,t]},useRef:function(t){var e=Er();return t={current:t},e.memoizedState=t},useState:Cx,useDebugValue:vm,useDeferredValue:function(t){return Er().memoizedState=t},useTransition:function(){var t=Cx(!1),e=t[0];return t=EE.bind(null,t[1]),Er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ae,s=Er();if(Se){if(r===void 0)throw Error(U(407));r=r()}else{if(r=e(),st===null)throw Error(U(349));Fs&30||cw(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,Ax(dw.bind(null,n,a,t),[t]),n.flags|=2048,jo(9,uw.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Er(),e=st.identifierPrefix;if(Se){var r=Yr,n=Qr;r=(n&~(1<<32-mr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=_o++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=jE++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IE={readContext:rr,useCallback:vw,useContext:rr,useEffect:ym,useImperativeHandle:yw,useInsertionEffect:pw,useLayoutEffect:gw,useMemo:ww,useReducer:Yd,useRef:mw,useState:function(){return Yd(No)},useDebugValue:vm,useDeferredValue:function(t){var e=nr();return bw(e,Ye.memoizedState,t)},useTransition:function(){var t=Yd(No)[0],e=nr().memoizedState;return[t,e]},useMutableSource:ow,useSyncExternalStore:lw,useId:_w,unstable_isNewReconciler:!1},CE={readContext:rr,useCallback:vw,useContext:rr,useEffect:ym,useImperativeHandle:yw,useInsertionEffect:pw,useLayoutEffect:gw,useMemo:ww,useReducer:Jd,useRef:mw,useState:function(){return Jd(No)},useDebugValue:vm,useDeferredValue:function(t){var e=nr();return Ye===null?e.memoizedState=t:bw(e,Ye.memoizedState,t)},useTransition:function(){var t=Jd(No)[0],e=nr().memoizedState;return[t,e]},useMutableSource:ow,useSyncExternalStore:lw,useId:_w,unstable_isNewReconciler:!1};function cr(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Gh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Re({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var bu={isMounted:function(t){return(t=t._reactInternals)?Js(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=jt(),s=Wn(t),a=Zr(n,s);a.payload=e,r!=null&&(a.callback=r),e=qn(t,a,s),e!==null&&(pr(e,t,s,n),Jl(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=jt(),s=Wn(t),a=Zr(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=qn(t,a,s),e!==null&&(pr(e,t,s,n),Jl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=jt(),n=Wn(t),s=Zr(r,n);s.tag=2,e!=null&&(s.callback=e),e=qn(t,s,n),e!==null&&(pr(e,t,n,r),Jl(e,t,n))}};function Rx(t,e,r,n,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!go(r,n)||!go(s,a):!0}function Tw(t,e,r){var n=!1,s=es,a=e.contextType;return typeof a=="object"&&a!==null?a=rr(a):(s=Pt(e)?Ms:vt.current,n=e.contextTypes,a=(n=n!=null)?Mi(t,s):es),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Px(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&bu.enqueueReplaceState(e,e.state,null)}function Kh(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},dm(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=rr(a):(a=Pt(e)?Ms:vt.current,s.context=Mi(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Gh(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bu.enqueueReplaceState(s,s.state,null),Rc(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Bi(t,e){try{var r="",n=e;do r+=sj(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Xd(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Qh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var AE=typeof WeakMap=="function"?WeakMap:Map;function Sw(t,e,r){r=Zr(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Mc||(Mc=!0,af=n),Qh(t,e)},r}function kw(t,e,r){r=Zr(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Qh(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Qh(t,e),typeof n!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Dx(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new AE;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=HE.bind(null,t,e,r),e.then(t,t))}function Ox(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Lx(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Zr(-1,1),e.tag=2,qn(r,e,1))),r.lanes|=1),t)}var RE=xn.ReactCurrentOwner,At=!1;function Nt(t,e,r,n){e.child=t===null?nw(e,null,r,n):Fi(e,t.child,r,n)}function Mx(t,e,r,n,s){r=r.render;var a=e.ref;return Ii(e,s),n=gm(t,e,r,n,a,s),r=xm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ln(t,e,s)):(Se&&r&&sm(e),e.flags|=1,Nt(t,e,n,s),e.child)}function Vx(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!Sm(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,Iw(t,e,a,n,s)):(t=nc(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:go,r(o,n)&&t.ref===e.ref)return ln(t,e,s)}return e.flags|=1,t=Gn(a,n),t.ref=e.ref,t.return=e,e.child=t}function Iw(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(go(a,n)&&t.ref===e.ref)if(At=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,ln(t,e,s)}return Yh(t,e,r,n,s)}function Cw(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Ni,Mt),Mt|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(Ni,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,_e(Ni,Mt),Mt|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,_e(Ni,Mt),Mt|=n;return Nt(t,e,s,r),e.child}function Aw(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Yh(t,e,r,n,s){var a=Pt(r)?Ms:vt.current;return a=Mi(e,a),Ii(e,s),r=gm(t,e,r,n,a,s),n=xm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ln(t,e,s)):(Se&&n&&sm(e),e.flags|=1,Nt(t,e,r,s),e.child)}function Fx(t,e,r,n,s){if(Pt(r)){var a=!0;Sc(e)}else a=!1;if(Ii(e,s),e.stateNode===null)ec(t,e),Tw(e,r,n),Kh(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=rr(d):(d=Pt(r)?Ms:vt.current,d=Mi(e,d));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||u!==d)&&Px(e,o,n,d),Cn=!1;var p=e.memoizedState;o.state=p,Rc(e,n,o,s),u=e.memoizedState,l!==n||p!==u||Rt.current||Cn?(typeof h=="function"&&(Gh(e,r,h,n),u=e.memoizedState),(l=Cn||Rx(e,r,l,n,p,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,iw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:cr(e.type,l),o.props=d,f=e.pendingProps,p=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=rr(u):(u=Pt(r)?Ms:vt.current,u=Mi(e,u));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==u)&&Px(e,o,n,u),Cn=!1,p=e.memoizedState,o.state=p,Rc(e,n,o,s);var S=e.memoizedState;l!==f||p!==S||Rt.current||Cn?(typeof y=="function"&&(Gh(e,r,y,n),S=e.memoizedState),(d=Cn||Rx(e,r,d,n,p,S,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=S),o.props=n,o.state=S,o.context=u,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return Jh(t,e,r,n,a,s)}function Jh(t,e,r,n,s,a){Aw(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&jx(e,r,!1),ln(t,e,a);n=e.stateNode,RE.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Fi(e,t.child,null,a),e.child=Fi(e,null,l,a)):Nt(t,e,l,a),e.memoizedState=n.state,s&&jx(e,r,!0),e.child}function Rw(t){var e=t.stateNode;e.pendingContext?Nx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Nx(t,e.context,!1),hm(t,e.containerInfo)}function Ux(t,e,r,n,s){return Vi(),am(s),e.flags|=256,Nt(t,e,r,n),e.child}var Xh={dehydrated:null,treeContext:null,retryLane:0};function Zh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pw(t,e,r){var n=e.pendingProps,s=Ce.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Ce,s&1),t===null)return Hh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ju(o,n,0,null),t=Ps(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Zh(r),e.memoizedState=Xh,t):wm(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return PE(t,e,o,n,l,s,r);if(a){a=n.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=Gn(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Gn(l,a):(a=Ps(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Zh(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Xh,n}return a=t.child,t=a.sibling,n=Gn(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function wm(t,e){return e=ju({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pl(t,e,r,n){return n!==null&&am(n),Fi(e,t.child,null,r),t=wm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PE(t,e,r,n,s,a,o){if(r)return e.flags&256?(e.flags&=-257,n=Xd(Error(U(422))),Pl(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=ju({mode:"visible",children:n.children},s,0,null),a=Ps(a,s,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Fi(e,t.child,null,o),e.child.memoizedState=Zh(o),e.memoizedState=Xh,a);if(!(e.mode&1))return Pl(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(U(419)),n=Xd(a,n,void 0),Pl(t,e,o,n)}if(l=(o&t.childLanes)!==0,At||l){if(n=st,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,on(t,s),pr(n,t,s,-1))}return Tm(),n=Xd(Error(U(421))),Pl(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=WE.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Bt=$n(s.nextSibling),$t=e,Se=!0,dr=null,t!==null&&(Kt[Qt++]=Qr,Kt[Qt++]=Yr,Kt[Qt++]=Vs,Qr=t.id,Yr=t.overflow,Vs=e),e=wm(e,n.children),e.flags|=4096,e)}function Bx(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Wh(t.return,e,r)}function Zd(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Dw(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(Nt(t,e,n.children,r),n=Ce.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bx(t,r,e);else if(t.tag===19)Bx(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(_e(Ce,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Pc(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Zd(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pc(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Zd(e,!0,r,null,a);break;case"together":Zd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ec(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ln(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Us|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,r=Gn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Gn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function DE(t,e,r){switch(e.tag){case 3:Rw(e),Vi();break;case 5:aw(e);break;case 1:Pt(e.type)&&Sc(e);break;case 4:hm(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;_e(Cc,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(_e(Ce,Ce.current&1),e.flags|=128,null):r&e.child.childLanes?Pw(t,e,r):(_e(Ce,Ce.current&1),t=ln(t,e,r),t!==null?t.sibling:null);_e(Ce,Ce.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Dw(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Ce,Ce.current),n)break;return null;case 22:case 23:return e.lanes=0,Cw(t,e,r)}return ln(t,e,r)}var Ow,ef,Lw,Mw;Ow=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ef=function(){};Lw=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Cs(Ir.current);var a=null;switch(r){case"input":s=_h(t,s),n=_h(t,n),a=[];break;case"select":s=Re({},s,{value:void 0}),n=Re({},n,{value:void 0}),a=[];break;case"textarea":s=Eh(t,s),n=Eh(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ec)}Sh(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(lo.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var u=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(lo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&je("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}r&&(a=a||[]).push("style",r);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};Mw=function(t,e,r,n){r!==n&&(e.flags|=4)};function Aa(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function OE(t,e,r){var n=e.pendingProps;switch(im(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Pt(e.type)&&Tc(),ft(e),null;case 3:return n=e.stateNode,Ui(),Te(Rt),Te(vt),mm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Al(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dr!==null&&(cf(dr),dr=null))),ef(t,e),ft(e),null;case 5:fm(e);var s=Cs(bo.current);if(r=e.type,t!==null&&e.stateNode!=null)Lw(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(U(166));return ft(e),null}if(t=Cs(Ir.current),Al(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Sr]=e,n[vo]=a,t=(e.mode&1)!==0,r){case"dialog":je("cancel",n),je("close",n);break;case"iframe":case"object":case"embed":je("load",n);break;case"video":case"audio":for(s=0;s<Ma.length;s++)je(Ma[s],n);break;case"source":je("error",n);break;case"img":case"image":case"link":je("error",n),je("load",n);break;case"details":je("toggle",n);break;case"input":Yg(n,a),je("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},je("invalid",n);break;case"textarea":Xg(n,a),je("invalid",n)}Sh(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Cl(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Cl(n.textContent,l,t),s=["children",""+l]):lo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&je("scroll",n)}switch(r){case"input":_l(n),Jg(n,a,!0);break;case"textarea":_l(n),Zg(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ec)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dv(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Sr]=e,t[vo]=n,Ow(t,e,!1,!1),e.stateNode=t;e:{switch(o=kh(r,n),r){case"dialog":je("cancel",t),je("close",t),s=n;break;case"iframe":case"object":case"embed":je("load",t),s=n;break;case"video":case"audio":for(s=0;s<Ma.length;s++)je(Ma[s],t);s=n;break;case"source":je("error",t),s=n;break;case"img":case"image":case"link":je("error",t),je("load",t),s=n;break;case"details":je("toggle",t),s=n;break;case"input":Yg(t,n),s=_h(t,n),je("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Re({},n,{value:void 0}),je("invalid",t);break;case"textarea":Xg(t,n),s=Eh(t,n),je("invalid",t);break;default:s=n}Sh(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?mv(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&hv(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&co(t,u):typeof u=="number"&&co(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(lo.hasOwnProperty(a)?u!=null&&a==="onScroll"&&je("scroll",t):u!=null&&qf(t,a,u,o))}switch(r){case"input":_l(t),Jg(t,n,!1);break;case"textarea":_l(t),Zg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Zn(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Ei(t,!!n.multiple,a,!1):n.defaultValue!=null&&Ei(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ec)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)Mw(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(U(166));if(r=Cs(bo.current),Cs(Ir.current),Al(e)){if(n=e.stateNode,r=e.memoizedProps,n[Sr]=e,(a=n.nodeValue!==r)&&(t=$t,t!==null))switch(t.tag){case 3:Cl(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cl(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Sr]=e,e.stateNode=n}return ft(e),null;case 13:if(Te(Ce),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Bt!==null&&e.mode&1&&!(e.flags&128))tw(),Vi(),e.flags|=98560,a=!1;else if(a=Al(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(U(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(U(317));a[Sr]=e}else Vi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),a=!1}else dr!==null&&(cf(dr),dr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?Je===0&&(Je=3):Tm())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return Ui(),ef(t,e),t===null&&xo(e.stateNode.containerInfo),ft(e),null;case 10:return cm(e.type._context),ft(e),null;case 17:return Pt(e.type)&&Tc(),ft(e),null;case 19:if(Te(Ce),a=e.memoizedState,a===null)return ft(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Aa(a,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pc(t),o!==null){for(e.flags|=128,Aa(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return _e(Ce,Ce.current&1|2),e.child}t=t.sibling}a.tail!==null&&ze()>zi&&(e.flags|=128,n=!0,Aa(a,!1),e.lanes=4194304)}else{if(!n)if(t=Pc(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Aa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Se)return ft(e),null}else 2*ze()-a.renderingStartTime>zi&&r!==1073741824&&(e.flags|=128,n=!0,Aa(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ze(),e.sibling=null,r=Ce.current,_e(Ce,n?r&1|2:r&1),e):(ft(e),null);case 22:case 23:return Em(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Mt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function LE(t,e){switch(im(e),e.tag){case 1:return Pt(e.type)&&Tc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ui(),Te(Rt),Te(vt),mm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fm(e),null;case 13:if(Te(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Vi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Ce),null;case 4:return Ui(),null;case 10:return cm(e.type._context),null;case 22:case 23:return Em(),null;case 24:return null;default:return null}}var Dl=!1,gt=!1,ME=typeof WeakSet=="function"?WeakSet:Set,W=null;function _i(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Me(t,e,n)}else r.current=null}function tf(t,e,r){try{r()}catch(n){Me(t,e,n)}}var zx=!1;function VE(t,e){if(Vh=_c,t=zv(),nm(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==a||n!==0&&f.nodeType!==3||(u=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===r&&++d===s&&(l=o),p===a&&++h===n&&(u=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fh={focusedElem:t,selectionRange:r},_c=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var v=S.memoizedProps,x=S.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:cr(e.type,v),x);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(P){Me(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return S=zx,zx=!1,S}function Ja(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&tf(e,r,a)}s=s.next}while(s!==n)}}function _u(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function rf(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Vw(t){var e=t.alternate;e!==null&&(t.alternate=null,Vw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sr],delete e[vo],delete e[zh],delete e[wE],delete e[bE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fw(t){return t.tag===5||t.tag===3||t.tag===4}function $x(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ec));else if(n!==4&&(t=t.child,t!==null))for(nf(t,e,r),t=t.sibling;t!==null;)nf(t,e,r),t=t.sibling}function sf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(sf(t,e,r),t=t.sibling;t!==null;)sf(t,e,r),t=t.sibling}var it=null,ur=!1;function Sn(t,e,r){for(r=r.child;r!==null;)Uw(t,e,r),r=r.sibling}function Uw(t,e,r){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(mu,r)}catch{}switch(r.tag){case 5:gt||_i(r,e);case 6:var n=it,s=ur;it=null,Sn(t,e,r),it=n,ur=s,it!==null&&(ur?(t=it,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):it.removeChild(r.stateNode));break;case 18:it!==null&&(ur?(t=it,r=r.stateNode,t.nodeType===8?Wd(t.parentNode,r):t.nodeType===1&&Wd(t,r),mo(t)):Wd(it,r.stateNode));break;case 4:n=it,s=ur,it=r.stateNode.containerInfo,ur=!0,Sn(t,e,r),it=n,ur=s;break;case 0:case 11:case 14:case 15:if(!gt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&tf(r,e,o),s=s.next}while(s!==n)}Sn(t,e,r);break;case 1:if(!gt&&(_i(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Me(r,e,l)}Sn(t,e,r);break;case 21:Sn(t,e,r);break;case 22:r.mode&1?(gt=(n=gt)||r.memoizedState!==null,Sn(t,e,r),gt=n):Sn(t,e,r);break;default:Sn(t,e,r)}}function qx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ME),e.forEach(function(n){var s=GE.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function lr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:it=l.stateNode,ur=!1;break e;case 3:it=l.stateNode.containerInfo,ur=!0;break e;case 4:it=l.stateNode.containerInfo,ur=!0;break e}l=l.return}if(it===null)throw Error(U(160));Uw(a,o,s),it=null,ur=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Me(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bw(e,t),e=e.sibling}function Bw(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lr(e,t),jr(t),n&4){try{Ja(3,t,t.return),_u(3,t)}catch(v){Me(t,t.return,v)}try{Ja(5,t,t.return)}catch(v){Me(t,t.return,v)}}break;case 1:lr(e,t),jr(t),n&512&&r!==null&&_i(r,r.return);break;case 5:if(lr(e,t),jr(t),n&512&&r!==null&&_i(r,r.return),t.flags&32){var s=t.stateNode;try{co(s,"")}catch(v){Me(t,t.return,v)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&cv(s,a),kh(l,o);var d=kh(l,a);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?mv(s,f):h==="dangerouslySetInnerHTML"?hv(s,f):h==="children"?co(s,f):qf(s,h,f,d)}switch(l){case"input":Nh(s,a);break;case"textarea":uv(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?Ei(s,!!a.multiple,y,!1):p!==!!a.multiple&&(a.defaultValue!=null?Ei(s,!!a.multiple,a.defaultValue,!0):Ei(s,!!a.multiple,a.multiple?[]:"",!1))}s[vo]=a}catch(v){Me(t,t.return,v)}}break;case 6:if(lr(e,t),jr(t),n&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(v){Me(t,t.return,v)}}break;case 3:if(lr(e,t),jr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{mo(e.containerInfo)}catch(v){Me(t,t.return,v)}break;case 4:lr(e,t),jr(t);break;case 13:lr(e,t),jr(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Nm=ze())),n&4&&qx(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(gt=(d=gt)||h,lr(e,t),gt=d):lr(e,t),jr(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(W=t,h=t.child;h!==null;){for(f=W=h;W!==null;){switch(p=W,y=p.child,p.tag){case 0:case 11:case 14:case 15:Ja(4,p,p.return);break;case 1:_i(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(v){Me(n,r,v)}}break;case 5:_i(p,p.return);break;case 22:if(p.memoizedState!==null){Wx(f);continue}}y!==null?(y.return=p,W=y):Wx(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=fv("display",o))}catch(v){Me(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){Me(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:lr(e,t),jr(t),n&4&&qx(t);break;case 21:break;default:lr(e,t),jr(t)}}function jr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Fw(r)){var n=r;break e}r=r.return}throw Error(U(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(co(s,""),n.flags&=-33);var a=$x(t);sf(t,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=$x(t);nf(t,l,o);break;default:throw Error(U(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FE(t,e,r){W=t,zw(t)}function zw(t,e,r){for(var n=(t.mode&1)!==0;W!==null;){var s=W,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Dl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||gt;l=Dl;var d=gt;if(Dl=o,(gt=u)&&!d)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?Gx(s):u!==null?(u.return=o,W=u):Gx(s);for(;a!==null;)W=a,zw(a),a=a.sibling;W=s,Dl=l,gt=d}Hx(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,W=a):Hx(t)}}function Hx(t){for(;W!==null;){var e=W;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||_u(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!gt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:cr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Ix(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Ix(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&mo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}gt||e.flags&512&&rf(e)}catch(p){Me(e,e.return,p)}}if(e===t){W=null;break}if(r=e.sibling,r!==null){r.return=e.return,W=r;break}W=e.return}}function Wx(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var r=e.sibling;if(r!==null){r.return=e.return,W=r;break}W=e.return}}function Gx(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{_u(4,e)}catch(u){Me(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){Me(e,s,u)}}var a=e.return;try{rf(e)}catch(u){Me(e,a,u)}break;case 5:var o=e.return;try{rf(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var UE=Math.ceil,Lc=xn.ReactCurrentDispatcher,bm=xn.ReactCurrentOwner,Xt=xn.ReactCurrentBatchConfig,fe=0,st=null,qe=null,lt=0,Mt=0,Ni=ds(0),Je=0,Eo=null,Us=0,Nu=0,_m=0,Xa=null,It=null,Nm=0,zi=1/0,Gr=null,Mc=!1,af=null,Hn=null,Ol=!1,Vn=null,Vc=0,Za=0,of=null,tc=-1,rc=0;function jt(){return fe&6?ze():tc!==-1?tc:tc=ze()}function Wn(t){return t.mode&1?fe&2&&lt!==0?lt&-lt:NE.transition!==null?(rc===0&&(rc=Tv()),rc):(t=ye,t!==0||(t=window.event,t=t===void 0?16:Pv(t.type)),t):1}function pr(t,e,r,n){if(50<Za)throw Za=0,of=null,Error(U(185));Uo(t,r,n),(!(fe&2)||t!==st)&&(t===st&&(!(fe&2)&&(Nu|=r),Je===4&&Rn(t,lt)),Dt(t,n),r===1&&fe===0&&!(e.mode&1)&&(zi=ze()+500,vu&&hs()))}function Dt(t,e){var r=t.callbackNode;Nj(t,e);var n=bc(t,t===st?lt:0);if(n===0)r!==null&&rx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&rx(r),e===1)t.tag===0?_E(Kx.bind(null,t)):Xv(Kx.bind(null,t)),yE(function(){!(fe&6)&&hs()}),r=null;else{switch(Sv(n)){case 1:r=Qf;break;case 4:r=jv;break;case 16:r=wc;break;case 536870912:r=Ev;break;default:r=wc}r=Yw(r,$w.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function $w(t,e){if(tc=-1,rc=0,fe&6)throw Error(U(327));var r=t.callbackNode;if(Ci()&&t.callbackNode!==r)return null;var n=bc(t,t===st?lt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Fc(t,n);else{e=n;var s=fe;fe|=2;var a=Hw();(st!==t||lt!==e)&&(Gr=null,zi=ze()+500,Rs(t,e));do try{$E();break}catch(l){qw(t,l)}while(!0);lm(),Lc.current=a,fe=s,qe!==null?e=0:(st=null,lt=0,e=Je)}if(e!==0){if(e===2&&(s=Ph(t),s!==0&&(n=s,e=lf(t,s))),e===1)throw r=Eo,Rs(t,0),Rn(t,n),Dt(t,ze()),r;if(e===6)Rn(t,n);else{if(s=t.current.alternate,!(n&30)&&!BE(s)&&(e=Fc(t,n),e===2&&(a=Ph(t),a!==0&&(n=a,e=lf(t,a))),e===1))throw r=Eo,Rs(t,0),Rn(t,n),Dt(t,ze()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(U(345));case 2:Ts(t,It,Gr);break;case 3:if(Rn(t,n),(n&130023424)===n&&(e=Nm+500-ze(),10<e)){if(bc(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Bh(Ts.bind(null,t,It,Gr),e);break}Ts(t,It,Gr);break;case 4:if(Rn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-mr(n);a=1<<o,o=e[o],o>s&&(s=o),n&=~a}if(n=s,n=ze()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*UE(n/1960))-n,10<n){t.timeoutHandle=Bh(Ts.bind(null,t,It,Gr),n);break}Ts(t,It,Gr);break;case 5:Ts(t,It,Gr);break;default:throw Error(U(329))}}}return Dt(t,ze()),t.callbackNode===r?$w.bind(null,t):null}function lf(t,e){var r=Xa;return t.current.memoizedState.isDehydrated&&(Rs(t,e).flags|=256),t=Fc(t,e),t!==2&&(e=It,It=r,e!==null&&cf(e)),t}function cf(t){It===null?It=t:It.push.apply(It,t)}function BE(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!gr(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rn(t,e){for(e&=~_m,e&=~Nu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-mr(e),n=1<<r;t[r]=-1,e&=~n}}function Kx(t){if(fe&6)throw Error(U(327));Ci();var e=bc(t,0);if(!(e&1))return Dt(t,ze()),null;var r=Fc(t,e);if(t.tag!==0&&r===2){var n=Ph(t);n!==0&&(e=n,r=lf(t,n))}if(r===1)throw r=Eo,Rs(t,0),Rn(t,e),Dt(t,ze()),r;if(r===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ts(t,It,Gr),Dt(t,ze()),null}function jm(t,e){var r=fe;fe|=1;try{return t(e)}finally{fe=r,fe===0&&(zi=ze()+500,vu&&hs())}}function Bs(t){Vn!==null&&Vn.tag===0&&!(fe&6)&&Ci();var e=fe;fe|=1;var r=Xt.transition,n=ye;try{if(Xt.transition=null,ye=1,t)return t()}finally{ye=n,Xt.transition=r,fe=e,!(fe&6)&&hs()}}function Em(){Mt=Ni.current,Te(Ni)}function Rs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,xE(r)),qe!==null)for(r=qe.return;r!==null;){var n=r;switch(im(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Tc();break;case 3:Ui(),Te(Rt),Te(vt),mm();break;case 5:fm(n);break;case 4:Ui();break;case 13:Te(Ce);break;case 19:Te(Ce);break;case 10:cm(n.type._context);break;case 22:case 23:Em()}r=r.return}if(st=t,qe=t=Gn(t.current,null),lt=Mt=e,Je=0,Eo=null,_m=Nu=Us=0,It=Xa=null,Is!==null){for(e=0;e<Is.length;e++)if(r=Is[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}Is=null}return t}function qw(t,e){do{var r=qe;try{if(lm(),Xl.current=Oc,Dc){for(var n=Ae.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Dc=!1}if(Fs=0,nt=Ye=Ae=null,Ya=!1,_o=0,bm.current=null,r===null||r.return===null){Je=1,Eo=e,qe=null;break}e:{var a=t,o=r.return,l=r,u=e;if(e=lt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Ox(o);if(y!==null){y.flags&=-257,Lx(y,o,l,a,e),y.mode&1&&Dx(a,d,e),e=y,u=d;var S=e.updateQueue;if(S===null){var v=new Set;v.add(u),e.updateQueue=v}else S.add(u);break e}else{if(!(e&1)){Dx(a,d,e),Tm();break e}u=Error(U(426))}}else if(Se&&l.mode&1){var x=Ox(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Lx(x,o,l,a,e),am(Bi(u,l));break e}}a=u=Bi(u,l),Je!==4&&(Je=2),Xa===null?Xa=[a]:Xa.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var w=Sw(a,u,e);kx(a,w);break e;case 1:l=u;var b=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Hn===null||!Hn.has(N)))){a.flags|=65536,e&=-e,a.lanes|=e;var P=kw(a,l,e);kx(a,P);break e}}a=a.return}while(a!==null)}Gw(r)}catch(L){e=L,qe===r&&r!==null&&(qe=r=r.return);continue}break}while(!0)}function Hw(){var t=Lc.current;return Lc.current=Oc,t===null?Oc:t}function Tm(){(Je===0||Je===3||Je===2)&&(Je=4),st===null||!(Us&268435455)&&!(Nu&268435455)||Rn(st,lt)}function Fc(t,e){var r=fe;fe|=2;var n=Hw();(st!==t||lt!==e)&&(Gr=null,Rs(t,e));do try{zE();break}catch(s){qw(t,s)}while(!0);if(lm(),fe=r,Lc.current=n,qe!==null)throw Error(U(261));return st=null,lt=0,Je}function zE(){for(;qe!==null;)Ww(qe)}function $E(){for(;qe!==null&&!mj();)Ww(qe)}function Ww(t){var e=Qw(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?Gw(t):qe=e,bm.current=null}function Gw(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=LE(r,e),r!==null){r.flags&=32767,qe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,qe=null;return}}else if(r=OE(r,e,Mt),r!==null){qe=r;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Je===0&&(Je=5)}function Ts(t,e,r){var n=ye,s=Xt.transition;try{Xt.transition=null,ye=1,qE(t,e,r,n)}finally{Xt.transition=s,ye=n}return null}function qE(t,e,r,n){do Ci();while(Vn!==null);if(fe&6)throw Error(U(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(jj(t,a),t===st&&(qe=st=null,lt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ol||(Ol=!0,Yw(wc,function(){return Ci(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Xt.transition,Xt.transition=null;var o=ye;ye=1;var l=fe;fe|=4,bm.current=null,VE(t,r),Bw(r,t),uE(Fh),_c=!!Vh,Fh=Vh=null,t.current=r,FE(r),pj(),fe=l,ye=o,Xt.transition=a}else t.current=r;if(Ol&&(Ol=!1,Vn=t,Vc=s),a=t.pendingLanes,a===0&&(Hn=null),yj(r.stateNode),Dt(t,ze()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Mc)throw Mc=!1,t=af,af=null,t;return Vc&1&&t.tag!==0&&Ci(),a=t.pendingLanes,a&1?t===of?Za++:(Za=0,of=t):Za=0,hs(),null}function Ci(){if(Vn!==null){var t=Sv(Vc),e=Xt.transition,r=ye;try{if(Xt.transition=null,ye=16>t?16:t,Vn===null)var n=!1;else{if(t=Vn,Vn=null,Vc=0,fe&6)throw Error(U(331));var s=fe;for(fe|=4,W=t.current;W!==null;){var a=W,o=a.child;if(W.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(W=d;W!==null;){var h=W;switch(h.tag){case 0:case 11:case 15:Ja(8,h,a)}var f=h.child;if(f!==null)f.return=h,W=f;else for(;W!==null;){h=W;var p=h.sibling,y=h.return;if(Vw(h),h===d){W=null;break}if(p!==null){p.return=y,W=p;break}W=y}}}var S=a.alternate;if(S!==null){var v=S.child;if(v!==null){S.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}W=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,W=o;else e:for(;W!==null;){if(a=W,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ja(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,W=w;break e}W=a.return}}var b=t.current;for(W=b;W!==null;){o=W;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,W=N;else e:for(o=b;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_u(9,l)}}catch(L){Me(l,l.return,L)}if(l===o){W=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,W=P;break e}W=l.return}}if(fe=s,hs(),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(mu,t)}catch{}n=!0}return n}finally{ye=r,Xt.transition=e}}return!1}function Qx(t,e,r){e=Bi(r,e),e=Sw(t,e,1),t=qn(t,e,1),e=jt(),t!==null&&(Uo(t,1,e),Dt(t,e))}function Me(t,e,r){if(t.tag===3)Qx(t,t,r);else for(;e!==null;){if(e.tag===3){Qx(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hn===null||!Hn.has(n))){t=Bi(r,t),t=kw(e,t,1),e=qn(e,t,1),t=jt(),e!==null&&(Uo(e,1,t),Dt(e,t));break}}e=e.return}}function HE(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&r,st===t&&(lt&r)===r&&(Je===4||Je===3&&(lt&130023424)===lt&&500>ze()-Nm?Rs(t,0):_m|=r),Dt(t,e)}function Kw(t,e){e===0&&(t.mode&1?(e=El,El<<=1,!(El&130023424)&&(El=4194304)):e=1);var r=jt();t=on(t,e),t!==null&&(Uo(t,e,r),Dt(t,r))}function WE(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Kw(t,r)}function GE(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(U(314))}n!==null&&n.delete(e),Kw(t,r)}var Qw;Qw=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)At=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return At=!1,DE(t,e,r);At=!!(t.flags&131072)}else At=!1,Se&&e.flags&1048576&&Zv(e,Ic,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ec(t,e),t=e.pendingProps;var s=Mi(e,vt.current);Ii(e,r),s=gm(null,e,n,t,s,r);var a=xm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(n)?(a=!0,Sc(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dm(e),s.updater=bu,e.stateNode=s,s._reactInternals=e,Kh(e,n,t,r),e=Jh(null,e,n,!0,a,r)):(e.tag=0,Se&&a&&sm(e),Nt(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ec(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=QE(n),t=cr(n,t),s){case 0:e=Yh(null,e,n,t,r);break e;case 1:e=Fx(null,e,n,t,r);break e;case 11:e=Mx(null,e,n,t,r);break e;case 14:e=Vx(null,e,n,cr(n.type,t),r);break e}throw Error(U(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:cr(n,s),Yh(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:cr(n,s),Fx(t,e,n,s,r);case 3:e:{if(Rw(e),t===null)throw Error(U(387));n=e.pendingProps,a=e.memoizedState,s=a.element,iw(t,e),Rc(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Bi(Error(U(423)),e),e=Ux(t,e,n,r,s);break e}else if(n!==s){s=Bi(Error(U(424)),e),e=Ux(t,e,n,r,s);break e}else for(Bt=$n(e.stateNode.containerInfo.firstChild),$t=e,Se=!0,dr=null,r=nw(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Vi(),n===s){e=ln(t,e,r);break e}Nt(t,e,n,r)}e=e.child}return e;case 5:return aw(e),t===null&&Hh(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Uh(n,s)?o=null:a!==null&&Uh(n,a)&&(e.flags|=32),Aw(t,e),Nt(t,e,o,r),e.child;case 6:return t===null&&Hh(e),null;case 13:return Pw(t,e,r);case 4:return hm(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Fi(e,null,n,r):Nt(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:cr(n,s),Mx(t,e,n,s,r);case 7:return Nt(t,e,e.pendingProps,r),e.child;case 8:return Nt(t,e,e.pendingProps.children,r),e.child;case 12:return Nt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,_e(Cc,n._currentValue),n._currentValue=o,a!==null)if(gr(a.value,o)){if(a.children===s.children&&!Rt.current){e=ln(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(a.tag===1){u=Zr(-1,r&-r),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),Wh(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(U(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Wh(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Nt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Ii(e,r),s=rr(s),n=n(s),e.flags|=1,Nt(t,e,n,r),e.child;case 14:return n=e.type,s=cr(n,e.pendingProps),s=cr(n.type,s),Vx(t,e,n,s,r);case 15:return Iw(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:cr(n,s),ec(t,e),e.tag=1,Pt(n)?(t=!0,Sc(e)):t=!1,Ii(e,r),Tw(e,n,s),Kh(e,n,s,r),Jh(null,e,n,!0,t,r);case 19:return Dw(t,e,r);case 22:return Cw(t,e,r)}throw Error(U(156,e.tag))};function Yw(t,e){return Nv(t,e)}function KE(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,r,n){return new KE(t,e,r,n)}function Sm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QE(t){if(typeof t=="function")return Sm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wf)return 11;if(t===Gf)return 14}return 2}function Gn(t,e){var r=t.alternate;return r===null?(r=Jt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function nc(t,e,r,n,s,a){var o=2;if(n=t,typeof t=="function")Sm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fi:return Ps(r.children,s,a,e);case Hf:o=8,s|=8;break;case yh:return t=Jt(12,r,e,s|2),t.elementType=yh,t.lanes=a,t;case vh:return t=Jt(13,r,e,s),t.elementType=vh,t.lanes=a,t;case wh:return t=Jt(19,r,e,s),t.elementType=wh,t.lanes=a,t;case av:return ju(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sv:o=10;break e;case iv:o=9;break e;case Wf:o=11;break e;case Gf:o=14;break e;case In:o=16,n=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Jt(o,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function Ps(t,e,r,n){return t=Jt(7,t,n,e),t.lanes=r,t}function ju(t,e,r,n){return t=Jt(22,t,n,e),t.elementType=av,t.lanes=r,t.stateNode={isHidden:!1},t}function eh(t,e,r){return t=Jt(6,t,null,e),t.lanes=r,t}function th(t,e,r){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YE(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Od(0),this.expirationTimes=Od(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Od(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function km(t,e,r,n,s,a,o,l,u){return t=new YE(t,e,r,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Jt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},dm(a),t}function JE(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hi,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Jw(t){if(!t)return es;t=t._reactInternals;e:{if(Js(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var r=t.type;if(Pt(r))return Jv(t,r,e)}return e}function Xw(t,e,r,n,s,a,o,l,u){return t=km(r,n,!0,t,s,a,o,l,u),t.context=Jw(null),r=t.current,n=jt(),s=Wn(r),a=Zr(n,s),a.callback=e??null,qn(r,a,s),t.current.lanes=s,Uo(t,s,n),Dt(t,n),t}function Eu(t,e,r,n){var s=e.current,a=jt(),o=Wn(s);return r=Jw(r),e.context===null?e.context=r:e.pendingContext=r,e=Zr(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=qn(s,e,o),t!==null&&(pr(t,s,o,a),Jl(t,s,o)),o}function Uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Im(t,e){Yx(t,e),(t=t.alternate)&&Yx(t,e)}function XE(){return null}var Zw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cm(t){this._internalRoot=t}Tu.prototype.render=Cm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Eu(t,e,null,null)};Tu.prototype.unmount=Cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bs(function(){Eu(null,t,null,null)}),e[an]=null}};function Tu(t){this._internalRoot=t}Tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cv();t={blockedOn:null,target:t,priority:e};for(var r=0;r<An.length&&e!==0&&e<An[r].priority;r++);An.splice(r,0,t),r===0&&Rv(t)}};function Am(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Su(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jx(){}function ZE(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var d=Uc(o);a.call(d)}}var o=Xw(e,n,t,0,null,!1,!1,"",Jx);return t._reactRootContainer=o,t[an]=o.current,xo(t.nodeType===8?t.parentNode:t),Bs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=Uc(u);l.call(d)}}var u=km(t,0,!1,null,null,!1,!1,"",Jx);return t._reactRootContainer=u,t[an]=u.current,xo(t.nodeType===8?t.parentNode:t),Bs(function(){Eu(e,u,r,n)}),u}function ku(t,e,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=Uc(o);l.call(u)}}Eu(e,o,t,s)}else o=ZE(r,e,t,s,n);return Uc(o)}kv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=La(e.pendingLanes);r!==0&&(Yf(e,r|1),Dt(e,ze()),!(fe&6)&&(zi=ze()+500,hs()))}break;case 13:Bs(function(){var n=on(t,1);if(n!==null){var s=jt();pr(n,t,1,s)}}),Im(t,1)}};Jf=function(t){if(t.tag===13){var e=on(t,134217728);if(e!==null){var r=jt();pr(e,t,134217728,r)}Im(t,134217728)}};Iv=function(t){if(t.tag===13){var e=Wn(t),r=on(t,e);if(r!==null){var n=jt();pr(r,t,e,n)}Im(t,e)}};Cv=function(){return ye};Av=function(t,e){var r=ye;try{return ye=t,e()}finally{ye=r}};Ch=function(t,e,r){switch(e){case"input":if(Nh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=yu(n);if(!s)throw Error(U(90));lv(n),Nh(n,s)}}}break;case"textarea":uv(t,r);break;case"select":e=r.value,e!=null&&Ei(t,!!r.multiple,e,!1)}};xv=jm;yv=Bs;var e2={usingClientEntryPoint:!1,Events:[zo,xi,yu,pv,gv,jm]},Ra={findFiberByHostInstance:ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t2={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bv(t),t===null?null:t.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||XE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{mu=Ll.inject(t2),kr=Ll}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e2;Ht.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Am(e))throw Error(U(200));return JE(t,e,null,r)};Ht.createRoot=function(t,e){if(!Am(t))throw Error(U(299));var r=!1,n="",s=Zw;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=km(t,1,!1,null,null,r,!1,n,s),t[an]=e.current,xo(t.nodeType===8?t.parentNode:t),new Cm(e)};Ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=bv(e),t=t===null?null:t.stateNode,t};Ht.flushSync=function(t){return Bs(t)};Ht.hydrate=function(t,e,r){if(!Su(e))throw Error(U(200));return ku(null,t,e,!0,r)};Ht.hydrateRoot=function(t,e,r){if(!Am(t))throw Error(U(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=Zw;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Xw(e,null,t,1,r??null,s,!1,a,o),t[an]=e.current,xo(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Tu(e)};Ht.render=function(t,e,r){if(!Su(e))throw Error(U(200));return ku(null,t,e,!1,r)};Ht.unmountComponentAtNode=function(t){if(!Su(t))throw Error(U(40));return t._reactRootContainer?(Bs(function(){ku(null,null,t,!1,function(){t._reactRootContainer=null,t[an]=null})}),!0):!1};Ht.unstable_batchedUpdates=jm;Ht.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Su(r))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return ku(t,e,r,!1,n)};Ht.version="18.3.1-next-f1338f8080-20240426";function eb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eb)}catch(t){console.error(t)}}eb(),ev.exports=Ht;var r2=ev.exports,tb,Xx=r2;tb=Xx.createRoot,Xx.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zx="popstate";function n2(t={}){function e(n,s){let{pathname:a,search:o,hash:l}=n.location;return uf("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:To(s)}return i2(e,r,null,t)}function Ie(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s2(){return Math.random().toString(36).substring(2,10)}function e0(t,e){return{usr:t.state,key:t.key,idx:e}}function uf(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ea(e):e,state:r,key:e&&e.key||n||s2()}}function To({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ea(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function i2(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function f(){l="POP";let x=h(),w=x==null?null:x-d;d=x,u&&u({action:l,location:v.location,delta:w})}function p(x,w){l="PUSH";let b=uf(v.location,x,w);d=h()+1;let N=e0(b,d),P=v.createHref(b);try{o.pushState(N,"",P)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(P)}a&&u&&u({action:l,location:v.location,delta:1})}function y(x,w){l="REPLACE";let b=uf(v.location,x,w);d=h();let N=e0(b,d),P=v.createHref(b);o.replaceState(N,"",P),a&&u&&u({action:l,location:v.location,delta:0})}function S(x){return a2(x)}let v={get action(){return l},get location(){return t(s,o)},listen(x){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Zx,f),u=x,()=>{s.removeEventListener(Zx,f),u=null}},createHref(x){return e(s,x)},createURL:S,encodeLocation(x){let w=S(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:y,go(x){return o.go(x)}};return v}function a2(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ie(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:To(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function rb(t,e,r="/"){return o2(t,e,r,!1)}function o2(t,e,r,n){let s=typeof e=="string"?ea(e):e,a=cn(s.pathname||"/",r);if(a==null)return null;let o=nb(t);l2(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=v2(a);l=x2(o[u],d,n)}return l}function nb(t,e=[],r=[],n="",s=!1){let a=(o,l,u=s,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&u)return;Ie(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let f=en([n,h.relativePath]),p=r.concat(h);o.children&&o.children.length>0&&(Ie(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),nb(o.children,e,p,f,u)),!(o.path==null&&!o.index)&&e.push({path:f,score:p2(f,o.index),routesMeta:p})};return t.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,l);else for(let d of sb(o.path))a(o,l,!0,d)}),e}function sb(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=sb(n.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function l2(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:g2(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var c2=/^:[\w-]+$/,u2=3,d2=2,h2=1,f2=10,m2=-2,t0=t=>t==="*";function p2(t,e){let r=t.split("/"),n=r.length;return r.some(t0)&&(n+=m2),e&&(n+=d2),r.filter(s=>!t0(s)).reduce((s,a)=>s+(c2.test(a)?u2:a===""?h2:f2),n)}function g2(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function x2(t,e,r=!1){let{routesMeta:n}=t,s={},a="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],d=l===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=Bc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!f&&d&&r&&!n[n.length-1].route.index&&(f=Bc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:en([a,f.pathname]),pathnameBase:j2(en([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=en([a,f.pathnameBase]))}return o}function Bc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=y2(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,{paramName:h,isOptional:f},p)=>{if(h==="*"){let S=l[p]||"";o=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const y=l[p];return f&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function y2(t,e=!1,r=!0){sr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function v2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function cn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}var w2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b2=t=>w2.test(t);function _2(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?ea(t):t,a;if(r)if(b2(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),sr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?a=r0(r.substring(1),"/"):a=r0(r,e)}else a=e;return{pathname:a,search:E2(n),hash:T2(s)}}function r0(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function rh(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function N2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Rm(t){let e=N2(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function Pm(t,e,r,n=!1){let s;typeof t=="string"?s=ea(t):(s={...t},Ie(!s.pathname||!s.pathname.includes("?"),rh("?","pathname","search",s)),Ie(!s.pathname||!s.pathname.includes("#"),rh("#","pathname","hash",s)),Ie(!s.search||!s.search.includes("#"),rh("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let u=_2(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var en=t=>t.join("/").replace(/\/\/+/g,"/"),j2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),E2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,T2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function S2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function k2(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ib=["POST","PUT","PATCH","DELETE"];new Set(ib);var I2=["GET",...ib];new Set(I2);var ta=E.createContext(null);ta.displayName="DataRouter";var Iu=E.createContext(null);Iu.displayName="DataRouterState";E.createContext(!1);var ab=E.createContext({isTransitioning:!1});ab.displayName="ViewTransition";var C2=E.createContext(new Map);C2.displayName="Fetchers";var A2=E.createContext(null);A2.displayName="Await";var ir=E.createContext(null);ir.displayName="Navigation";var qo=E.createContext(null);qo.displayName="Location";var zr=E.createContext({outlet:null,matches:[],isDataRoute:!1});zr.displayName="Route";var Dm=E.createContext(null);Dm.displayName="RouteError";function R2(t,{relative:e}={}){Ie(ra(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=E.useContext(ir),{hash:s,pathname:a,search:o}=Ho(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:en([r,a])),n.createHref({pathname:l,search:o,hash:s})}function ra(){return E.useContext(qo)!=null}function ar(){return Ie(ra(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(qo).location}var ob="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lb(t){E.useContext(ir).static||E.useLayoutEffect(t)}function yn(){let{isDataRoute:t}=E.useContext(zr);return t?H2():P2()}function P2(){Ie(ra(),"useNavigate() may be used only in the context of a <Router> component.");let t=E.useContext(ta),{basename:e,navigator:r}=E.useContext(ir),{matches:n}=E.useContext(zr),{pathname:s}=ar(),a=JSON.stringify(Rm(n)),o=E.useRef(!1);return lb(()=>{o.current=!0}),E.useCallback((u,d={})=>{if(sr(o.current,ob),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=Pm(u,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:en([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,a,s,t])}E.createContext(null);function Ho(t,{relative:e}={}){let{matches:r}=E.useContext(zr),{pathname:n}=ar(),s=JSON.stringify(Rm(r));return E.useMemo(()=>Pm(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function D2(t,e){return cb(t,e)}function cb(t,e,r,n,s){var b;Ie(ra(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=E.useContext(ir),{matches:o}=E.useContext(zr),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let N=f&&f.path||"";ub(d,!f||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let p=ar(),y;if(e){let N=typeof e=="string"?ea(e):e;Ie(h==="/"||((b=N.pathname)==null?void 0:b.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${N.pathname}" was given in the \`location\` prop.`),y=N}else y=p;let S=y.pathname||"/",v=S;if(h!=="/"){let N=h.replace(/^\//,"").split("/");v="/"+S.replace(/^\//,"").split("/").slice(N.length).join("/")}let x=rb(t,{pathname:v});sr(f||x!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),sr(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=F2(x&&x.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:en([h,a.encodeLocation?a.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:en([h,a.encodeLocation?a.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),o,r,n,s);return e&&w?E.createElement(qo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},w):w}function O2(){let t=q2(),e=S2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:a},"ErrorBoundary")," or"," ",E.createElement("code",{style:a},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),r?E.createElement("pre",{style:s},r):null,o)}var L2=E.createElement(O2,null),M2=class extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?E.createElement(zr.Provider,{value:this.props.routeContext},E.createElement(Dm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function V2({routeContext:t,match:e,children:r}){let n=E.useContext(ta);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(zr.Provider,{value:t},r)}function F2(t,e=[],r=null,n=null,s=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=r==null?void 0:r.errors;if(o!=null){let h=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Ie(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(r)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:y}=r,S=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||S){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=r&&n?(h,f)=>{var p,y;n(h,{location:r.location,params:((y=(p=r.matches)==null?void 0:p[0])==null?void 0:y.params)??{},unstable_pattern:k2(r.matches),errorInfo:f})}:void 0;return a.reduceRight((h,f,p)=>{let y,S=!1,v=null,x=null;r&&(y=o&&f.route.id?o[f.route.id]:void 0,v=f.route.errorElement||L2,l&&(u<0&&p===0?(ub("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,x=null):u===p&&(S=!0,x=f.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,p+1)),b=()=>{let N;return y?N=v:S?N=x:f.route.Component?N=E.createElement(f.route.Component,null):f.route.element?N=f.route.element:N=h,E.createElement(V2,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:r!=null},children:N})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?E.createElement(M2,{location:r.location,revalidation:r.revalidation,component:v,error:y,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:d}):b()},null)}function Om(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U2(t){let e=E.useContext(ta);return Ie(e,Om(t)),e}function B2(t){let e=E.useContext(Iu);return Ie(e,Om(t)),e}function z2(t){let e=E.useContext(zr);return Ie(e,Om(t)),e}function Lm(t){let e=z2(t),r=e.matches[e.matches.length-1];return Ie(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function $2(){return Lm("useRouteId")}function q2(){var n;let t=E.useContext(Dm),e=B2("useRouteError"),r=Lm("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function H2(){let{router:t}=U2("useNavigate"),e=Lm("useNavigate"),r=E.useRef(!1);return lb(()=>{r.current=!0}),E.useCallback(async(s,a={})=>{sr(r.current,ob),r.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var n0={};function ub(t,e,r){!e&&!n0[t]&&(n0[t]=!0,sr(!1,r))}E.memo(W2);function W2({routes:t,future:e,state:r,unstable_onError:n}){return cb(t,void 0,r,n,e)}function eo({to:t,replace:e,state:r,relative:n}){Ie(ra(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=E.useContext(ir);sr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=E.useContext(zr),{pathname:o}=ar(),l=yn(),u=Pm(t,Rm(a),o,n==="path"),d=JSON.stringify(u);return E.useEffect(()=>{l(JSON.parse(d),{replace:e,state:r,relative:n})},[l,d,n,e,r]),null}function pe(t){Ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function G2({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:a=!1,unstable_useTransitions:o}){Ie(!ra(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=E.useMemo(()=>({basename:l,navigator:s,static:a,unstable_useTransitions:o,future:{}}),[l,s,a,o]);typeof r=="string"&&(r=ea(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:y="default"}=r,S=E.useMemo(()=>{let v=cn(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:y},navigationType:n}},[l,d,h,f,p,y,n]);return sr(S!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:E.createElement(ir.Provider,{value:u},E.createElement(qo.Provider,{children:e,value:S}))}function K2({children:t,location:e}){return D2(df(t),e)}function df(t,e=[]){let r=[];return E.Children.forEach(t,(n,s)=>{if(!E.isValidElement(n))return;let a=[...e,s];if(n.type===E.Fragment){r.push.apply(r,df(n.props.children,a));return}Ie(n.type===pe,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ie(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=df(n.props.children,a)),r.push(o)}),r}var sc="get",ic="application/x-www-form-urlencoded";function Cu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Q2(t){return Cu(t)&&t.tagName.toLowerCase()==="button"}function Y2(t){return Cu(t)&&t.tagName.toLowerCase()==="form"}function J2(t){return Cu(t)&&t.tagName.toLowerCase()==="input"}function X2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Z2(t,e){return t.button===0&&(!e||e==="_self")&&!X2(t)}var Ml=null;function eT(){if(Ml===null)try{new FormData(document.createElement("form"),0),Ml=!1}catch{Ml=!0}return Ml}var tT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nh(t){return t!=null&&!tT.has(t)?(sr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ic}"`),null):t}function rT(t,e){let r,n,s,a,o;if(Y2(t)){let l=t.getAttribute("action");n=l?cn(l,e):null,r=t.getAttribute("method")||sc,s=nh(t.getAttribute("enctype"))||ic,a=new FormData(t)}else if(Q2(t)||J2(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(n=u?cn(u,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||sc,s=nh(t.getAttribute("formenctype"))||nh(l.getAttribute("enctype"))||ic,a=new FormData(l,t),!eT()){let{name:d,type:h,value:f}=t;if(h==="image"){let p=d?`${d}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else d&&a.append(d,f)}}else{if(Cu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=sc,n=null,s=ic,o=t}return a&&s==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Mm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nT(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&cn(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function sT(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iT(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function aT(t,e,r){let n=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await sT(a,r);return o.links?o.links():[]}return[]}));return uT(n.flat(1).filter(iT).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function s0(t,e,r,n,s,a){let o=(u,d)=>r[d]?u.route.id!==r[d].route.id:!0,l=(u,d)=>{var h;return r[d].pathname!==u.pathname||((h=r[d].route.path)==null?void 0:h.endsWith("*"))&&r[d].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,d)=>o(u,d)||l(u,d)):a==="data"?e.filter((u,d)=>{var f;let h=n.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function oT(t,e,{includeHydrateFallback:r}={}){return lT(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function lT(t){return[...new Set(t)]}function cT(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function uT(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let a=JSON.stringify(cT(s));return r.has(a)||(r.add(a),n.push({key:a,link:s})),n},[])}function db(){let t=E.useContext(ta);return Mm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function dT(){let t=E.useContext(Iu);return Mm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Vm=E.createContext(void 0);Vm.displayName="FrameworkContext";function hb(){let t=E.useContext(Vm);return Mm(t,"You must render this element inside a <HydratedRouter> element"),t}function hT(t,e){let r=E.useContext(Vm),[n,s]=E.useState(!1),[a,o]=E.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:f}=e,p=E.useRef(null);E.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let v=w=>{w.forEach(b=>{o(b.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[t]),E.useEffect(()=>{if(n){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[n]);let y=()=>{s(!0)},S=()=>{s(!1),o(!1)};return r?t!=="intent"?[a,p,{}]:[a,p,{onFocus:Pa(l,y),onBlur:Pa(u,S),onMouseEnter:Pa(d,y),onMouseLeave:Pa(h,S),onTouchStart:Pa(f,y)}]:[!1,p,{}]}function Pa(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function fT({page:t,...e}){let{router:r}=db(),n=E.useMemo(()=>rb(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?E.createElement(pT,{page:t,matches:n,...e}):null}function mT(t){let{manifest:e,routeModules:r}=hb(),[n,s]=E.useState([]);return E.useEffect(()=>{let a=!1;return aT(t,e,r).then(o=>{a||s(o)}),()=>{a=!0}},[t,e,r]),n}function pT({page:t,matches:e,...r}){let n=ar(),{manifest:s,routeModules:a}=hb(),{basename:o}=db(),{loaderData:l,matches:u}=dT(),d=E.useMemo(()=>s0(t,e,u,s,n,"data"),[t,e,u,s,n]),h=E.useMemo(()=>s0(t,e,u,s,n,"assets"),[t,e,u,s,n]),f=E.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let S=new Set,v=!1;if(e.forEach(w=>{var N;let b=s.routes[w.route.id];!b||!b.hasLoader||(!d.some(P=>P.route.id===w.route.id)&&w.route.id in l&&((N=a[w.route.id])!=null&&N.shouldRevalidate)||b.hasClientLoader?v=!0:S.add(w.route.id))}),S.size===0)return[];let x=nT(t,o,"data");return v&&S.size>0&&x.searchParams.set("_routes",e.filter(w=>S.has(w.route.id)).map(w=>w.route.id).join(",")),[x.pathname+x.search]},[o,l,n,s,d,e,t,a]),p=E.useMemo(()=>oT(h,s),[h,s]),y=mT(h);return E.createElement(E.Fragment,null,f.map(S=>E.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...r})),p.map(S=>E.createElement("link",{key:S,rel:"modulepreload",href:S,...r})),y.map(({key:S,link:v})=>E.createElement("link",{key:S,nonce:r.nonce,...v})))}function gT(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var fb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fb&&(window.__reactRouterVersion="7.10.1")}catch{}function xT({basename:t,children:e,unstable_useTransitions:r,window:n}){let s=E.useRef();s.current==null&&(s.current=n2({window:n,v5Compat:!0}));let a=s.current,[o,l]=E.useState({action:a.action,location:a.location}),u=E.useCallback(d=>{r===!1?l(d):E.startTransition(()=>l(d))},[r]);return E.useLayoutEffect(()=>a.listen(u),[a,u]),E.createElement(G2,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:r===!0})}var mb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X=E.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:f,...p},y){let{basename:S,unstable_useTransitions:v}=E.useContext(ir),x=typeof d=="string"&&mb.test(d),w,b=!1;if(typeof d=="string"&&x&&(w=d,fb))try{let C=new URL(window.location.href),R=d.startsWith("//")?new URL(C.protocol+d):new URL(d),A=cn(R.pathname,S);R.origin===C.origin&&A!=null?d=A+R.search+R.hash:b=!0}catch{sr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=R2(d,{relative:s}),[P,L,D]=hT(n,p),T=bT(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:f,unstable_useTransitions:v});function _(C){e&&e(C),C.defaultPrevented||T(C)}let k=E.createElement("a",{...p,...D,href:w||N,onClick:b||a?e:_,ref:gT(y,L),target:u,"data-discover":!x&&r==="render"?"true":void 0});return P&&!x?E.createElement(E.Fragment,null,k,E.createElement(fT,{page:N})):k});X.displayName="Link";var yT=E.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:a,to:o,viewTransition:l,children:u,...d},h){let f=Ho(o,{relative:d.relative}),p=ar(),y=E.useContext(Iu),{navigator:S,basename:v}=E.useContext(ir),x=y!=null&&TT(f)&&l===!0,w=S.encodeLocation?S.encodeLocation(f).pathname:f.pathname,b=p.pathname,N=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(b=b.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&v&&(N=cn(N,v)||N);const P=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let L=b===w||!s&&b.startsWith(w)&&b.charAt(P)==="/",D=N!=null&&(N===w||!s&&N.startsWith(w)&&N.charAt(w.length)==="/"),T={isActive:L,isPending:D,isTransitioning:x},_=L?e:void 0,k;typeof n=="function"?k=n(T):k=[n,L?"active":null,D?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let C=typeof a=="function"?a(T):a;return E.createElement(X,{...d,"aria-current":_,className:k,ref:h,style:C,to:o,viewTransition:l},typeof u=="function"?u(T):u)});yT.displayName="NavLink";var vT=E.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:a,method:o=sc,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:f,...p},y)=>{let{unstable_useTransitions:S}=E.useContext(ir),v=jT(),x=ET(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",b=typeof l=="string"&&mb.test(l),N=P=>{if(u&&u(P),P.defaultPrevented)return;P.preventDefault();let L=P.nativeEvent.submitter,D=(L==null?void 0:L.getAttribute("formmethod"))||o,T=()=>v(L||P.currentTarget,{fetcherKey:e,method:D,navigate:r,replace:s,state:a,relative:d,preventScrollReset:h,viewTransition:f});S&&r!==!1?E.startTransition(()=>T()):T()};return E.createElement("form",{ref:y,method:w,action:x,onSubmit:n?u:N,...p,"data-discover":!b&&t==="render"?"true":void 0})});vT.displayName="Form";function wT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pb(t){let e=E.useContext(ta);return Ie(e,wT(t)),e}function bT(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:o,unstable_useTransitions:l}={}){let u=yn(),d=ar(),h=Ho(t,{relative:a});return E.useCallback(f=>{if(Z2(f,e)){f.preventDefault();let p=r!==void 0?r:To(d)===To(h),y=()=>u(t,{replace:p,state:n,preventScrollReset:s,relative:a,viewTransition:o});l?E.startTransition(()=>y()):y()}},[d,u,h,r,n,e,t,s,a,o,l])}var _T=0,NT=()=>`__${String(++_T)}__`;function jT(){let{router:t}=pb("useSubmit"),{basename:e}=E.useContext(ir),r=$2(),n=t.fetch,s=t.navigate;return E.useCallback(async(a,o={})=>{let{action:l,method:u,encType:d,formData:h,body:f}=rT(a,e);if(o.navigate===!1){let p=o.fetcherKey||NT();await n(p,r,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:f,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:f,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,s,e,r])}function ET(t,{relative:e}={}){let{basename:r}=E.useContext(ir),n=E.useContext(zr);Ie(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...Ho(t||".",{relative:e})},o=ar();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:en([r,a.pathname])),To(a)}function TT(t,{relative:e}={}){let r=E.useContext(ab);Ie(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=pb("useViewTransitionState"),s=Ho(t,{relative:e});if(!r.isTransitioning)return!1;let a=cn(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=cn(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Bc(s.pathname,o)!=null||Bc(s.pathname,a)!=null}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=()=>{};var i0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},kT=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},xb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=a>>2,f=(a&3)<<4|l>>4;let p=(l&15)<<2|d>>6,y=d&63;u||(y=64,o||(p=64)),n.push(r[h],r[f],r[p],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const d=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||d==null||f==null)throw new IT;const p=a<<2|l>>4;if(n.push(p),d!==64){const y=l<<4&240|d>>2;if(n.push(y),f!==64){const S=d<<6&192|f;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CT=function(t){const e=gb(t);return xb.encodeByteArray(e,!0)},zc=function(t){return CT(t).replace(/\./g,"")},yb=function(t){try{return xb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=()=>AT().__FIREBASE_DEFAULTS__,PT=()=>{if(typeof process>"u"||typeof i0>"u")return;const t=i0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yb(t[1]);return e&&JSON.parse(e)},Au=()=>{try{return ST()||RT()||PT()||DT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vb=t=>{var e,r;return(r=(e=Au())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},wb=t=>{const e=vb(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},bb=()=>{var t;return(t=Au())==null?void 0:t.config},_b=t=>{var e;return(e=Au())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[zc(JSON.stringify(r)),zc(JSON.stringify(o)),""].join(".")}const to={};function LT(){const t={prod:[],emulator:[]};for(const e of Object.keys(to))to[e]?t.emulator.push(e):t.prod.push(e);return t}function MT(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let a0=!1;function Um(t,e){if(typeof window>"u"||typeof document>"u"||!Xs(window.location.host)||to[t]===e||to[t]||a0)return;to[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",a=LT().prod.length>0;function o(){const p=document.getElementById(n);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{a0=!0,o()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=MT(n),y=r("text"),S=document.getElementById(y)||document.createElement("span"),v=r("learnmore"),x=document.getElementById(v)||document.createElement("a"),w=r("preprendIcon"),b=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const N=p.element;l(N),h(x,v);const P=d();u(b,w),N.append(b,S,x,P),document.body.appendChild(N)}a?(S.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function FT(){var e;const t=(e=Au())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $T(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qT(){return!FT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HT(){try{return typeof indexedDB=="object"}catch{return!1}}function WT(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="FirebaseError";class $r extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=GT,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wo.prototype.create)}}class Wo{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?KT(a,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new $r(s,l,n)}}function KT(t,e){return t.replace(QT,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const QT=/\{\$([^}]+)}/g;function YT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zs(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const a=t[s],o=e[s];if(o0(a)&&o0(o)){if(!zs(a,o))return!1}else if(a!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function o0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Va(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Fa(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function JT(t,e){const r=new XT(t,e);return r.subscribe.bind(r)}class XT{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");ZT(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=sh),s.error===void 0&&(s.error=sh),s.complete===void 0&&(s.complete=sh);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZT(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function sh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new OT;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rS(e))try{this.getOrInitializeService({instanceIdentifier:Ss})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=Ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ss){return this.instances.has(e)}getOptions(e=Ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(s)}return s}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const a=this.instances.get(n);return a&&e(a,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:tS(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ss){return this.component?this.component.multipleInstances?e:Ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tS(t){return t===Ss?void 0:t}function rS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new eS(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const sS={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},iS=ae.INFO,aS={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},oS=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=aS[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bm{constructor(e){this.name=e,this._logLevel=iS,this._logHandler=oS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const lS=(t,e)=>e.some(r=>t instanceof r);let l0,c0;function cS(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uS(){return c0||(c0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jb=new WeakMap,hf=new WeakMap,Eb=new WeakMap,ih=new WeakMap,zm=new WeakMap;function dS(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(Kn(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&jb.set(r,t)}).catch(()=>{}),zm.set(e,t),e}function hS(t){if(hf.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});hf.set(t,e)}let ff={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return hf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Eb.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Kn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fS(t){ff=t(ff)}function mS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(ah(this),e,...r);return Eb.set(n,e.sort?e.sort():[e]),Kn(n)}:uS().includes(t)?function(...e){return t.apply(ah(this),e),Kn(jb.get(this))}:function(...e){return Kn(t.apply(ah(this),e))}}function pS(t){return typeof t=="function"?mS(t):(t instanceof IDBTransaction&&hS(t),lS(t,cS())?new Proxy(t,ff):t)}function Kn(t){if(t instanceof IDBRequest)return dS(t);if(ih.has(t))return ih.get(t);const e=pS(t);return e!==t&&(ih.set(t,e),zm.set(e,t)),e}const ah=t=>zm.get(t);function gS(t,e,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=Kn(o);return n&&o.addEventListener("upgradeneeded",u=>{n(Kn(o.result),u.oldVersion,u.newVersion,Kn(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const xS=["get","getKey","getAll","getAllKeys","count"],yS=["put","add","delete","clear"],oh=new Map;function u0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oh.get(e))return oh.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=yS.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||xS.includes(r)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),s&&u.done]))[0]};return oh.set(e,a),a}fS(t=>({...t,get:(e,r,n)=>u0(e,r)||t.get(e,r,n),has:(e,r)=>!!u0(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(wS(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function wS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mf="@firebase/app",d0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un=new Bm("@firebase/app"),bS="@firebase/app-compat",_S="@firebase/analytics-compat",NS="@firebase/analytics",jS="@firebase/app-check-compat",ES="@firebase/app-check",TS="@firebase/auth",SS="@firebase/auth-compat",kS="@firebase/database",IS="@firebase/data-connect",CS="@firebase/database-compat",AS="@firebase/functions",RS="@firebase/functions-compat",PS="@firebase/installations",DS="@firebase/installations-compat",OS="@firebase/messaging",LS="@firebase/messaging-compat",MS="@firebase/performance",VS="@firebase/performance-compat",FS="@firebase/remote-config",US="@firebase/remote-config-compat",BS="@firebase/storage",zS="@firebase/storage-compat",$S="@firebase/firestore",qS="@firebase/ai",HS="@firebase/firestore-compat",WS="firebase",GS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="[DEFAULT]",KS={[mf]:"fire-core",[bS]:"fire-core-compat",[NS]:"fire-analytics",[_S]:"fire-analytics-compat",[ES]:"fire-app-check",[jS]:"fire-app-check-compat",[TS]:"fire-auth",[SS]:"fire-auth-compat",[kS]:"fire-rtdb",[IS]:"fire-data-connect",[CS]:"fire-rtdb-compat",[AS]:"fire-fn",[RS]:"fire-fn-compat",[PS]:"fire-iid",[DS]:"fire-iid-compat",[OS]:"fire-fcm",[LS]:"fire-fcm-compat",[MS]:"fire-perf",[VS]:"fire-perf-compat",[FS]:"fire-rc",[US]:"fire-rc-compat",[BS]:"fire-gcs",[zS]:"fire-gcs-compat",[$S]:"fire-fst",[HS]:"fire-fst-compat",[qS]:"fire-vertex","fire-js":"fire-js",[WS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new Map,QS=new Map,gf=new Map;function h0(t,e){try{t.container.addComponent(e)}catch(r){un.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function $s(t){const e=t.name;if(gf.has(e))return un.debug(`There were multiple attempts to register component ${e}.`),!1;gf.set(e,t);for(const r of $c.values())h0(r,t);for(const r of QS.values())h0(r,t);return!0}function Ru(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ut(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new Wo("app","Firebase",YS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=GS;function Tb(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:pf,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw Qn.create("bad-app-name",{appName:String(s)});if(r||(r=bb()),!r)throw Qn.create("no-options");const a=$c.get(s);if(a){if(zs(r,a.options)&&zs(n,a.config))return a;throw Qn.create("duplicate-app",{appName:s})}const o=new nS(s);for(const u of gf.values())o.addComponent(u);const l=new JS(r,n,o);return $c.set(s,l),l}function $m(t=pf){const e=$c.get(t);if(!e&&t===pf&&bb())return Tb();if(!e)throw Qn.create("no-app",{appName:t});return e}function Cr(t,e,r){let n=KS[t]??t;r&&(n+=`-${r}`);const s=n.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${n}" with version "${e}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),un.warn(o.join(" "));return}$s(new ts(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="firebase-heartbeat-database",ZS=1,So="firebase-heartbeat-store";let lh=null;function Sb(){return lh||(lh=gS(XS,ZS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(So)}catch(r){console.warn(r)}}}}).catch(t=>{throw Qn.create("idb-open",{originalErrorMessage:t.message})})),lh}async function ek(t){try{const r=(await Sb()).transaction(So),n=await r.objectStore(So).get(kb(t));return await r.done,n}catch(e){if(e instanceof $r)un.warn(e.message);else{const r=Qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});un.warn(r.message)}}}async function f0(t,e){try{const n=(await Sb()).transaction(So,"readwrite");await n.objectStore(So).put(e,kb(t)),await n.done}catch(r){if(r instanceof $r)un.warn(r.message);else{const n=Qn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});un.warn(n.message)}}}function kb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=1024,rk=30;class nk{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new ik(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=m0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>rk){const o=ak(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){un.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=m0(),{heartbeatsToSend:n,unsentEntries:s}=sk(this._heartbeatsCache.heartbeats),a=zc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return un.warn(r),""}}}function m0(){return new Date().toISOString().substring(0,10)}function sk(t,e=tk){const r=[];let n=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),p0(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),p0(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class ik{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HT()?WT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await ek(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return f0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return f0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function p0(t){return zc(JSON.stringify({version:2,heartbeats:t})).length}function ak(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){$s(new ts("platform-logger",e=>new vS(e),"PRIVATE")),$s(new ts("heartbeat",e=>new nk(e),"PRIVATE")),Cr(mf,d0,t),Cr(mf,d0,"esm2020"),Cr("fire-js","")}ok("");function Ib(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lk=Ib,Cb=new Wo("auth","Firebase",Ib());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Bm("@firebase/auth");function ck(t,...e){qc.logLevel<=ae.WARN&&qc.warn(`Auth (${Zs}): ${t}`,...e)}function ac(t,...e){qc.logLevel<=ae.ERROR&&qc.error(`Auth (${Zs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,...e){throw qm(t,...e)}function Ar(t,...e){return qm(t,...e)}function Ab(t,e,r){const n={...lk(),[e]:r};return new Wo("auth","Firebase",n).create(e,{appName:t.name})}function tn(t){return Ab(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qm(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Cb.create(t,...e)}function Q(t,e,...r){if(!t)throw qm(e,...r)}function Jr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ac(e),new Error(e)}function dn(t,e){t||Jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function uk(){return g0()==="http:"||g0()==="https:"}function g0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uk()||BT()||"connection"in navigator)?navigator.onLine:!0}function hk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,r){this.shortDelay=e,this.longDelay=r,dn(r>e,"Short delay should be less than long delay!"),this.isMobile=VT()||zT()}get(){return dk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){dn(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pk=new Ko(3e4,6e4);function vn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function wr(t,e,r,n,s={}){return Pb(t,s,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=Go({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return UT()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Xs(t.emulatorConfig.host)&&(d.credentials="include"),Rb.fetch()(await Db(t,t.config.apiHost,r,l),d)})}async function Pb(t,e,r){t._canInitEmulator=!1;const n={...fk,...e};try{const s=new xk(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Vl(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Vl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Vl(t,"user-disabled",o);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ab(t,h,d);xr(t,h)}}catch(s){if(s instanceof $r)throw s;xr(t,"network-request-failed",{message:String(s)})}}async function Qo(t,e,r,n,s={}){const a=await wr(t,e,r,n,s);return"mfaPendingCredential"in a&&xr(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function Db(t,e,r,n){const s=`${e}${r}?${n}`,a=t,o=a.config.emulator?Hm(t.config,s):`${t.config.apiScheme}://${s}`;return mk.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function gk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ar(this.auth,"network-request-failed")),pk.get())})}}function Vl(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Ar(t,e,n);return s.customData._tokenResponse=r,s}function x0(t){return t!==void 0&&t.enterprise!==void 0}class yk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return gk(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vk(t,e){return wr(t,"GET","/v2/recaptchaConfig",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(t,e){return wr(t,"POST","/v1/accounts:delete",e)}async function Hc(t,e){return wr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bk(t,e=!1){const r=Pe(t),n=await r.getIdToken(e),s=Wm(n);Q(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:ro(ch(s.auth_time)),issuedAtTime:ro(ch(s.iat)),expirationTime:ro(ch(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ch(t){return Number(t)*1e3}function Wm(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return ac("JWT malformed, contained fewer than 3 sections"),null;try{const s=yb(r);return s?JSON.parse(s):(ac("Failed to decode base64 JWT payload"),null)}catch(s){return ac("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function y0(t){const e=Wm(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof $r&&_k(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function _k({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=ro(this.lastLoginAt),this.creationTime=ro(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t){var f;const e=t.auth,r=await t.getIdToken(),n=await qs(t,Hc(e,{idToken:r}));Q(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const a=(f=s.providerUserInfo)!=null&&f.length?Ob(s.providerUserInfo):[],o=Ek(t.providerData,a),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new yf(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function jk(t){const e=Pe(t);await Wc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ek(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Ob(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(t,e){const r=await Pb(t,{},async()=>{const n=Go({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=await Db(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:n};return t.emulatorConfig&&Xs(t.emulatorConfig.host)&&(u.credentials="include"),Rb.fetch()(o,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Sk(t,e){return wr(t,"POST","/v2/accounts:revokeToken",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const r=y0(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:a}=await Tk(e,r);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:a}=r,o=new Ai;return n&&(Q(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(Q(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hr{constructor({uid:e,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new Nk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await qs(this,this.stsTokenManager.getToken(this.auth,e));return Q(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return bk(this,e)}reload(){return jk(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Wc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ut(this.auth.app))return Promise.reject(tn(this.auth));const e=await this.getIdToken();return await qs(this,wk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,s=r.email??void 0,a=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,u=r._redirectEventId??void 0,d=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:y,providerData:S,stsTokenManager:v}=r;Q(f&&v,e,"internal-error");const x=Ai.fromJSON(this.name,v);Q(typeof f=="string",e,"internal-error"),kn(n,e.name),kn(s,e.name),Q(typeof p=="boolean",e,"internal-error"),Q(typeof y=="boolean",e,"internal-error"),kn(a,e.name),kn(o,e.name),kn(l,e.name),kn(u,e.name),kn(d,e.name),kn(h,e.name);const w=new hr({uid:f,auth:e,email:s,emailVerified:p,displayName:n,isAnonymous:y,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:x,createdAt:d,lastLoginAt:h});return S&&Array.isArray(S)&&(w.providerData=S.map(b=>({...b}))),u&&(w._redirectEventId=u),w}static async _fromIdTokenResponse(e,r,n=!1){const s=new Ai;s.updateFromServerResponse(r);const a=new hr({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Wc(a),a}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Q(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Ob(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new Ai;l.updateFromIdToken(n);const u=new hr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new yf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=new Map;function Xr(t){dn(t instanceof Function,"Expected a class definition");let e=v0.get(t);return e?(dn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,v0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Lb.type="NONE";const w0=Lb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t,e,r){return`firebase:${t}:${e}:${r}`}class Ri{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=oc(this.userKey,s.apiKey,a),this.fullPersistenceKey=oc("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Hc(this.auth,{idToken:e}).catch(()=>{});return r?hr._fromGetAccountInfoResponse(this.auth,r,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ri(Xr(w0),e,n);const s=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||Xr(w0);const o=oc(n,e.config.apiKey,e.name);let l=null;for(const d of r)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const p=await Hc(e,{idToken:h}).catch(()=>{});if(!p)break;f=await hr._fromGetAccountInfoResponse(e,p,h)}else f=hr._fromJSON(e,h);d!==a&&(l=f),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Ri(a,e,n):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Ri(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ub(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zb(e))return"Blackberry";if($b(e))return"Webos";if(Vb(e))return"Safari";if((e.includes("chrome/")||Fb(e))&&!e.includes("edge/"))return"Chrome";if(Bb(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Mb(t=wt()){return/firefox\//i.test(t)}function Vb(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fb(t=wt()){return/crios\//i.test(t)}function Ub(t=wt()){return/iemobile/i.test(t)}function Bb(t=wt()){return/android/i.test(t)}function zb(t=wt()){return/blackberry/i.test(t)}function $b(t=wt()){return/webos/i.test(t)}function Gm(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kk(t=wt()){var e;return Gm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Ik(){return $T()&&document.documentMode===10}function qb(t=wt()){return Gm(t)||Bb(t)||$b(t)||zb(t)||/windows phone/i.test(t)||Ub(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e=[]){let r;switch(t){case"Browser":r=b0(wt());break;case"Worker":r=`${b0(wt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Zs}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ak(t,e={}){return wr(t,"GET","/v2/passwordPolicy",vn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=6;class Pk{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Rk,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _0(this),this.idTokenSubscription=new _0(this),this.beforeStateQueue=new Ck(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Xr(r)),this._initializationPromise=this.queue(async()=>{var n,s,a;if(!this._deleted&&(this.persistenceManager=await Ri.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Hc(this,{idToken:e}),n=await hr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Ut(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=n==null?void 0:n._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Wc(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ut(this.app))return Promise.reject(tn(this));const r=e?Pe(e):null;return r&&Q(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ut(this.app)?Promise.reject(tn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ut(this.app)?Promise.reject(tn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ak(this),r=new Pk(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wo("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Sk(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Xr(e)||this._popupRedirectResolver;Q(r,this,"argument-error"),this.redirectPersistenceManager=await Ri.create(this,[Xr(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&ck(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function fs(t){return Pe(t)}class _0{constructor(e){this.auth=e,this.observer=null,this.addObserver=JT(r=>this.observer=r)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ok(t){Pu=t}function Wb(t){return Pu.loadJS(t)}function Lk(){return Pu.recaptchaEnterpriseScript}function Mk(){return Pu.gapiScript}function Vk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Fk{constructor(){this.enterprise=new Uk}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class Uk{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const Bk="recaptcha-enterprise",Gb="NO_RECAPTCHA";class zk{constructor(e){this.type=Bk,this.auth=fs(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{vk(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new yk(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;x0(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(Gb)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Fk().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{n(this.auth).then(l=>{if(!r&&x0(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Lk();u.length!==0&&(u+=l),Wb(u).then(()=>{s(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function N0(t,e,r,n=!1,s=!1){const a=new zk(t);let o;if(s)o=Gb;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Gc(t,e,r,n,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await N0(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await N0(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t,e){const r=Ru(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(zs(a,e??{}))return s;xr(s,"already-initialized")}return r.initialize({options:e})}function qk(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Xr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Hk(t,e,r){const n=fs(t);Q(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=Kb(e),{host:o,port:l}=Wk(e),u=l===null?"":`:${l}`,d={url:`${a}//${o}${u}/`},h=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Q(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Q(zs(d,n.config.emulator)&&zs(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,Xs(o)?(Fm(`${a}//${o}${u}`),Um("Auth",!0)):Gk()}function Kb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Wk(t){const e=Kb(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:j0(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:j0(o)}}}function j0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Gk(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,r){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}async function Kk(t,e){return wr(t,"POST","/v1/accounts:update",e)}async function Qk(t,e){return wr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(t,e){return Qo(t,"POST","/v1/accounts:signInWithPassword",vn(t,e))}async function Jk(t,e){return wr(t,"POST","/v1/accounts:sendOobCode",vn(t,e))}async function Xk(t,e){return Jk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(t,e){return Qo(t,"POST","/v1/accounts:signInWithEmailLink",vn(t,e))}async function eI(t,e){return Qo(t,"POST","/v1/accounts:signInWithEmailLink",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Km{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new ko(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ko(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gc(e,r,"signInWithPassword",Yk);case"emailLink":return Zk(e,{email:this._email,oobCode:this._password});default:xr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gc(e,n,"signUpPassword",Qk);case"emailLink":return eI(e,{idToken:r,email:this._email,oobCode:this._password});default:xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pi(t,e){return Qo(t,"POST","/v1/accounts:signInWithIdp",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="http://localhost";class Hs extends Km{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):xr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...a}=r;if(!n||!s)return null;const o=new Hs(n,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Pi(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Pi(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Pi(e,r)}buildRequest(){const e={requestUri:tI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Go(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nI(t){const e=Va(Fa(t)).link,r=e?Va(Fa(e)).deep_link_id:null,n=Va(Fa(t)).deep_link_id;return(n?Va(Fa(n)).link:null)||n||r||e||t}class Qm{constructor(e){const r=Va(Fa(e)),n=r.apiKey??null,s=r.oobCode??null,a=rI(r.mode??null);Q(n&&s&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=s,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=nI(e);try{return new Qm(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(){this.providerId=na.PROVIDER_ID}static credential(e,r){return ko._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Qm.parseLink(r);return Q(n,"argument-error"),ko._fromEmailAndCode(e,n.code,n.tenantId)}}na.PROVIDER_ID="password";na.EMAIL_PASSWORD_SIGN_IN_METHOD="password";na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends Qb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends Yo{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pn.credential(e.oauthAccessToken)}catch{return null}}}Pn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends Yo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Hs._fromParams({providerId:Dn.PROVIDER_ID,signInMethod:Dn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Dn.credentialFromTaggedObject(e)}static credentialFromError(e){return Dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Dn.credential(r,n)}catch{return null}}}Dn.GOOGLE_SIGN_IN_METHOD="google.com";Dn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends Yo{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return On.credential(e.oauthAccessToken)}catch{return null}}}On.GITHUB_SIGN_IN_METHOD="github.com";On.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends Yo{constructor(){super("twitter.com")}static credential(e,r){return Hs._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ln.credential(r,n)}catch{return null}}}Ln.TWITTER_SIGN_IN_METHOD="twitter.com";Ln.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(t,e){return Qo(t,"POST","/v1/accounts:signUp",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const a=await hr._fromIdTokenResponse(e,n,s),o=E0(n);return new Ws({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=E0(n);return new Ws({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function E0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends $r{constructor(e,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Kc(e,r,n,s)}}function Yb(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(t,a,e,n):a})}async function iI(t,e,r=!1){const n=await qs(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ws._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(t,e,r=!1){const{auth:n}=t;if(Ut(n.app))return Promise.reject(tn(n));const s="reauthenticate";try{const a=await qs(t,Yb(n,s,e,t),r);Q(a.idToken,n,"internal-error");const o=Wm(a.idToken);Q(o,n,"internal-error");const{sub:l}=o;return Q(t.uid===l,n,"user-mismatch"),Ws._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&xr(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(t,e,r=!1){if(Ut(t.app))return Promise.reject(tn(t));const n="signIn",s=await Yb(t,n,e),a=await Ws._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(a.user),a}async function oI(t,e){return Jb(fs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(t){const e=fs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lI(t,e,r){const n=fs(t);await Gc(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Xk)}async function cI(t,e,r){if(Ut(t.app))return Promise.reject(tn(t));const n=fs(t),o=await Gc(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sI).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Xb(t),u}),l=await Ws._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function uI(t,e,r){return Ut(t.app)?Promise.reject(tn(t)):oI(Pe(t),na.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Xb(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(t,e){return wr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T0(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Pe(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await qs(n,dI(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function hI(t,e){return fI(Pe(t),null,e)}async function fI(t,e,r){const{auth:n}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};r&&(a.password=r);const o=await qs(t,Kk(n,a));await t._updateTokensIfNecessary(o,!0)}function mI(t,e,r,n){return Pe(t).onIdTokenChanged(e,r,n)}function pI(t,e,r){return Pe(t).beforeAuthStateChanged(e,r)}function gI(t,e,r,n){return Pe(t).onAuthStateChanged(e,r,n)}function xI(t){return Pe(t).signOut()}const Qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=1e3,vI=10;class e_ extends Zb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);Ik()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vI):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},yI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}e_.type="LOCAL";const wI=e_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_ extends Zb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}t_.type="SESSION";const r_=t_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Du(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(o).map(async d=>d(r.origin,a)),u=await bI(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=Ym("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function NI(t){Rr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function jI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function TI(){return n_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="firebaseLocalStorageDb",SI=1,Yc="firebaseLocalStorage",i_="fbase_key";class Jo{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Ou(t,e){return t.transaction([Yc],e?"readwrite":"readonly").objectStore(Yc)}function kI(){const t=indexedDB.deleteDatabase(s_);return new Jo(t).toPromise()}function vf(){const t=indexedDB.open(s_,SI);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Yc,{keyPath:i_})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Yc)?e(n):(n.close(),await kI(),e(await vf()))})})}async function S0(t,e,r){const n=Ou(t,!0).put({[i_]:e,value:r});return new Jo(n).toPromise()}async function II(t,e){const r=Ou(t,!1).get(e),n=await new Jo(r).toPromise();return n===void 0?null:n.value}function k0(t,e){const r=Ou(t,!0).delete(e);return new Jo(r).toPromise()}const CI=800,AI=3;class a_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vf(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>AI)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return n_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Du._getInstance(TI()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await jI(),!this.activeServiceWorker)return;this.sender=new _I(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vf();return await S0(e,Qc,"1"),await k0(e,Qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>S0(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>II(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>k0(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Ou(s,!1).getAll();return new Jo(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a_.type="LOCAL";const RI=a_;new Ko(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e){return e?Xr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends Km{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pi(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Pi(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Pi(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function DI(t){return Jb(t.auth,new Jm(t),t.bypassAuthState)}function OI(t){const{auth:e,user:r}=t;return Q(r,e,"internal-error"),aI(r,new Jm(t),t.bypassAuthState)}async function LI(t){const{auth:e,user:r}=t;return Q(r,e,"internal-error"),iI(r,new Jm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,r,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DI;case"linkViaPopup":case"linkViaRedirect":return LI;case"reauthViaPopup":case"reauthViaRedirect":return OI;default:xr(this.auth,"internal-error")}}resolve(e){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=new Ko(2e3,1e4);class ji extends o_{constructor(e,r,n,s,a){super(e,r,s,a),this.provider=n,this.authWindow=null,this.pollId=null,ji.currentPopupAction&&ji.currentPopupAction.cancel(),ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){dn(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MI.get())};e()}}ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="pendingRedirect",lc=new Map;class FI extends o_{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=lc.get(this.auth._key());if(!e){try{const n=await UI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}lc.set(this.auth._key(),e)}return this.bypassAuthState||lc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UI(t,e){const r=$I(e),n=zI(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function BI(t,e){lc.set(t._key(),e)}function zI(t){return Xr(t._redirectPersistence)}function $I(t){return oc(VI,t.config.apiKey,t.name)}async function qI(t,e,r=!1){if(Ut(t.app))return Promise.reject(tn(t));const n=fs(t),s=PI(n,e),o=await new FI(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=10*60*1e3;class WI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GI(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!l_(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ar(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HI&&this.cachedEventUids.clear(),this.cachedEventUids.has(I0(e))}saveEventToCache(e){this.cachedEventUids.add(I0(e)),this.lastProcessedEventTime=Date.now()}}function I0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function l_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(t,e={}){return wr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YI=/^https?/;async function JI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KI(t);for(const r of e)try{if(XI(r))return}catch{}xr(t,"unauthorized-domain")}function XI(t){const e=xf(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!YI.test(r))return!1;if(QI.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new Ko(3e4,6e4);function C0(){const t=Rr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function eC(t){return new Promise((e,r)=>{var s,a,o;function n(){C0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{C0(),r(Ar(t,"network-request-failed"))},timeout:ZI.get()})}if((a=(s=Rr().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=Rr().gapi)!=null&&o.load)n();else{const l=Vk("iframefcb");return Rr()[l]=()=>{gapi.load?n():r(Ar(t,"network-request-failed"))},Wb(`${Mk()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw cc=null,e})}let cc=null;function tC(t){return cc=cc||eC(t),cc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new Ko(5e3,15e3),nC="__/auth/iframe",sC="emulator/auth/iframe",iC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oC(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Hm(e,sC):`https://${t.config.authDomain}/${nC}`,n={apiKey:e.apiKey,appName:t.name,v:Zs},s=aC.get(t.config.apiHost);s&&(n.eid=s);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Go(n).slice(1)}`}async function lC(t){const e=await tC(t),r=Rr().gapi;return Q(r,t,"internal-error"),e.open({where:document.body,url:oC(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iC,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const o=Ar(t,"network-request-failed"),l=Rr().setTimeout(()=>{a(o)},rC.get());function u(){Rr().clearTimeout(l),s(n)}n.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uC=500,dC=600,hC="_blank",fC="http://localhost";class A0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mC(t,e,r,n=uC,s=dC){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u={...cC,width:n.toString(),height:s.toString(),top:a,left:o},d=wt().toLowerCase();r&&(l=Fb(d)?hC:r),Mb(d)&&(e=e||fC,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[y,S])=>`${p}${y}=${S},`,"");if(kk(d)&&l!=="_self")return pC(e||"",l),new A0(null);const f=window.open(e||"",l,h);Q(f,t,"popup-blocked");try{f.focus()}catch{}return new A0(f)}function pC(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="__/auth/handler",xC="emulator/auth/handler",yC=encodeURIComponent("fac");async function R0(t,e,r,n,s,a){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Zs,eventId:s};if(e instanceof Qb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Yo){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${yC}=${encodeURIComponent(u)}`:"";return`${vC(t)}?${Go(l).slice(1)}${d}`}function vC({config:t}){return t.emulator?Hm(t,xC):`https://${t.authDomain}/${gC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="webStorageSupport";class wC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r_,this._completeRedirectFn=qI,this._overrideRedirectResult=BI}async _openPopup(e,r,n,s){var o;dn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await R0(e,r,n,xf(),s);return mC(e,a,Ym())}async _openRedirect(e,r,n,s){await this._originValidation(e);const a=await R0(e,r,n,xf(),s);return NI(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(dn(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await lC(e),n=new WI(e);return r.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(uh,{type:uh},s=>{var o;const a=(o=s==null?void 0:s[0])==null?void 0:o[uh];a!==void 0&&r(!!a),xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=JI(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return qb()||Vb()||Gm()}}const bC=wC;var P0="@firebase/auth",D0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jC(t){$s(new ts("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hb(t)},d=new Dk(n,s,a,u);return qk(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),$s(new ts("auth-internal",e=>{const r=fs(e.getProvider("auth").getImmediate());return(n=>new _C(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(P0,D0,NC(t)),Cr(P0,D0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=5*60,TC=_b("authIdTokenMaxAge")||EC;let O0=null;const SC=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>TC)return;const s=r==null?void 0:r.token;O0!==s&&(O0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function kC(t=$m()){const e=Ru(t,"auth");if(e.isInitialized())return e.getImmediate();const r=$k(t,{popupRedirectResolver:bC,persistence:[RI,wI,r_]}),n=_b("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=SC(a.toString());pI(r,o,()=>o(r.currentUser)),mI(r,l=>o(l))}}const s=vb("auth");return s&&Hk(r,`http://${s}`),r}function IC(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Ok({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const a=Ar("internal-error");a.customData=s,r(a)},n.type="text/javascript",n.charset="UTF-8",IC().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jC("Browser");var L0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yn,c_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function k(){}k.prototype=_.prototype,T.F=_.prototype,T.prototype=new k,T.prototype.constructor=T,T.D=function(C,R,A){for(var I=Array(arguments.length-2),me=2;me<arguments.length;me++)I[me-2]=arguments[me];return _.prototype[R].apply(C,I)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,_,k){k||(k=0);const C=Array(16);if(typeof _=="string")for(var R=0;R<16;++R)C[R]=_.charCodeAt(k++)|_.charCodeAt(k++)<<8|_.charCodeAt(k++)<<16|_.charCodeAt(k++)<<24;else for(R=0;R<16;++R)C[R]=_[k++]|_[k++]<<8|_[k++]<<16|_[k++]<<24;_=T.g[0],k=T.g[1],R=T.g[2];let A=T.g[3],I;I=_+(A^k&(R^A))+C[0]+3614090360&4294967295,_=k+(I<<7&4294967295|I>>>25),I=A+(R^_&(k^R))+C[1]+3905402710&4294967295,A=_+(I<<12&4294967295|I>>>20),I=R+(k^A&(_^k))+C[2]+606105819&4294967295,R=A+(I<<17&4294967295|I>>>15),I=k+(_^R&(A^_))+C[3]+3250441966&4294967295,k=R+(I<<22&4294967295|I>>>10),I=_+(A^k&(R^A))+C[4]+4118548399&4294967295,_=k+(I<<7&4294967295|I>>>25),I=A+(R^_&(k^R))+C[5]+1200080426&4294967295,A=_+(I<<12&4294967295|I>>>20),I=R+(k^A&(_^k))+C[6]+2821735955&4294967295,R=A+(I<<17&4294967295|I>>>15),I=k+(_^R&(A^_))+C[7]+4249261313&4294967295,k=R+(I<<22&4294967295|I>>>10),I=_+(A^k&(R^A))+C[8]+1770035416&4294967295,_=k+(I<<7&4294967295|I>>>25),I=A+(R^_&(k^R))+C[9]+2336552879&4294967295,A=_+(I<<12&4294967295|I>>>20),I=R+(k^A&(_^k))+C[10]+4294925233&4294967295,R=A+(I<<17&4294967295|I>>>15),I=k+(_^R&(A^_))+C[11]+2304563134&4294967295,k=R+(I<<22&4294967295|I>>>10),I=_+(A^k&(R^A))+C[12]+1804603682&4294967295,_=k+(I<<7&4294967295|I>>>25),I=A+(R^_&(k^R))+C[13]+4254626195&4294967295,A=_+(I<<12&4294967295|I>>>20),I=R+(k^A&(_^k))+C[14]+2792965006&4294967295,R=A+(I<<17&4294967295|I>>>15),I=k+(_^R&(A^_))+C[15]+1236535329&4294967295,k=R+(I<<22&4294967295|I>>>10),I=_+(R^A&(k^R))+C[1]+4129170786&4294967295,_=k+(I<<5&4294967295|I>>>27),I=A+(k^R&(_^k))+C[6]+3225465664&4294967295,A=_+(I<<9&4294967295|I>>>23),I=R+(_^k&(A^_))+C[11]+643717713&4294967295,R=A+(I<<14&4294967295|I>>>18),I=k+(A^_&(R^A))+C[0]+3921069994&4294967295,k=R+(I<<20&4294967295|I>>>12),I=_+(R^A&(k^R))+C[5]+3593408605&4294967295,_=k+(I<<5&4294967295|I>>>27),I=A+(k^R&(_^k))+C[10]+38016083&4294967295,A=_+(I<<9&4294967295|I>>>23),I=R+(_^k&(A^_))+C[15]+3634488961&4294967295,R=A+(I<<14&4294967295|I>>>18),I=k+(A^_&(R^A))+C[4]+3889429448&4294967295,k=R+(I<<20&4294967295|I>>>12),I=_+(R^A&(k^R))+C[9]+568446438&4294967295,_=k+(I<<5&4294967295|I>>>27),I=A+(k^R&(_^k))+C[14]+3275163606&4294967295,A=_+(I<<9&4294967295|I>>>23),I=R+(_^k&(A^_))+C[3]+4107603335&4294967295,R=A+(I<<14&4294967295|I>>>18),I=k+(A^_&(R^A))+C[8]+1163531501&4294967295,k=R+(I<<20&4294967295|I>>>12),I=_+(R^A&(k^R))+C[13]+2850285829&4294967295,_=k+(I<<5&4294967295|I>>>27),I=A+(k^R&(_^k))+C[2]+4243563512&4294967295,A=_+(I<<9&4294967295|I>>>23),I=R+(_^k&(A^_))+C[7]+1735328473&4294967295,R=A+(I<<14&4294967295|I>>>18),I=k+(A^_&(R^A))+C[12]+2368359562&4294967295,k=R+(I<<20&4294967295|I>>>12),I=_+(k^R^A)+C[5]+4294588738&4294967295,_=k+(I<<4&4294967295|I>>>28),I=A+(_^k^R)+C[8]+2272392833&4294967295,A=_+(I<<11&4294967295|I>>>21),I=R+(A^_^k)+C[11]+1839030562&4294967295,R=A+(I<<16&4294967295|I>>>16),I=k+(R^A^_)+C[14]+4259657740&4294967295,k=R+(I<<23&4294967295|I>>>9),I=_+(k^R^A)+C[1]+2763975236&4294967295,_=k+(I<<4&4294967295|I>>>28),I=A+(_^k^R)+C[4]+1272893353&4294967295,A=_+(I<<11&4294967295|I>>>21),I=R+(A^_^k)+C[7]+4139469664&4294967295,R=A+(I<<16&4294967295|I>>>16),I=k+(R^A^_)+C[10]+3200236656&4294967295,k=R+(I<<23&4294967295|I>>>9),I=_+(k^R^A)+C[13]+681279174&4294967295,_=k+(I<<4&4294967295|I>>>28),I=A+(_^k^R)+C[0]+3936430074&4294967295,A=_+(I<<11&4294967295|I>>>21),I=R+(A^_^k)+C[3]+3572445317&4294967295,R=A+(I<<16&4294967295|I>>>16),I=k+(R^A^_)+C[6]+76029189&4294967295,k=R+(I<<23&4294967295|I>>>9),I=_+(k^R^A)+C[9]+3654602809&4294967295,_=k+(I<<4&4294967295|I>>>28),I=A+(_^k^R)+C[12]+3873151461&4294967295,A=_+(I<<11&4294967295|I>>>21),I=R+(A^_^k)+C[15]+530742520&4294967295,R=A+(I<<16&4294967295|I>>>16),I=k+(R^A^_)+C[2]+3299628645&4294967295,k=R+(I<<23&4294967295|I>>>9),I=_+(R^(k|~A))+C[0]+4096336452&4294967295,_=k+(I<<6&4294967295|I>>>26),I=A+(k^(_|~R))+C[7]+1126891415&4294967295,A=_+(I<<10&4294967295|I>>>22),I=R+(_^(A|~k))+C[14]+2878612391&4294967295,R=A+(I<<15&4294967295|I>>>17),I=k+(A^(R|~_))+C[5]+4237533241&4294967295,k=R+(I<<21&4294967295|I>>>11),I=_+(R^(k|~A))+C[12]+1700485571&4294967295,_=k+(I<<6&4294967295|I>>>26),I=A+(k^(_|~R))+C[3]+2399980690&4294967295,A=_+(I<<10&4294967295|I>>>22),I=R+(_^(A|~k))+C[10]+4293915773&4294967295,R=A+(I<<15&4294967295|I>>>17),I=k+(A^(R|~_))+C[1]+2240044497&4294967295,k=R+(I<<21&4294967295|I>>>11),I=_+(R^(k|~A))+C[8]+1873313359&4294967295,_=k+(I<<6&4294967295|I>>>26),I=A+(k^(_|~R))+C[15]+4264355552&4294967295,A=_+(I<<10&4294967295|I>>>22),I=R+(_^(A|~k))+C[6]+2734768916&4294967295,R=A+(I<<15&4294967295|I>>>17),I=k+(A^(R|~_))+C[13]+1309151649&4294967295,k=R+(I<<21&4294967295|I>>>11),I=_+(R^(k|~A))+C[4]+4149444226&4294967295,_=k+(I<<6&4294967295|I>>>26),I=A+(k^(_|~R))+C[11]+3174756917&4294967295,A=_+(I<<10&4294967295|I>>>22),I=R+(_^(A|~k))+C[2]+718787259&4294967295,R=A+(I<<15&4294967295|I>>>17),I=k+(A^(R|~_))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+A&4294967295}n.prototype.v=function(T,_){_===void 0&&(_=T.length);const k=_-this.blockSize,C=this.C;let R=this.h,A=0;for(;A<_;){if(R==0)for(;A<=k;)s(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(C[R++]=T.charCodeAt(A++),R==this.blockSize){s(this,C),R=0;break}}else for(;A<_;)if(C[R++]=T[A++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=_},n.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var k=T.length-8;k<T.length;++k)T[k]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,k=0;k<4;++k)for(let C=0;C<32;C+=8)T[_++]=this.g[k]>>>C&255;return T};function a(T,_){var k=l;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=_(T)}function o(T,_){this.h=_;const k=[];let C=!0;for(let R=T.length-1;R>=0;R--){const A=T[R]|0;C&&A==_||(k[R]=A,C=!1)}this.g=k}var l={};function u(T){return-128<=T&&T<128?a(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return x(d(-T));const _=[];let k=1;for(let C=0;T>=k;C++)_[C]=T/k|0,k*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return x(h(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(_,8));let C=f;for(let A=0;A<T.length;A+=8){var R=Math.min(8,T.length-A);const I=parseInt(T.substring(A,A+R),_);R<8?(R=d(Math.pow(_,R)),C=C.j(R).add(d(I))):(C=C.j(k),C=C.add(d(I)))}return C}var f=u(0),p=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(v(this))return-x(this).m();let T=0,_=1;for(let k=0;k<this.g.length;k++){const C=this.i(k);T+=(C>=0?C:4294967296+C)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S(this))return"0";if(v(this))return"-"+x(this).toString(T);const _=d(Math.pow(T,6));var k=this;let C="";for(;;){const R=P(k,_).g;k=w(k,R.j(_));let A=((k.g.length>0?k.g[0]:k.h)>>>0).toString(T);if(k=R,S(k))return A+C;for(;A.length<6;)A="0"+A;C=A+C}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function S(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=w(this,T),v(T)?-1:S(T)?0:1};function x(T){const _=T.g.length,k=[];for(let C=0;C<_;C++)k[C]=~T.g[C];return new o(k,~T.h).add(p)}t.abs=function(){return v(this)?x(this):this},t.add=function(T){const _=Math.max(this.g.length,T.g.length),k=[];let C=0;for(let R=0;R<=_;R++){let A=C+(this.i(R)&65535)+(T.i(R)&65535),I=(A>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);C=I>>>16,A&=65535,I&=65535,k[R]=I<<16|A}return new o(k,k[k.length-1]&-2147483648?-1:0)};function w(T,_){return T.add(x(_))}t.j=function(T){if(S(this)||S(T))return f;if(v(this))return v(T)?x(this).j(x(T)):x(x(this).j(T));if(v(T))return x(this.j(x(T)));if(this.l(y)<0&&T.l(y)<0)return d(this.m()*T.m());const _=this.g.length+T.g.length,k=[];for(var C=0;C<2*_;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(let R=0;R<T.g.length;R++){const A=this.i(C)>>>16,I=this.i(C)&65535,me=T.i(R)>>>16,re=T.i(R)&65535;k[2*C+2*R]+=I*re,b(k,2*C+2*R),k[2*C+2*R+1]+=A*re,b(k,2*C+2*R+1),k[2*C+2*R+1]+=I*me,b(k,2*C+2*R+1),k[2*C+2*R+2]+=A*me,b(k,2*C+2*R+2)}for(T=0;T<_;T++)k[T]=k[2*T+1]<<16|k[2*T];for(T=_;T<2*_;T++)k[T]=0;return new o(k,0)};function b(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function N(T,_){this.g=T,this.h=_}function P(T,_){if(S(_))throw Error("division by zero");if(S(T))return new N(f,f);if(v(T))return _=P(x(T),_),new N(x(_.g),x(_.h));if(v(_))return _=P(T,x(_)),new N(x(_.g),_.h);if(T.g.length>30){if(v(T)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var k=p,C=_;C.l(T)<=0;)k=L(k),C=L(C);var R=D(k,1),A=D(C,1);for(C=D(C,2),k=D(k,2);!S(C);){var I=A.add(C);I.l(T)<=0&&(R=R.add(k),A=I),C=D(C,1),k=D(k,1)}return _=w(T,R.j(_)),new N(R,_)}for(R=f;T.l(_)>=0;){for(k=Math.max(1,Math.floor(T.m()/_.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),A=d(k),I=A.j(_);v(I)||I.l(T)>0;)k-=C,A=d(k),I=A.j(_);S(A)&&(A=p),R=R.add(A),T=w(T,I)}return new N(R,T)}t.B=function(T){return P(this,T).h},t.and=function(T){const _=Math.max(this.g.length,T.g.length),k=[];for(let C=0;C<_;C++)k[C]=this.i(C)&T.i(C);return new o(k,this.h&T.h)},t.or=function(T){const _=Math.max(this.g.length,T.g.length),k=[];for(let C=0;C<_;C++)k[C]=this.i(C)|T.i(C);return new o(k,this.h|T.h)},t.xor=function(T){const _=Math.max(this.g.length,T.g.length),k=[];for(let C=0;C<_;C++)k[C]=this.i(C)^T.i(C);return new o(k,this.h^T.h)};function L(T){const _=T.g.length+1,k=[];for(let C=0;C<_;C++)k[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(k,T.h)}function D(T,_){const k=_>>5;_%=32;const C=T.g.length-k,R=[];for(let A=0;A<C;A++)R[A]=_>0?T.i(A+k)>>>_|T.i(A+k+1)<<32-_:T.i(A+k);return new o(R,T.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,c_=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Yn=o}).apply(typeof L0<"u"?L0:typeof self<"u"?self:typeof window<"u"?window:{});var Fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u_,Ua,d_,uc,wf,h_,f_,m_;(function(){var t,e=Object.defineProperty;function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fl=="object"&&Fl];for(var m=0;m<c.length;++m){var g=c[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var n=r(this);function s(c,m){if(m)e:{var g=n;c=c.split(".");for(var j=0;j<c.length-1;j++){var O=c[j];if(!(O in g))break e;g=g[O]}c=c[c.length-1],j=g[c],m=m(j),m!=j&&m!=null&&e(g,c,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(m){var g=[],j;for(j in m)Object.prototype.hasOwnProperty.call(m,j)&&g.push([j,m[j]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function u(c,m,g){return c.call.apply(c.bind,arguments)}function d(c,m,g){return d=u,d.apply(null,arguments)}function h(c,m){var g=Array.prototype.slice.call(arguments,1);return function(){var j=g.slice();return j.push.apply(j,arguments),c.apply(this,j)}}function f(c,m){function g(){}g.prototype=m.prototype,c.Z=m.prototype,c.prototype=new g,c.prototype.constructor=c,c.Ob=function(j,O,M){for(var B=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)B[ne-2]=arguments[ne];return m.prototype[O].apply(j,B)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){const m=c.length;if(m>0){const g=Array(m);for(let j=0;j<m;j++)g[j]=c[j];return g}return[]}function S(c,m){for(let j=1;j<arguments.length;j++){const O=arguments[j];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=c.length||0;const M=O.length||0;c.length=g+M;for(let B=0;B<M;B++)c[g+B]=O[B]}else c.push(O)}}class v{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function x(c){o.setTimeout(()=>{throw c},0)}function w(){var c=T;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class b{constructor(){this.h=this.g=null}add(m,g){const j=N.get();j.set(m,g),this.h?this.h.next=j:this.g=j,this.h=j}}var N=new v(()=>new P,c=>c.reset());class P{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,D=!1,T=new b,_=()=>{const c=Promise.resolve(void 0);L=()=>{c.then(k)}};function k(){for(var c;c=w();){try{c.h.call(c.g)}catch(g){x(g)}var m=N;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}D=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};o.addEventListener("test",g,m),o.removeEventListener("test",g,m)}catch{}return c}();function I(c){return/^[\s\xa0]*$/.test(c)}function me(c,m){R.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}f(me,R),me.prototype.init=function(c,m){const g=this.type=c.type,j=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(g=="mouseover"?m=c.fromElement:g=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),et=0;function St(c,m,g,j,O){this.listener=c,this.proxy=null,this.src=m,this.type=g,this.capture=!!j,this.ha=O,this.key=++et,this.da=this.fa=!1}function $(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function K(c,m,g){for(const j in c)m.call(g,c[j],j,c)}function te(c,m){for(const g in c)m.call(void 0,c[g],g,c)}function ve(c){const m={};for(const g in c)m[g]=c[g];return m}const Ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xs(c,m){let g,j;for(let O=1;O<arguments.length;O++){j=arguments[O];for(g in j)c[g]=j[g];for(let M=0;M<Ue.length;M++)g=Ue[M],Object.prototype.hasOwnProperty.call(j,g)&&(c[g]=j[g])}}function Gt(c){this.src=c,this.g={},this.h=0}Gt.prototype.add=function(c,m,g,j,O){const M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);const B=or(c,m,j,O);return B>-1?(m=c[B],g||(m.fa=!1)):(m=new St(m,this.src,M,!!j,O),m.fa=g,c.push(m)),m};function ys(c,m){const g=m.type;if(g in c.g){var j=c.g[g],O=Array.prototype.indexOf.call(j,m,void 0),M;(M=O>=0)&&Array.prototype.splice.call(j,O,1),M&&($(m),c.g[g].length==0&&(delete c.g[g],c.h--))}}function or(c,m,g,j){for(let O=0;O<c.length;++O){const M=c[O];if(!M.da&&M.listener==m&&M.capture==!!g&&M.ha==j)return O}return-1}var wn="closure_lm_"+(Math.random()*1e6|0),cd={};function Wp(c,m,g,j,O){if(Array.isArray(m)){for(let M=0;M<m.length;M++)Wp(c,m[M],g,j,O);return null}return g=Qp(g),c&&c[re]?c.J(m,g,l(j)?!!j.capture:!1,O):e1(c,m,g,!1,j,O)}function e1(c,m,g,j,O,M){if(!m)throw Error("Invalid event type");const B=l(O)?!!O.capture:!!O;let ne=dd(c);if(ne||(c[wn]=ne=new Gt(c)),g=ne.add(m,g,j,B,M),g.proxy)return g;if(j=t1(),g.proxy=j,j.src=c,j.listener=g,c.addEventListener)A||(O=B),O===void 0&&(O=!1),c.addEventListener(m.toString(),j,O);else if(c.attachEvent)c.attachEvent(Kp(m.toString()),j);else if(c.addListener&&c.removeListener)c.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return g}function t1(){function c(g){return m.call(c.src,c.listener,g)}const m=r1;return c}function Gp(c,m,g,j,O){if(Array.isArray(m))for(var M=0;M<m.length;M++)Gp(c,m[M],g,j,O);else j=l(j)?!!j.capture:!!j,g=Qp(g),c&&c[re]?(c=c.i,M=String(m).toString(),M in c.g&&(m=c.g[M],g=or(m,g,j,O),g>-1&&($(m[g]),Array.prototype.splice.call(m,g,1),m.length==0&&(delete c.g[M],c.h--)))):c&&(c=dd(c))&&(m=c.g[m.toString()],c=-1,m&&(c=or(m,g,j,O)),(g=c>-1?m[c]:null)&&ud(g))}function ud(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[re])ys(m.i,c);else{var g=c.type,j=c.proxy;m.removeEventListener?m.removeEventListener(g,j,c.capture):m.detachEvent?m.detachEvent(Kp(g),j):m.addListener&&m.removeListener&&m.removeListener(j),(g=dd(m))?(ys(g,c),g.h==0&&(g.src=null,m[wn]=null)):$(c)}}}function Kp(c){return c in cd?cd[c]:cd[c]="on"+c}function r1(c,m){if(c.da)c=!0;else{m=new me(m,this);const g=c.listener,j=c.ha||c.src;c.fa&&ud(c),c=g.call(j,m)}return c}function dd(c){return c=c[wn],c instanceof Gt?c:null}var hd="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qp(c){return typeof c=="function"?c:(c[hd]||(c[hd]=function(m){return c.handleEvent(m)}),c[hd])}function dt(){C.call(this),this.i=new Gt(this),this.M=this,this.G=null}f(dt,C),dt.prototype[re]=!0,dt.prototype.removeEventListener=function(c,m,g,j){Gp(this,c,m,g,j)};function bt(c,m){var g,j=c.G;if(j)for(g=[];j;j=j.G)g.push(j);if(c=c.M,j=m.type||m,typeof m=="string")m=new R(m,c);else if(m instanceof R)m.target=m.target||c;else{var O=m;m=new R(j,c),xs(m,O)}O=!0;let M,B;if(g)for(B=g.length-1;B>=0;B--)M=m.g=g[B],O=ll(M,j,!0,m)&&O;if(M=m.g=c,O=ll(M,j,!0,m)&&O,O=ll(M,j,!1,m)&&O,g)for(B=0;B<g.length;B++)M=m.g=g[B],O=ll(M,j,!1,m)&&O}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const g=c.g[m];for(let j=0;j<g.length;j++)$(g[j]);delete c.g[m],c.h--}}this.G=null},dt.prototype.J=function(c,m,g,j){return this.i.add(String(c),m,!1,g,j)},dt.prototype.K=function(c,m,g,j){return this.i.add(String(c),m,!0,g,j)};function ll(c,m,g,j){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let O=!0;for(let M=0;M<m.length;++M){const B=m[M];if(B&&!B.da&&B.capture==g){const ne=B.listener,Qe=B.ha||B.src;B.fa&&ys(c.i,B),O=ne.call(Qe,j)!==!1&&O}}return O&&!j.defaultPrevented}function n1(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(c,m||0)}function Yp(c){c.g=n1(()=>{c.g=null,c.i&&(c.i=!1,Yp(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class s1 extends C{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Yp(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ca(c){C.call(this),this.h=c,this.g={}}f(ca,C);var Jp=[];function Xp(c){K(c.g,function(m,g){this.g.hasOwnProperty(g)&&ud(m)},c),c.g={}}ca.prototype.N=function(){ca.Z.N.call(this),Xp(this)},ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fd=o.JSON.stringify,i1=o.JSON.parse,a1=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Zp(){}function eg(){}var ua={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function md(){R.call(this,"d")}f(md,R);function pd(){R.call(this,"c")}f(pd,R);var vs={},tg=null;function cl(){return tg=tg||new dt}vs.Ia="serverreachability";function rg(c){R.call(this,vs.Ia,c)}f(rg,R);function da(c){const m=cl();bt(m,new rg(m))}vs.STAT_EVENT="statevent";function ng(c,m){R.call(this,vs.STAT_EVENT,c),this.stat=m}f(ng,R);function _t(c){const m=cl();bt(m,new ng(m,c))}vs.Ja="timingevent";function sg(c,m){R.call(this,vs.Ja,c),this.size=m}f(sg,R);function ha(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},m)}function fa(){this.g=!0}fa.prototype.ua=function(){this.g=!1};function o1(c,m,g,j,O,M){c.info(function(){if(c.g)if(M){var B="",ne=M.split("&");for(let we=0;we<ne.length;we++){var Qe=ne[we].split("=");if(Qe.length>1){const tt=Qe[0];Qe=Qe[1];const Nr=tt.split("_");B=Nr.length>=2&&Nr[1]=="type"?B+(tt+"="+Qe+"&"):B+(tt+"=redacted&")}}}else B=null;else B=M;return"XMLHTTP REQ ("+j+") [attempt "+O+"]: "+m+`
`+g+`
`+B})}function l1(c,m,g,j,O,M,B){c.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+O+"]: "+m+`
`+g+`
`+M+" "+B})}function ni(c,m,g,j){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+u1(c,g)+(j?" "+j:"")})}function c1(c,m){c.info(function(){return"TIMEOUT: "+m})}fa.prototype.info=function(){};function u1(c,m){if(!c.g)return m;if(!m)return null;try{const M=JSON.parse(m);if(M){for(c=0;c<M.length;c++)if(Array.isArray(M[c])){var g=M[c];if(!(g.length<2)){var j=g[1];if(Array.isArray(j)&&!(j.length<1)){var O=j[0];if(O!="noop"&&O!="stop"&&O!="close")for(let B=1;B<j.length;B++)j[B]=""}}}}return fd(M)}catch{return m}}var ul={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ig={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ag;function gd(){}f(gd,Zp),gd.prototype.g=function(){return new XMLHttpRequest},ag=new gd;function ma(c){return encodeURIComponent(String(c))}function d1(c){var m=1;c=c.split(":");const g=[];for(;m>0&&c.length;)g.push(c.shift()),m--;return c.length&&g.push(c.join(":")),g}function bn(c,m,g,j){this.j=c,this.i=m,this.l=g,this.S=j||1,this.V=new ca(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new og}function og(){this.i=null,this.g="",this.h=!1}var lg={},xd={};function yd(c,m,g){c.M=1,c.A=hl(_r(m)),c.u=g,c.R=!0,cg(c,null)}function cg(c,m){c.F=Date.now(),dl(c),c.B=_r(c.A);var g=c.B,j=c.S;Array.isArray(j)||(j=[String(j)]),_g(g.i,"t",j),c.C=0,g=c.j.L,c.h=new og,c.g=Ug(c.j,g?m:null,!c.u),c.P>0&&(c.O=new s1(d(c.Y,c,c.g),c.P)),m=c.V,g=c.g,j=c.ba;var O="readystatechange";Array.isArray(O)||(O&&(Jp[0]=O.toString()),O=Jp);for(let M=0;M<O.length;M++){const B=Wp(g,O[M],j||m.handleEvent,!1,m.h||m);if(!B)break;m.g[B.key]=B}m=c.J?ve(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),da(),o1(c.i,c.v,c.B,c.l,c.S,c.u)}bn.prototype.ba=function(c){c=c.target;const m=this.O;m&&jn(c)==3?m.j():this.Y(c)},bn.prototype.Y=function(c){try{if(c==this.g)e:{const ne=jn(this.g),Qe=this.g.ya(),we=this.g.ca();if(!(ne<3)&&(ne!=3||this.g&&(this.h.h||this.g.la()||Ig(this.g)))){this.K||ne!=4||Qe==7||(Qe==8||we<=0?da(3):da(2)),vd(this);var m=this.g.ca();this.X=m;var g=h1(this);if(this.o=m==200,l1(this.i,this.v,this.B,this.l,this.S,ne,m),this.o){if(this.U&&!this.L){t:{if(this.g){var j,O=this.g;if((j=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(j)){var M=j;break t}}M=null}if(c=M)ni(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wd(this,c);else{this.o=!1,this.m=3,_t(12),ws(this),pa(this);break e}}if(this.R){c=!0;let tt;for(;!this.K&&this.C<g.length;)if(tt=f1(this,g),tt==xd){ne==4&&(this.m=4,_t(14),c=!1),ni(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==lg){this.m=4,_t(15),ni(this.i,this.l,g,"[Invalid Chunk]"),c=!1;break}else ni(this.i,this.l,tt,null),wd(this,tt);if(ug(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||g.length!=0||this.h.h||(this.m=1,_t(16),c=!1),this.o=this.o&&c,!c)ni(this.i,this.l,g,"[Invalid Chunked Response]"),ws(this),pa(this);else if(g.length>0&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.aa&&!B.P&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),kd(B),B.P=!0,_t(11))}}else ni(this.i,this.l,g,null),wd(this,g);ne==4&&ws(this),this.o&&!this.K&&(ne==4?Lg(this.j,this):(this.o=!1,dl(this)))}else S1(this.g),m==400&&g.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),ws(this),pa(this)}}}catch{}finally{}};function h1(c){if(!ug(c))return c.g.la();const m=Ig(c.g);if(m==="")return"";let g="";const j=m.length,O=jn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ws(c),pa(c),"";c.h.i=new o.TextDecoder}for(let M=0;M<j;M++)c.h.h=!0,g+=c.h.i.decode(m[M],{stream:!(O&&M==j-1)});return m.length=0,c.h.g+=g,c.C=0,c.h.g}function ug(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function f1(c,m){var g=c.C,j=m.indexOf(`
`,g);return j==-1?xd:(g=Number(m.substring(g,j)),isNaN(g)?lg:(j+=1,j+g>m.length?xd:(m=m.slice(j,j+g),c.C=j+g,m)))}bn.prototype.cancel=function(){this.K=!0,ws(this)};function dl(c){c.T=Date.now()+c.H,dg(c,c.H)}function dg(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ha(d(c.aa,c),m)}function vd(c){c.D&&(o.clearTimeout(c.D),c.D=null)}bn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(c1(this.i,this.B),this.M!=2&&(da(),_t(17)),ws(this),this.m=2,pa(this)):dg(this,this.T-c)};function pa(c){c.j.I==0||c.K||Lg(c.j,c)}function ws(c){vd(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,Xp(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function wd(c,m){try{var g=c.j;if(g.I!=0&&(g.g==c||bd(g.h,c))){if(!c.L&&bd(g.h,c)&&g.I==3){try{var j=g.Ba.g.parse(m)}catch{j=null}if(Array.isArray(j)&&j.length==3){var O=j;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<c.F)xl(g),pl(g);else break e;Sd(g),_t(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ha(d(g.Va,g),6e3));mg(g.h)<=1&&g.ta&&(g.ta=void 0)}else _s(g,11)}else if((c.L||g.g==c)&&xl(g),!I(m))for(O=g.Ba.g.parse(m),m=0;m<O.length;m++){let we=O[m];const tt=we[0];if(!(tt<=g.K))if(g.K=tt,we=we[1],g.I==2)if(we[0]=="c"){g.M=we[1],g.ba=we[2];const Nr=we[3];Nr!=null&&(g.ka=Nr,g.j.info("VER="+g.ka));const Ns=we[4];Ns!=null&&(g.za=Ns,g.j.info("SVER="+g.za));const En=we[5];En!=null&&typeof En=="number"&&En>0&&(j=1.5*En,g.O=j,g.j.info("backChannelRequestTimeoutMs_="+j)),j=g;const Tn=c.g;if(Tn){const vl=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var M=j.h;M.g||vl.indexOf("spdy")==-1&&vl.indexOf("quic")==-1&&vl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(_d(M,M.h),M.h=null))}if(j.G){const Id=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Id&&(j.wa=Id,Ne(j.J,j.G,Id))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-c.F,g.j.info("Handshake RTT: "+g.T+"ms")),j=g;var B=c;if(j.na=Fg(j,j.L?j.ba:null,j.W),B.L){pg(j.h,B);var ne=B,Qe=j.O;Qe&&(ne.H=Qe),ne.D&&(vd(ne),dl(ne)),j.g=B}else Dg(j);g.i.length>0&&gl(g)}else we[0]!="stop"&&we[0]!="close"||_s(g,7);else g.I==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?_s(g,7):Td(g):we[0]!="noop"&&g.l&&g.l.qa(we),g.A=0)}}da(4)}catch{}}var m1=class{constructor(c,m){this.g=c,this.map=m}};function hg(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fg(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function mg(c){return c.h?1:c.g?c.g.size:0}function bd(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function _d(c,m){c.g?c.g.add(m):c.h=m}function pg(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}hg.prototype.cancel=function(){if(this.i=gg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function gg(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const g of c.g.values())m=m.concat(g.G);return m}return y(c.i)}var xg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function p1(c,m){if(c){c=c.split("&");for(let g=0;g<c.length;g++){const j=c[g].indexOf("=");let O,M=null;j>=0?(O=c[g].substring(0,j),M=c[g].substring(j+1)):O=c[g],m(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function _n(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof _n?(this.l=c.l,ga(this,c.j),this.o=c.o,this.g=c.g,xa(this,c.u),this.h=c.h,Nd(this,Ng(c.i)),this.m=c.m):c&&(m=String(c).match(xg))?(this.l=!1,ga(this,m[1]||"",!0),this.o=ya(m[2]||""),this.g=ya(m[3]||"",!0),xa(this,m[4]),this.h=ya(m[5]||"",!0),Nd(this,m[6]||"",!0),this.m=ya(m[7]||"")):(this.l=!1,this.i=new wa(null,this.l))}_n.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(va(m,yg,!0),":");var g=this.g;return(g||m=="file")&&(c.push("//"),(m=this.o)&&c.push(va(m,yg,!0),"@"),c.push(ma(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&c.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(va(g,g.charAt(0)=="/"?y1:x1,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",va(g,w1)),c.join("")},_n.prototype.resolve=function(c){const m=_r(this);let g=!!c.j;g?ga(m,c.j):g=!!c.o,g?m.o=c.o:g=!!c.g,g?m.g=c.g:g=c.u!=null;var j=c.h;if(g)xa(m,c.u);else if(g=!!c.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var O=m.h.lastIndexOf("/");O!=-1&&(j=m.h.slice(0,O+1)+j)}if(O=j,O==".."||O==".")j="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){j=O.lastIndexOf("/",0)==0,O=O.split("/");const M=[];for(let B=0;B<O.length;){const ne=O[B++];ne=="."?j&&B==O.length&&M.push(""):ne==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),j&&B==O.length&&M.push("")):(M.push(ne),j=!0)}j=M.join("/")}else j=O}return g?m.h=j:g=c.i.toString()!=="",g?Nd(m,Ng(c.i)):g=!!c.m,g&&(m.m=c.m),m};function _r(c){return new _n(c)}function ga(c,m,g){c.j=g?ya(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function xa(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Nd(c,m,g){m instanceof wa?(c.i=m,b1(c.i,c.l)):(g||(m=va(m,v1)),c.i=new wa(m,c.l))}function Ne(c,m,g){c.i.set(m,g)}function hl(c){return Ne(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ya(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function va(c,m,g){return typeof c=="string"?(c=encodeURI(c).replace(m,g1),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function g1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var yg=/[#\/\?@]/g,x1=/[#\?:]/g,y1=/[#\?]/g,v1=/[#\?@]/g,w1=/#/g;function wa(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function bs(c){c.g||(c.g=new Map,c.h=0,c.i&&p1(c.i,function(m,g){c.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=wa.prototype,t.add=function(c,m){bs(this),this.i=null,c=si(this,c);let g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(m),this.h+=1,this};function vg(c,m){bs(c),m=si(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function wg(c,m){return bs(c),m=si(c,m),c.g.has(m)}t.forEach=function(c,m){bs(this),this.g.forEach(function(g,j){g.forEach(function(O){c.call(m,O,j,this)},this)},this)};function bg(c,m){bs(c);let g=[];if(typeof m=="string")wg(c,m)&&(g=g.concat(c.g.get(si(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)g=g.concat(c[m]);return g}t.set=function(c,m){return bs(this),this.i=null,c=si(this,c),wg(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=bg(this,c),c.length>0?String(c[0]):m):m};function _g(c,m,g){vg(c,m),g.length>0&&(c.i=null,c.g.set(si(c,m),y(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let j=0;j<m.length;j++){var g=m[j];const O=ma(g);g=bg(this,g);for(let M=0;M<g.length;M++){let B=O;g[M]!==""&&(B+="="+ma(g[M])),c.push(B)}}return this.i=c.join("&")};function Ng(c){const m=new wa;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function si(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function b1(c,m){m&&!c.j&&(bs(c),c.i=null,c.g.forEach(function(g,j){const O=j.toLowerCase();j!=O&&(vg(this,j),_g(this,O,g))},c)),c.j=m}function _1(c,m){const g=new fa;if(o.Image){const j=new Image;j.onload=h(Nn,g,"TestLoadImage: loaded",!0,m,j),j.onerror=h(Nn,g,"TestLoadImage: error",!1,m,j),j.onabort=h(Nn,g,"TestLoadImage: abort",!1,m,j),j.ontimeout=h(Nn,g,"TestLoadImage: timeout",!1,m,j),o.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=c}else m(!1)}function N1(c,m){const g=new fa,j=new AbortController,O=setTimeout(()=>{j.abort(),Nn(g,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:j.signal}).then(M=>{clearTimeout(O),M.ok?Nn(g,"TestPingServer: ok",!0,m):Nn(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(O),Nn(g,"TestPingServer: error",!1,m)})}function Nn(c,m,g,j,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),j(g)}catch{}}function j1(){this.g=new a1}function jd(c){this.i=c.Sb||null,this.h=c.ab||!1}f(jd,Zp),jd.prototype.g=function(){return new fl(this.i,this.h)};function fl(c,m){dt.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(fl,dt),t=fl.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,_a(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ba(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_a(this)),this.g&&(this.readyState=3,_a(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jg(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function jg(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?ba(this):_a(this),this.readyState==3&&jg(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,ba(this))},t.Na=function(c){this.g&&(this.response=c,ba(this))},t.ga=function(){this.g&&ba(this)};function ba(c){c.readyState=4,c.l=null,c.j=null,c.B=null,_a(c)}t.setRequestHeader=function(c,m){this.A.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=m.next();return c.join(`\r
`)};function _a(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Eg(c){let m="";return K(c,function(g,j){m+=j,m+=":",m+=g,m+=`\r
`}),m}function Ed(c,m,g){e:{for(j in g){var j=!1;break e}j=!0}j||(g=Eg(g),typeof c=="string"?g!=null&&ma(g):Ne(c,m,g))}function Oe(c){dt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Oe,dt);var E1=/^https?$/i,T1=["POST","PUT"];t=Oe.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,m,g,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ag.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(M){Tg(this,M);return}if(c=g||"",g=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var O in j)g.set(O,j[O]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const M of j.keys())g.set(M,j.get(M));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),O=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(T1,m,void 0)>=0)||j||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,B]of g)this.g.setRequestHeader(M,B);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(M){Tg(this,M)}};function Tg(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Sg(c),ml(c)}function Sg(c){c.A||(c.A=!0,bt(c,"complete"),bt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,bt(this,"complete"),bt(this,"abort"),ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ml(this,!0)),Oe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?kg(this):this.Xa())},t.Xa=function(){kg(this)};function kg(c){if(c.h&&typeof a<"u"){if(c.v&&jn(c)==4)setTimeout(c.Ca.bind(c),0);else if(bt(c,"readystatechange"),jn(c)==4){c.h=!1;try{const M=c.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var j;if(j=M===0){let B=String(c.D).match(xg)[1]||null;!B&&o.self&&o.self.location&&(B=o.self.location.protocol.slice(0,-1)),j=!E1.test(B?B.toLowerCase():"")}g=j}if(g)bt(c,"complete"),bt(c,"success");else{c.o=6;try{var O=jn(c)>2?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.ca()+"]",Sg(c)}}finally{ml(c)}}}}function ml(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const g=c.g;c.g=null,m||bt(c,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function jn(c){return c.g?c.g.readyState:0}t.ca=function(){try{return jn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),i1(m)}};function Ig(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function S1(c){const m={};c=(c.g&&jn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<c.length;j++){if(I(c[j]))continue;var g=d1(c[j]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=m[O]||[];m[O]=M,M.push(g)}te(m,function(j){return j.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Na(c,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||m}function Cg(c){this.za=0,this.i=[],this.j=new fa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Na("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Na("baseRetryDelayMs",5e3,c),this.Za=Na("retryDelaySeedMs",1e4,c),this.Ta=Na("forwardChannelMaxRetries",2,c),this.va=Na("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new hg(c&&c.concurrentRequestLimit),this.Ba=new j1,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Cg.prototype,t.ka=8,t.I=1,t.connect=function(c,m,g,j){_t(0),this.W=c,this.H=m||{},g&&j!==void 0&&(this.H.OSID=g,this.H.OAID=j),this.F=this.X,this.J=Fg(this,null,this.W),gl(this)};function Td(c){if(Ag(c),c.I==3){var m=c.V++,g=_r(c.J);if(Ne(g,"SID",c.M),Ne(g,"RID",m),Ne(g,"TYPE","terminate"),ja(c,g),m=new bn(c,c.j,m),m.M=2,m.A=hl(_r(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=m.A,g=!0),g||(m.g=Ug(m.j,null),m.g.ea(m.A)),m.F=Date.now(),dl(m)}Vg(c)}function pl(c){c.g&&(kd(c),c.g.cancel(),c.g=null)}function Ag(c){pl(c),c.v&&(o.clearTimeout(c.v),c.v=null),xl(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function gl(c){if(!fg(c.h)&&!c.m){c.m=!0;var m=c.Ea;L||_(),D||(L(),D=!0),T.add(m,c),c.D=0}}function k1(c,m){return mg(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ha(d(c.Ea,c,m),Mg(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const O=new bn(this,this.j,c);let M=this.o;if(this.U&&(M?(M=ve(M),xs(M,this.U)):M=this.U),this.u!==null||this.R||(O.J=M,M=null),this.S)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var j=this.i[g];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(m+=j,m>4096){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=Pg(this,O,m),g=_r(this.J),Ne(g,"RID",c),Ne(g,"CVER",22),this.G&&Ne(g,"X-HTTP-Session-Id",this.G),ja(this,g),M&&(this.R?m="headers="+ma(Eg(M))+"&"+m:this.u&&Ed(g,this.u,M)),_d(this.h,O),this.Ra&&Ne(g,"TYPE","init"),this.S?(Ne(g,"$req",m),Ne(g,"SID","null"),O.U=!0,yd(O,g,null)):yd(O,g,m),this.I=2}}else this.I==3&&(c?Rg(this,c):this.i.length==0||fg(this.h)||Rg(this))};function Rg(c,m){var g;m?g=m.l:g=c.V++;const j=_r(c.J);Ne(j,"SID",c.M),Ne(j,"RID",g),Ne(j,"AID",c.K),ja(c,j),c.u&&c.o&&Ed(j,c.u,c.o),g=new bn(c,c.j,g,c.D+1),c.u===null&&(g.J=c.o),m&&(c.i=m.G.concat(c.i)),m=Pg(c,g,1e3),g.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),_d(c.h,g),yd(g,j,m)}function ja(c,m){c.H&&K(c.H,function(g,j){Ne(m,j,g)}),c.l&&K({},function(g,j){Ne(m,j,g)})}function Pg(c,m,g){g=Math.min(c.i.length,g);const j=c.l?d(c.l.Ka,c.l,c):null;e:{var O=c.i;let ne=-1;for(;;){const Qe=["count="+g];ne==-1?g>0?(ne=O[0].g,Qe.push("ofs="+ne)):ne=0:Qe.push("ofs="+ne);let we=!0;for(let tt=0;tt<g;tt++){var M=O[tt].g;const Nr=O[tt].map;if(M-=ne,M<0)ne=Math.max(0,O[tt].g-100),we=!1;else try{M="req"+M+"_"||"";try{var B=Nr instanceof Map?Nr:Object.entries(Nr);for(const[Ns,En]of B){let Tn=En;l(En)&&(Tn=fd(En)),Qe.push(M+Ns+"="+encodeURIComponent(Tn))}}catch(Ns){throw Qe.push(M+"type="+encodeURIComponent("_badmap")),Ns}}catch{j&&j(Nr)}}if(we){B=Qe.join("&");break e}}B=void 0}return c=c.i.splice(0,g),m.G=c,B}function Dg(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;L||_(),D||(L(),D=!0),T.add(m,c),c.A=0}}function Sd(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ha(d(c.Da,c),Mg(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Og(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ha(d(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),pl(this),Og(this))};function kd(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function Og(c){c.g=new bn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=_r(c.na);Ne(m,"RID","rpc"),Ne(m,"SID",c.M),Ne(m,"AID",c.K),Ne(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ne(m,"TO",c.ia),Ne(m,"TYPE","xmlhttp"),ja(c,m),c.u&&c.o&&Ed(m,c.u,c.o),c.O&&(c.g.H=c.O);var g=c.g;c=c.ba,g.M=1,g.A=hl(_r(m)),g.u=null,g.R=!0,cg(g,c)}t.Va=function(){this.C!=null&&(this.C=null,pl(this),Sd(this),_t(19))};function xl(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Lg(c,m){var g=null;if(c.g==m){xl(c),kd(c),c.g=null;var j=2}else if(bd(c.h,m))g=m.G,pg(c.h,m),j=1;else return;if(c.I!=0){if(m.o)if(j==1){g=m.u?m.u.length:0,m=Date.now()-m.F;var O=c.D;j=cl(),bt(j,new sg(j,g)),gl(c)}else Dg(c);else if(O=m.m,O==3||O==0&&m.X>0||!(j==1&&k1(c,m)||j==2&&Sd(c)))switch(g&&g.length>0&&(m=c.h,m.i=m.i.concat(g)),O){case 1:_s(c,5);break;case 4:_s(c,10);break;case 3:_s(c,6);break;default:_s(c,2)}}}function Mg(c,m){let g=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(g*=2),g*m}function _s(c,m){if(c.j.info("Error code "+m),m==2){var g=d(c.bb,c),j=c.Ua;const O=!j;j=new _n(j||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ga(j,"https"),hl(j),O?_1(j.toString(),g):N1(j.toString(),g)}else _t(2);c.I=0,c.l&&c.l.pa(m),Vg(c),Ag(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Vg(c){if(c.I=0,c.ja=[],c.l){const m=gg(c.h);(m.length!=0||c.i.length!=0)&&(S(c.ja,m),S(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function Fg(c,m,g){var j=g instanceof _n?_r(g):new _n(g);if(j.g!="")m&&(j.g=m+"."+j.g),xa(j,j.u);else{var O=o.location;j=O.protocol,m=m?m+"."+O.hostname:O.hostname,O=+O.port;const M=new _n(null);j&&ga(M,j),m&&(M.g=m),O&&xa(M,O),g&&(M.h=g),j=M}return g=c.G,m=c.wa,g&&m&&Ne(j,g,m),Ne(j,"VER",c.ka),ja(c,j),j}function Ug(c,m,g){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new Oe(new jd({ab:g})):new Oe(c.ma),m.Fa(c.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bg(){}t=Bg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function yl(){}yl.prototype.g=function(c,m){return new Lt(c,m)};function Lt(c,m){dt.call(this),this.g=new Cg(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!I(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!I(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new ii(this)}f(Lt,dt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Td(this.g)},Lt.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.v&&(g={},g.__data__=fd(c),c=g);m.i.push(new m1(m.Ya++,c)),m.I==3&&gl(m)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Td(this.g),delete this.g,Lt.Z.N.call(this)};function zg(c){md.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const g in m){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}f(zg,md);function $g(){pd.call(this),this.status=1}f($g,pd);function ii(c){this.g=c}f(ii,Bg),ii.prototype.ra=function(){bt(this.g,"a")},ii.prototype.qa=function(c){bt(this.g,new zg(c))},ii.prototype.pa=function(c){bt(this.g,new $g)},ii.prototype.oa=function(){bt(this.g,"b")},yl.prototype.createWebChannel=yl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,m_=function(){return new yl},f_=function(){return cl()},h_=vs,wf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,uc=ul,ig.COMPLETE="complete",d_=ig,eg.EventType=ua,ua.OPEN="a",ua.CLOSE="b",ua.ERROR="c",ua.MESSAGE="d",dt.prototype.listen=dt.prototype.J,Ua=eg,Oe.prototype.listenOnce=Oe.prototype.K,Oe.prototype.getLastError=Oe.prototype.Ha,Oe.prototype.getLastErrorCode=Oe.prototype.ya,Oe.prototype.getStatus=Oe.prototype.ca,Oe.prototype.getResponseJson=Oe.prototype.La,Oe.prototype.getResponseText=Oe.prototype.la,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Fa,u_=Oe}).apply(typeof Fl<"u"?Fl:typeof self<"u"?self:typeof window<"u"?window:{});const M0="@firebase/firestore",V0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Bm("@firebase/firestore");function li(){return Gs.logLevel}function H(t,...e){if(Gs.logLevel<=ae.DEBUG){const r=e.map(Xm);Gs.debug(`Firestore (${sa}): ${t}`,...r)}}function hn(t,...e){if(Gs.logLevel<=ae.ERROR){const r=e.map(Xm);Gs.error(`Firestore (${sa}): ${t}`,...r)}}function $i(t,...e){if(Gs.logLevel<=ae.WARN){const r=e.map(Xm);Gs.warn(`Firestore (${sa}): ${t}`,...r)}}function Xm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,p_(t,n,r)}function p_(t,e,r){let n=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw hn(n),new Error(n)}function ge(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||p_(e,s,n)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends $r{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(pt.UNAUTHENTICATED))}shutdown(){}}class AC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class RC{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){ge(this.o===void 0,42304);let n=this.i;const s=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let a=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new rn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new rn)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ge(typeof n.accessToken=="string",31837,{l:n}),new g_(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new pt(e)}}class PC{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DC{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new PC(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class F0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OC{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){ge(this.o===void 0,3512);const n=a=>{a.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new F0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(ge(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new F0(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=LC(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<r&&(n+=e.charAt(s[a]%62))}return n}}function oe(t,e){return t<e?-1:t>e?1:0}function bf(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const s=t.charAt(n),a=e.charAt(n);if(s!==a)return dh(s)===dh(a)?oe(s,a):dh(s)?1:-1}return oe(t.length,e.length)}const MC=55296,VC=57343;function dh(t){const e=t.charCodeAt(0);return e>=MC&&e<=VC}function qi(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="__name__";class Tr{constructor(e,r,n){r===void 0?r=0:r>e.length&&Y(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Y(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const a=Tr.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return oe(e.length,r.length)}static compareSegments(e,r){const n=Tr.isNumericId(e),s=Tr.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?Tr.extractNumericId(e).compare(Tr.extractNumericId(r)):bf(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yn.fromString(e.substring(4,e.length-2))}}class be extends Tr{construct(e,r,n){return new be(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new z(V.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new be(r)}static emptyPath(){return new be([])}}const FC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Tr{construct(e,r,n){return new ot(e,r,n)}static isValidIdentifier(e){return FC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U0}static keyField(){return new ot([U0])}static fromServerFormat(e){const r=[];let n="",s=0;const a=()=>{if(n.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new z(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(n+=l,s++):(a(),s++)}if(a(),o)throw new z(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(r)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(be.fromString(e))}static fromName(e){return new G(be.fromString(e).popFirst(5))}static empty(){return new G(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return be.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t,e,r){if(!r)throw new z(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UC(t,e,r,n){if(e===!0&&n===!0)throw new z(V.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function B0(t){if(!G.isDocumentKey(t))throw new z(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z0(t){if(G.isDocumentKey(t))throw new z(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function y_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Lu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function Ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Lu(t);throw new z(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function BC(t,e){if(e<=0)throw new z(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e){const r={typeString:t};return e&&(r.value=e),r}function Xo(t,e){if(!y_(t))throw new z(V.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(s&&typeof o!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new z(V.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=-62135596800,q0=1e6;class Ee{static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*q0);return new Ee(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<$0)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q0}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xo(e,Ee._jsonSchema))return new Ee(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ee._jsonSchemaVersion="firestore/timestamp/1.0",Ee._jsonSchema={type:We("string",Ee._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Ee(0,0))}static max(){return new Z(new Ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=-1;function zC(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(n===1e9?new Ee(r+1,0):new Ee(r,n));return new rs(s,G.empty(),e)}function $C(t){return new rs(t.readTime,t.key,Io)}class rs{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new rs(Z.min(),G.empty(),Io)}static max(){return new rs(Z.max(),G.empty(),Io)}}function qC(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=G.comparator(t.documentKey,e.documentKey),r!==0?r:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==HC)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new F((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof F?r:F.resolve(r)}catch(r){return F.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):F.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):F.reject(r)}static resolve(e){return new F((r,n)=>{r(e)})}static reject(e){return new F((r,n)=>{n(e)})}static waitFor(e){return new F((r,n)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},u=>n(u))}),o=!0,a===s&&r()})}static or(e){let r=F.resolve(!1);for(const n of e)r=r.next(s=>s?F.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,a)=>{n.push(r.call(this,s,a))}),this.waitFor(n)}static mapArray(e,r){return new F((n,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;r(e[d]).next(h=>{o[d]=h,++l,l===a&&n(o)},h=>s(h))}})}static doWhile(e,r){return new F((n,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):n()};a()})}}function GC(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=-1;function Vu(t){return t==null}function Jc(t){return t===0&&1/t==-1/0}function KC(t){return typeof t=="number"&&Number.isInteger(t)&&!Jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="";function QC(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=H0(e)),e=YC(t.get(r),e);return H0(e)}function YC(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case v_:r+="";break;default:r+=a}}return r}function H0(t){return t+v_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function ms(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function w_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,r){this.comparator=e,this.root=r||at.EMPTY}insert(e,r){return new De(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ul(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ul(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ul(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ul(this.root,e,this.comparator,!0)}}class Ul{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,r,n,s,a){this.key=e,this.value=r,this.color=n??at.RED,this.left=s??at.EMPTY,this.right=a??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,a){return new at(e??this.key,r??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,n),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,r,n,s,a){return this}insert(e,r,n){return new at(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new G0(this.data.getIterator())}getIteratorFrom(e){return new G0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ze(this.comparator);return r.data=e,r}}class G0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new zt([])}unionWith(e){let r=new Ze(ot.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new zt(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return qi(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new b_("Invalid base64 string: "+a):a}}(e);return new ut(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new ut(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const JC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(ge(!!t,39018),typeof t=="string"){let e=0;const r=JC.exec(t);if(ge(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="server_timestamp",N_="__type__",j_="__previous_value__",E_="__local_write_time__";function Fu(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[N_])==null?void 0:n.stringValue)===__}function Uu(t){const e=t.mapValue.fields[j_];return Fu(e)?Uu(e):e}function Co(t){const e=ns(t.mapValue.fields[E_].timestampValue);return new Ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,r,n,s,a,o,l,u,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Xc="(default)";class Ao{constructor(e,r){this.projectId=e,this.database=r||Xc}static empty(){return new Ao("","")}get isDefaultDatabase(){return this.database===Xc}isEqual(e){return e instanceof Ao&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="__type__",ZC="__max__",Bl={mapValue:{}},S_="__vector__",Zc="value";function is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fu(t)?4:t4(t)?9007199254740991:e4(t)?10:11:Y(28295,{value:t})}function Fr(t,e){if(t===e)return!0;const r=is(t);if(r!==is(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Co(t).isEqual(Co(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=ns(s.timestampValue),l=ns(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return ss(s.bytesValue).isEqual(ss(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Be(s.geoPointValue.latitude)===Be(a.geoPointValue.latitude)&&Be(s.geoPointValue.longitude)===Be(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Be(s.integerValue)===Be(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Be(s.doubleValue),l=Be(a.doubleValue);return o===l?Jc(o)===Jc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return qi(t.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(W0(o)!==W0(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Fr(o[u],l[u])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function Ro(t,e){return(t.values||[]).find(r=>Fr(r,e))!==void 0}function Hi(t,e){if(t===e)return 0;const r=is(t),n=is(e);if(r!==n)return oe(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=Be(a.integerValue||a.doubleValue),u=Be(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return K0(t.timestampValue,e.timestampValue);case 4:return K0(Co(t),Co(e));case 5:return bf(t.stringValue,e.stringValue);case 6:return function(a,o){const l=ss(a),u=ss(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=oe(l[d],u[d]);if(h!==0)return h}return oe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=oe(Be(a.latitude),Be(o.latitude));return l!==0?l:oe(Be(a.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Q0(t.arrayValue,e.arrayValue);case 10:return function(a,o){var p,y,S,v;const l=a.fields||{},u=o.fields||{},d=(p=l[Zc])==null?void 0:p.arrayValue,h=(y=u[Zc])==null?void 0:y.arrayValue,f=oe(((S=d==null?void 0:d.values)==null?void 0:S.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:Q0(d,h)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Bl.mapValue&&o===Bl.mapValue)return 0;if(a===Bl.mapValue)return 1;if(o===Bl.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=bf(u[f],h[f]);if(p!==0)return p;const y=Hi(l[u[f]],d[h[f]]);if(y!==0)return y}return oe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:r})}}function K0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const r=ns(t),n=ns(e),s=oe(r.seconds,n.seconds);return s!==0?s:oe(r.nanos,n.nanos)}function Q0(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const a=Hi(r[s],n[s]);if(a)return a}return oe(r.length,n.length)}function Wi(t){return _f(t)}function _f(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ns(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ss(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return G.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const a of r.values||[])s?s=!1:n+=",",n+=_f(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of n)a?a=!1:s+=",",s+=`${o}:${_f(r.fields[o])}`;return s+"}"}(t.mapValue):Y(61005,{value:t})}function dc(t){switch(is(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uu(t);return e?16+dc(e):16;case 5:return 2*t.stringValue.length;case 6:return ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,a)=>s+dc(a),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return ms(n.fields,(a,o)=>{s+=a.length+dc(o)}),s}(t.mapValue);default:throw Y(13486,{value:t})}}function eu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Nf(t){return!!t&&"integerValue"in t}function tp(t){return!!t&&"arrayValue"in t}function Y0(t){return!!t&&"nullValue"in t}function J0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hc(t){return!!t&&"mapValue"in t}function e4(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[T_])==null?void 0:n.stringValue)===S_}function no(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ms(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=no(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=no(t.arrayValue.values[r]);return e}return{...t}}function t4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ZC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!hc(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=no(r)}setAll(e){let r=ot.emptyPath(),n={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,n,s),n={},s=[],r=l.popLast()}o?n[l.lastSegment()]=no(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,s)}delete(e){const r=this.field(e.popLast());hc(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];hc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){ms(r,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new Ct(no(this.value))}}function k_(t){const e=[];return ms(t.fields,(r,n)=>{const s=new ot([r]);if(hc(n)){const a=k_(n.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,r,n,s,a,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new xt(e,0,Z.min(),Z.min(),Z.min(),Ct.empty(),0)}static newFoundDocument(e,r,n,s){return new xt(e,1,r,Z.min(),n,s,0)}static newNoDocument(e,r){return new xt(e,2,r,Z.min(),Z.min(),Ct.empty(),0)}static newUnknownDocument(e,r){return new xt(e,3,r,Z.min(),Z.min(),Ct.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,r){this.position=e,this.inclusive=r}}function X0(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?n=G.comparator(G.fromName(o.referenceValue),r.key):n=Hi(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function Z0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Fr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,r="asc"){this.field=e,this.dir=r}}function r4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I_=class{};class He extends I_{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new s4(e,r,n):r==="array-contains"?new o4(e,n):r==="in"?new l4(e,n):r==="not-in"?new c4(e,n):r==="array-contains-any"?new u4(e,n):new He(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new i4(e,n):new a4(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Hi(r,this.value)):r!==null&&is(this.value)===is(r)&&this.matchesComparison(Hi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends I_{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new yr(e,r)}matches(e){return C_(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function C_(t){return t.op==="and"}function A_(t){return n4(t)&&C_(t)}function n4(t){for(const e of t.filters)if(e instanceof yr)return!1;return!0}function jf(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Wi(t.value);if(A_(t))return t.filters.map(e=>jf(e)).join(",");{const e=t.filters.map(r=>jf(r)).join(",");return`${t.op}(${e})`}}function R_(t,e){return t instanceof He?function(n,s){return s instanceof He&&n.op===s.op&&n.field.isEqual(s.field)&&Fr(n.value,s.value)}(t,e):t instanceof yr?function(n,s){return s instanceof yr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,o,l)=>a&&R_(o,s.filters[l]),!0):!1}(t,e):void Y(19439)}function P_(t){return t instanceof He?function(r){return`${r.field.canonicalString()} ${r.op} ${Wi(r.value)}`}(t):t instanceof yr?function(r){return r.op.toString()+" {"+r.getFilters().map(P_).join(" ,")+"}"}(t):"Filter"}class s4 extends He{constructor(e,r,n){super(e,r,n),this.key=G.fromName(n.referenceValue)}matches(e){const r=G.comparator(e.key,this.key);return this.matchesComparison(r)}}class i4 extends He{constructor(e,r){super(e,"in",r),this.keys=D_("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class a4 extends He{constructor(e,r){super(e,"not-in",r),this.keys=D_("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function D_(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>G.fromName(n.referenceValue))}class o4 extends He{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return tp(r)&&Ro(r.arrayValue,this.value)}}class l4 extends He{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ro(this.value.arrayValue,r)}}class c4 extends He{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Ro(this.value.arrayValue,r)}}class u4 extends He{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!tp(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ro(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,r=null,n=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function ey(t,e=null,r=[],n=[],s=null,a=null,o=null){return new d4(t,e,r,n,s,a,o)}function rp(t){const e=ee(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>jf(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Vu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Wi(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Wi(n)).join(",")),e.Te=r}return e.Te}function np(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!r4(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!R_(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Z0(t.startAt,e.startAt)&&Z0(t.endAt,e.endAt)}function Ef(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,r=null,n=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function h4(t,e,r,n,s,a,o,l){return new ei(t,e,r,n,s,a,o,l)}function Bu(t){return new ei(t)}function ty(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sp(t){return t.collectionGroup!==null}function Di(t){const e=ee(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ze(ot.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Po(a,n))}),r.has(ot.keyField().canonicalString())||e.Ie.push(new Po(ot.keyField(),n))}return e.Ie}function Pr(t){const e=ee(t);return e.Ee||(e.Ee=f4(e,Di(t))),e.Ee}function f4(t,e){if(t.limitType==="F")return ey(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Po(s.field,a)});const r=t.endAt?new Gi(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Gi(t.startAt.position,t.startAt.inclusive):null;return ey(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Tf(t,e){const r=t.filters.concat([e]);return new ei(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function tu(t,e,r){return new ei(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function zu(t,e){return np(Pr(t),Pr(e))&&t.limitType===e.limitType}function O_(t){return`${rp(Pr(t))}|lt:${t.limitType}`}function ci(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>P_(s)).join(", ")}]`),Vu(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Wi(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Wi(s)).join(",")),`Target(${n})`}(Pr(t))}; limitType=${t.limitType})`}function $u(t,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):G.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,s){for(const a of Di(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,l,u){const d=X0(o,l,u);return o.inclusive?d<=0:d<0}(n.startAt,Di(n),s)||n.endAt&&!function(o,l,u){const d=X0(o,l,u);return o.inclusive?d>=0:d>0}(n.endAt,Di(n),s))}(t,e)}function m4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function L_(t){return(e,r)=>{let n=!1;for(const s of Di(t)){const a=p4(s,e,r);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function p4(t,e,r){const n=t.field.isKeyField()?G.comparator(e.key,r.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?Hi(u,d):Y(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,(r,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return w_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=new De(G.comparator);function fn(){return g4}const M_=new De(G.comparator);function Ba(...t){let e=M_;for(const r of t)e=e.insert(r.key,r);return e}function V_(t){let e=M_;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function As(){return so()}function F_(){return so()}function so(){return new ti(t=>t.toString(),(t,e)=>t.isEqual(e))}const x4=new De(G.comparator),y4=new Ze(G.comparator);function ce(...t){let e=y4;for(const r of t)e=e.add(r);return e}const v4=new Ze(oe);function w4(){return v4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function U_(t){return{integerValue:""+t}}function B_(t,e){return KC(e)?U_(e):ip(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this._=void 0}}function b4(t,e,r){return t instanceof Do?function(s,a){const o={fields:{[N_]:{stringValue:__},[E_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Fu(a)&&(a=Uu(a)),a&&(o.fields[j_]=a),{mapValue:o}}(r,e):t instanceof Oo?$_(t,e):t instanceof Lo?q_(t,e):function(s,a){const o=z_(s,a),l=ry(o)+ry(s.Ae);return Nf(o)&&Nf(s.Ae)?U_(l):ip(s.serializer,l)}(t,e)}function _4(t,e,r){return t instanceof Oo?$_(t,e):t instanceof Lo?q_(t,e):r}function z_(t,e){return t instanceof Mo?function(n){return Nf(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Do extends qu{}class Oo extends qu{constructor(e){super(),this.elements=e}}function $_(t,e){const r=H_(e);for(const n of t.elements)r.some(s=>Fr(s,n))||r.push(n);return{arrayValue:{values:r}}}class Lo extends qu{constructor(e){super(),this.elements=e}}function q_(t,e){let r=H_(e);for(const n of t.elements)r=r.filter(s=>!Fr(s,n));return{arrayValue:{values:r}}}class Mo extends qu{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function ry(t){return Be(t.integerValue||t.doubleValue)}function H_(t){return tp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,r){this.field=e,this.transform=r}}function N4(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Oo&&s instanceof Oo||n instanceof Lo&&s instanceof Lo?qi(n.elements,s.elements,Fr):n instanceof Mo&&s instanceof Mo?Fr(n.Ae,s.Ae):n instanceof Do&&s instanceof Do}(t.transform,e.transform)}class j4{constructor(e,r){this.version=e,this.transformResults=r}}class Zt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hu{}function G_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ap(t.key,Zt.none()):new Zo(t.key,t.data,Zt.none());{const r=t.data,n=Ct.empty();let s=new Ze(ot.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),s=s.add(a)}return new ps(t.key,n,new zt(s.toArray()),Zt.none())}}function E4(t,e,r){t instanceof Zo?function(s,a,o){const l=s.value.clone(),u=sy(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof ps?function(s,a,o){if(!fc(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=sy(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(K_(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function io(t,e,r,n){return t instanceof Zo?function(a,o,l,u){if(!fc(a.precondition,o))return l;const d=a.value.clone(),h=iy(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof ps?function(a,o,l,u){if(!fc(a.precondition,o))return l;const d=iy(a.fieldTransforms,u,o),h=o.data;return h.setAll(K_(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(a,o,l){return fc(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function T4(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=z_(n.transform,s||null);a!=null&&(r===null&&(r=Ct.empty()),r.set(n.field,a))}return r||null}function ny(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&qi(n,s,(a,o)=>N4(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zo extends Hu{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ps extends Hu{constructor(e,r,n,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function K_(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function sy(t,e,r){const n=new Map;ge(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);n.set(a.field,_4(o,l,r[s]))}return n}function iy(t,e,r){const n=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);n.set(s.field,b4(a,o,e))}return n}class ap extends Hu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S4 extends Hu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&E4(a,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=io(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=io(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=F_();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const u=G_(o,l);u!==null&&n.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Z.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ce())}isEqual(e){return this.batchId===e.batchId&&qi(this.mutations,e.mutations,(r,n)=>ny(r,n))&&qi(this.baseMutations,e.baseMutations,(r,n)=>ny(r,n))}}class op{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){ge(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return x4}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,n[o].version);return new op(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,ue;function A4(t){switch(t){case V.OK:return Y(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function Q_(t){if(t===void 0)return hn("GRPC error has no .code"),V.UNKNOWN;switch(t){case $e.OK:return V.OK;case $e.CANCELLED:return V.CANCELLED;case $e.UNKNOWN:return V.UNKNOWN;case $e.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case $e.INTERNAL:return V.INTERNAL;case $e.UNAVAILABLE:return V.UNAVAILABLE;case $e.UNAUTHENTICATED:return V.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case $e.NOT_FOUND:return V.NOT_FOUND;case $e.ALREADY_EXISTS:return V.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return V.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case $e.ABORTED:return V.ABORTED;case $e.OUT_OF_RANGE:return V.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return V.UNIMPLEMENTED;case $e.DATA_LOSS:return V.DATA_LOSS;default:return Y(39323,{code:t})}}(ue=$e||($e={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new Yn([4294967295,4294967295],0);function ay(t){const e=R4().encode(t),r=new c_;return r.update(e),new Uint8Array(r.digest())}function oy(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Yn([r,n],0),new Yn([s,a],0)]}class lp{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new za(`Invalid padding: ${r}`);if(n<0)throw new za(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new za(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new za(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Yn.fromNumber(this.ge)}ye(e,r,n){let s=e.add(r.multiply(Yn.fromNumber(n)));return s.compare(P4)===1&&(s=new Yn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=ay(e),[n,s]=oy(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,s,a);if(!this.we(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new lp(a,s,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const r=ay(e),[n,s]=oy(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,s,a);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,r,n,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,el.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Wu(Z.min(),s,new De(oe),fn(),ce())}}class el{constructor(e,r,n,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new el(n,r,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,r,n,s){this.be=e,this.removedTargetIds=r,this.key=n,this.De=s}}class Y_{constructor(e,r){this.targetId=e,this.Ce=r}}class J_{constructor(e,r,n=ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class ly{constructor(){this.ve=0,this.Fe=cy(),this.Me=ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),r=ce(),n=ce();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Y(38017,{changeType:a})}}),new el(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=cy()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class D4{constructor(e){this.Ge=e,this.ze=new Map,this.je=fn(),this.Je=zl(),this.He=zl(),this.Ye=new De(oe)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,n=e.Ce.count,s=this.ot(r);if(s){const a=s.target;if(Ef(a))if(n===0){const o=new G(a.path);this.et(r,o,xt.newNoDocument(o,Z.min()))}else ge(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=ss(n).toUint8Array()}catch(u){if(u instanceof b_)return $i("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new lp(o,s,a)}catch(u){return $i(u instanceof za?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let s=0;return n.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(r,a,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&Ef(l.target)){const u=new G(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,xt.newNoDocument(u,e))}a.Be&&(r.set(o,a.ke()),a.qe())}});let n=ce();this.He.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new Wu(e,r,this.Ye,this.je,n);return this.je=fn(),this.Je=zl(),this.He=zl(),this.Ye=new De(oe),s}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.Qe(r,1):s.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new ly,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ze(oe),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ze(oe),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||H("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ly),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function zl(){return new De(G.comparator)}function cy(){return new De(G.comparator)}const O4={asc:"ASCENDING",desc:"DESCENDING"},L4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M4={and:"AND",or:"OR"};class V4{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Sf(t,e){return t.useProto3Json||Vu(e)?e:{value:e}}function ru(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F4(t,e){return ru(t,e.toTimestamp())}function Dr(t){return ge(!!t,49232),Z.fromTimestamp(function(r){const n=ns(r);return new Ee(n.seconds,n.nanos)}(t))}function cp(t,e){return kf(t,e).canonicalString()}function kf(t,e){const r=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Z_(t){const e=be.fromString(t);return ge(sN(e),10190,{key:e.toString()}),e}function If(t,e){return cp(t.databaseId,e.path)}function hh(t,e){const r=Z_(e);if(r.get(1)!==t.databaseId.projectId)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new G(tN(r))}function eN(t,e){return cp(t.databaseId,e)}function U4(t){const e=Z_(t);return e.length===4?be.emptyPath():tN(e)}function Cf(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tN(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function uy(t,e,r){return{name:If(t,e),fields:r.value.mapValue.fields}}function B4(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(ge(h===void 0||typeof h=="string",58123),ut.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ut.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?V.UNKNOWN:Q_(d.code);return new z(h,d.message||"")}(o);r=new J_(n,s,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=hh(t,n.document.name),a=Dr(n.document.updateTime),o=n.document.createTime?Dr(n.document.createTime):Z.min(),l=new Ct({mapValue:{fields:n.document.fields}}),u=xt.newFoundDocument(s,a,o,l),d=n.targetIds||[],h=n.removedTargetIds||[];r=new mc(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=hh(t,n.document),a=n.readTime?Dr(n.readTime):Z.min(),o=xt.newNoDocument(s,a),l=n.removedTargetIds||[];r=new mc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=hh(t,n.document),a=n.removedTargetIds||[];r=new mc([],a,s,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,o=new C4(s,a),l=n.targetId;r=new Y_(l,o)}}return r}function z4(t,e){let r;if(e instanceof Zo)r={update:uy(t,e.key,e.value)};else if(e instanceof ap)r={delete:If(t,e.key)};else if(e instanceof ps)r={update:uy(t,e.key,e.data),updateMask:J4(e.fieldMask)};else{if(!(e instanceof S4))return Y(16599,{Vt:e.type});r={verify:If(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof Do)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Oo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Lo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Mo)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:F4(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Y(27497)}(t,e.precondition)),r}function $4(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(r=>function(s,a){let o=s.updateTime?Dr(s.updateTime):Dr(a);return o.isEqual(Z.min())&&(o=Dr(a)),new j4(o,s.transformResults||[])}(r,e))):[]}function q4(t,e){return{documents:[eN(t,e.path)]}}function H4(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=eN(t,s);const a=function(d){if(d.length!==0)return nN(yr.create(d,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:ui(p.field),direction:K4(p.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Sf(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:r,parent:s}}function W4(t){let e=U4(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){ge(n===1,65062);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];r.where&&(a=function(f){const p=rN(f);return p instanceof yr&&A_(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(p=>function(S){return new Po(di(S.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Vu(p)?null:p}(r.limit));let u=null;r.startAt&&(u=function(f){const p=!!f.before,y=f.values||[];return new Gi(y,p)}(r.startAt));let d=null;return r.endAt&&(d=function(f){const p=!f.before,y=f.values||[];return new Gi(y,p)}(r.endAt)),h4(e,s,o,a,l,"F",u,d)}function G4(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function rN(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=di(r.unaryFilter.field);return He.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=di(r.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=di(r.unaryFilter.field);return He.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=di(r.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(r){return He.create(di(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return yr.create(r.compositeFilter.filters.map(n=>rN(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(r.compositeFilter.op))}(t):Y(30097,{filter:t})}function K4(t){return O4[t]}function Q4(t){return L4[t]}function Y4(t){return M4[t]}function ui(t){return{fieldPath:t.canonicalString()}}function di(t){return ot.fromServerFormat(t.fieldPath)}function nN(t){return t instanceof He?function(r){if(r.op==="=="){if(J0(r.value))return{unaryFilter:{field:ui(r.field),op:"IS_NAN"}};if(Y0(r.value))return{unaryFilter:{field:ui(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(J0(r.value))return{unaryFilter:{field:ui(r.field),op:"IS_NOT_NAN"}};if(Y0(r.value))return{unaryFilter:{field:ui(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ui(r.field),op:Q4(r.op),value:r.value}}}(t):t instanceof yr?function(r){const n=r.getFilters().map(s=>nN(s));return n.length===1?n[0]:{compositeFilter:{op:Y4(r.op),filters:n}}}(t):Y(54877,{filter:t})}function J4(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function sN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,r,n,s,a=Z.min(),o=Z.min(),l=ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Fn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.yt=e}}function Z4(t){const e=W4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.Cn=new tA}addToCollectionParentIndex(e,r){return this.Cn.add(r),F.resolve()}getCollectionParents(e,r){return F.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return F.resolve()}deleteFieldIndex(e,r){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,r){return F.resolve()}getDocumentsMatchingTarget(e,r){return F.resolve(null)}getIndexType(e,r){return F.resolve(0)}getFieldIndexes(e,r){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,r){return F.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,r){return F.resolve(rs.min())}updateCollectionGroup(e,r,n){return F.resolve()}updateIndexEntries(e,r){return F.resolve()}}class tA{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Ze(be.comparator),a=!s.has(n);return this.index[r]=s.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Ze(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iN=41943040;class kt{static withCacheSize(e){return new kt(e,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kt.DEFAULT_COLLECTION_PERCENTILE=10,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kt.DEFAULT=new kt(iN,kt.DEFAULT_COLLECTION_PERCENTILE,kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kt.DISABLED=new kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ki(0)}static cr(){return new Ki(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="LruGarbageCollector",rA=1048576;function fy([t,e],[r,n]){const s=oe(t,r);return s===0?oe(e,n):s}class nA{constructor(e){this.Ir=e,this.buffer=new Ze(fy),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();fy(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class sA{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(hy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){aa(r)?H(hy,"Ignoring IndexedDB error during garbage collection: ",r):await ia(r)}await this.Vr(3e5)})}}class iA{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return F.resolve(Mu.ce);const n=new nA(r);return this.mr.forEachTarget(e,s=>n.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>n.Ar(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(dy)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dy):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,s,a,o,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(a=f,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(d=Date.now(),li()<=ae.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:f})))}}function aA(t,e){return new iA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.changes=new ti(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?F.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&io(n.mutation,s,zt.empty(),Ee.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ce()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ce()){const s=As();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(a=>{let o=Ba();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=As();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ce()))}populateOverlays(e,r,n){const s=[];return n.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,s){let a=fn();const o=so(),l=function(){return so()}();return r.forEach((u,d)=>{const h=n.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof ps)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),io(h.mutation,d,h.mutation.getFieldMask(),Ee.now())):o.set(d.key,zt.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),r.forEach((d,h)=>l.set(d,new lA(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,r){const n=so();let s=new De((o,l)=>o-l),a=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=r.get(u);if(d===null)return;let h=n.get(u)||zt.empty();h=l.applyToLocalView(d,h),n.set(u,h);const f=(s.get(l.batchId)||ce()).add(u);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,f=F_();h.forEach(p=>{if(!a.has(p)){const y=G_(r.get(p),n.get(p));y!==null&&f.set(p,y),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return F.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):sp(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-a.size):F.resolve(As());let l=Io,u=a;return o.next(d=>F.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,ce())).next(h=>({batchId:l,changes:V_(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new G(r)).next(n=>{let s=Ba();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const a=r.collectionGroup;let o=Ba();return this.indexManager.getCollectionParents(e,a).next(l=>F.forEach(l,u=>{const d=function(f,p){return new ei(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,s))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,xt.newInvalidDocument(h)))});let l=Ba();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&io(h.mutation,d,zt.empty(),Ee.now()),$u(r,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return F.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Dr(s.createTime)}}(r)),F.resolve()}getNamedQuery(e,r){return F.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(s){return{name:s.name,query:Z4(s.bundledQuery),readTime:Dr(s.readTime)}}(r)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.overlays=new De(G.comparator),this.qr=new Map}getOverlay(e,r){return F.resolve(this.overlays.get(r))}getOverlays(e,r){const n=As();return F.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,a)=>{this.St(e,r,a)}),F.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),F.resolve()}getOverlaysForCollection(e,r,n){const s=As(),a=r.length+1,o=new G(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>n&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let a=new De((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let h=a.get(d.largestBatchId);h===null&&(h=As(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=As(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return F.resolve(l)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new I4(r,n));let a=this.qr.get(r);a===void 0&&(a=ce(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.Qr=new Ze(rt.$r),this.Ur=new Ze(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new rt(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new rt(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new G(new be([])),n=new rt(r,e),s=new rt(r,e+1),a=[];return this.Ur.forEachInRange([n,s],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new G(new be([])),n=new rt(r,e),s=new rt(r,e+1);let a=ce();return this.Ur.forEachInRange([n,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new rt(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class rt{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return G.comparator(e.key,r.key)||oe(e.Yr,r.Yr)}static Kr(e,r){return oe(e.Yr,r.Yr)||G.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(rt.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new k4(a,r,n,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new rt(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,r){return F.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ei(n),a=s<0?0:s;return F.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?ep:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new rt(r,0),s=new rt(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,s],o=>{const l=this.Xr(o.Yr);a.push(l)}),F.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ze(oe);return r.forEach(s=>{const a=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],l=>{n=n.add(l.Yr)})}),F.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let a=n;G.isDocumentKey(a)||(a=a.child(""));const o=new rt(new G(a),0);let l=new Ze(oe);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Yr)),!0)},o),F.resolve(this.ti(l))}ti(e){const r=[];return e.forEach(n=>{const s=this.Xr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){ge(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return F.forEach(r.mutations,s=>{const a=new rt(s.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new rt(r,0),s=this.Zr.firstAfterOrEqual(n);return F.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.ri=e,this.docs=function(){return new De(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),a=s?s.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return F.resolve(n?n.document.mutableCopy():xt.newInvalidDocument(r))}getEntries(e,r){let n=fn();return r.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():xt.newInvalidDocument(s))}),F.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let a=fn();const o=r.path,l=new G(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||qC($C(h),n)<=0||(s.has(h.key)||$u(r,h))&&(a=a.insert(h.key,h.mutableCopy()))}return F.resolve(a)}getAllFromCollectionGroup(e,r,n,s){Y(9500)}ii(e,r){return F.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new pA(this)}getSize(e){return F.resolve(this.size)}}class pA extends oA{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),F.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.persistence=e,this.si=new ti(r=>rp(r),np),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new up,this.targetCount=0,this.ai=Ki.ur()}forEachTarget(e,r){return this.si.forEach((n,s)=>r(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),F.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Ki(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,F.resolve()}updateTargetData(e,r){return this.Pr(r),F.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,r,n){let s=0;const a=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(a).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return F.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),F.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),F.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return F.resolve(n)}containsKey(e,r){return F.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,r){this.ui={},this.overlays={},this.ci=new Mu(0),this.li=!1,this.li=!0,this.hi=new hA,this.referenceDelegate=e(this),this.Pi=new gA(this),this.indexManager=new eA,this.remoteDocumentCache=function(s){return new mA(s)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new X4(r),this.Ii=new uA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new dA,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new fA(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){H("MemoryPersistence","Starting transaction:",e);const s=new xA(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,r){return F.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class xA extends WC{constructor(e){super(),this.currentSequenceNumber=e}}class dp{constructor(e){this.persistence=e,this.Ri=new up,this.Vi=null}static mi(e){return new dp(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),F.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),F.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),F.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(s=>this.fi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,n=>{const s=G.fromPath(n);return this.gi(e,s).next(a=>{a||r.removeEntry(s,Z.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return F.or([()=>F.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class nu{constructor(e,r){this.persistence=e,this.pi=new ti(n=>QC(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=aA(this,r)}static mi(e,r){return new nu(e,r)}Ei(){}di(e){return F.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return F.forEach(this.pi,(n,s)=>this.br(e,n,s).next(a=>a?F.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,r).next(l=>{l||(n++,a.removeEntry(o,Z.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=dc(e.data.value)),r}br(e,r,n){return F.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.pi.get(r);return F.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=s}static As(e,r){let n=ce(),s=ce();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new hp(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qT()?8:GC(wt())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,s){const a={result:null};return this.ys(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,r,s,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new yA;return this.Ss(e,r,o).next(l=>{if(a.result=l,this.Vs)return this.bs(e,r,o,l.size)})}).next(()=>a.result)}bs(e,r,n,s){return n.documentReadCount<this.fs?(li()<=ae.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ci(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(li()<=ae.DEBUG&&H("QueryEngine","Query:",ci(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(li()<=ae.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ci(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(r))):F.resolve())}ys(e,r){if(ty(r))return F.resolve(null);let n=Pr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=tu(r,null,"F"),n=Pr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=ce(...a);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.Ds(r,l);return this.Cs(r,d,o,u.readTime)?this.ys(e,tu(r,null,"F")):this.vs(e,d,r,u)}))})))}ws(e,r,n,s){return ty(r)||s.isEqual(Z.min())?F.resolve(null):this.ps.getDocuments(e,n).next(a=>{const o=this.Ds(r,a);return this.Cs(r,o,n,s)?F.resolve(null):(li()<=ae.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ci(r)),this.vs(e,o,r,zC(s,Io)).next(l=>l))})}Ds(e,r){let n=new Ze(L_(e));return r.forEach((s,a)=>{$u(e,a)&&(n=n.add(a))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,r,n){return li()<=ae.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ci(r)),this.ps.getDocumentsMatchingQuery(e,r,rs.min(),n)}vs(e,r,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="LocalStore",wA=3e8;class bA{constructor(e,r,n,s){this.persistence=e,this.Fs=r,this.serializer=s,this.Ms=new De(oe),this.xs=new ti(a=>rp(a),np),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function _A(t,e,r,n){return new bA(t,e,r,n)}async function oN(t,e){const r=ee(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let u=ce();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(n,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function NA(t,e){const r=ee(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const f=d.batch,p=f.keys();let y=F.resolve();return p.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(v=>{const x=d.docVersions.get(S);ge(x!==null,48541),v.version.compareTo(x)<0&&(f.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),h.addEntry(v)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=ce();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function lN(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function jA(t,e){const r=ee(t),n=e.snapshotVersion;let s=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});s=r.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(r.Pi.removeMatchingKeys(a,h.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(a,h.addedDocuments,f)));let y=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(ut.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,n)),s=s.insert(f,y),function(v,x,w){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=wA?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,y,h)&&l.push(r.Pi.updateTargetData(a,y))});let u=fn(),d=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(EA(a,o,e.documentUpdates).next(h=>{u=h.ks,d=h.qs})),!n.isEqual(Z.min())){const h=r.Pi.getLastRemoteSnapshotVersion(a).next(f=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(h)}return F.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(r.Ms=s,a))}function EA(t,e,r){let n=ce(),s=ce();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=fn();return r.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H(fp,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function TA(t,e){const r=ee(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=ep),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function SA(t,e){const r=ee(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Pi.getTargetData(n,e).next(a=>a?(s=a,F.resolve(s)):r.Pi.allocateTargetId(n).next(o=>(s=new Fn(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Af(t,e,r){const n=ee(t),s=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!aa(o))throw o;H(fp,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function my(t,e,r){const n=ee(t);let s=Z.min(),a=ce();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const f=ee(u),p=f.xs.get(h);return p!==void 0?F.resolve(f.Ms.get(p)):f.Pi.getTargetData(d,h)}(n,o,Pr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,r?s:Z.min(),r?a:ce())).next(l=>(kA(n,m4(e),l),{documents:l,Qs:a})))}function kA(t,e,r){let n=t.Os.get(e)||Z.min();r.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Os.set(e,n)}class py{constructor(){this.activeTargetIds=w4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IA{constructor(){this.Mo=new py,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new py,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="ConnectivityMonitor";class xy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(gy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(gy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l=null;function Rf(){return $l===null?$l=function(){return 268435456+Math.round(2147483648*Math.random())}():$l++,"0x"+$l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="RestConnection",AA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===Xc?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,r,n,s,a){const o=Rf(),l=this.zo(e,r.toUriEncodedString());H(fh,`Sending RPC '${e}' ${o}:`,l,n);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,a);const{host:d}=new URL(l),h=Xs(d);return this.Jo(e,l,u,n,h).then(f=>(H(fh,`Received RPC '${e}' ${o}: `,f),f),f=>{throw $i(fh,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",n),f})}Ho(e,r,n,s,a,o){return this.Go(e,r,n,s,a)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),n&&n.headers.forEach((s,a)=>e[a]=s)}zo(e,r){const n=AA[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class DA extends RA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,a){const o=Rf();return new Promise((l,u)=>{const d=new u_;d.setWithCredentials(!0),d.listenOnce(d_.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case uc.NO_ERROR:const f=d.getResponseJson();H(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case uc.TIMEOUT:H(mt,`RPC '${e}' ${o} timed out`),u(new z(V.DEADLINE_EXCEEDED,"Request time out"));break;case uc.HTTP_ERROR:const p=d.getStatus();if(H(mt,`RPC '${e}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const S=y==null?void 0:y.error;if(S&&S.status&&S.message){const v=function(w){const b=w.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(b)>=0?b:V.UNKNOWN}(S.status);u(new z(v,S.message))}else u(new z(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new z(V.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(mt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);H(mt,`RPC '${e}' ${o} sending request:`,s),d.send(r,"POST",h,n,15)})}T_(e,r,n){const s=Rf(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=m_(),l=f_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const h=a.join("");H(mt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=o.createWebChannel(h,u);this.I_(f);let p=!1,y=!1;const S=new PA({Yo:x=>{y?H(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(p||(H(mt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),H(mt,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},Zo:()=>f.close()}),v=(x,w,b)=>{x.listen(w,N=>{try{b(N)}catch(P){setTimeout(()=>{throw P},0)}})};return v(f,Ua.EventType.OPEN,()=>{y||(H(mt,`RPC '${e}' stream ${s} transport opened.`),S.o_())}),v(f,Ua.EventType.CLOSE,()=>{y||(y=!0,H(mt,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(f))}),v(f,Ua.EventType.ERROR,x=>{y||(y=!0,$i(mt,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),S.a_(new z(V.UNAVAILABLE,"The operation could not be completed")))}),v(f,Ua.EventType.MESSAGE,x=>{var w;if(!y){const b=x.data[0];ge(!!b,16349);const N=b,P=(N==null?void 0:N.error)||((w=N[0])==null?void 0:w.error);if(P){H(mt,`RPC '${e}' stream ${s} received error:`,P);const L=P.status;let D=function(k){const C=$e[k];if(C!==void 0)return Q_(C)}(L),T=P.message;D===void 0&&(D=V.INTERNAL,T="Unknown error status: "+L+" with message "+P.message),y=!0,S.a_(new z(D,T)),f.close()}else H(mt,`RPC '${e}' stream ${s} received:`,b),S.u_(b)}}),v(l,h_.STAT_EVENT,x=>{x.stat===wf.PROXY?H(mt,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===wf.NOPROXY&&H(mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){return new V4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,r,n=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="PersistentStream";class uN{constructor(e,r,n,s,a,o,l,u){this.Mi=e,this.S_=n,this.b_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cN(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===V.RESOURCE_EXHAUSTED?(hn(r.toString()),hn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===r&&this.G_(n,s)},n=>{e(()=>{const s=new z(V.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(yy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(H(yy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OA extends uN{constructor(e,r,n,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=B4(this.serializer,e),n=function(a){if(!("targetChange"in a))return Z.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?Dr(o.readTime):Z.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=Cf(this.serializer),r.addTarget=function(a,o){let l;const u=o.target;if(l=Ef(u)?{documents:q4(a,u)}:{query:H4(a,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=X_(a,o.resumeToken);const d=Sf(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Z.min())>0){l.readTime=ru(a,o.snapshotVersion.toTimestamp());const d=Sf(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=G4(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=Cf(this.serializer),r.removeTarget=e,this.q_(r)}}class LA extends uN{constructor(e,r,n,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=$4(e.writeResults,e.commitTime),n=Dr(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=Cf(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>z4(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{}class VA extends MA{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,kf(r,n),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(V.UNKNOWN,a.toString())})}Ho(e,r,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,kf(r,n),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(V.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class FA{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hn(r),this.aa=!1):H("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="RemoteStore";class UA{constructor(e,r,n,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{ri(this)&&(H(Ks,"Restarting streams for network reachability change."),await async function(u){const d=ee(u);d.Ea.add(4),await tl(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Ku(d)}(this))})}),this.Ra=new FA(n,s)}}async function Ku(t){if(ri(t))for(const e of t.da)await e(!0)}async function tl(t){for(const e of t.da)await e(!1)}function dN(t,e){const r=ee(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),xp(r)?gp(r):oa(r).O_()&&pp(r,e))}function mp(t,e){const r=ee(t),n=oa(r);r.Ia.delete(e),n.O_()&&hN(r,e),r.Ia.size===0&&(n.O_()?n.L_():ri(r)&&r.Ra.set("Unknown"))}function pp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}oa(t).Y_(e)}function hN(t,e){t.Va.Ue(e),oa(t).Z_(e)}function gp(t){t.Va=new D4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),oa(t).start(),t.Ra.ua()}function xp(t){return ri(t)&&!oa(t).x_()&&t.Ia.size>0}function ri(t){return ee(t).Ea.size===0}function fN(t){t.Va=void 0}async function BA(t){t.Ra.set("Online")}async function zA(t){t.Ia.forEach((e,r)=>{pp(t,e)})}async function $A(t,e){fN(t),xp(t)?(t.Ra.ha(e),gp(t)):t.Ra.set("Unknown")}async function qA(t,e,r){if(t.Ra.set("Online"),e instanceof J_&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(n){H(Ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await su(t,n)}else if(e instanceof mc?t.Va.Ze(e):e instanceof Y_?t.Va.st(e):t.Va.tt(e),!r.isEqual(Z.min()))try{const n=await lN(t.localStore);r.compareTo(n)>=0&&await function(a,o){const l=a.Va.Tt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=a.Ia.get(u);if(!h)return;a.Ia.set(u,h.withResumeToken(ut.EMPTY_BYTE_STRING,h.snapshotVersion)),hN(a,u);const f=new Fn(h.target,u,d,h.sequenceNumber);pp(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){H(Ks,"Failed to raise snapshot:",n),await su(t,n)}}async function su(t,e,r){if(!aa(e))throw e;t.Ea.add(1),await tl(t),t.Ra.set("Offline"),r||(r=()=>lN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Ks,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Ku(t)})}function mN(t,e){return e().catch(r=>su(t,r,e))}async function Qu(t){const e=ee(t),r=as(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ep;for(;HA(e);)try{const s=await TA(e.localStore,n);if(s===null){e.Ta.length===0&&r.L_();break}n=s.batchId,WA(e,s)}catch(s){await su(e,s)}pN(e)&&gN(e)}function HA(t){return ri(t)&&t.Ta.length<10}function WA(t,e){t.Ta.push(e);const r=as(t);r.O_()&&r.X_&&r.ea(e.mutations)}function pN(t){return ri(t)&&!as(t).x_()&&t.Ta.length>0}function gN(t){as(t).start()}async function GA(t){as(t).ra()}async function KA(t){const e=as(t);for(const r of t.Ta)e.ea(r.mutations)}async function QA(t,e,r){const n=t.Ta.shift(),s=op.from(n,e,r);await mN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qu(t)}async function YA(t,e){e&&as(t).X_&&await async function(n,s){if(function(o){return A4(o)&&o!==V.ABORTED}(s.code)){const a=n.Ta.shift();as(n).B_(),await mN(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Qu(n)}}(t,e),pN(t)&&gN(t)}async function vy(t,e){const r=ee(t);r.asyncQueue.verifyOperationInProgress(),H(Ks,"RemoteStore received new credentials");const n=ri(r);r.Ea.add(3),await tl(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Ku(r)}async function JA(t,e){const r=ee(t);e?(r.Ea.delete(2),await Ku(r)):e||(r.Ea.add(2),await tl(r),r.Ra.set("Unknown"))}function oa(t){return t.ma||(t.ma=function(r,n,s){const a=ee(r);return a.sa(),new OA(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:BA.bind(null,t),t_:zA.bind(null,t),r_:$A.bind(null,t),H_:qA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),xp(t)?gp(t):t.Ra.set("Unknown")):(await t.ma.stop(),fN(t))})),t.ma}function as(t){return t.fa||(t.fa=function(r,n,s){const a=ee(r);return a.sa(),new LA(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:GA.bind(null,t),r_:YA.bind(null,t),ta:KA.bind(null,t),na:QA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Qu(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Ks,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,r,n,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,a){const o=Date.now()+n,l=new yp(e,r,o,s,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(t,e){if(hn("AsyncQueue",`${e}: ${t}`),aa(t))return new z(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{static emptySet(e){return new Oi(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||G.comparator(r.key,n.key):(r,n)=>G.comparator(r.key,n.key),this.keyedMap=Ba(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Oi)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Oi;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.ga=new De(G.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Qi{constructor(e,r,n,s,a,o,l,u,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Qi(e,r,Oi.emptySet(r),o,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class ZA{constructor(){this.queries=by(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=ee(r),a=s.queries;s.queries=by(),a.forEach((o,l)=>{for(const u of l.Sa)u.onError(n)})})(this,new z(V.ABORTED,"Firestore shutting down"))}}function by(){return new ti(t=>O_(t),zu)}async function wp(t,e){const r=ee(t);let n=3;const s=e.query;let a=r.queries.get(s);a?!a.ba()&&e.Da()&&(n=2):(a=new XA,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(s,!0);break;case 1:a.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=vp(o,`Initialization of query '${ci(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&_p(r)}async function bp(t,e){const r=ee(t),n=e.query;let s=3;const a=r.queries.get(n);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function eR(t,e){const r=ee(t);let n=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.Sa)l.Fa(s)&&(n=!0);o.wa=s}}n&&_p(r)}function tR(t,e,r){const n=ee(t),s=n.queries.get(e);if(s)for(const a of s.Sa)a.onError(r);n.queries.delete(e)}function _p(t){t.Ca.forEach(e=>{e.next()})}var Pf,_y;(_y=Pf||(Pf={})).Ma="default",_y.Cache="cache";class Np{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Qi(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Qi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.key=e}}class yN{constructor(e){this.key=e}}class rR{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=L_(e),this.tu=new Oi(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new wy,s=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),y=$u(this.query,f)?f:null,S=!!p&&this.mutatedKeys.has(p.key),v=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;p&&y?p.data.isEqual(y.data)?S!==v&&(n.track({type:3,doc:y}),x=!0):this.su(p,y)||(n.track({type:2,doc:y}),x=!0,(u&&this.eu(y,u)>0||d&&this.eu(y,d)<0)&&(l=!0)):!p&&y?(n.track({type:0,doc:y}),x=!0):p&&!y&&(n.track({type:1,doc:p}),x=!0,(u||d)&&(l=!0)),x&&(y?(o=o.add(y),a=v?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),n.track({type:1,doc:h})}return{tu:o,iu:n,Cs:l,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,S){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:x})}};return v(y)-v(S)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(n),s=s??!1;const l=r&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Qi(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new yN(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new xN(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=ce();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Qi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jp="SyncEngine";class nR{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class sR{constructor(e){this.key=e,this.hu=!1}}class iR{constructor(e,r,n,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ti(l=>O_(l),zu),this.Iu=new Map,this.Eu=new Set,this.du=new De(G.comparator),this.Au=new Map,this.Ru=new up,this.Vu={},this.mu=new Map,this.fu=Ki.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aR(t,e,r=!0){const n=jN(t);let s;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await vN(n,e,r,!0),s}async function oR(t,e){const r=jN(t);await vN(r,e,!0,!1)}async function vN(t,e,r,n){const s=await SA(t.localStore,Pr(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return n&&(l=await lR(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&dN(t.remoteStore,s),l}async function lR(t,e,r,n,s){t.pu=(f,p,y)=>async function(v,x,w,b){let N=x.view.ru(w);N.Cs&&(N=await my(v.localStore,x.query,!1).then(({documents:T})=>x.view.ru(T,N)));const P=b&&b.targetChanges.get(x.targetId),L=b&&b.targetMismatches.get(x.targetId)!=null,D=x.view.applyChanges(N,v.isPrimaryClient,P,L);return jy(v,x.targetId,D.au),D.snapshot}(t,f,p,y);const a=await my(t.localStore,e,!0),o=new rR(e,a.Qs),l=o.ru(a.documents),u=el.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);jy(t,r,d.au);const h=new nR(e,r,o);return t.Tu.set(e,h),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function cR(t,e,r){const n=ee(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);if(a.length>1)return n.Iu.set(s.targetId,a.filter(o=>!zu(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Af(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&mp(n.remoteStore,s.targetId),Df(n,s.targetId)}).catch(ia)):(Df(n,s.targetId),await Af(n.localStore,s.targetId,!0))}async function uR(t,e){const r=ee(t),n=r.Tu.get(e),s=r.Iu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),mp(r.remoteStore,n.targetId))}async function dR(t,e,r){const n=yR(t);try{const s=await function(o,l){const u=ee(o),d=Ee.now(),h=l.reduce((y,S)=>y.add(S.key),ce());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=fn(),v=ce();return u.Ns.getEntries(y,h).next(x=>{S=x,S.forEach((w,b)=>{b.isValidDocument()||(v=v.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(x=>{f=x;const w=[];for(const b of l){const N=T4(b,f.get(b.key).overlayedDocument);N!=null&&w.push(new ps(b.key,N,k_(N.value.mapValue),Zt.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,w,l)}).next(x=>{p=x;const w=x.applyToLocalDocumentSet(f,v);return u.documentOverlayCache.saveOverlays(y,x.batchId,w)})}).then(()=>({batchId:p.batchId,changes:V_(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new De(oe)),d=d.insert(l,u),o.Vu[o.currentUser.toKey()]=d}(n,s.batchId,r),await rl(n,s.changes),await Qu(n.remoteStore)}catch(s){const a=vp(s,"Failed to persist write");r.reject(a)}}async function wN(t,e){const r=ee(t);try{const n=await jA(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Au.get(a);o&&(ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ge(o.hu,14607):s.removedDocuments.size>0&&(ge(o.hu,42227),o.hu=!1))}),await rl(r,n,e)}catch(n){await ia(n)}}function Ny(t,e,r){const n=ee(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ee(o);u.onlineState=l;let d=!1;u.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(d=!0)}),d&&_p(u)}(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function hR(t,e,r){const n=ee(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Au.get(e),a=s&&s.key;if(a){let o=new De(G.comparator);o=o.insert(a,xt.newNoDocument(a,Z.min()));const l=ce().add(a),u=new Wu(Z.min(),new Map,new De(oe),o,l);await wN(n,u),n.du=n.du.remove(a),n.Au.delete(e),Ep(n)}else await Af(n.localStore,e,!1).then(()=>Df(n,e,r)).catch(ia)}async function fR(t,e){const r=ee(t),n=e.batch.batchId;try{const s=await NA(r.localStore,e);_N(r,n,null),bN(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await rl(r,s)}catch(s){await ia(s)}}async function mR(t,e,r){const n=ee(t);try{const s=await function(o,l){const u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(f=>(ge(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(n.localStore,e);_N(n,e,r),bN(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await rl(n,s)}catch(s){await ia(s)}}function bN(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function _N(t,e,r){const n=ee(t);let s=n.Vu[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function Df(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||NN(t,n)})}function NN(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(mp(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),Ep(t))}function jy(t,e,r){for(const n of r)n instanceof xN?(t.Ru.addReference(n.key,e),pR(t,n)):n instanceof yN?(H(jp,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||NN(t,n.key)):Y(19791,{wu:n})}function pR(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(H(jp,"New document in limbo: "+r),t.Eu.add(n),Ep(t))}function Ep(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new G(be.fromString(e)),n=t.fu.next();t.Au.set(n,new sR(r)),t.du=t.du.insert(r,n),dN(t.remoteStore,new Fn(Pr(Bu(r.path)),n,"TargetPurposeLimboResolution",Mu.ce))}}async function rl(t,e,r){const n=ee(t),s=[],a=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,u)=>{o.push(n.pu(u,e,r).then(d=>{var h;if((d||r)&&n.isPrimaryClient){const f=d?!d.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))==null?void 0:h.current;n.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){s.push(d);const f=hp.As(u.targetId,d);a.push(f)}}))}),await Promise.all(o),n.Pu.H_(s),await async function(u,d){const h=ee(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(d,p=>F.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>F.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!aa(f))throw f;H(fp,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const y=h.Ms.get(p),S=y.snapshotVersion,v=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(p,v)}}}(n.localStore,a))}async function gR(t,e){const r=ee(t);if(!r.currentUser.isEqual(e)){H(jp,"User change. New user:",e.toKey());const n=await oN(r.localStore,e);r.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(V.CANCELLED,o))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await rl(r,n.Ls)}}function xR(t,e){const r=ee(t),n=r.Au.get(e);if(n&&n.hu)return ce().add(n.key);{let s=ce();const a=r.Iu.get(e);if(!a)return s;for(const o of a){const l=r.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function jN(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hR.bind(null,e),e.Pu.H_=eR.bind(null,e.eventManager),e.Pu.yu=tR.bind(null,e.eventManager),e}function yR(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mR.bind(null,e),e}class iu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return _A(this.persistence,new vA,e.initialUser,this.serializer)}Cu(e){return new aN(dp.mi,this.serializer)}Du(e){return new IA}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}iu.provider={build:()=>new iu};class vR extends iu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){ge(this.persistence.referenceDelegate instanceof nu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new sA(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?kt.withCacheSize(this.cacheSizeBytes):kt.DEFAULT;return new aN(n=>nu.mi(n,r),this.serializer)}}class Of{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Ny(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=gR.bind(null,this.syncEngine),await JA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZA}()}createDatastore(e){const r=Gu(e.databaseInfo.databaseId),n=function(a){return new DA(a)}(e.databaseInfo);return function(a,o,l,u){return new VA(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,a,o,l){return new UA(n,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>Ny(this.syncEngine,r,0),function(){return xy.v()?new xy:new CA}())}createSyncEngine(e,r){return function(s,a,o,l,u,d,h){const f=new iR(s,a,o,l,u,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=ee(s);H(Ks,"RemoteStore shutting down."),a.Ea.add(5),await tl(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Of.provider={build:()=>new Of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="FirestoreClient";class wR{constructor(e,r,n,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{H(os,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(H(os,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=vp(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ph(t,e){t.asyncQueue.verifyOperationInProgress(),H(os,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await oN(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ey(t,e){t.asyncQueue.verifyOperationInProgress();const r=await bR(t);H(os,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>vy(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>vy(e.remoteStore,s)),t._onlineComponents=e}async function bR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(os,"Using user provided OfflineComponentProvider");try{await ph(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;$i("Error using user provided cache. Falling back to memory cache: "+r),await ph(t,new iu)}}else H(os,"Using default OfflineComponentProvider"),await ph(t,new vR(void 0));return t._offlineComponents}async function EN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(os,"Using user provided OnlineComponentProvider"),await Ey(t,t._uninitializedComponentsProvider._online)):(H(os,"Using default OnlineComponentProvider"),await Ey(t,new Of))),t._onlineComponents}function _R(t){return EN(t).then(e=>e.syncEngine)}async function au(t){const e=await EN(t),r=e.eventManager;return r.onListen=aR.bind(null,e.syncEngine),r.onUnlisten=cR.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=oR.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=uR.bind(null,e.syncEngine),r}function NR(t,e,r={}){const n=new rn;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new Tp({next:p=>{h.Nu(),o.enqueueAndForget(()=>bp(a,f));const y=p.docs.has(l);!y&&p.fromCache?d.reject(new z(V.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?d.reject(new z(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new Np(Bu(l.path),h,{includeMetadataChanges:!0,qa:!0});return wp(a,f)}(await au(t),t.asyncQueue,e,r,n)),n.promise}function jR(t,e,r={}){const n=new rn;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new Tp({next:p=>{h.Nu(),o.enqueueAndForget(()=>bp(a,f)),p.fromCache&&u.source==="server"?d.reject(new z(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new Np(l,h,{includeMetadataChanges:!0,qa:!0});return wp(a,f)}(await au(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="firestore.googleapis.com",Sy=!0;class ky{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SN,this.ssl=Sy}else this.host=e.host,this.ssl=e.ssl??Sy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rA)throw new z(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TN(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yu{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ky({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ky(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new CC;switch(n.type){case"firstParty":return new DC(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new z(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Ty.get(r);n&&(H("ComponentProvider","Removing Datastore"),Ty.delete(r),n.terminate())}(this),Promise.resolve()}}function ER(t,e,r,n={}){var d;t=Ot(t,Yu);const s=Xs(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;s&&(Fm(`https://${l}`),Um("Firestore",!0)),a.host!==SN&&a.host!==l&&$i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:l,ssl:s,emulatorOptions:n};if(!zs(u,o)&&(t._setSettings(u),n.mockUserToken)){let h,f;if(typeof n.mockUserToken=="string")h=n.mockUserToken,f=pt.MOCK_USER;else{h=Nb(n.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new z(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new pt(p)}t._authCredentials=new AC(new g_(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new qr(this.firestore,e,this._query)}}class Fe{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fe(this.firestore,e,this._key)}toJSON(){return{type:Fe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Xo(r,Fe._jsonSchema))return new Fe(e,n||null,new G(be.fromString(r.referencePath)))}}Fe._jsonSchemaVersion="firestore/documentReference/1.0",Fe._jsonSchema={type:We("string",Fe._jsonSchemaVersion),referencePath:We("string")};class Jn extends qr{constructor(e,r,n){super(e,r,Bu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fe(this.firestore,null,new G(e))}withConverter(e){return new Jn(this.firestore,e,this._path)}}function le(t,e,...r){if(t=Pe(t),x_("collection","path",e),t instanceof Yu){const n=be.fromString(e,...r);return z0(n),new Jn(t,null,n)}{if(!(t instanceof Fe||t instanceof Jn))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(be.fromString(e,...r));return z0(n),new Jn(t.firestore,null,n)}}function de(t,e,...r){if(t=Pe(t),arguments.length===1&&(e=Zm.newId()),x_("doc","path",e),t instanceof Yu){const n=be.fromString(e,...r);return B0(n),new Fe(t,null,new G(n))}{if(!(t instanceof Fe||t instanceof Jn))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(be.fromString(e,...r));return B0(n),new Fe(t.firestore,t instanceof Jn?t.converter:null,new G(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="AsyncQueue";class Cy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cN(this,"async_queue_retry"),this._c=()=>{const n=mh();n&&H(Iy,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=mh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=mh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new rn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!aa(e))throw e;H(Iy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,hn("INTERNAL UNHANDLED ERROR: ",Ay(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=yp.createAndSchedule(this,e,r,n,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:Ay(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function Ay(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class mn extends Yu{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new Cy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cy(e),this._firestoreClient=void 0,await e}}}function TR(t,e){const r=typeof t=="object"?t:$m(),n=typeof t=="string"?t:Xc,s=Ru(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=wb("firestore");a&&ER(s,...a)}return s}function Ju(t){if(t._terminated)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SR(t),t._firestoreClient}function SR(t){var n,s,a;const e=t._freezeSettings(),r=function(l,u,d,h){return new XC(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,TN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new wR(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yt(ut.fromBase64String(e))}catch(r){throw new z(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Yt(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xo(e,Yt._jsonSchema))return Yt.fromBase64String(e.bytes)}}Yt._jsonSchemaVersion="firestore/bytes/1.0",Yt._jsonSchema={type:We("string",Yt._jsonSchemaVersion),bytes:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new z(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new z(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new z(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Or._jsonSchemaVersion}}static fromJSON(e){if(Xo(e,Or._jsonSchema))return new Or(e.latitude,e.longitude)}}Or._jsonSchemaVersion="firestore/geoPoint/1.0",Or._jsonSchema={type:We("string",Or._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xo(e,Lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Lr(e.vectorValues);throw new z(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Lr._jsonSchemaVersion="firestore/vectorValue/1.0",Lr._jsonSchema={type:We("string",Lr._jsonSchemaVersion),vectorValues:We("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=/^__.*__$/;class IR{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ps(e,this.data,this.fieldMask,r,this.fieldTransforms):new Zo(e,this.data,r,this.fieldTransforms)}}class kN{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ps(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function IN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:t})}}class Sp{constructor(e,r,n,s,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ou(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(IN(this.Ac)&&kR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class CR{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Gu(e)}Cc(e,r,n,s=!1){return new Sp({Ac:e,methodName:r,Dc:n,path:ot.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sl(t){const e=t._freezeSettings(),r=Gu(t._databaseId);return new CR(t._databaseId,!!e.ignoreUndefinedProperties,r)}function CN(t,e,r,n,s,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,r,s);Cp("Data must be an object, but it was:",o,n);const l=RN(n,o);let u,d;if(a.merge)u=new zt(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const f of a.mergeFields){const p=Lf(e,f,r);if(!o.contains(p))throw new z(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);DN(h,p)||h.push(p)}u=new zt(h),d=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=o.fieldTransforms;return new IR(new Ct(l),u,d)}class Zu extends nl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zu}}class kp extends nl{_toFieldTransform(e){return new W_(e.path,new Do)}isEqual(e){return e instanceof kp}}class Ip extends nl{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new Mo(e.serializer,B_(e.serializer,this.Fc));return new W_(e.path,r)}isEqual(e){return e instanceof Ip&&this.Fc===e.Fc}}function AR(t,e,r,n){const s=t.Cc(1,e,r);Cp("Data must be an object, but it was:",s,n);const a=[],o=Ct.empty();ms(n,(u,d)=>{const h=Ap(e,u,r);d=Pe(d);const f=s.yc(h);if(d instanceof Zu)a.push(h);else{const p=il(d,f);p!=null&&(a.push(h),o.set(h,p))}});const l=new zt(a);return new kN(o,l,s.fieldTransforms)}function RR(t,e,r,n,s,a){const o=t.Cc(1,e,r),l=[Lf(e,n,r)],u=[s];if(a.length%2!=0)throw new z(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(Lf(e,a[p])),u.push(a[p+1]);const d=[],h=Ct.empty();for(let p=l.length-1;p>=0;--p)if(!DN(d,l[p])){const y=l[p];let S=u[p];S=Pe(S);const v=o.yc(y);if(S instanceof Zu)d.push(y);else{const x=il(S,v);x!=null&&(d.push(y),h.set(y,x))}}const f=new zt(d);return new kN(h,f,o.fieldTransforms)}function AN(t,e,r,n=!1){return il(r,t.Cc(n?4:3,e))}function il(t,e){if(PN(t=Pe(t)))return Cp("Unsupported field value:",e,t),RN(t,e);if(t instanceof nl)return function(n,s){if(!IN(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const a=[];let o=0;for(const l of n){let u=il(l,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,s){if((n=Pe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return B_(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Ee.fromDate(n);return{timestampValue:ru(s.serializer,a)}}if(n instanceof Ee){const a=new Ee(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ru(s.serializer,a)}}if(n instanceof Or)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Yt)return{bytesValue:X_(s.serializer,n._byteString)};if(n instanceof Fe){const a=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:cp(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Lr)return function(o,l){return{mapValue:{fields:{[T_]:{stringValue:S_},[Zc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return ip(l.serializer,d)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Lu(n)}`)}(t,e)}function RN(t,e){const r={};return w_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(t,(n,s)=>{const a=il(s,e.mc(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function PN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof Or||t instanceof Yt||t instanceof Fe||t instanceof nl||t instanceof Lr)}function Cp(t,e,r){if(!PN(r)||!y_(r)){const n=Lu(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function Lf(t,e,r){if((e=Pe(e))instanceof Xu)return e._internalPath;if(typeof e=="string")return Ap(t,e);throw ou("Field path arguments must be of type string or ",t,!1,void 0,r)}const PR=new RegExp("[~\\*/\\[\\]]");function Ap(t,e,r){if(e.search(PR)>=0)throw ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Xu(...e.split("."))._internalPath}catch{throw ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function ou(t,e,r,n,s){const a=n&&!n.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${n}`),o&&(u+=` in document ${s}`),u+=")"),new z(V.INVALID_ARGUMENT,l+t+u)}function DN(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,r,n,s,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(ed("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class DR extends Rp{data(){return super.data()}}function ed(t,e){return typeof e=="string"?Ap(t,e):e instanceof Xu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pp{}class td extends Pp{}function ke(t,e,...r){let n=[];e instanceof Pp&&n.push(e),n=n.concat(r),function(a){const o=a.filter(u=>u instanceof Dp).length,l=a.filter(u=>u instanceof rd).length;if(o>1||o>0&&l>0)throw new z(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class rd extends td{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new rd(e,r,n)}_apply(e){const r=this._parse(e);return LN(e._query,r),new qr(e.firestore,e.converter,Tf(e._query,r))}_parse(e){const r=sl(e.firestore);return function(a,o,l,u,d,h,f){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Dy(f,h);const S=[];for(const v of f)S.push(Py(u,a,v));p={arrayValue:{values:S}}}else p=Py(u,a,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Dy(f,h),p=AN(l,o,f,h==="in"||h==="not-in");return He.create(d,h,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function se(t,e,r){const n=e,s=ed("where",t);return rd._create(s,n,r)}class Dp extends Pp{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Dp(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:yr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const u of l)LN(o,u),o=Tf(o,u)}(e._query,r),new qr(e.firestore,e.converter,Tf(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Op extends td{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Op(e,r)}_apply(e){const r=function(s,a,o){if(s.startAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Po(a,o)}(e._query,this._field,this._direction);return new qr(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new ei(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Ve(t,e="asc"){const r=e,n=ed("orderBy",t);return Op._create(n,r)}class Lp extends td{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Lp(e,r,n)}_apply(e){return new qr(e.firestore,e.converter,tu(e._query,this._limit,this._limitType))}}function Mr(t){return BC("limit",t),Lp._create("limit",t,"F")}class Mp extends td{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Mp(e,r,n)}_apply(e){const r=LR(e,this.type,this._docOrFields,this._inclusive);return new qr(e.firestore,e.converter,function(s,a){return new ei(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)}(e._query,r))}}function OR(...t){return Mp._create("startAfter",t,!1)}function LR(t,e,r,n){if(r[0]=Pe(r[0]),r[0]instanceof Rp)return function(a,o,l,u,d){if(!u)throw new z(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const f of Di(a))if(f.field.isKeyField())h.push(eu(o,u.key));else{const p=u.data.field(f.field);if(Fu(p))throw new z(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=f.field.canonicalString();throw new z(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(p)}return new Gi(h,d)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=sl(t.firestore);return function(o,l,u,d,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new z(V.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let S=0;S<h.length;S++){const v=h[S];if(p[S].field.isKeyField()){if(typeof v!="string")throw new z(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof v}`);if(!sp(o)&&v.indexOf("/")!==-1)throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${v}' contains a slash.`);const x=o.path.child(be.fromString(v));if(!G.isDocumentKey(x))throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const w=new G(x);y.push(eu(l,w))}else{const x=AN(u,d,v);y.push(x)}}return new Gi(y,f)}(t._query,t.firestore._databaseId,s,e,r,n)}}function Py(t,e,r){if(typeof(r=Pe(r))=="string"){if(r==="")throw new z(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sp(e)&&r.indexOf("/")!==-1)throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(be.fromString(r));if(!G.isDocumentKey(n))throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return eu(t,new G(n))}if(r instanceof Fe)return eu(t,r._key);throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lu(r)}.`)}function Dy(t,e){if(!Array.isArray(t)||t.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LN(t,e){const r=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class MR{convertValue(e,r="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return ms(e,(s,a)=>{n[s]=this.convertValue(a,r)}),n}convertVectorValue(e){var n,s,a;const r=(a=(s=(n=e.fields)==null?void 0:n[Zc].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>Be(o.doubleValue));return new Lr(r)}convertGeoPoint(e){return new Or(Be(e.latitude),Be(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Uu(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Co(e));default:return null}}convertTimestamp(e){const r=ns(e);return new Ee(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=be.fromString(e);ge(sN(n),9688,{name:e});const s=new Ao(n.get(1),n.get(3)),a=new G(n.popFirst(5));return s.isEqual(r)||hn(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class $a{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ds extends Rp{constructor(e,r,n,s,a,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(ed("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Ds._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ds._jsonSchema={type:We("string",Ds._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class pc extends Ds{data(e={}){return super.data(e)}}class Os{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new $a(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new pc(this._firestore,this._userDataWriter,n.key,n,new $a(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new z(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new pc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new $a(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new pc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new $a(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:VR(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Os._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function VR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){t=Ot(t,Fe);const e=Ot(t.firestore,mn);return NR(Ju(e),t._key).then(r=>VN(e,t,r))}Os._jsonSchemaVersion="firestore/querySnapshot/1.0",Os._jsonSchema={type:We("string",Os._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};class Vp extends MR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yt(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,r)}}function yt(t){t=Ot(t,qr);const e=Ot(t.firestore,mn),r=Ju(e),n=new Vp(e);return ON(t._query),jR(r,t._query).then(s=>new Os(e,n,t,s))}function qa(t,e,r){t=Ot(t,Fe);const n=Ot(t.firestore,mn),s=MN(t.converter,e);return nd(n,[CN(sl(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Zt.none())])}function Xe(t,e,r,...n){t=Ot(t,Fe);const s=Ot(t.firestore,mn),a=sl(s);let o;return o=typeof(e=Pe(e))=="string"||e instanceof Xu?RR(a,"updateDoc",t._key,e,r,n):AR(a,"updateDoc",t._key,e),nd(s,[o.toMutation(t._key,Zt.exists(!0))])}function Fp(t){return nd(Ot(t.firestore,mn),[new ap(t._key,Zt.none())])}function br(t,e){const r=Ot(t.firestore,mn),n=de(t),s=MN(t.converter,e);return nd(r,[CN(sl(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Zt.exists(!1))]).then(()=>n)}function vr(t,...e){var u,d,h;t=Pe(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||Ry(e[n])||(r=e[n++]);const s={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(Ry(e[n])){const f=e[n];e[n]=(u=f.next)==null?void 0:u.bind(f),e[n+1]=(d=f.error)==null?void 0:d.bind(f),e[n+2]=(h=f.complete)==null?void 0:h.bind(f)}let a,o,l;if(t instanceof Fe)o=Ot(t.firestore,mn),l=Bu(t._key.path),a={next:f=>{e[n]&&e[n](VN(o,t,f))},error:e[n+1],complete:e[n+2]};else{const f=Ot(t,qr);o=Ot(f.firestore,mn),l=f._query;const p=new Vp(o);a={next:y=>{e[n]&&e[n](new Os(o,p,f,y))},error:e[n+1],complete:e[n+2]},ON(t._query)}return function(p,y,S,v){const x=new Tp(v),w=new Np(y,x,S);return p.asyncQueue.enqueueAndForget(async()=>wp(await au(p),w)),()=>{x.Nu(),p.asyncQueue.enqueueAndForget(async()=>bp(await au(p),w))}}(Ju(o),l,s,a)}function nd(t,e){return function(n,s){const a=new rn;return n.asyncQueue.enqueueAndForget(async()=>dR(await _R(n),s,a)),a.promise}(Ju(t),e)}function VN(t,e,r){const n=r.docs.get(e._key),s=new Vp(t);return new Ds(t,s,e._key,n,new $a(r.hasPendingWrites,r.fromCache),e.converter)}function he(){return new kp("serverTimestamp")}function ao(t){return new Ip("increment",t)}(function(e,r=!0){(function(s){sa=s})(Zs),$s(new ts("firestore",(n,{instanceIdentifier:s,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new mn(new RC(n.getProvider("auth-internal")),new OC(o,n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ao(d.options.projectId,h)}(o,s),o);return a={useFetchStreams:r,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Cr(M0,V0,e),Cr(M0,V0,"esm2020")})();var FR="firebase",UR="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(FR,UR,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="firebasestorage.googleapis.com",BR="storageBucket",zR=2*60*1e3,$R=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends $r{constructor(e,r,n=0){super(gh(e),`Firebase Storage: ${r} (${gh(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ur;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ur||(Ur={}));function gh(t){return"storage/"+t}function qR(){const t="An unknown error occurred, please check the error payload for server response.";return new Hr(Ur.UNKNOWN,t)}function HR(){return new Hr(Ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WR(){return new Hr(Ur.CANCELED,"User canceled the upload/download.")}function GR(t){return new Hr(Ur.INVALID_URL,"Invalid URL '"+t+"'.")}function KR(t){return new Hr(Ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Oy(t){return new Hr(Ur.INVALID_ARGUMENT,t)}function UN(){return new Hr(Ur.APP_DELETED,"The Firebase app was deleted.")}function QR(t){return new Hr(Ur.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=fr.makeFromUrl(e,r)}catch{return new fr(e,"")}if(n.path==="")return n;throw KR(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function a(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),S={bucket:1,path:3},v=r===FN?"(?:storage.googleapis.com|storage.cloud.google.com)":r,x="([^?#]*)",w=new RegExp(`^https?://${v}/${s}/${x}`,"i"),N=[{regex:l,indices:u,postModify:a},{regex:y,indices:S,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let P=0;P<N.length;P++){const L=N[P],D=L.regex.exec(e);if(D){const T=D[L.indices.bucket];let _=D[L.indices.path];_||(_=""),n=new fr(T,_),L.postModify(n);break}}if(n==null)throw GR(e);return n}}class YR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t,e,r){let n=1,s=null,a=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...x){d||(d=!0,e.apply(null,x))}function f(x){s=setTimeout(()=>{s=null,t(y,u())},x)}function p(){a&&clearTimeout(a)}function y(x,...w){if(d){p();return}if(x){p(),h.call(null,x,...w);return}if(u()||o){p(),h.call(null,x,...w);return}n<64&&(n*=2);let N;l===1?(l=2,N=0):N=(n+Math.random())*1e3,f(N)}let S=!1;function v(x){S||(S=!0,p(),!d&&(s!==null?(x||(l=2),clearTimeout(s),f(0)):x||(l=1)))}return f(0),a=setTimeout(()=>{o=!0,v(!0)},r),v}function XR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){return t!==void 0}function Ly(t,e,r,n){if(n<e)throw Oy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Oy(`Invalid value for '${t}'. Expected ${r} or less.`)}function eP(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var lu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(lu||(lu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,r,n,s,a,o,l,u,d,h,f,p=!0,y=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,v)=>{this.resolve_=S,this.reject_=v,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new ql(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===lu.NO_ERROR,u=a.getStatus();if(!l||tP(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===lu.ABORT;n(!1,new ql(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;n(!0,new ql(d,a))})},r=(n,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());ZR(u)?a(u):a()}catch(u){o(u)}else if(l!==null){const u=qR();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?UN():WR();o(u)}else{const u=HR();o(u)}};this.canceled_?r(!1,new ql(!1,null,!0)):this.backoffId_=JR(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ql{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function nP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function sP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function aP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function oP(t,e,r,n,s,a,o=!0,l=!1){const u=eP(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return iP(h,e),nP(h,r),sP(h,a),aP(h,n),new rP(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function cP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,r){this._service=e,r instanceof fr?this._location=r:this._location=fr.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new cu(e,r)}get root(){const e=new fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cP(this._location.path)}get storage(){return this._service}get parent(){const e=lP(this._location.path);if(e===null)return null;const r=new fr(this._location.bucket,e);return new cu(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw QR(e)}}function My(t,e){const r=e==null?void 0:e[BR];return r==null?null:fr.makeFromBucketSpec(r,t)}function uP(t,e,r,n={}){t.host=`${e}:${r}`;const s=Xs(e);s&&(Fm(`https://${t.host}/b`),Um("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:Nb(a,t.app.options.projectId))}class dP{constructor(e,r,n,s,a,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=FN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zR,this._maxUploadRetryTime=$R,this._requests=new Set,s!=null?this._bucket=fr.makeFromBucketSpec(s,this._host):this._bucket=My(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fr.makeFromBucketSpec(this._url,e):this._bucket=My(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ly("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ly("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cu(this,e)}_makeRequest(e,r,n,s,a=!0){if(this._deleted)return new YR(UN());{const o=oP(e,this._appId,n,s,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const Vy="@firebase/storage",Fy="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="storage";function hP(t=$m(),e){t=Pe(t);const n=Ru(t,BN).getImmediate({identifier:e}),s=wb("storage");return s&&fP(n,...s),n}function fP(t,e,r,n={}){uP(t,e,r,n)}function mP(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new dP(r,n,s,e,Zs)}function pP(){$s(new ts(BN,mP,"PUBLIC").setMultipleInstances(!0)),Cr(Vy,Fy,""),Cr(Vy,Fy,"esm2020")}pP();const gP={apiKey:"AIzaSyBbTfR42ZW61pY4x2_3YYsqZyPv5I6tFoU",authDomain:"jonna-8cd90.firebaseapp.com",projectId:"jonna-8cd90",storageBucket:"jonna-8cd90.firebasestorage.app",messagingSenderId:"152710460832",appId:"1:152710460832:web:74928c608ca5c55b71e0c5"};let Hl,Wr,q,xP;try{Hl=Tb(gP),Wr=kC(Hl),q=TR(Hl),xP=hP(Hl)}catch(t){throw console.error("Firebase initialization error:",t),t}class yP{constructor(){js(this,"currentUser",null)}async signIn(e,r){try{const n=await uI(Wr,e,r),s=await this.getUserData(n.user.uid);if(!s)throw new Error("User data not found");return await this.updateLastLogin(s.uid),this.currentUser=s,s}catch(n){throw console.error("Sign in error:",n),new Error(n.message||"Failed to sign in")}}async signUp(e,r,n){try{const a=(await cI(Wr,e,r)).user;n&&await T0(a,{displayName:n});const o={uid:a.uid,email:a.email,role:"user",createdAt:he(),updatedAt:he(),lastLoginAt:he()};return(n||a.displayName)&&(o.displayName=n||a.displayName),a.photoURL&&(o.photoURL=a.photoURL),await qa(de(q,"users",a.uid),o),this.currentUser=o,o}catch(s){throw console.error("Sign up error:",s),new Error(s.message||"Failed to sign up")}}async signOut(){try{await xI(Wr),this.currentUser=null}catch(e){throw console.error("Sign out error:",e),new Error(e.message||"Failed to sign out")}}async resetPassword(e){try{await lI(Wr,e)}catch(r){throw console.error("Password reset error:",r),new Error(r.message||"Failed to send password reset email")}}async updateUserPassword(e){const r=Wr.currentUser;if(!r)throw new Error("No user is currently signed in");try{await hI(r,e)}catch(n){throw console.error("Update password error:",n),new Error(n.message||"Failed to update password")}}async updateUserProfile(e){const r=Wr.currentUser;if(!r)throw new Error("No user is currently signed in");try{await T0(r,e),await Xe(de(q,"users",r.uid),{...e,updatedAt:he()})}catch(n){throw console.error("Update profile error:",n),new Error(n.message||"Failed to update profile")}}async getUserData(e){try{const r=await Vt(de(q,"users",e));return r.exists()?r.data():null}catch(r){return console.error("Get user data error:",r),null}}async updateLastLogin(e){try{await Xe(de(q,"users",e),{lastLoginAt:he()})}catch(r){console.error("Update last login error:",r)}}async updateUserRole(e,r){const n=this.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can update user roles");try{await Xe(de(q,"users",e),{role:r,updatedAt:he()})}catch(s){throw console.error("Update user role error:",s),new Error(s.message||"Failed to update user role")}}onAuthStateChange(e){return gI(Wr,async r=>{if(r){const n=await this.getUserData(r.uid);this.currentUser=n,e(n)}else this.currentUser=null,e(null)})}getCurrentUser(){return this.currentUser}getFirebaseUser(){return Wr.currentUser}isAuthenticated(){return this.currentUser!==null}isAdmin(){var e;return((e=this.currentUser)==null?void 0:e.role)==="admin"}async checkAdminAccess(){const e=this.getCurrentUser();if(!e)return!1;const r=await this.getUserData(e.uid);return(r==null?void 0:r.role)==="admin"}}const xe=new yP;class vP{constructor(){js(this,"collectionName","beats")}async getPublishedBeats(){try{const e=ke(le(q,this.collectionName),se("status","==","published"),Ve("createdAt","desc")),r=await yt(e),n=[];return r.forEach(s=>{n.push({id:s.id,...s.data()})}),n}catch(e){return console.error("Get published beats error:",e),[]}}async createBeat(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can create beats");try{const n={...e,plays:0,downloads:0,likes:0,createdBy:r.uid,lastUpdatedBy:r.uid,createdAt:he(),updatedAt:he()},s=await br(le(q,this.collectionName),n),a=await this.getBeatById(s.id);if(!a)throw new Error("Failed to retrieve created beat");return a}catch(n){throw console.error("Create beat error:",n),new Error(n.message||"Failed to create beat")}}async getBeatById(e){try{const r=await Vt(de(q,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get beat by ID error:",r),null}}async getAllBeats(e){try{const r=[];e!=null&&e.status&&r.push(se("status","==",e.status)),e!=null&&e.genre&&r.push(se("genre","==",e.genre)),(e==null?void 0:e.featured)!==void 0&&r.push(se("featured","==",e.featured)),r.push(Ve("createdAt","desc"));const n=(e==null?void 0:e.pageSize)||20;r.push(Mr(n+1)),e!=null&&e.lastDoc&&r.push(OR(e.lastDoc));const s=ke(le(q,this.collectionName),...r),a=await yt(s),o=[];a.forEach(u=>{o.length<n&&o.push({id:u.id,...u.data()})});const l=a.docs.length>n;return{data:o,total:o.length,page:0,pageSize:n,hasMore:l}}catch(r){return console.error("Get all beats error:",r),{data:[],total:0,page:0,pageSize:(e==null?void 0:e.pageSize)||20,hasMore:!1}}}async updateBeat(e,r){const n=xe.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized");try{await Xe(de(q,this.collectionName,e),{...r,lastUpdatedBy:n.uid,updatedAt:he()})}catch(s){throw console.error("Update beat error:",s),new Error(s.message||"Failed to update beat")}}async deleteBeat(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized");try{await Fp(de(q,this.collectionName,e))}catch(n){throw console.error("Delete beat error:",n),new Error(n.message||"Failed to delete beat")}}async getFeaturedBeats(){try{const e=ke(le(q,this.collectionName),se("featured","==",!0),se("status","==","published"),Ve("createdAt","desc"),Mr(6)),r=await yt(e),n=[];return r.forEach(s=>{n.push({id:s.id,...s.data()})}),n}catch(e){return console.error("Get featured beats error:",e),[]}}async getTrendingBeats(){try{const e=ke(le(q,this.collectionName),se("trending","==",!0),se("status","==","published"),Ve("plays","desc"),Mr(10)),r=await yt(e),n=[];return r.forEach(s=>{n.push({id:s.id,...s.data()})}),n}catch(e){return console.error("Get trending beats error:",e),[]}}async getGenres(){try{const e=await yt(le(q,this.collectionName)),r=new Set;return e.forEach(n=>{const s=n.data();s.genre&&r.add(s.genre)}),Array.from(r).sort()}catch(e){return console.error("Get genres error:",e),[]}}subscribeToBeats(e,r){const n=[Ve("createdAt","desc")];r!=null&&r.status&&n.push(se("status","==",r.status)),(r==null?void 0:r.featured)!==void 0&&n.push(se("featured","==",r.featured)),r!=null&&r.genre&&n.push(se("genre","==",r.genre));const s=ke(le(q,this.collectionName),...n);return vr(s,a=>{const o=[];a.forEach(l=>{o.push({id:l.id,...l.data()})}),e(o)},a=>{console.error("Subscribe to beats error:",a)})}async incrementPlays(e){try{await Xe(de(q,this.collectionName,e),{plays:ao(1)})}catch(r){console.error("Increment plays error:",r)}}async incrementDownloads(e){try{await Xe(de(q,this.collectionName,e),{downloads:ao(1)})}catch(r){console.error("Increment downloads error:",r)}}}const pn=new vP;class wP{constructor(){js(this,"collectionName","orders")}generateOrderNumber(){const e=new Date().getFullYear(),r=Math.floor(Math.random()*99999).toString().padStart(5,"0");return`JR-${e}-${r}`}async createOrder(e){try{const r={...e,orderNumber:this.generateOrderNumber(),createdAt:he(),updatedAt:he()},n=await br(le(q,this.collectionName),r),s=await this.getOrderById(n.id);if(!s)throw new Error("Failed to retrieve created order");return s}catch(r){throw console.error("Create order error:",r),new Error(r.message||"Failed to create order")}}async getOrderById(e){try{const r=await Vt(de(q,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get order by ID error:",r),null}}async getOrderByNumber(e){try{const r=ke(le(q,this.collectionName),se("orderNumber","==",e),Mr(1)),n=await yt(r);if(!n.empty){const s=n.docs[0];return{id:s.id,...s.data()}}return null}catch(r){return console.error("Get order by number error:",r),null}}async getAllOrders(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can view all orders");try{const n=[];e!=null&&e.status&&n.push(se("status","==",e.status));const s=(e==null?void 0:e.orderByField)||"createdAt",a=(e==null?void 0:e.orderDirection)||"desc";n.push(Ve(s,a)),e!=null&&e.limit&&n.push(Mr(e.limit));const o=ke(le(q,this.collectionName),...n),l=await yt(o),u=[];return l.forEach(d=>{u.push({id:d.id,...d.data()})}),u}catch(n){throw console.error("Get all orders error:",n),new Error("Failed to fetch orders")}}async getOrdersByCustomer(e){try{const r=ke(le(q,this.collectionName),se("customerEmail","==",e),Ve("createdAt","desc")),n=await yt(r),s=[];return n.forEach(a=>{s.push({id:a.id,...a.data()})}),s}catch(r){throw console.error("Get orders by customer error:",r),new Error("Failed to fetch customer orders")}}async updateOrderStatus(e,r,n){const s=xe.getCurrentUser();if(!s||s.role!=="admin")throw new Error("Unauthorized: Only admins can update order status");try{const a={status:r,updatedAt:he()};r==="completed"&&(a.completedAt=he()),n&&(a.adminNote=n),await Xe(de(q,this.collectionName,e),a)}catch(a){throw console.error("Update order status error:",a),new Error(a.message||"Failed to update order status")}}async updateOrder(e,r){const n=xe.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can update orders");try{const s={...r,updatedAt:he()};delete s.id,delete s.createdAt,delete s.orderNumber,await Xe(de(q,this.collectionName,e),s)}catch(s){throw console.error("Update order error:",s),new Error(s.message||"Failed to update order")}}async addDownloadLinks(e,r){try{await Xe(de(q,this.collectionName,e),{downloadLinks:r,updatedAt:he()})}catch(n){throw console.error("Add download links error:",n),new Error(n.message||"Failed to add download links")}}async addLicensePDFs(e,r){try{await Xe(de(q,this.collectionName,e),{licensePDFs:r,updatedAt:he()})}catch(n){throw console.error("Add license PDFs error:",n),new Error(n.message||"Failed to add license PDFs")}}async getOrderStatistics(){const e=xe.getCurrentUser();if(!e||e.role!=="admin")throw new Error("Unauthorized: Only admins can view statistics");try{const r=await yt(le(q,this.collectionName));let n=0,s=0,a=0,o=0;r.forEach(u=>{const d=u.data();n++,d.status==="completed"&&(s+=d.total,o++),(d.status==="pending"||d.status==="processing")&&a++});const l=n>0?s/o:0;return{totalOrders:n,totalRevenue:s,pendingOrders:a,completedOrders:o,averageOrderValue:l}}catch(r){throw console.error("Get order statistics error:",r),new Error("Failed to fetch order statistics")}}async getRecentOrders(e=10){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can view recent orders");try{const n=ke(le(q,this.collectionName),Ve("createdAt","desc"),Mr(e)),s=await yt(n),a=[];return s.forEach(o=>{a.push({id:o.id,...o.data()})}),a}catch(n){return console.error("Get recent orders error:",n),[]}}subscribeToOrders(e,r){const n=xe.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can subscribe to orders");const s=[Ve("createdAt","desc")];r!=null&&r.status&&s.push(se("status","==",r.status)),r!=null&&r.customerId&&s.push(se("customerId","==",r.customerId));const a=ke(le(q,this.collectionName),...s);return vr(a,o=>{const l=[];o.forEach(u=>{l.push({id:u.id,...u.data()})}),e(l)},o=>{console.error("Subscribe to orders error:",o)})}subscribeToOrder(e,r){return vr(de(q,this.collectionName,e),n=>{n.exists()?r({id:n.id,...n.data()}):r(null)},n=>{console.error("Subscribe to order error:",n),r(null)})}}const Br=new wP;class bP{constructor(){js(this,"collectionName","content")}async createContent(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can create content");try{const n={...e,author:r.uid,authorName:r.displayName||r.email,views:0,likes:0,shares:0,createdAt:he(),updatedAt:he()},s=await br(le(q,this.collectionName),n),a=await this.getContentById(s.id);if(!a)throw new Error("Failed to retrieve created content");return a}catch(n){throw console.error("Create content error:",n),new Error(n.message||"Failed to create content")}}async getContentById(e){try{const r=await Vt(de(q,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get content by ID error:",r),null}}async getContentBySlug(e){try{const r=ke(le(q,this.collectionName),se("slug","==",e),Mr(1)),n=await yt(r);if(!n.empty){const s=n.docs[0];return{id:s.id,...s.data()}}return null}catch(r){return console.error("Get content by slug error:",r),null}}async getAllContent(e){try{const r=[];e!=null&&e.type&&r.push(se("type","==",e.type)),e!=null&&e.status&&r.push(se("status","==",e.status)),(e==null?void 0:e.featured)!==void 0&&r.push(se("featured","==",e.featured)),e!=null&&e.category&&r.push(se("category","==",e.category)),r.push(Ve("createdAt","desc")),e!=null&&e.limitCount&&r.push(Mr(e.limitCount));const n=ke(le(q,this.collectionName),...r),s=await yt(n),a=[];return s.forEach(o=>{a.push({id:o.id,...o.data()})}),a}catch(r){throw console.error("Get all content error:",r),new Error("Failed to fetch content")}}async getPublishedContent(e,r){try{const n=[se("status","==","published"),Ve("publishedAt","desc")];e&&n.push(se("type","==",e)),r&&n.push(Mr(r));const s=ke(le(q,this.collectionName),...n),a=await yt(s),o=[];return a.forEach(l=>{o.push({id:l.id,...l.data()})}),o}catch(n){return console.error("Get published content error:",n),[]}}async getFeaturedContent(e){try{const r=[se("featured","==",!0),se("status","==","published"),Ve("publishedAt","desc")];e&&r.push(se("type","==",e));const n=ke(le(q,this.collectionName),...r),s=await yt(n),a=[];return s.forEach(o=>{a.push({id:o.id,...o.data()})}),a}catch(r){return console.error("Get featured content error:",r),[]}}async updateContent(e,r){const n=xe.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can update content");try{const s={...r,updatedAt:he()};r.status==="published"&&!r.publishedAt&&(s.publishedAt=he()),delete s.id,delete s.createdAt,delete s.author,await Xe(de(q,this.collectionName,e),s)}catch(s){throw console.error("Update content error:",s),new Error(s.message||"Failed to update content")}}async deleteContent(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can delete content");try{await Fp(de(q,this.collectionName,e))}catch(n){throw console.error("Delete content error:",n),new Error(n.message||"Failed to delete content")}}async incrementViews(e){try{await Xe(de(q,this.collectionName,e),{views:ao(1)})}catch(r){console.error("Increment views error:",r)}}async incrementLikes(e){try{await Xe(de(q,this.collectionName,e),{likes:ao(1)})}catch(r){console.error("Increment likes error:",r)}}async incrementShares(e){try{await Xe(de(q,this.collectionName,e),{shares:ao(1)})}catch(r){console.error("Increment shares error:",r)}}subscribeToContent(e,r){const n=[Ve("createdAt","desc")];r!=null&&r.type&&n.push(se("type","==",r.type)),r!=null&&r.status&&n.push(se("status","==",r.status)),(r==null?void 0:r.featured)!==void 0&&n.push(se("featured","==",r.featured));const s=ke(le(q,this.collectionName),...n);return vr(s,a=>{const o=[];a.forEach(l=>{o.push({id:l.id,...l.data()})}),e(o)},a=>{console.error("Subscribe to content error:",a)})}}const uu=new bP;class _P{constructor(){js(this,"collectionName","collaborations")}async getAll(){try{const e=await yt(le(q,this.collectionName)),r=[];return e.forEach(n=>{r.push({id:n.id,...n.data()})}),r}catch(e){return console.error("Get all collaborations error:",e),[]}}async createCollaboration(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can create collaborations");try{const n={...e,paidAmount:0,createdBy:r.uid,createdAt:he(),updatedAt:he()},s=await br(le(q,this.collectionName),n),a=await this.getCollaborationById(s.id);if(!a)throw new Error("Failed to retrieve created collaboration");return a}catch(n){throw console.error("Create collaboration error:",n),new Error(n.message||"Failed to create collaboration")}}async getCollaborationById(e){try{const r=await Vt(de(q,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get collaboration by ID error:",r),null}}async getAllCollaborations(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can view collaborations");try{const n=[];e!=null&&e.status&&n.push(se("status","==",e.status)),e!=null&&e.type&&n.push(se("type","==",e.type)),n.push(Ve("createdAt","desc")),e!=null&&e.limitCount&&n.push(Mr(e.limitCount));const s=ke(le(q,this.collectionName),...n),a=await yt(s),o=[];return a.forEach(l=>{o.push({id:l.id,...l.data()})}),o}catch(n){throw console.error("Get all collaborations error:",n),new Error("Failed to fetch collaborations")}}async updateCollaboration(e,r){const n=xe.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized");try{await Xe(de(q,this.collectionName,e),{...r,updatedAt:he()})}catch(s){throw console.error("Update collaboration error:",s),new Error(s.message||"Failed to update collaboration")}}async deleteCollaboration(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized");try{await Fp(de(q,this.collectionName,e))}catch(n){throw console.error("Delete collaboration error:",n),new Error(n.message||"Failed to delete collaboration")}}}const Vo=new _P;class NP{constructor(){js(this,"collectionName","settings")}async getShopSettings(){try{const e=de(q,this.collectionName,"shop"),r=await Vt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get shop settings error:",e),new Error(e.message||"Failed to get shop settings")}}async saveShopSettings(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const n=de(q,this.collectionName,"shop"),s={...e,updatedAt:he(),updatedBy:r.uid};(await Vt(n)).exists()?await Xe(n,s):await qa(n,s)}catch(n){throw console.error("Save shop settings error:",n),new Error(n.message||"Failed to save shop settings")}}async getGeneralSettings(){try{const e=de(q,this.collectionName,"general"),r=await Vt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get general settings error:",e),new Error(e.message||"Failed to get general settings")}}async saveGeneralSettings(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const n=de(q,this.collectionName,"general"),s={...e,updatedAt:he(),updatedBy:r.uid};(await Vt(n)).exists()?await Xe(n,s):await qa(n,s)}catch(n){throw console.error("Save general settings error:",n),new Error(n.message||"Failed to save general settings")}}async getNotificationSettings(){try{const e=de(q,this.collectionName,"notifications"),r=await Vt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get notification settings error:",e),new Error(e.message||"Failed to get notification settings")}}async saveNotificationSettings(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const n=de(q,this.collectionName,"notifications"),s={...e,updatedAt:he(),updatedBy:r.uid};(await Vt(n)).exists()?await Xe(n,s):await qa(n,s)}catch(n){throw console.error("Save notification settings error:",n),new Error(n.message||"Failed to save notification settings")}}async getSecuritySettings(){try{const e=de(q,this.collectionName,"security"),r=await Vt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get security settings error:",e),new Error(e.message||"Failed to get security settings")}}async saveSecuritySettings(e){const r=xe.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const n=de(q,this.collectionName,"security"),s={...e,updatedAt:he(),updatedBy:r.uid};(await Vt(n)).exists()?await Xe(n,s):await qa(n,s)}catch(n){throw console.error("Save security settings error:",n),new Error(n.message||"Failed to save security settings")}}}const oi=new NP,zN=E.createContext(void 0),Ke=()=>{const t=E.useContext(zN);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},jP=({children:t})=>{const[e,r]=E.useState(null),[n,s]=E.useState(!0);E.useEffect(()=>{const h=xe.onAuthStateChange(f=>{r(f),s(!1)});return()=>h()},[]);const d={user:e,loading:n,signIn:async(h,f)=>{const p=await xe.signIn(h,f);return r(p),p},signUp:async(h,f,p)=>{const y=await xe.signUp(h,f,p);return r(y),y},signOut:async()=>{await xe.signOut(),r(null)},resetPassword:async h=>{await xe.resetPassword(h)},isAuthenticated:e!==null,isAdmin:(e==null?void 0:e.role)==="admin"};return i.jsx(zN.Provider,{value:d,children:t})};function EP(t){switch(t){case"admin":return"/admin/dashboard";case"artist":return"/artist/dashboard";default:return"/customer/dashboard"}}const Le=({children:t,allowedRoles:e})=>{const{user:r,loading:n}=Ke();return n?i.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Loading..."})}):r?e&&!e.includes(r.role)?i.jsx(eo,{to:EP(r.role),replace:!0}):i.jsx(i.Fragment,{children:t}):i.jsx(eo,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,e)=>{const r=E.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:u,...d},h)=>E.createElement("svg",{ref:h,...TP,width:s,height:s,stroke:n,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${SP(t)}`,l].join(" "),...d},[...e.map(([f,p])=>E.createElement(f,p)),...Array.isArray(u)?u:[u]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=J("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=J("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=J("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=J("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=J("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=J("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=J("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=J("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=J("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=J("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=J("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=J("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=J("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=J("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=J("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=J("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=J("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=J("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=J("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=J("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=J("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=J("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=J("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);function YN({cartItemCount:t=0,onCartClick:e}){const[r,n]=E.useState(!1),[s,a]=E.useState(!1),[o,l]=E.useState("login"),[u,d]=E.useState(!1),[h,f]=E.useState(""),[p,y]=E.useState(""),[S,v]=E.useState(""),[x,w]=E.useState(""),[b,N]=E.useState(!1),{user:P,signIn:L,signUp:D,signOut:T}=Ke(),_=yn(),k=async re=>{re.preventDefault(),w(""),N(!0);try{if(o==="login")await L(h,p);else{if(p.length<6){w("Password must be at least 6 characters"),N(!1);return}await D(h,p,S||void 0)}a(!1),f(""),y(""),v(""),_("/customer/dashboard")}catch(et){w(et.message||"Something went wrong")}finally{N(!1)}};E.useEffect(()=>{const re=()=>{d(window.scrollY>50)};return window.addEventListener("scroll",re,{passive:!0}),()=>window.removeEventListener("scroll",re)},[]);const C=async()=>{try{await T(),_("/")}catch(re){console.error("Sign out error:",re)}},R=()=>{if(!P)return"/login";switch(P.role){case"admin":return"/admin/dashboard";case"artist":return"/artist/dashboard";case"user":return"/customer/dashboard";default:return"/login"}},A=()=>P!=null&&P.displayName?P.displayName.split(" ").map(re=>re[0]).join("").toUpperCase().slice(0,2):P!=null&&P.email?P.email[0].toUpperCase():"U",I=()=>{P?_(R()):(l("login"),a(!0))},me=()=>{l(o==="login"?"signup":"login"),w("")};return i.jsx("nav",{className:"fixed top-0 left-0 right-0 z-30",children:i.jsxs("div",{className:"w-full pl-4 pr-4 py-5",children:[i.jsxs("div",{className:"hidden md:flex items-center justify-between",children:[i.jsx("div",{className:`absolute left-1/2 -translate-x-1/2 transition-opacity duration-500 ${u?"opacity-0 pointer-events-none":"opacity-100"}`,children:i.jsxs(X,{to:"/",className:"flex flex-col items-center group",children:[i.jsx("span",{className:"text-3xl font-black text-white leading-none",children:"JONNA RINCON"}),i.jsx("span",{className:"text-xs text-purple-400 tracking-wide mt-1 text-center",children:"Producer  DJ  Audio Engineer"})]})}),i.jsx("div",{className:`transition-opacity duration-500 ${u?"opacity-100":"opacity-0"}`,children:i.jsxs(X,{to:"/",className:"flex flex-col items-center group",children:[i.jsx("span",{className:"text-3xl font-black text-white leading-none",children:"JONNA RINCON"}),i.jsx("span",{className:"text-xs text-purple-400 tracking-wide mt-1 text-center",children:"Producer  DJ  Audio Engineer"})]})}),i.jsxs("div",{className:"flex items-center gap-5",children:[P?i.jsx(X,{to:R(),className:"rounded-full bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-base hover:scale-110 transition-all duration-300 neon-border-subtle hover:neon-border",style:{width:"60px",height:"60px"},title:P.displayName||P.email||"Profile",children:A()}):i.jsx("button",{onClick:I,className:"rounded-full glass flex items-center justify-center text-white hover:text-gray-200 hover:scale-110 transition-all duration-300 neon-border-subtle hover:neon-border",style:{width:"60px",height:"60px"},title:"Login",children:i.jsx(nn,{className:"w-7 h-7"})}),e&&i.jsxs("button",{onClick:e,className:"relative glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 active:scale-95 group/cart",style:{width:"60px",height:"60px",padding:"16px"},children:[i.jsx(tr,{className:"w-7 h-7 group-hover/cart:animate-pulse"}),t>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-sm font-black neon-border-subtle animate-pulse",style:{width:"32px",height:"32px"},children:t})]}),i.jsx("button",{onClick:()=>n(!r),className:"glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 active:scale-95 flex items-center justify-center",style:{width:"60px",height:"60px"},children:r?i.jsx(Ft,{className:"w-7 h-7"}):i.jsx(Ls,{className:"w-7 h-7"})})]})]}),i.jsxs("div",{className:"md:hidden",children:[i.jsxs("div",{className:`transition-opacity duration-500 ${u?"opacity-0 pointer-events-none absolute":"opacity-100"}`,children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsxs(X,{to:"/",className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-2xl font-black text-white leading-none",children:"JONNA RINCON"}),i.jsx("span",{className:"text-xs text-purple-400 tracking-wide mt-1 text-center",children:"Producer  DJ  Audio Engineer"})]})}),i.jsxs("div",{className:"flex items-center justify-center gap-3",children:[P?i.jsx(X,{to:R(),className:"rounded-full bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-sm hover:scale-110 transition-all duration-300",style:{width:"30px",height:"30px"},children:A()}):i.jsx("button",{onClick:I,className:"rounded-full glass flex items-center justify-center text-white hover:text-gray-200 hover:scale-110 transition-all duration-300",style:{width:"30px",height:"30px"},children:i.jsx(nn,{className:"w-4 h-4"})}),e&&i.jsxs("button",{onClick:e,className:"relative glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"30px",height:"30px"},children:[i.jsx(tr,{className:"w-4 h-4"}),t>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-purple-600 rounded-full flex items-center justify-center text-xs font-black",style:{width:"16px",height:"16px",fontSize:"8px"},children:t})]}),i.jsx("button",{onClick:()=>n(!r),className:"glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"30px",height:"30px"},children:r?i.jsx(Ft,{className:"w-4 h-4"}):i.jsx(Ls,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:`transition-opacity duration-500 flex items-center justify-between ${u?"opacity-100":"opacity-0 pointer-events-none absolute"}`,children:[i.jsxs(X,{to:"/",className:"flex flex-col items-start",children:[i.jsx("span",{className:"text-xl font-black text-white leading-none",children:"JONNA RINCON"}),i.jsx("span",{className:"text-xs text-purple-400 tracking-wide",children:"Producer  DJ  Audio Engineer"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[P?i.jsx(X,{to:R(),className:"rounded-full bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-xs hover:scale-110 transition-all duration-300",style:{width:"36px",height:"36px"},children:A()}):i.jsx("button",{onClick:I,className:"rounded-full glass flex items-center justify-center text-white hover:text-gray-200 hover:scale-110 transition-all duration-300",style:{width:"36px",height:"36px"},children:i.jsx(nn,{className:"w-5 h-5"})}),e&&i.jsxs("button",{onClick:e,className:"relative glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"36px",height:"36px"},children:[i.jsx(tr,{className:"w-5 h-5"}),t>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-purple-600 rounded-full flex items-center justify-center text-xs font-black",style:{width:"20px",height:"20px",fontSize:"10px"},children:t})]}),i.jsx("button",{onClick:()=>n(!r),className:"glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"36px",height:"36px"},children:r?i.jsx(Ft,{className:"w-5 h-5"}):i.jsx(Ls,{className:"w-5 h-5"})})]})]})]}),s&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-xl z-[120] animate-fade-in",onClick:()=>a(!1)}),i.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 pointer-events-none",children:i.jsx("div",{className:"pointer-events-auto bg-black/80 backdrop-blur-xl border-2 border-purple-500/30 rounded-3xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-in",children:i.jsxs("div",{className:"p-8",children:[i.jsx("button",{onClick:()=>a(!1),className:"absolute top-6 right-6 p-2 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 hover:rotate-90",children:i.jsx(Ft,{className:"w-5 h-5 text-white"})}),i.jsx("h2",{className:"text-4xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent mb-8",children:o==="login"?"Welcome Back":"Create Account"}),i.jsxs("form",{onSubmit:k,className:"flex flex-col gap-5",children:[x&&i.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-400 px-4 py-3 rounded-xl text-sm",children:x}),o==="signup"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Full Name"}),i.jsx("input",{type:"text",value:S,onChange:re=>v(re.target.value),className:"w-full px-4 py-3 bg-white/5 border-2 border-purple-500/30 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all",placeholder:"Your name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:h,onChange:re=>f(re.target.value),required:!0,className:"w-full px-4 py-3 bg-white/5 border-2 border-purple-500/30 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all",placeholder:"your@email.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Password"}),i.jsx("input",{type:"password",value:p,onChange:re=>y(re.target.value),required:!0,className:"w-full px-4 py-3 bg-white/5 border-2 border-purple-500/30 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all",placeholder:""})]}),o==="login"&&i.jsx("div",{className:"flex justify-end",children:i.jsx("a",{href:"#",className:"text-sm text-purple-400 hover:text-purple-300 transition-colors",children:"Forgot password?"})}),i.jsx("button",{type:"submit",disabled:b,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-xl font-bold text-lg transition-all hover:scale-105 active:scale-95 shadow-xl disabled:opacity-50",children:b?"Loading...":o==="login"?"Sign In":"Create Account"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-gray-400 text-sm",children:o==="login"?i.jsxs(i.Fragment,{children:["Don't have an account?"," ",i.jsx("button",{onClick:me,className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Create one"})]}):i.jsxs(i.Fragment,{children:["Already have an account?"," ",i.jsx("button",{onClick:me,className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Sign in"})]})})})]})})})]}),r&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"hidden md:block",children:[i.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-xl z-[100] animate-fade-in",onClick:()=>n(!1)}),i.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-8 pointer-events-none",children:i.jsx("div",{className:"pointer-events-auto bg-black/80 backdrop-blur-xl border-2 border-purple-500/30 rounded-3xl shadow-2xl max-w-5xl w-full overflow-hidden animate-scale-in",children:i.jsxs("div",{className:"grid grid-cols-2 min-h-[600px]",children:[i.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-purple-900/30 to-black",children:[i.jsx("img",{src:"/menu-artist-image.png",alt:"Jonna Rincon",className:"absolute inset-0 w-full h-full object-cover scale-150",style:{objectPosition:"center 35%",filter:"brightness(0.9) contrast(1.1)"}}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-black/40"})]}),i.jsxs("div",{className:"flex flex-col p-12 justify-center",children:[i.jsx("button",{onClick:()=>n(!1),className:"absolute top-8 right-8 p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 hover:rotate-90",children:i.jsx(Ft,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"flex flex-col gap-6",children:[i.jsx(X,{to:"/",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Home"}),i.jsx("a",{href:"#beats",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Beats"}),i.jsx("a",{href:"#music",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Music"}),i.jsx("a",{href:"#socials",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Socials"}),i.jsx(X,{to:"/shop/beats",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Shop"}),i.jsx("div",{className:"border-t-2 border-purple-500/30 my-4"}),P?i.jsxs(i.Fragment,{children:[i.jsx(X,{to:R(),onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Dashboard"}),i.jsx("button",{onClick:()=>{n(!1),C()},className:"text-white hover:text-red-400 transition-all font-black text-4xl text-left hover:translate-x-4 transform duration-300",children:"Sign Out"})]}):i.jsxs(i.Fragment,{children:[i.jsx(X,{to:"/register",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Sign Up"}),i.jsx("div",{className:"mt-4",children:i.jsxs("p",{className:"text-gray-400 text-base",children:["Don't have an account?"," ",i.jsx(X,{to:"/register",onClick:()=>n(!1),className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Create one"})]})})]})]}),i.jsx("div",{className:"mt-auto pt-8",children:i.jsx("p",{className:"text-sm text-gray-500",children:" 2025 Jonna Rincon"})})]})]})})})]}),i.jsxs("div",{className:"md:hidden",children:[i.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-xl z-[100] animate-fade-in",onClick:()=>n(!1)}),i.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center pointer-events-none",children:i.jsxs("div",{className:"pointer-events-auto bg-black/90 backdrop-blur-2xl border border-purple-500/20 rounded-2xl shadow-2xl w-[92%] max-w-lg max-h-[85vh] overflow-hidden flex flex-col animate-scale-in",children:[i.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-purple-900/20 to-black flex-shrink-0",style:{height:"45vh"},children:[i.jsx("img",{src:"/menu-artist-image.png",alt:"Jonna Rincon",className:"w-full h-full object-cover object-center",style:{objectPosition:"center 35%",filter:"brightness(0.85) contrast(1.15) saturate(1.1)"}}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/80"}),i.jsx("button",{onClick:()=>n(!1),className:"absolute top-5 right-5 w-10 h-10 flex items-center justify-center rounded-full bg-black/40 backdrop-blur-md border border-white/10 hover:bg-black/60 hover:border-white/20 transition-all",children:i.jsx(Ft,{className:"w-5 h-5 text-white",strokeWidth:2.5})})]}),i.jsx("div",{className:"flex-1 flex flex-col justify-center px-10 py-8 overflow-y-auto",children:i.jsxs("div",{className:"flex flex-col items-center gap-6 text-center",children:[i.jsx(X,{to:"/",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Home"}),i.jsx("a",{href:"#beats",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Beats"}),i.jsx("a",{href:"#music",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Music"}),i.jsx("a",{href:"#socials",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Socials"}),i.jsx(X,{to:"/shop/beats",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Shop"}),i.jsx("div",{className:"w-16 border-t border-purple-500/30 my-2"}),P?i.jsxs(i.Fragment,{children:[i.jsx(X,{to:R(),onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Dashboard"}),i.jsx("button",{onClick:()=>{n(!1),C()},className:"text-white/80 hover:text-red-400 transition-all font-bold text-xl tracking-tight hover:scale-105 transform duration-200",children:"Sign Out"})]}):i.jsxs(i.Fragment,{children:[i.jsx(X,{to:"/register",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Sign Up"}),i.jsx("div",{className:"mt-2",children:i.jsxs("p",{className:"text-gray-400 text-sm",children:["Don't have an account?"," ",i.jsx(X,{to:"/register",onClick:()=>n(!1),className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Create one"})]})})]})]})}),i.jsx("div",{className:"flex-shrink-0 py-5 border-t border-white/5",children:i.jsx("p",{className:"text-xs text-gray-500 text-center font-medium tracking-wide",children:" 2025 JONNA RINCON"})})]})})]})]})]})})}function FP(){const t=E.useRef(null),e=E.useRef(null),r=E.useCallback(()=>{const n=window.scrollY,s=window.innerHeight,a=n/s*100;let o;a<10?o=a/10*.3:a<70?o=.3+(a-10)/60*.5:o=.8;const l=Math.min(n/s*10,10);t.current&&(t.current.style.opacity=String(o),t.current.style.backdropFilter=`blur(${l}px)`,t.current.style.webkitBackdropFilter=`blur(${l}px)`),e.current&&(e.current.style.opacity=String(o))},[]);return E.useEffect(()=>(window.addEventListener("scroll",r,{passive:!0}),r(),()=>window.removeEventListener("scroll",r)),[r]),i.jsxs("section",{className:"relative w-full min-h-screen flex items-center justify-center -mt-24",children:[i.jsxs("div",{className:"fixed inset-0 w-full h-screen -z-10",children:[i.jsx("img",{src:"/DJ Screenshot 3-2-26.png",alt:"Jonna Rincon",className:"w-full h-full object-cover",style:{objectFit:"cover",objectPosition:"center"}}),i.jsx("div",{ref:t,className:"absolute inset-0 bg-black",style:{opacity:0}}),i.jsx("div",{ref:e,className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/40",style:{opacity:0}})]}),i.jsx("div",{className:"relative z-10 w-full min-h-screen flex items-center justify-center px-6 pt-24",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 animate-fade-in",children:[i.jsxs("a",{href:"#beats",className:"group relative px-10 py-5 backdrop-blur-md bg-purple-900/20 border-2 border-purple-500/50 rounded-xl font-bold text-xl transition-all duration-300 hover:border-purple-400 hover:bg-purple-600/30 hover:scale-105 active:scale-95 flex items-center justify-center gap-3 min-w-[220px]",children:[i.jsx(Vr,{className:"w-6 h-6",fill:"currentColor"}),i.jsx("span",{children:"Browse Beats"})]}),i.jsx("a",{href:"#music",className:"group relative px-10 py-5 backdrop-blur-md bg-purple-900/20 border-2 border-purple-500/50 rounded-xl font-bold text-xl transition-all duration-300 hover:border-purple-400 hover:bg-purple-600/30 hover:scale-105 active:scale-95 flex items-center justify-center gap-3 min-w-[220px]",children:i.jsx("span",{children:"Listen Now"})})]})})]})}function UP(){const[t,e]=E.useState(0),r=["/DJI_20251115114029_0004_D.JPG","/IMG_1027.jpg","/Maastricht Screenshot 15-12-25.png"],n=()=>{e(a=>(a+1)%r.length)},s=()=>{e(a=>(a-1+r.length)%r.length)};return i.jsx("section",{id:"about",className:"py-8 md:py-80 pb-49 px-4 bg-transparent",children:i.jsx("div",{className:"max-w-[1600px] mx-auto",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-32",children:[i.jsxs("div",{id:"about-gallery",className:"py-12 md:py-0",children:[i.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:r.map((a,o)=>i.jsx("div",{className:`transition-opacity duration-500 ${o===t?"opacity-100":"opacity-0 absolute inset-0"}`,children:i.jsx("img",{src:a,alt:`Jonna Rincon ${o+1}`,className:"w-full h-auto object-cover",style:{minHeight:"300px",maxHeight:"500px"}})},o))}),i.jsxs("div",{className:"flex items-center justify-center gap-6 mt-6",children:[i.jsx("button",{onClick:s,className:"w-10 h-10 lg:w-14 lg:h-14 rounded-full bg-black/60 backdrop-blur-md border border-purple-500/30 flex items-center justify-center hover:bg-purple-600/80 hover:scale-110 transition-all","aria-label":"Previous image",children:i.jsx(qN,{className:"w-5 h-5 lg:w-7 lg:h-7 rotate-[-90deg]"})}),i.jsx("div",{className:"flex gap-2",children:r.map((a,o)=>i.jsx("button",{onClick:()=>e(o),className:`h-2 rounded-full transition-all ${o===t?"w-8 bg-purple-400":"w-2 bg-gray-600"}`,"aria-label":`Go to image ${o+1}`},o))}),i.jsx("button",{onClick:n,className:"w-10 h-10 lg:w-14 lg:h-14 rounded-full bg-black/60 backdrop-blur-md border border-purple-500/30 flex items-center justify-center hover:bg-purple-600/80 hover:scale-110 transition-all","aria-label":"Next image",children:i.jsx($N,{className:"w-5 h-5 lg:w-7 lg:h-7 rotate-[-90deg]"})})]})]}),i.jsxs("div",{id:"about-bio",className:"pt-4 md:pt-0",children:[i.jsx("h3",{className:"text-2xl lg:text-4xl font-bold mb-2 md:mb-4 neon-glow",children:"About Jonna"}),i.jsxs("div",{className:"space-y-2 text-gray-300 text-xs lg:text-lg leading-relaxed",children:[i.jsxs("p",{children:["Jonathan aka ",i.jsx("span",{className:"text-purple-400 font-semibold",children:"j18"})," is a human being with a creative mind which is described by many people as ",i.jsx("span",{className:"italic",children:'"not from this world"'}),". You may already recognize his J18 tag at the beginning and/or end of every track, or by the clock sound in his work."]}),i.jsx("p",{children:"Mostly known for his raw and authentic moombahton style in tracks or beats. But have in mind that this young man has much to offer. From modern rap beats to the dirty old classic hip hop beats, from warm and smooth r&b instrumentals to the world of EDM (electronic dance music) to studying to jonna's lo-fi instrumentals which he made on his trip on earth;"}),i.jsx("p",{children:"Born in Maastricht, The Netherlands & based in Tilburg he began making music when first made contact with any music instrument nearby. When he visited his nephews in Dominican Republic, he was shown FL Studio for the first time. When Jonna saw that it was possible to make a track with a PC, he made his first track immediately together with his oldest nephew and that's where the music production journey started."}),i.jsxs("p",{children:["10+ Years later and the stuff what he can do with a creative program like that is absolute crazy. From the most little things and the most weird noises....never-mind, Jonna Rincon is able to make something out of it... And you can hear that on songs like ",i.jsx("span",{className:"text-purple-400",children:"___"})," and ",i.jsx("span",{className:"text-purple-400",children:"___"})," which have been played on MTV and the Dutch Radio. Not there yet, but on the way. J18"]}),i.jsx("p",{className:"text-purple-300 font-semibold text-xs lg:text-xl italic",children:"(J18=Jeighteen) (Jeighteen=his tag & clothing/brand & nickname)"}),i.jsx("p",{className:"text-purple-300 font-semibold text-xs lg:text-xl",children:"Based in the Netherlands, working with artists worldwide."})]})]})]})})})}function BP({onAddToCart:t}){const[e,r]=E.useState([]),[n,s]=E.useState([]),[a,o]=E.useState(""),[l,u]=E.useState("All"),[d,h]=E.useState(!0),[f,p]=E.useState(null),[y,S]=E.useState("list"),[v,x]=E.useState(null),[w,b]=E.useState(0);E.useEffect(()=>{h(!0),p(null);const A=ke(le(q,"beats"),se("status","==","published"),Ve("createdAt","desc")),I=vr(A,me=>{const re=me.docs.map(et=>{var $,K,te,ve;const St=et.data();return{id:et.id,...St,price:((K=($=St.licenses)==null?void 0:$.basic)==null?void 0:K.price)||St.price||29,created_at:((te=St.createdAt)==null?void 0:te.toDate().toISOString())||new Date().toISOString(),updated_at:((ve=St.updatedAt)==null?void 0:ve.toDate().toISOString())||new Date().toISOString()}});r(re),s(re),h(!1)},me=>{console.error("Firebase error:",me),p("Failed to load beats. Please try again."),h(!1)});return()=>I()},[]),E.useEffect(()=>{N()},[a,l,e]),E.useEffect(()=>{b(0)},[y]);const N=()=>{let A=[...e];if(a){const I=a.toLowerCase();A=A.filter(me=>me.title.toLowerCase().includes(I)||me.genre.toLowerCase().includes(I)||me.tags.some(re=>re.toLowerCase().includes(I)))}l!=="All"&&(A=A.filter(I=>I.genre===l)),s(A),b(0)},P=["All",...Array.from(new Set(e.map(A=>A.genre)))],D=y==="grid"?window.innerWidth<768?6:12:window.innerWidth<768?5:7,T=Math.ceil(n.length/D),_=n.slice(w*D,(w+1)*D),k=()=>{w<T-1&&b(w+1)},C=()=>{w>0&&b(w-1)},R=e.filter(A=>A.featured).slice(0,6);return i.jsx("section",{id:"beats",className:"min-h-screen py-24 px-4 bg-transparent flex flex-col",children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full flex-1 flex flex-col",children:[i.jsx("div",{className:"text-center mb-6 md:mb-12",children:i.jsx("h2",{className:"text-3xl md:text-6xl font-bold neon-glow",children:"Beat Store"})}),!d&&R.length>0&&i.jsxs("div",{className:"mb-8 md:mb-12",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-purple-400",children:"Featured Beats"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 md:gap-4",children:R.map(A=>i.jsxs("div",{className:"glass rounded-xl overflow-hidden hover:scale-105 transition-all group flex flex-col relative neon-border",children:[i.jsx("div",{className:"absolute top-2 right-2 z-10 bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-2 py-1 rounded-full text-xs font-bold shadow-lg",children:" FEATURED"}),i.jsxs("div",{className:"relative aspect-square",children:[i.jsx("img",{src:A.artwork_url,alt:A.title,className:"w-full h-full object-cover"}),i.jsx("button",{onClick:()=>x(v===A.id?null:A.id),className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity",children:v===A.id?i.jsx(gc,{className:"w-8 h-8 text-white",fill:"currentColor"}):i.jsx(Vr,{className:"w-8 h-8 text-white ml-1",fill:"currentColor"})})]}),i.jsxs("div",{className:"p-3 flex-1 flex flex-col",children:[i.jsx("h3",{className:"text-sm md:text-base font-bold mb-1 truncate",children:A.title}),i.jsx("p",{className:"text-xs text-gray-400 mb-2 truncate",children:A.artist}),i.jsxs("div",{className:"flex gap-1 mb-2",children:[i.jsx("span",{className:"px-2 py-0.5 bg-purple-900/30 rounded text-xs",children:A.bpm}),i.jsx("span",{className:"px-2 py-0.5 bg-purple-900/30 rounded text-xs",children:A.key})]}),i.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[i.jsxs("span",{className:"text-base md:text-lg font-black text-purple-400",children:["",A.price.toFixed(0)]}),i.jsx("button",{onClick:()=>t(A,"basic"),className:"p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-all hover:scale-110",children:i.jsx(tr,{className:"w-4 h-4"})})]})]})]},A.id))}),i.jsx("div",{className:"my-8 border-t border-purple-900/50"})]}),i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"All Beats"})}),i.jsxs("div",{className:"mb-6 flex gap-2 items-center",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Bp,{className:"absolute left-3 md:left-4 top-1/2 -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 text-purple-400"}),i.jsx("input",{type:"text",placeholder:"Search beats...",value:a,onChange:A=>o(A.target.value),className:"w-full pl-10 md:pl-12 pr-3 md:pr-4 py-2.5 md:py-4 glass rounded-xl text-white text-sm md:text-base placeholder-gray-500 focus:outline-none focus:neon-border transition-all"})]}),i.jsxs("div",{className:"relative w-24 md:w-auto",children:[i.jsx(GN,{className:"absolute left-2 md:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 md:w-4 md:h-4 text-purple-400"}),i.jsx("select",{value:l,onChange:A=>u(A.target.value),className:"w-full pl-7 md:pl-10 pr-2 md:pr-3 py-2.5 md:py-4 glass rounded-xl text-white text-xs md:text-sm focus:outline-none focus:neon-border transition-all appearance-none cursor-pointer",children:P.map(A=>i.jsx("option",{value:A,className:"bg-gray-900",children:A},A))})]}),i.jsx("button",{onClick:()=>S(y==="list"?"grid":"list"),className:"p-2.5 md:p-4 glass rounded-xl text-white hover:bg-purple-600/30 transition-all neon-border-subtle",children:y==="list"?i.jsx(AP,{className:"w-4 h-4 md:w-5 md:h-5"}):i.jsx(RP,{className:"w-4 h-4 md:w-5 md:h-5"})})]}),d?i.jsx("div",{className:"flex justify-center items-center flex-1",children:i.jsx("div",{className:"w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full animate-spin neon-border"})}):f?i.jsx("div",{className:"text-center flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"glass p-8 rounded-xl neon-border max-w-md",children:[i.jsxs("p",{className:"text-2xl text-red-400 mb-4",children:[" ",f]}),i.jsx("button",{onClick:()=>window.location.reload(),className:"bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-xl font-semibold transition-all",children:"Retry"})]})}):n.length===0?i.jsx("div",{className:"text-center flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"glass p-8 rounded-xl neon-border max-w-md",children:[i.jsx("p",{className:"text-2xl text-gray-400 mb-4",children:"No beats found"}),e.length===0?i.jsx("p",{className:"text-gray-500",children:"Add beats via the admin dashboard"}):i.jsx("p",{className:"text-gray-500",children:"Try adjusting your search filters"})]})}):y==="list"?i.jsx("div",{className:"space-y-1 md:space-y-2",children:_.map((A,I)=>i.jsx("div",{className:"glass hover:bg-purple-900/20 rounded-xl p-2 md:p-4 transition-all hover:scale-[1.02] group",children:i.jsxs("div",{className:"grid grid-cols-12 gap-2 md:gap-4 items-center",children:[i.jsx("div",{className:"col-span-1 text-gray-400 text-xs md:text-sm font-semibold",children:w*D+I+1}),i.jsxs("div",{className:"col-span-5 flex items-center gap-2 md:gap-4",children:[i.jsxs("div",{className:"relative w-10 h-10 md:w-16 md:h-16 flex-shrink-0",children:[i.jsx("img",{src:A.artwork_url,alt:A.title,className:"w-full h-full object-cover rounded-lg"}),i.jsx("button",{onClick:()=>x(v===A.id?null:A.id),className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:v===A.id?i.jsx(gc,{className:"w-4 h-4 md:w-6 md:h-6 text-white",fill:"currentColor"}):i.jsx(Vr,{className:"w-4 h-4 md:w-6 md:h-6 text-white ml-1",fill:"currentColor"})})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-white text-xs md:text-base font-semibold truncate",children:A.title}),A.featured&&i.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-1.5 py-0.5 rounded-full text-xs font-bold whitespace-nowrap flex-shrink-0",children:" FEATURED"})]}),i.jsx("p",{className:"text-gray-400 text-xs md:text-sm truncate",children:A.artist})]})]}),i.jsx("div",{className:"col-span-2 text-gray-400 text-xs md:text-sm truncate",children:A.genre}),i.jsxs("div",{className:"col-span-2 text-gray-400 text-xs md:text-sm",children:[A.bpm," BPM  ",A.key]}),i.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2 md:gap-3",children:[i.jsxs("span",{className:"text-sm md:text-xl font-bold text-purple-400",children:["",A.price.toFixed(2)]}),i.jsx("button",{onClick:()=>t(A,"basic"),className:"p-1.5 md:p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-all hover:scale-110",children:i.jsx(tr,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]})},A.id))}):i.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-6 gap-1.5 md:gap-3",children:_.map(A=>i.jsxs("div",{className:"glass rounded-xl overflow-hidden hover:scale-[1.02] transition-all group flex flex-col",style:{minHeight:window.innerWidth<768?"130px":"180px"},children:[i.jsxs("div",{className:"relative aspect-square",children:[i.jsx("img",{src:A.artwork_url,alt:A.title,className:"w-full h-full object-cover"}),i.jsx("button",{onClick:()=>x(v===A.id?null:A.id),className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity",children:v===A.id?i.jsx(gc,{className:"w-5 h-5 md:w-8 md:h-8 text-white",fill:"currentColor"}):i.jsx(Vr,{className:"w-5 h-5 md:w-8 md:h-8 text-white ml-1",fill:"currentColor"})}),A.featured&&i.jsx("div",{className:"absolute top-0.5 right-0.5 md:top-2 md:right-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-1.5 py-0.5 md:px-2 md:py-1 rounded-full text-xs font-bold shadow-lg",children:""})]}),i.jsxs("div",{className:"p-1.5 md:p-3 flex-1 flex flex-col",children:[i.jsx("h3",{className:"text-xs md:text-sm font-bold mb-0.5 md:mb-1 truncate leading-tight",children:A.title}),i.jsx("p",{className:"text-xs text-gray-400 mb-0.5 md:mb-2 truncate",children:A.genre}),i.jsxs("div",{className:"flex gap-0.5 md:gap-1 mb-0.5 md:mb-1",children:[i.jsx("span",{className:"px-1 md:px-2 py-0.5 bg-purple-900/30 rounded text-xs leading-none",children:A.bpm}),i.jsx("span",{className:"px-1 md:px-2 py-0.5 bg-purple-900/30 rounded text-xs leading-none",children:A.key})]}),i.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs md:text-base font-black text-purple-400",children:["",A.price.toFixed(0)]}),i.jsx("button",{onClick:()=>t(A,"basic"),className:"p-1.5 md:p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-all hover:scale-110",children:i.jsx(tr,{className:"w-3 h-3 md:w-4 md:h-4"})})]})]})]},A.id))}),n.length>D&&i.jsxs("div",{className:"mt-3 md:mt-4 flex items-center justify-center gap-3 md:gap-4",children:[i.jsx("button",{onClick:C,disabled:w===0,className:"p-2 md:p-3 glass rounded-xl hover:bg-purple-600/30 transition-all disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous page",children:i.jsx(IP,{className:"w-5 h-5 md:w-6 md:h-6"})}),i.jsx("span",{className:"text-xl md:text-2xl font-bold text-purple-400 px-3 md:px-4 min-w-[40px] md:min-w-[50px] text-center",children:w+1}),i.jsx("button",{onClick:k,disabled:w>=T-1,className:"p-2 md:p-3 glass rounded-xl hover:bg-purple-600/30 transition-all disabled:opacity-30 disabled:cursor-not-allowed",title:"Next page",children:i.jsx(CP,{className:"w-5 h-5 md:w-6 md:h-6"})})]})]})})}function zP(){const[t,e]=E.useState(0),r=[{name:"Top Tracks",embedUrl:"https://open.spotify.com/embed/artist/6o3BlWTeK4EKUyByo35y6F?utm_source=generator"},{name:"Playlist 2",embedUrl:"https://open.spotify.com/embed/playlist/5SaEeqVSV9vyLUvqsrrfJ7?utm_source=generator&theme=0"},{name:"Playlist 3",embedUrl:"https://open.spotify.com/embed/playlist/7mIjrYgNeQxVw2lBBsEDjE?utm_source=generator&theme=0"},{name:"Playlist 4",embedUrl:"https://open.spotify.com/embed/playlist/5smfHiU4egb6uyHYzgmqdC?utm_source=generator"},{name:"This is Jonna Rincon",embedUrl:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3LPWh3?utm_source=generator"}],n=[{id:"This Is Jonna Rincon",name:"This Is",url:"https://open.spotify.com/playlist/37i9dQZF1DZ06evO3LPWh3?si=9f9b5ebdf6de4887",cover:"ThisIsJonna.png"},{id:"DJ Sets",name:"DJ SETS",url:"https://youtube.com/playlist?list=PLgWPe6V88vwBmK5X5WCsj5kvvCb4IXjkM&si=iC-9_BTA0seIFWfr",cover:"TN-DJSet.jpg"},{id:"Mix & Master",name:"Mix & Master",url:"https://open.spotify.com/playlist/5smfHiU4egb6uyHYzgmqdC?si=b9cc2a2438b640ef",cover:"MixedBy.png"},{id:"Moombahton",name:"Moombah Time",url:"https://open.spotify.com/playlist/37i9dQZF1DZ06evO3LPWh3?si=3cf757f3a9604be9",cover:"MoombahTime.png"},{id:"Vlog",name:"Vlogs",url:"https://youtube.com/playlist?list=PLgWPe6V88vwAoxr8xVTv85989fwEe5a10&si=yGwkn0Y3sYluSLcs",cover:"Vlog Foto.png",isYoutube:!0}];return i.jsxs(i.Fragment,{children:[i.jsx("section",{id:"music",className:"py-12 md:py-24 px-4 bg-transparent md:min-h-0 min-h-screen flex items-center",children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full scale-85 md:scale-100 origin-center",children:[i.jsx("div",{className:"text-center mb-8 md:mb-16",children:i.jsxs("h2",{className:"text-3xl md:text-6xl font-bold neon-glow",children:[i.jsx("span",{className:"md:hidden",children:r[t].name}),i.jsx("span",{className:"hidden md:block",children:"Music"})]})}),i.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[i.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[i.jsx("p",{className:"hidden md:block text-2xl md:text-3xl font-bold neon-glow",children:r[t].name}),i.jsx("div",{className:"flex gap-3",children:r.map((s,a)=>i.jsx("button",{onClick:()=>e(a),className:`w-4 h-4 rounded-full transition-all ${t===a?"bg-purple-500 w-8":"bg-gray-600 hover:bg-gray-500"}`,title:s.name,"aria-label":`Switch to ${s.name}`},a))})]}),i.jsx("div",{className:"rounded-xl overflow-hidden relative",children:r.map((s,a)=>i.jsx("div",{className:`transition-opacity duration-500 ${a===t?"opacity-100":"opacity-0 absolute inset-0"}`,children:i.jsx("iframe",{style:{borderRadius:"12px"},src:s.embedUrl,width:"100%",height:"400",frameBorder:"0",allowFullScreen:!0,allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})},a))}),i.jsx("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"mt-6 w-full inline-block text-center py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Open in Spotify"})]})]})}),i.jsx("section",{id:"compilations",className:"py-12 md:py-0 px-4 bg-transparent md:min-h-0 min-h-screen flex items-center",children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[i.jsx("div",{className:"text-center mb-8 md:hidden",children:i.jsx("h2",{className:"text-3xl font-bold neon-glow",children:"Playlists"})}),i.jsx("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-5 gap-3 max-w-5xl",children:n.map(s=>i.jsxs("a",{href:s.url.replace("/embed/","/"),target:"_blank",rel:"noopener noreferrer",className:"group text-center",children:[i.jsx("h4",{className:"text-sm font-bold mb-2 text-purple-300 truncate",children:s.name}),i.jsx("div",{className:"aspect-square rounded-lg overflow-hidden hover:scale-105 transition-all glass neon-border-subtle hover:neon-border",children:i.jsx("img",{src:s.cover,alt:s.name,className:"w-full h-full object-cover"})})]},s.id))})})})]})}),i.jsx("section",{id:"youtube",className:"py-12 md:py-44 md:mt-96 px-4 bg-transparent md:min-h-0 min-h-screen flex items-center",children:i.jsxs("div",{className:"max-w-7xl mx-auto w-full scale-[0.70] md:scale-100 origin-center",children:[i.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[i.jsx("h2",{className:"text-3xl md:text-6xl font-bold mb-4 neon-glow",children:"YouTube"}),i.jsx("p",{className:"text-base md:text-xl text-gray-400",children:"Watch my latest DJ sets and vlogs"})]}),i.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[i.jsxs("div",{className:"relative rounded-xl overflow-hidden group cursor-pointer",children:[i.jsxs("div",{className:"absolute inset-0 z-10 transition-opacity duration-500 group-[.playing]:opacity-0 group-[.playing]:pointer-events-none",onClick:s=>{const a=s.currentTarget.closest(".relative");a==null||a.classList.add("playing");const o=a==null?void 0:a.querySelector("iframe");if(o){const l=o.src;o.src=l+(l.includes("?")?"&":"?")+"autoplay=1"}},children:[i.jsx("img",{src:"DJI_20251017150728_0019_D.JPG",alt:"YouTube thumbnail",className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/20 transition-all",children:i.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:i.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),i.jsx("iframe",{width:"100%",height:"500",src:"https://www.youtube.com/embed/videoseries?si=-lcpC5aW0SSgSOXa&list=PLgWPe6V88vwBmK5X5WCsj5kvvCb4IXjkM",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0,style:{borderRadius:"12px"}})]}),i.jsx("a",{href:"https://youtube.com/@jonnarincon?si=zp6ECLUFUSCXIhhn",target:"_blank",rel:"noopener noreferrer",className:"mt-6 w-full inline-block text-center py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Visit Channel"})]})]})})]})}function $P(){const t=[{name:"Instagram",icon:ad,url:"https://www.instagram.com/jonnarincon/",color:"from-pink-600 to-purple-600"},{name:"TikTok",icon:hu,url:"#",color:"from-black to-teal-600"},{name:"Apple Music",icon:hu,url:"#",color:"from-red-600 to-pink-600"},{name:"YouTube Music",icon:qp,url:"#",color:"from-red-600 to-orange-600"}];return i.jsx("section",{id:"socials",className:"py-64 pb-64 px-4 bg-transparent",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-3xl md:text-6xl font-bold mb-4 neon-glow",children:"Social Media"}),i.jsx("p",{className:"text-xl text-gray-400"})]}),i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:t.map(e=>{const r=e.icon;return i.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"glass rounded-2xl p-8 neon-border-subtle hover:neon-border transition-all hover:scale-105 flex flex-col items-center text-center group",children:[i.jsx("div",{className:`w-20 h-20 rounded-full bg-gradient-to-br ${e.color} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:i.jsx(r,{className:"w-10 h-10 text-white"})}),i.jsx("h3",{className:"text-xl font-bold mb-2",children:e.name}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Follow me"})]},e.name)})}),i.jsxs("div",{className:"glass rounded-2xl p-8 neon-border text-center",children:[i.jsx("h3",{className:"text-2xl font-bold mb-4 text-purple-300",children:"Want exclusive releases?"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"Subscribe to get early access to new beats, free downloads, and special offers"}),i.jsxs("div",{className:"flex gap-4 max-w-md mx-auto",children:[i.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all"}),i.jsx("button",{className:"px-8 py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Subscribe"})]})]})]})})}function qP(){return i.jsx("section",{className:"py-48 pb-64 px-4 bg-transparent",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("div",{className:"inline-flex items-center gap-3 mb-4",children:i.jsx("h2",{className:"text-3xl md:text-6xl font-bold neon-glow",children:"Live Studio"})}),i.jsx("p",{className:"text-xl text-gray-400"})]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("div",{className:"glass rounded-2xl overflow-hidden neon-border aspect-video relative",children:i.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-purple-900/20 to-black flex items-center justify-center relative",children:[i.jsx("img",{src:"https://images.pexels.com/photos/164938/pexels-photo-164938.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Studio",className:"absolute inset-0 w-full h-full object-cover opacity-30"}),i.jsxs("div",{className:"relative text-center z-10",children:[i.jsx(PP,{className:"w-20 h-20 text-purple-400 mx-auto mb-4"}),i.jsx("p",{className:"text-2xl font-bold text-purple-300 mb-2",children:"Currently Offline"}),i.jsx("p",{className:"text-gray-400",children:"Check back soon for the next session"})]})]})}),i.jsxs("div",{className:"mt-6 glass rounded-2xl p-6 neon-border-subtle",children:[i.jsx("h3",{className:"text-2xl font-bold mb-4 text-purple-300",children:"About Live Sessions"}),i.jsx("p",{className:"text-gray-400 leading-relaxed",children:"Join me in the studio as I create beats from scratch. Watch the creative process, ask questions in real-time, and get insider tips on production techniques. Sessions include beat making, mixing, sound design, and more."})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),i.jsx("span",{className:"font-semibold text-lg",children:"OFFLINE"})]}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Next stream coming soon"})]}),i.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(Mf,{className:"w-6 h-6 text-purple-400"}),i.jsx("h3",{className:"text-xl font-bold",children:"Upcoming Streams"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border-l-2 border-purple-500 pl-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(By,{className:"w-4 h-4 text-purple-400"}),i.jsx("span",{className:"text-sm text-gray-400",children:"This Friday, 8:00 PM"})]}),i.jsx("p",{className:"font-semibold text-purple-200",children:"Beat Making Session"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Trap & Drill production"})]}),i.jsxs("div",{className:"border-l-2 border-purple-500 pl-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(By,{className:"w-4 h-4 text-purple-400"}),i.jsx("span",{className:"text-sm text-gray-400",children:"Next Monday, 7:00 PM"})]}),i.jsx("p",{className:"font-semibold text-purple-200",children:"Q&A + Production Tips"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Ask me anything"})]})]})]}),i.jsx("button",{className:"w-full py-4 bg-purple-600 hover:bg-purple-700 rounded-xl font-bold transition-all neon-border hover:scale-105",children:"Set Reminder"}),i.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[i.jsx("h3",{className:"text-lg font-bold mb-3 text-purple-300",children:"Follow on Socials"}),i.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Get notified when I go live and never miss a session"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 bg-purple-900/30 hover:bg-purple-900/50 rounded-lg text-center font-medium transition-all",children:"YouTube"}),i.jsx("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 bg-purple-900/30 hover:bg-purple-900/50 rounded-lg text-center font-medium transition-all",children:"Instagram"})]})]})]})]})]})})}function HP(){const[t,e]=E.useState({name:"",email:"",subject:"commission",message:""}),r=n=>{n.preventDefault(),console.log("Form submitted:",t)};return i.jsx("section",{id:"contact",className:"py-24 pb-32 px-4 bg-transparent",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-3xl md:text-6xl font-bold mb-4 neon-glow",children:"Get In Touch"}),i.jsx("p",{className:"text-xl text-gray-400",children:"Let's create something amazing together"})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle mb-8",children:[i.jsx("h3",{className:"text-3xl font-bold mb-6 text-purple-300",children:"Contact Info"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx(Up,{className:"w-6 h-6 text-purple-400 mt-1"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold mb-1",children:"Email"}),i.jsx("a",{href:"mailto:contact@jonnarincon.com",className:"text-purple-400 hover:text-purple-300 transition-colors",children:"contact@jonnarincon.com"})]})]}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx(Ge,{className:"w-6 h-6 text-purple-400 mt-1"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold mb-1",children:"Response Time"}),i.jsx("p",{className:"text-gray-400",children:"Usually within 24 hours"})]})]})]})]}),i.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[i.jsx("h3",{className:"text-2xl font-bold mb-6 text-purple-300",children:"Connect"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[i.jsx(ad,{className:"w-6 h-6 text-purple-400"}),i.jsx("span",{className:"font-semibold",children:"Instagram"})]}),i.jsxs("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[i.jsx(qp,{className:"w-6 h-6 text-purple-400"}),i.jsx("span",{className:"font-semibold",children:"YouTube"})]}),i.jsxs("a",{href:"https://soundcloud.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[i.jsx(HN,{className:"w-6 h-6 text-purple-400"}),i.jsx("span",{className:"font-semibold",children:"SoundCloud"})]}),i.jsxs("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[i.jsx(Ge,{className:"w-6 h-6 text-purple-400"}),i.jsx("span",{className:"font-semibold",children:"Spotify"})]})]})]})]}),i.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[i.jsx("h3",{className:"text-3xl font-bold mb-6 text-purple-300",children:"Send a Message"}),i.jsxs("form",{onSubmit:r,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Name"}),i.jsx("input",{type:"text",required:!0,value:t.name,onChange:n=>e({...t,name:n.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all",placeholder:"Your name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Email"}),i.jsx("input",{type:"email",required:!0,value:t.email,onChange:n=>e({...t,email:n.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all",placeholder:"your@email.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Subject"}),i.jsxs("select",{value:t.subject,onChange:n=>e({...t,subject:n.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white focus:outline-none focus:neon-border-subtle transition-all appearance-none cursor-pointer",children:[i.jsx("option",{value:"commission",children:"Beat Commission"}),i.jsx("option",{value:"collaboration",children:"Collaboration"}),i.jsx("option",{value:"booking",children:"Booking"}),i.jsx("option",{value:"general",children:"General Inquiry"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Message"}),i.jsx("textarea",{required:!0,value:t.message,onChange:n=>e({...t,message:n.target.value}),rows:6,className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all resize-none",placeholder:"Tell me about your project..."})]}),i.jsx("button",{type:"submit",className:"w-full py-4 bg-purple-600 hover:bg-purple-700 rounded-xl font-bold text-lg transition-all neon-border hover:scale-105",children:"Send Message"})]})]})]})]})})}function WP(){return i.jsx("footer",{className:"bg-transparent border-t border-purple-500/30 py-12 px-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-12 mb-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(Ge,{className:"w-8 h-8 text-purple-400 neon-glow"}),i.jsx("span",{className:"text-2xl font-bold neon-glow",children:"JONNA RINCON"})]}),i.jsx("p",{className:"text-gray-400 mb-4",children:"Professional producer and beatmaker crafting premium beats for artists worldwide."})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-300",children:"Quick Links"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("a",{href:"#beats",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Browse Beats"}),i.jsx("a",{href:"#music",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Listen to Music"}),i.jsx("a",{href:"#contact",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Get in Touch"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-300",children:"Follow"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:i.jsx(ad,{className:"w-5 h-5"})}),i.jsx("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:i.jsx(qp,{className:"w-5 h-5"})}),i.jsx("a",{href:"https://soundcloud.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:i.jsx(HN,{className:"w-5 h-5"})}),i.jsx("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:i.jsx(Ge,{className:"w-5 h-5"})})]})]})]}),i.jsxs("div",{className:"border-t border-purple-500/30 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Copyright  2025 Jonna Rincon. All Rights Reserved."}),i.jsxs("div",{className:"flex gap-6 text-sm",children:[i.jsx("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Privacy Policy"}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Terms of Service"})]})]})]})})}function GP({isOpen:t,onClose:e,items:r,onRemoveItem:n,onCheckout:s}){const a=r.reduce((o,l)=>o+l.price,0);return t?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-xl z-[100] animate-fade-in",onClick:e}),i.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 pointer-events-none",children:i.jsxs("div",{className:"pointer-events-auto bg-black/80 backdrop-blur-2xl border-2 border-purple-500/30 rounded-3xl shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col animate-scale-in",children:[i.jsxs("div",{className:"flex items-center justify-between p-8 border-b border-purple-500/20 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(tr,{className:"w-8 h-8 text-purple-400"}),i.jsx("h2",{className:"text-3xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Shopping Cart"})]}),i.jsx("button",{onClick:e,className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 hover:rotate-90",children:i.jsx(Ft,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:r.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx(tr,{className:"w-24 h-24 text-purple-400/30 mx-auto mb-6"}),i.jsx("p",{className:"text-gray-400 text-xl font-medium mb-2",children:"Your cart is empty"}),i.jsx("p",{className:"text-gray-500 text-sm mb-8",children:"Add some beats to get started!"}),i.jsx("button",{onClick:e,className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-xl font-bold text-lg transition-all hover:scale-105 shadow-xl",children:"Browse Beats"})]}):i.jsx("div",{className:"space-y-4",children:r.map((o,l)=>i.jsx("div",{className:"glass rounded-2xl p-5 neon-border-subtle hover:neon-border transition-all",children:i.jsxs("div",{className:"flex gap-5",children:[i.jsx("img",{src:o.beat.artwork_url,alt:o.beat.title,className:"w-24 h-24 rounded-xl object-cover flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-bold text-xl text-purple-200 mb-1 truncate",children:o.beat.title}),i.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:[o.beat.artist,"  ",o.beat.bpm," BPM  ",o.beat.key]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"px-3 py-1 bg-purple-600/30 rounded-lg text-xs font-semibold text-purple-300 uppercase",children:[o.license," License"]}),i.jsxs("span",{className:"text-2xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:["",o.price.toFixed(2)]})]})]}),i.jsx("button",{onClick:()=>n(o.beat.id),className:"p-3 hover:bg-red-600/20 rounded-xl transition-all group flex-shrink-0",title:"Remove from cart",children:i.jsx($p,{className:"w-5 h-5 text-gray-400 group-hover:text-red-400 transition-colors"})})]})},`${o.beat.id}-${o.license}-${l}`))})}),r.length>0&&i.jsxs("div",{className:"border-t-2 border-purple-500/20 p-8 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("span",{className:"text-xl font-bold text-gray-300",children:"Total:"}),i.jsxs("span",{className:"text-4xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:["",a.toFixed(2)]})]}),i.jsx("button",{onClick:s,className:"w-full py-5 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-2xl font-black text-xl transition-all hover:scale-105 active:scale-95 shadow-2xl",children:"Proceed to Checkout"}),i.jsx("p",{className:"text-center text-xs text-gray-500 mt-4",children:"Secure checkout  All licenses included"})]})]})})]}):null}function KP(){const[t,e]=E.useState([]),[r,n]=E.useState(!1),[s,a]=E.useState(0),[o,l]=E.useState("down"),[u,d]=E.useState(!1),h=()=>window.innerWidth<768?["hero","about","beats","music","compilations","youtube","socials","live-studio","contact"]:["hero","about","beats","music","youtube","socials","live-studio","contact"],[f,p]=E.useState(h()),y=(P,L)=>{let D=P.price;L==="premium"&&(D=P.price*1.5),L==="exclusive"&&(D=P.price*3);const T={beat:P,license:L,price:D};e([...t,T]),n(!0)},S=P=>{e(t.filter(L=>L.beat.id!==P))},v=async()=>{const P={customerEmail:"customer@example.com",items:t.map(L=>({beatId:L.beat.id,beatTitle:L.beat.title,licenseType:L.license,price:L.price})),total:t.reduce((L,D)=>L+D.price,0),status:"pending",createdAt:new Date};try{await br(le(q,"orders"),P),alert("Order created successfully!"),e([])}catch(L){console.error("Order creation failed:",L),alert("Failed to create order")}},x=()=>{const P=window.innerWidth<768;if(u||d(!0),o==="down"){const L=Math.min(s+1,f.length-1),D=document.getElementById(f[L]);if(D)if(f[L]==="music"&&!P){const T=D.offsetTop;window.scrollTo({top:T-50,behavior:"smooth"}),a(L)}else D.scrollIntoView({behavior:"smooth",block:"start"}),a(L);L===f.length-1&&l("up")}else{const L=Math.max(s-1,0),D=document.getElementById(f[L]);if(D)if(f[L]==="music"&&!P){const T=D.offsetTop;window.scrollTo({top:T-50,behavior:"smooth"}),a(L)}else D.scrollIntoView({behavior:"smooth",block:"start"}),a(L);L===0&&l("down")}};E.useEffect(()=>{const P=()=>{const L=window.scrollY+window.innerHeight/2;for(let D=f.length-1;D>=0;D--){const T=document.getElementById(f[D]);if(T&&T.offsetTop<=L){a(_=>_!==D?(D===0&&l("down"),D===f.length-1&&l("up"),D):_);break}}};return window.addEventListener("scroll",P,{passive:!0}),P(),()=>window.removeEventListener("scroll",P)},[f]),E.useEffect(()=>{let P=0,L=!1;const D=()=>{L||(L=!0,P=window.scrollY)},T=()=>{L&&(window.scrollTo({top:P,behavior:"auto"}),p(h()),L=!1)};let _;const k=()=>{D(),clearTimeout(_),_=setTimeout(T,200)};return window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k),clearTimeout(_)}},[]);const w=s===f.length-1,b=!u||w,N=o==="up"?"Back":"Click Me!";return i.jsxs("div",{className:"min-h-screen",children:[i.jsx(YN,{cartItemCount:t.length,onCartClick:()=>n(!0)}),i.jsx(GP,{isOpen:r,onClose:()=>n(!1),items:t,onRemoveItem:S,onCheckout:v}),i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden md:block fixed bottom-8 left-8 z-50",children:i.jsx("button",{onClick:x,className:"animate-bounce cursor-pointer hover:scale-110 transition-all focus:outline-none backdrop-blur-md bg-purple-900/20 px-4 py-3 rounded-full border-2 border-purple-500/50 hover:border-purple-400 hover:bg-purple-600/30 duration-300",style:{width:b?"80px":"56px"},children:i.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-h-[44px]",children:[b&&i.jsx("span",{className:"text-sm text-purple-300 font-light whitespace-nowrap",children:N}),i.jsx("svg",{className:`w-5 h-5 text-purple-400 transition-transform duration-300 ${o==="up"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})})}),i.jsx("div",{className:"md:hidden fixed bottom-8 left-8 z-50",children:i.jsx("button",{onClick:x,className:"cursor-pointer hover:scale-110 transition-all focus:outline-none backdrop-blur-md bg-purple-900/20 px-4 py-3 rounded-full border-2 border-purple-500/50 hover:border-purple-400 hover:bg-purple-600/30 duration-300",style:{width:b?"100px":"56px"},children:i.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-h-[44px]",children:[b&&i.jsx("span",{className:"text-xs text-purple-300 font-light whitespace-nowrap",children:N}),i.jsx("svg",{className:`w-5 h-5 text-purple-400 transition-transform duration-300 ${o==="up"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})})})]}),i.jsxs("main",{className:"pt-20",children:[i.jsx("div",{id:"hero",className:"h-screen overflow-hidden",children:i.jsx(FP,{})}),i.jsx(UP,{}),i.jsx(BP,{onAddToCart:y}),i.jsx(zP,{}),i.jsx($P,{}),i.jsx("div",{id:"live-studio",children:i.jsx(qP,{})}),i.jsx(HP,{})]}),i.jsx(WP,{})]})}const QP=()=>{const[t,e]=E.useState(""),[r,n]=E.useState(""),[s,a]=E.useState(""),[o,l]=E.useState(!1),{signIn:u}=Ke(),d=yn(),h=async f=>{f.preventDefault(),a(""),l(!0);try{const p=await u(t,r);p.role==="admin"?d("/admin/dashboard"):p.role==="artist"?d("/artist/dashboard"):d("/customer/dashboard")}catch(p){a(p.message||"Failed to sign in")}finally{l(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full",children:i.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl p-8 border border-purple-500/20",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Welcome Back"}),i.jsx("p",{className:"text-gray-400",children:"Sign in to your account"})]}),i.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s&&i.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-3 rounded-lg",children:s}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),i.jsx("input",{id:"email",type:"email",value:t,onChange:f=>e(f.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"your@email.com"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),i.jsx("input",{id:"password",type:"password",value:r,onChange:f=>n(f.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),i.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:o?"Signing in...":"Sign In"})]}),i.jsxs("div",{className:"mt-6 text-center space-y-2",children:[i.jsxs("p",{className:"text-sm text-gray-400",children:["Don't have an account?"," ",i.jsx(X,{to:"/register",className:"text-purple-400 hover:text-purple-300",children:"Create one"})]}),i.jsx("p",{className:"text-sm text-gray-400",children:i.jsx(X,{to:"/",className:"text-purple-400 hover:text-purple-300",children:"Back to home"})})]})]})})})},YP=()=>{const[t,e]=E.useState(""),[r,n]=E.useState(""),[s,a]=E.useState(""),[o,l]=E.useState(""),[u,d]=E.useState(""),[h,f]=E.useState(!1),{signUp:p}=Ke(),y=yn(),S=async v=>{if(v.preventDefault(),d(""),r!==s){d("Passwords do not match");return}if(r.length<6){d("Password must be at least 6 characters");return}f(!0);try{const x=await p(t,r,o);y("/customer/dashboard")}catch(x){d(x.message||"Failed to create account")}finally{f(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full",children:i.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl p-8 border border-purple-500/20",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Create Account"}),i.jsx("p",{className:"text-gray-400",children:"Join Jonna Rincon's beat store"})]}),i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[u&&i.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-3 rounded-lg",children:u}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),i.jsx("input",{id:"displayName",type:"text",value:o,onChange:v=>l(v.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Your name"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),i.jsx("input",{id:"email",type:"email",value:t,onChange:v=>e(v.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"your@email.com"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),i.jsx("input",{id:"password",type:"password",value:r,onChange:v=>n(v.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),i.jsx("input",{id:"confirmPassword",type:"password",value:s,onChange:v=>a(v.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),i.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:h?"Creating Account...":"Create Account"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-400",children:["Already have an account?"," ",i.jsx(X,{to:"/login",className:"text-purple-400 hover:text-purple-300",children:"Sign in"})]})})]})})})},JP=()=>{const[t,e]=E.useState([]),[r,n]=E.useState(!0),[s,a]=E.useState({sortBy:"newest"});E.useEffect(()=>{o()},[s]);const o=async()=>{try{n(!0);let d=await pn.getPublishedBeats();if(s.genre&&(d=d.filter(h=>h.genre===s.genre)),s.search){const h=s.search.toLowerCase();d=d.filter(f=>f.title.toLowerCase().includes(h)||f.artist.toLowerCase().includes(h)||f.tags.some(p=>p.toLowerCase().includes(h)))}d.sort((h,f)=>{var p,y,S,v;switch(s.sortBy){case"newest":return f.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return f.plays-h.plays;case"price_low":return(((p=h.licenses.basic)==null?void 0:p.price)||0)-(((y=f.licenses.basic)==null?void 0:y.price)||0);case"price_high":return(((S=f.licenses.basic)==null?void 0:S.price)||0)-(((v=h.licenses.basic)==null?void 0:v.price)||0);default:return 0}}),e(d)}catch(u){console.error("Failed to load beats:",u)}finally{n(!1)}},l=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return i.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[i.jsx(YN,{}),i.jsxs("div",{className:"container mx-auto px-4 pt-28 pb-12",children:[i.jsxs("div",{className:"mb-12 text-center",children:[i.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Premium Beats"}),i.jsx("p",{className:"text-xl text-gray-400",children:"Explore high-quality beats by Jonna Rincon"})]}),i.jsx("div",{className:"mb-8 bg-gray-800 rounded-lg p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("input",{type:"text",placeholder:"Search beats...",value:s.search||"",onChange:u=>a({...s,search:u.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500"}),i.jsxs("select",{value:s.genre||"",onChange:u=>a({...s,genre:u.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[i.jsx("option",{value:"",children:"All Genres"}),l.map(u=>i.jsx("option",{value:u,children:u},u))]}),i.jsxs("select",{value:s.sortBy,onChange:u=>a({...s,sortBy:u.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[i.jsx("option",{value:"newest",children:"Newest First"}),i.jsx("option",{value:"popular",children:"Most Popular"}),i.jsx("option",{value:"price_low",children:"Price: Low to High"}),i.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(s.genre||s.search)&&i.jsx("button",{onClick:()=>a({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 transition",children:"Clear Filters"})]})}),r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-xl",children:"Loading beats..."})}):t.length===0?i.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("p",{className:"text-xl mb-2",children:"No beats found"}),i.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(u=>{var d;return i.jsxs(X,{to:`/shop/beats/${u.id}`,className:"bg-gray-800 rounded-lg overflow-hidden hover:transform hover:scale-105 transition-all duration-200",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:u.artworkUrl||"/placeholder-beat.png",alt:u.title,className:"w-full h-48 object-cover"}),u.featured&&i.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),u.trending&&i.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:u.title}),i.jsx("div",{className:"text-sm text-gray-400 mb-3",children:u.artist}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[i.jsxs("span",{children:[u.bpm," BPM"]}),i.jsx("span",{children:""}),i.jsx("span",{children:u.key}),i.jsx("span",{children:""}),i.jsx("span",{children:u.genre})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[i.jsxs("span",{children:[" ",u.plays.toLocaleString()]}),i.jsxs("span",{children:[" ",u.likes.toLocaleString()]}),i.jsxs("span",{children:[" ",u.downloads.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),i.jsxs("div",{className:"font-bold text-lg",children:["",((d=u.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),i.jsx("div",{className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded transition",children:"View Beat"})]})]})]},u.id)})}),!r&&t.length>0&&i.jsxs("div",{className:"mt-8 text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})]})},gn=({children:t})=>{var h,f;const[e,r]=E.useState(!0),{user:n,signOut:s}=Ke(),a=ar(),o=yn(),l=async()=>{await s(),o("/")},u=[{name:"Dashboard",href:"/customer/dashboard",icon:od},{name:"Shop Beats",href:"/customer/shop",icon:Ge},{name:"My Orders",href:"/customer/orders",icon:tr},{name:"Downloads",href:"/customer/downloads",icon:ls},{name:"Chat",href:"/customer/chat",icon:er},{name:"Profile",href:"/customer/profile",icon:nn}],d=p=>a.pathname===p;return i.jsxs("div",{className:"min-h-screen bg-gray-900",children:[i.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Customer"})]}),i.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:i.jsx(Ft,{size:20})})]}),i.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[i.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=n==null?void 0:n.displayName)==null?void 0:h[0])||((f=n==null?void 0:n.email)==null?void 0:f[0])||"C"}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(n==null?void 0:n.displayName)||"Customer"}),i.jsx("p",{className:"text-xs text-gray-400 truncate",children:n==null?void 0:n.email})]})]})}),i.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:u.map(p=>{const y=p.icon;return i.jsxs(X,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[i.jsx(y,{size:18,className:"flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),i.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:i.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[i.jsx(la,{size:18,className:"flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),i.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[i.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[i.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:i.jsx(Ls,{size:24})}),i.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:i.jsx("div",{className:"text-right hidden sm:block",children:i.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),i.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},XP=()=>{const{user:t}=Ke(),[e,r]=E.useState([]),[n,s]=E.useState(!0),[a,o]=E.useState({totalOrders:0,totalSpent:0,totalDownloads:0});E.useEffect(()=>{if(!t)return;(async()=>{try{const d=await Br.getOrdersByCustomer(t.email),h=d.slice(0,5);r(h);const f=d.filter(y=>y.status==="completed").reduce((y,S)=>y+S.total,0),p=d.filter(y=>y.status==="completed").reduce((y,S)=>y+S.items.length,0);o({totalOrders:d.length,totalSpent:f,totalDownloads:p})}catch(d){console.error("Failed to load dashboard data:",d)}finally{s(!1)}})()},[t]);const l=[{name:"Total Orders",value:a.totalOrders,icon:oo,change:a.totalOrders>0?`${a.totalOrders} orders placed`:"No orders yet",changeType:"neutral"},{name:"Total Spent",value:`${a.totalSpent.toFixed(2)}`,icon:Yi,change:a.totalSpent>0?"On beats & licenses":"Start shopping",changeType:"neutral"},{name:"Total Downloads",value:a.totalDownloads,icon:ls,change:`${a.totalDownloads} beats owned`,changeType:"positive"}];return n?i.jsx(gn,{children:i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-xl text-white",children:"Loading..."})})}):i.jsx(gn,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Dashboard"}),i.jsxs("p",{className:"text-gray-400 mt-2",children:["Welcome back, ",(t==null?void 0:t.displayName)||"Customer","!"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:l.map(u=>{const d=u.icon;return i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-blue-500/50 transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:u.name}),i.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:u.value}),i.jsx("p",{className:"text-sm mt-2 text-gray-400",children:u.change})]}),i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 rounded-xl",children:i.jsx(d,{size:32,className:"text-white"})})]})},u.name)})}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Recent Orders"}),i.jsx(X,{to:"/customer/orders",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View All "})]}),e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("p",{className:"text-xl text-gray-300 mb-2",children:"No orders yet"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"Start shopping to see your orders here"}),i.jsx(X,{to:"/shop/beats",className:"inline-block bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-3 rounded-lg text-white font-medium hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Browse Beats"})]}):i.jsx("div",{className:"space-y-4",children:e.map(u=>{var d,h,f;return i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white font-medium",children:u.orderNumber}),i.jsxs("p",{className:"text-sm text-gray-400",children:[u.items.length," item(s)  ",((f=(h=(d=u.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:f.toLocaleDateString())||"N/A"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-white font-semibold",children:["",u.total.toFixed(2)]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${u.status==="completed"?"bg-green-500/20 text-green-400":u.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:u.status})]})]},u.id)})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(X,{to:"/shop/beats",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[i.jsx(oo,{size:32,className:"text-white mb-3"}),i.jsx("h3",{className:"text-white font-semibold",children:"Browse Beats"}),i.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Find your next hit"})]}),i.jsxs(X,{to:"/customer/orders",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-6 rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[i.jsx(oo,{size:32,className:"text-white mb-3"}),i.jsx("h3",{className:"text-white font-semibold",children:"My Orders"}),i.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"View order history"})]}),i.jsxs(X,{to:"/customer/downloads",className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[i.jsx(ls,{size:32,className:"text-white mb-3"}),i.jsx("h3",{className:"text-white font-semibold",children:"Downloads"}),i.jsx("p",{className:"text-green-100 text-sm mt-1",children:"Access your beats"})]}),i.jsxs(X,{to:"/customer/profile",className:"bg-gradient-to-r from-orange-600 to-red-600 p-6 rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[i.jsx(ol,{size:32,className:"text-white mb-3"}),i.jsx("h3",{className:"text-white font-semibold",children:"Profile"}),i.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Manage account"})]})]})]})})},ZP=()=>{const{user:t}=Ke(),[e,r]=E.useState([]),[n,s]=E.useState(!0),[a,o]=E.useState("all");E.useEffect(()=>{if(!t)return;(async()=>{try{const d=await Br.getOrdersByCustomer(t.email);r(d)}catch(d){console.error("Failed to load orders:",d)}finally{s(!1)}})()},[t]);const l=e.filter(u=>a==="all"?!0:u.status===a);return n?i.jsx(gn,{children:i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-xl text-white",children:"Loading orders..."})})}):i.jsx(gn,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Orders"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"View and manage your order history"})]}),i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:i.jsx("div",{className:"flex gap-4",children:["all","completed","processing","pending"].map(u=>i.jsxs("button",{onClick:()=>o(u),className:`px-4 py-2 rounded-lg capitalize transition ${a===u?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[u,i.jsxs("span",{className:"ml-2 text-xs",children:["(",u==="all"?e.length:e.filter(d=>d.status===u).length,")"]})]},u))})}),l.length===0?i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[i.jsx(KN,{size:64,className:"mx-auto mb-4 text-gray-600"}),i.jsx("p",{className:"text-xl text-white mb-2",children:"No orders found"}),i.jsx("p",{className:"text-gray-400 mb-6",children:a==="all"?"You haven't placed any orders yet":`No ${a} orders`}),i.jsx(X,{to:"/shop/beats",className:"inline-block bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-3 rounded-lg text-white font-medium hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Browse Beats"})]}):i.jsx("div",{className:"space-y-4",children:l.map(u=>{var d,h,f;return i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-700/50 p-4 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-lg text-white mb-1",children:u.orderNumber}),i.jsxs("div",{className:"text-sm text-gray-400",children:["Placed on ",((f=(h=(d=u.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:f.toLocaleDateString())||"N/A"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2 ${u.status==="completed"?"bg-green-500/20 text-green-400":u.status==="processing"?"bg-blue-500/20 text-blue-400":u.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:u.status}),i.jsxs("div",{className:"font-bold text-white",children:["",u.total.toFixed(2)]})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"space-y-3",children:u.items.map((p,y)=>{var S;return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("img",{src:p.artworkUrl||"/placeholder-beat.png",alt:p.beatTitle,className:"w-16 h-16 rounded object-cover"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-white",children:p.beatTitle}),i.jsxs("div",{className:"text-sm text-gray-400 capitalize",children:[p.licenseType," License"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-white",children:["",p.price.toFixed(2)]}),u.status==="completed"&&((S=u.downloadLinks)==null?void 0:S[p.beatId])&&i.jsxs("a",{href:u.downloadLinks[p.beatId],className:"inline-flex items-center gap-1 text-sm text-blue-400 hover:text-blue-300 mt-1",download:!0,children:[i.jsx(ls,{size:14}),"Download"]})]})]},y)})}),u.status==="completed"&&i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700 flex gap-4",children:i.jsx(X,{to:"/customer/downloads",className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"View All Downloads "})})]})]},u.id)})})]})})},e3=()=>{const{user:t}=Ke(),[e,r]=E.useState([]),[n,s]=E.useState(!0);return E.useEffect(()=>{if(!t)return;(async()=>{try{const o=await Br.getOrdersByCustomer(t.email),l=[];o.filter(u=>u.status==="completed").forEach(u=>{u.items.forEach(d=>{var p,y,S,v,x,w;const h=(p=u.downloadLinks)==null?void 0:p[d.beatId],f=(y=u.licensePDFs)==null?void 0:y[d.beatId];h&&l.push({...d,orderId:u.id,orderNumber:u.orderNumber,downloadUrl:h,licenseUrl:f,purchasedAt:((v=(S=u.completedAt)==null?void 0:S.toDate)==null?void 0:v.call(S))||((w=(x=u.createdAt)==null?void 0:x.toDate)==null?void 0:w.call(x))||new Date})})}),l.sort((u,d)=>d.purchasedAt.getTime()-u.purchasedAt.getTime()),r(l)}catch(o){console.error("Failed to load downloads:",o)}finally{s(!1)}})()},[t]),n?i.jsx(gn,{children:i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-xl text-white",children:"Loading downloads..."})})}):i.jsx(gn,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Downloads"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Access all your purchased beats and licenses"})]}),i.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-8",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Download Tips"}),i.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[i.jsx("li",{children:" All purchases include unlimited re-downloads"}),i.jsx("li",{children:" Download your license agreement for legal protection"}),i.jsx("li",{children:" Files are available in high-quality formats"})]})]})]})}),e.length===0?i.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("p",{className:"text-xl mb-2",children:"No downloads available"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"Purchase beats to access downloads"}),i.jsx(X,{to:"/shop/beats",className:"inline-block bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition",children:"Browse Beats"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((a,o)=>i.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-750 transition",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:a.artworkUrl||"/placeholder-beat.png",alt:a.beatTitle,className:"w-full h-48 object-cover"}),i.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-xs capitalize",children:[a.licenseType," License"]})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-bold text-lg mb-2",children:a.beatTitle}),i.jsxs("div",{className:"text-sm text-gray-400 mb-4",children:["Purchased: ",a.purchasedAt.toLocaleDateString()]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("a",{href:a.downloadUrl,className:"block w-full bg-purple-600 hover:bg-purple-700 text-center py-2 rounded transition",download:!0,children:" Download Beat"}),a.licenseUrl&&i.jsx("a",{href:a.licenseUrl,className:"block w-full bg-gray-700 hover:bg-gray-600 text-center py-2 rounded transition text-sm",download:!0,children:" Download License"})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:i.jsxs(X,{to:"/customer/orders",className:"text-xs text-gray-400 hover:text-gray-300",children:["Order: ",a.orderNumber," "]})})]})]},o))}),e.length>0&&i.jsxs("div",{className:"mt-12 bg-gray-800 rounded-lg p-6 text-center",children:[i.jsx("h3",{className:"font-bold mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-gray-400 mb-4",children:"Having trouble downloading? Contact support for assistance."}),i.jsx("a",{href:"mailto:support@jonnarincon.com",className:"text-purple-400 hover:text-purple-300",children:"support@jonnarincon.com"})]})]})})},t3=()=>{var D,T;const{user:t,signOut:e}=Ke(),[r,n]=E.useState(!1),[s,a]=E.useState((t==null?void 0:t.displayName)||""),[o,l]=E.useState(""),[u,d]=E.useState(""),[h,f]=E.useState(!1),[p,y]=E.useState(null),[S,v]=E.useState(!1),[x,w]=E.useState({artistName:"",region:"",city:"",roles:{producer:!1,beatmaker:!1,engineer:!1,rapper:!1,vocalist:!1,songwriter:!1},instagram:"",spotify:""}),b=async _=>{_.preventDefault(),f(!0),y(null);try{await xe.updateUserProfile({displayName:s}),y({type:"success",text:"Profile updated successfully!"}),n(!1)}catch(k){y({type:"error",text:k.message||"Failed to update profile"})}finally{f(!1)}},N=async _=>{if(_.preventDefault(),f(!0),y(null),o!==u){y({type:"error",text:"Passwords do not match"}),f(!1);return}if(o.length<6){y({type:"error",text:"Password must be at least 6 characters"}),f(!1);return}try{await xe.updateUserPassword(o),y({type:"success",text:"Password updated successfully!"}),l(""),d("")}catch(k){y({type:"error",text:k.message||"Failed to update password"})}finally{f(!1)}},P=async()=>{try{await e()}catch(_){console.error("Sign out error:",_)}},L=async _=>{_.preventDefault(),f(!0),y(null);try{if(!Object.values(x.roles).some(C=>C)){y({type:"error",text:"Please select at least one artist role"}),f(!1);return}await br(le(q,"artistRoleRequests"),{userId:t==null?void 0:t.uid,userEmail:t==null?void 0:t.email,artistName:x.artistName,region:x.region,city:x.city,roles:Object.entries(x.roles).filter(([C,R])=>R).map(([C,R])=>C),instagram:x.instagram,spotify:x.spotify,status:"pending",createdAt:he()}),y({type:"success",text:"Artist role request submitted successfully! We will review your request soon."}),v(!1),w({artistName:"",region:"",city:"",roles:{producer:!1,beatmaker:!1,engineer:!1,rapper:!1,vocalist:!1,songwriter:!1},instagram:"",spotify:""})}catch(k){y({type:"error",text:k.message||"Failed to submit artist role request"})}finally{f(!1)}};return i.jsx(gn,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4",children:((T=(D=t==null?void 0:t.displayName)==null?void 0:D.charAt(0))==null?void 0:T.toUpperCase())||i.jsx(nn,{size:32,className:"text-white"})}),i.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:(t==null?void 0:t.displayName)||"Customer"}),i.jsx("p",{className:"text-gray-400 text-sm mb-4",children:t==null?void 0:t.email}),i.jsx("div",{className:"inline-block px-3 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs font-semibold border border-blue-700",children:"Customer Account"})]})}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[p&&i.jsx("div",{className:`p-4 rounded-lg border ${p.type==="success"?"bg-green-900/30 border-green-700 text-green-300":"bg-red-900/30 border-red-700 text-red-300"}`,children:p.text}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile Information"}),!r&&i.jsx("button",{onClick:()=>n(!0),className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"Edit"})]}),r?i.jsxs("form",{onSubmit:b,children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[i.jsx(nn,{size:16,className:"inline mr-1"})," Display Name"]}),i.jsx("input",{type:"text",value:s,onChange:_=>a(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",required:!0})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[i.jsx(Up,{size:16,className:"inline mr-1"})," Email"]}),i.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-gray-400 opacity-50 cursor-not-allowed",disabled:!0}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[i.jsx(Xn,{size:16})," ",h?"Saving...":"Save Changes"]}),i.jsx("button",{type:"button",onClick:()=>{n(!1),a((t==null?void 0:t.displayName)||"")},className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Cancel"})]})]}):i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Display Name"}),i.jsx("div",{className:"font-semibold text-white",children:(t==null?void 0:t.displayName)||"Not set"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Email"}),i.jsx("div",{className:"font-semibold text-white",children:t==null?void 0:t.email})]})]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Change Password"}),i.jsxs("form",{onSubmit:N,children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[i.jsx(du,{size:16,className:"inline mr-1"})," New Password"]}),i.jsx("input",{type:"password",value:o,onChange:_=>l(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"Enter new password",minLength:6})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[i.jsx(du,{size:16,className:"inline mr-1"})," Confirm New Password"]}),i.jsx("input",{type:"password",value:u,onChange:_=>d(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"Confirm new password",minLength:6})]}),i.jsxs("button",{type:"submit",disabled:h||!o||!u,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[i.jsx(Xn,{size:16})," ",h?"Updating...":"Update Password"]})]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(hu,{size:24,className:"text-purple-400"}),"Request Artist Role"]}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Apply to become an artist on the platform"})]}),!S&&i.jsx("button",{onClick:()=>v(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-4 py-2 rounded-lg text-white font-medium transition-all text-sm",children:"Apply Now"})]}),S?i.jsxs("form",{onSubmit:L,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Artist Name *"}),i.jsx("input",{type:"text",value:x.artistName,onChange:_=>w({...x,artistName:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"Your stage name",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Region *"}),i.jsx("input",{type:"text",value:x.region,onChange:_=>w({...x,region:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., North Holland",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"City *"}),i.jsx("input",{type:"text",value:x.city,onChange:_=>w({...x,city:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., Amsterdam",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[i.jsx(ad,{size:16,className:"inline mr-1"})," Instagram"]}),i.jsx("input",{type:"text",value:x.instagram,onChange:_=>w({...x,instagram:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"@username or full URL"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[i.jsx(Ge,{size:16,className:"inline mr-1"})," Spotify Link"]}),i.jsx("input",{type:"url",value:x.spotify,onChange:_=>w({...x,spotify:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"https://open.spotify.com/artist/..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-3",children:"Artist Roles * (Select all that apply)"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[{key:"producer",label:"Producer"},{key:"beatmaker",label:"Beatmaker"},{key:"engineer",label:"Engineer"},{key:"rapper",label:"Rapper"},{key:"vocalist",label:"Vocalist/Singer"},{key:"songwriter",label:"Songwriter"}].map(_=>i.jsxs("label",{className:"flex items-center space-x-2 p-3 bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:[i.jsx("input",{type:"checkbox",checked:x.roles[_.key],onChange:k=>w({...x,roles:{...x.roles,[_.key]:k.target.checked}}),className:"w-4 h-4 rounded border-gray-600 text-purple-600 focus:ring-purple-500"}),i.jsx("span",{className:"text-sm text-gray-300",children:_.label})]},_.key))})]}),i.jsxs("div",{className:"flex gap-4 pt-4",children:[i.jsxs("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[i.jsx(Xn,{size:16})," ",h?"Submitting...":"Submit Request"]}),i.jsx("button",{type:"button",onClick:()=>v(!1),className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Cancel"})]})]}):i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx(hu,{size:48,className:"mx-auto mb-4 text-purple-400 opacity-50"}),i.jsx("p",{children:"Become an artist and start collaborating with others!"}),i.jsx("p",{className:"text-sm mt-2",children:'Click "Apply Now" to submit your artist application.'})]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Actions"}),i.jsxs("button",{onClick:P,className:"w-full bg-red-600 hover:bg-red-700 py-3 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:[i.jsx(la,{size:20})," Sign Out"]})]})]})]})]})})},r3=()=>{const[t,e]=E.useState([]),[r,n]=E.useState(!0),[s,a]=E.useState({sortBy:"newest"});E.useEffect(()=>{o()},[s]);const o=async()=>{try{n(!0);let d=await pn.getPublishedBeats();if(s.genre&&(d=d.filter(h=>h.genre===s.genre)),s.search){const h=s.search.toLowerCase();d=d.filter(f=>f.title.toLowerCase().includes(h)||f.artist.toLowerCase().includes(h)||f.tags.some(p=>p.toLowerCase().includes(h)))}d.sort((h,f)=>{var p,y,S,v;switch(s.sortBy){case"newest":return f.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return f.plays-h.plays;case"price_low":return(((p=h.licenses.basic)==null?void 0:p.price)||0)-(((y=f.licenses.basic)==null?void 0:y.price)||0);case"price_high":return(((S=f.licenses.basic)==null?void 0:S.price)||0)-(((v=h.licenses.basic)==null?void 0:v.price)||0);default:return 0}}),e(d)}catch(u){console.error("Failed to load beats:",u)}finally{n(!1)}},l=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return i.jsx(gn,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Shop Premium Beats"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Browse and purchase high-quality beats by Jonna Rincon"})]}),i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("input",{type:"text",placeholder:"Search beats...",value:s.search||"",onChange:u=>a({...s,search:u.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),i.jsxs("select",{value:s.genre||"",onChange:u=>a({...s,genre:u.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[i.jsx("option",{value:"",children:"All Genres"}),l.map(u=>i.jsx("option",{value:u,children:u},u))]}),i.jsxs("select",{value:s.sortBy,onChange:u=>a({...s,sortBy:u.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[i.jsx("option",{value:"newest",children:"Newest First"}),i.jsx("option",{value:"popular",children:"Most Popular"}),i.jsx("option",{value:"price_low",children:"Price: Low to High"}),i.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(s.genre||s.search)&&i.jsx("button",{onClick:()=>a({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 text-white transition",children:"Clear Filters"})]})}),r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-xl text-white",children:"Loading beats..."})}):t.length===0?i.jsxs("div",{className:"text-center py-12 bg-gray-800 border border-gray-700 rounded-xl",children:[i.jsx(Ge,{size:64,className:"mx-auto mb-4 text-gray-600"}),i.jsx("p",{className:"text-xl text-white mb-2",children:"No beats found"}),i.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(u=>{var d;return i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-blue-500/50 transition-all hover:transform hover:scale-105",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:u.artworkUrl||"/placeholder-beat.png",alt:u.title,className:"w-full h-48 object-cover"}),u.featured&&i.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),u.trending&&i.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"}),i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 rounded-full p-4 transition-all hover:scale-110",children:i.jsx(Vr,{size:32,className:"text-white"})})})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:u.title}),i.jsx("div",{className:"text-sm text-gray-400 mb-3",children:u.artist}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[i.jsxs("span",{children:[u.bpm," BPM"]}),i.jsx("span",{children:""}),i.jsx("span",{children:u.key}),i.jsx("span",{children:""}),i.jsx("span",{children:u.genre})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Vr,{size:12})," ",u.plays.toLocaleString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(id,{size:12})," ",u.likes.toLocaleString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ls,{size:12})," ",u.downloads.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),i.jsxs("div",{className:"font-bold text-lg text-white",children:["",((d=u.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),i.jsx(X,{to:`/customer/shop/${u.id}`,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all",children:"View Beat"})]})]})]},u.id)})}),!r&&t.length>0&&i.jsxs("div",{className:"text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})})},n3=()=>{const{user:t}=Ke(),[e,r]=E.useState([]),[n,s]=E.useState("");E.useEffect(()=>{if(!t)return;const o=le(q,"supportMessages"),l=new Map,u=ke(o,se("senderId","==",t.uid),Ve("createdAt","asc")),d=vr(u,p=>{p.forEach(S=>{l.set(S.id,{id:S.id,...S.data()})});const y=Array.from(l.values()).sort((S,v)=>{var b,N,P,L;const x=((N=(b=S.createdAt)==null?void 0:b.toMillis)==null?void 0:N.call(b))||0,w=((L=(P=v.createdAt)==null?void 0:P.toMillis)==null?void 0:L.call(P))||0;return x-w});r(y)}),h=ke(o,se("recipientId","==",t.uid),Ve("createdAt","asc")),f=vr(h,p=>{p.forEach(S=>{l.set(S.id,{id:S.id,...S.data()})});const y=Array.from(l.values()).sort((S,v)=>{var b,N,P,L;const x=((N=(b=S.createdAt)==null?void 0:b.toMillis)==null?void 0:N.call(b))||0,w=((L=(P=v.createdAt)==null?void 0:P.toMillis)==null?void 0:L.call(P))||0;return x-w});r(y)});return()=>{d(),f()}},[t]);const a=async o=>{if(o.preventDefault(),!(!n.trim()||!t))try{await br(le(q,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Customer",senderEmail:t.email,senderRole:"customer",message:n.trim(),createdAt:he()}),s("")}catch(l){console.error("Failed to send message:",l)}};return i.jsx(gn,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Get help from the Jonna Rincon team"})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 300px)"},children:[i.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:e.length===0?i.jsxs("div",{className:"text-center text-gray-400 py-12",children:[i.jsx(er,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No messages yet"}),i.jsx("p",{className:"text-sm mt-2",children:"Send a message to get support from the team"})]}):e.map(o=>{var l,u,d;return i.jsxs("div",{className:`p-4 rounded-lg ${o.senderId===(t==null?void 0:t.uid)?"bg-blue-900/30 ml-12":"bg-gray-700 mr-12"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-white",children:o.senderId===(t==null?void 0:t.uid)?"You":o.senderName}),o.senderRole&&o.senderId!==(t==null?void 0:t.uid)&&i.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-600 text-purple-100 rounded text-xs capitalize",children:o.senderRole})]}),i.jsx("span",{className:"text-xs text-gray-400",children:((d=(u=(l=o.createdAt)==null?void 0:l.toDate)==null?void 0:u.call(l))==null?void 0:d.toLocaleString())||"Just now"})]}),i.jsx("p",{className:"text-gray-300",children:o.message})]},o.id)})}),i.jsx("form",{onSubmit:a,className:"p-4 border-t border-gray-700 bg-gray-750",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:n,onChange:o=>s(o.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"}),i.jsxs("button",{type:"submit",disabled:!n.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i.jsx(al,{size:20}),"Send"]})]})})]}),i.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:i.jsxs("p",{className:"text-sm text-blue-200",children:[" ",i.jsx("strong",{children:"Support Hours:"}),' Our team typically responds within 24 hours during business days. For urgent matters, please include "URGENT" in your message.']})})]})})},cs=({children:t})=>{var h,f;const[e,r]=E.useState(!0),{user:n,signOut:s}=Ke(),a=ar(),o=yn(),l=async()=>{await s(),o("/")},u=[{name:"Dashboard",href:"/artist/dashboard",icon:od},{name:"Collaborations",href:"/artist/collaborations",icon:Qs},{name:"Shop Beats",href:"/artist/beats",icon:Ge},{name:"My Purchases",href:"/artist/orders",icon:tr},{name:"Profile",href:"/artist/profile",icon:nn}],d=p=>a.pathname===p;return i.jsxs("div",{className:"min-h-screen bg-gray-900",children:[i.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Artist"})]}),i.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:i.jsx(Ft,{size:20})})]}),i.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[i.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=n==null?void 0:n.displayName)==null?void 0:h[0])||((f=n==null?void 0:n.email)==null?void 0:f[0])||"A"}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(n==null?void 0:n.displayName)||"Artist"}),i.jsx("p",{className:"text-xs text-gray-400 truncate",children:n==null?void 0:n.email})]})]})}),i.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:u.map(p=>{const y=p.icon;return i.jsxs(X,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-orange-600 to-red-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[i.jsx(y,{size:18,className:"flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),i.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:i.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[i.jsx(la,{size:18,className:"flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),i.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[i.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[i.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:i.jsx(Ls,{size:24})}),i.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:i.jsx("div",{className:"text-right hidden sm:block",children:i.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),i.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},s3=()=>{const{user:t}=Ke(),[e,r]=E.useState([]),[n,s]=E.useState([]),[a,o]=E.useState(!0),[l,u]=E.useState({activeCollaborations:0,completedCollaborations:0,beatsPurchased:0,totalSpent:0});E.useEffect(()=>{if(!t)return;(async()=>{try{const p=(await Vo.getAll()).filter(b=>b.clientEmail===t.email||b.assignedTo===t.uid);r(p.slice(0,5));const y=await Br.getOrdersByCustomer(t.email);s(y);const S=p.filter(b=>b.status==="in_progress"||b.status==="agreed"||b.status==="signed").length,v=p.filter(b=>b.status==="completed").length,x=y.filter(b=>b.status==="completed").reduce((b,N)=>b+N.items.length,0),w=y.filter(b=>b.status==="completed").reduce((b,N)=>b+N.total,0);u({activeCollaborations:S,completedCollaborations:v,beatsPurchased:x,totalSpent:w})}catch(f){console.error("Failed to load dashboard data:",f)}finally{o(!1)}})()},[t]);const d=[{name:"Active Collaborations",value:l.activeCollaborations,icon:Qs,change:`${l.completedCollaborations} completed`,changeType:"positive"},{name:"Beats Purchased",value:l.beatsPurchased,icon:Ge,change:l.beatsPurchased>0?"From Jonna Rincon":"Browse beats",changeType:"neutral"},{name:"Total Spent",value:`${l.totalSpent.toFixed(2)}`,icon:Yi,change:"On beats & licenses",changeType:"neutral"}];return a?i.jsx(cs,{children:i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-xl text-white",children:"Loading..."})})}):i.jsx(cs,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Artist Dashboard"}),i.jsxs("p",{className:"text-gray-400 mt-2",children:["Welcome back, ",(t==null?void 0:t.displayName)||"Artist","!"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.map(h=>{const f=h.icon;return i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-orange-500/50 transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:h.name}),i.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:h.value}),i.jsx("p",{className:`text-sm mt-2 ${h.changeType==="positive"?"text-green-400":"text-gray-400"}`,children:h.change})]}),i.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 p-4 rounded-xl",children:i.jsx(f,{size:32,className:"text-white"})})]})},h.name)})}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Active Collaborations"}),i.jsx(X,{to:"/artist/collaborations",className:"text-orange-400 hover:text-orange-300 text-sm",children:"View All "})]}),e.filter(h=>h.status==="in_progress"||h.status==="signed").length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("p",{className:"text-xl text-gray-300 mb-2",children:"No active collaborations"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"Check your collaboration page for inquiries"}),i.jsx(X,{to:"/artist/collaborations",className:"inline-block bg-gradient-to-r from-orange-600 to-red-600 px-6 py-3 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"View Collaborations"})]}):i.jsx("div",{className:"space-y-4",children:e.filter(h=>h.status==="in_progress"||h.status==="signed").map(h=>{var f,p,y;return i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white font-medium",children:h.title}),i.jsxs("p",{className:"text-sm text-gray-400 capitalize",children:[h.type,"  ",h.status.replace("_"," ")]})]}),i.jsxs("div",{className:"text-right",children:[h.budget&&i.jsxs("p",{className:"text-white font-semibold",children:["",h.budget.toFixed(2)]}),h.deadline&&i.jsxs("p",{className:"text-xs text-yellow-400",children:["Due: ",((y=(p=(f=h.deadline).toDate)==null?void 0:p.call(f))==null?void 0:y.toLocaleDateString())||"N/A"]})]})]},h.id)})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(X,{to:"/artist/collaborations",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[i.jsx(Qs,{size:32,className:"text-white mb-3"}),i.jsx("h3",{className:"text-white font-semibold",children:"Collaborations"}),i.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Manage projects"})]}),i.jsxs(X,{to:"/artist/beats",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-6 rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[i.jsx(Ge,{size:32,className:"text-white mb-3"}),i.jsx("h3",{className:"text-white font-semibold",children:"Browse Beats"}),i.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Shop from Jonna"})]}),i.jsxs(X,{to:"/artist/orders",className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[i.jsx(Yi,{size:32,className:"text-white mb-3"}),i.jsx("h3",{className:"text-white font-semibold",children:"My Purchases"}),i.jsx("p",{className:"text-green-100 text-sm mt-1",children:"View orders"})]}),i.jsxs(X,{to:"/artist/profile",className:"bg-gradient-to-r from-orange-600 to-red-600 p-6 rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[i.jsx(ol,{size:32,className:"text-white mb-3"}),i.jsx("h3",{className:"text-white font-semibold",children:"Profile"}),i.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Manage account"})]})]}),i.jsx("div",{className:"bg-orange-900/30 border border-orange-700 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"text-3xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-white mb-2",children:"Collaborate with Jonna Rincon"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"Work together on exclusive tracks, remixes, and productions. Get access to premium beats and collaborate on exciting projects."}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(X,{to:"/artist/collaborations",className:"bg-gradient-to-r from-orange-600 to-red-600 px-6 py-2 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"View Collaborations"}),i.jsx(X,{to:"/artist/beats",className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Browse Beats"})]})]})]})})]})})},i3=()=>{const{user:t}=Ke(),[e,r]=E.useState([]),[n,s]=E.useState(!0),[a,o]=E.useState("all"),[l,u]=E.useState(null),[d,h]=E.useState({}),[f,p]=E.useState("");E.useEffect(()=>{if(!t)return;(async()=>{try{const w=(await Vo.getAll()).filter(b=>b.clientEmail===t.email||b.assignedTo===t.uid);r(w)}catch(x){console.error("Failed to load collaborations:",x)}finally{s(!1)}})()},[t]),E.useEffect(()=>{if(!l)return;const v=le(q,"collaborationMessages"),x=ke(v,se("collaborationId","==",l),Ve("createdAt","asc")),w=vr(x,b=>{const N=[];b.forEach(P=>{N.push({id:P.id,...P.data()})}),h(P=>({...P,[l]:N}))});return()=>w()},[l]);const y=async v=>{if(!(!f.trim()||!t))try{await br(le(q,"collaborationMessages"),{collaborationId:v,senderId:t.uid,senderName:t.displayName||"Artist",senderEmail:t.email,message:f.trim(),createdAt:he()}),p("")}catch(x){console.error("Failed to send message:",x)}},S=e.filter(v=>a==="all"?!0:v.status===a);return n?i.jsx(cs,{children:i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-xl text-white",children:"Loading collaborations..."})})}):i.jsx(cs,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Collaborations"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your collaboration projects with Jonna Rincon"})]}),i.jsx("div",{className:"flex gap-4 mb-8 border-b border-gray-700",children:["all","inquiry","in_progress","completed"].map(v=>i.jsxs("button",{onClick:()=>o(v),className:`px-4 py-2 capitalize transition ${a===v?"border-b-2 border-purple-500 text-white":"text-gray-400 hover:text-white"}`,children:[v==="all"?"All":v.replace("_"," "),i.jsxs("span",{className:"ml-2 text-sm",children:["(",v==="all"?e.length:e.filter(x=>x.status===v).length,")"]})]},v))}),S.length===0?i.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("p",{className:"text-xl mb-2",children:"No collaborations found"}),i.jsx("p",{className:"text-gray-400 mb-6",children:a==="all"?"Start collaborating with Jonna Rincon today":`No ${a.replace("_"," ")} collaborations`}),i.jsx("a",{href:"mailto:info@jonnarincon.com",className:"inline-block bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition",children:"Contact for Collaboration"})]}):i.jsx("div",{className:"space-y-6",children:S.map(v=>{var x,w,b,N,P,L,D,T,_,k,C,R,A,I,me;return i.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"bg-gray-700 p-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-xl mb-2",children:v.title}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[i.jsx("span",{className:"capitalize",children:v.type}),v.budget&&i.jsxs("span",{children:["Budget: ",v.budget.toFixed(2)]}),v.startDate&&i.jsxs("span",{children:["Started: ",((b=(w=(x=v.startDate).toDate)==null?void 0:w.call(x))==null?void 0:b.toLocaleDateString())||"N/A"]})]})]}),i.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${v.status==="completed"?"bg-green-900 text-green-300":v.status==="in_progress"?"bg-blue-900 text-blue-300":v.status==="signed"?"bg-purple-900 text-purple-300":v.status==="inquiry"?"bg-yellow-900 text-yellow-300":"bg-gray-600 text-gray-300"}`,children:v.status.replace("_"," ")})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Description"}),i.jsx("p",{className:"text-gray-200",children:v.description})]}),(v.startDate||v.endDate||v.deadline)&&i.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-700",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Timeline"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[v.startDate&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Start: "}),((L=(P=(N=v.startDate).toDate)==null?void 0:P.call(N))==null?void 0:L.toLocaleDateString())||"N/A"]}),v.deadline&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Deadline: "}),i.jsx("span",{className:"text-yellow-400",children:((_=(T=(D=v.deadline).toDate)==null?void 0:T.call(D))==null?void 0:_.toLocaleDateString())||"N/A"})]}),v.endDate&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"End: "}),((R=(C=(k=v.endDate).toDate)==null?void 0:C.call(k))==null?void 0:R.toLocaleDateString())||"N/A"]})]})]}),v.budget&&i.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-700",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Payment"}),i.jsxs("div",{className:"flex gap-8 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Budget: "}),"",v.budget.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Paid: "}),"",v.paidAmount.toFixed(2)]}),i.jsx("div",{children:i.jsx("span",{className:`font-semibold ${v.paymentStatus==="paid"?"text-green-400":v.paymentStatus==="partial"?"text-yellow-400":"text-red-400"}`,children:v.paymentStatus==="paid"?"Paid in Full":v.paymentStatus==="partial"?"Partially Paid":"Unpaid"})})]})]}),(v.contractPDF||v.attachments&&v.attachments.length>0)&&i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Documents"}),i.jsxs("div",{className:"flex gap-2",children:[v.contractPDF&&i.jsx("a",{href:v.contractPDF,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm transition",children:" Contract"}),(A=v.attachments)==null?void 0:A.map((re,et)=>i.jsxs("a",{href:re,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm transition",children:[" Attachment ",et+1]},et))]})]}),v.notes&&i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Notes"}),i.jsx("p",{className:"text-sm text-gray-300",children:v.notes})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:l===v.id?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[i.jsx(er,{size:20,className:"text-blue-400"}),"Messages"]}),i.jsx("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-white transition",children:i.jsx(Ft,{size:20})})]}),i.jsx("div",{className:"bg-gray-900 rounded-lg p-4 max-h-96 overflow-y-auto space-y-3",children:((I=d[v.id])==null?void 0:I.length)===0?i.jsxs("div",{className:"text-center text-gray-400 py-8",children:[i.jsx(er,{size:48,className:"mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No messages yet. Start the conversation!"})]}):(me=d[v.id])==null?void 0:me.map(re=>{var et,St,$;return i.jsxs("div",{className:`p-3 rounded-lg ${re.senderId===(t==null?void 0:t.uid)?"bg-purple-900/30 ml-8":"bg-gray-800 mr-8"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"font-semibold text-sm text-white",children:re.senderId===(t==null?void 0:t.uid)?"You":re.senderName}),i.jsx("span",{className:"text-xs text-gray-400",children:(($=(St=(et=re.createdAt)==null?void 0:et.toDate)==null?void 0:St.call(et))==null?void 0:$.toLocaleString())||"Just now"})]}),i.jsx("p",{className:"text-gray-300 text-sm",children:re.message})]},re.id)})}),i.jsxs("form",{onSubmit:re=>{re.preventDefault(),y(v.id)},className:"flex gap-2",children:[i.jsx("input",{type:"text",value:f,onChange:re=>p(re.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),i.jsxs("button",{type:"submit",disabled:!f.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i.jsx(al,{size:18}),"Send"]})]})]}):i.jsxs("button",{onClick:()=>u(v.id),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-3 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:[i.jsx(er,{size:20}),"Open Messages"]})})]})]},v.id)})})]})})},a3=()=>{const[t,e]=E.useState([]),[r,n]=E.useState(!0),[s,a]=E.useState({sortBy:"newest"});E.useEffect(()=>{o()},[s]);const o=async()=>{try{n(!0);let d=await pn.getPublishedBeats();if(s.genre&&(d=d.filter(h=>h.genre===s.genre)),s.search){const h=s.search.toLowerCase();d=d.filter(f=>f.title.toLowerCase().includes(h)||f.artist.toLowerCase().includes(h)||f.tags.some(p=>p.toLowerCase().includes(h)))}d.sort((h,f)=>{var p,y,S,v;switch(s.sortBy){case"newest":return f.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return f.plays-h.plays;case"price_low":return(((p=h.licenses.basic)==null?void 0:p.price)||0)-(((y=f.licenses.basic)==null?void 0:y.price)||0);case"price_high":return(((S=f.licenses.basic)==null?void 0:S.price)||0)-(((v=h.licenses.basic)==null?void 0:v.price)||0);default:return 0}}),e(d)}catch(u){console.error("Failed to load beats:",u)}finally{n(!1)}},l=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return i.jsx(cs,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Shop Premium Beats"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Browse and license high-quality beats by Jonna Rincon"})]}),i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("input",{type:"text",placeholder:"Search beats...",value:s.search||"",onChange:u=>a({...s,search:u.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500"}),i.jsxs("select",{value:s.genre||"",onChange:u=>a({...s,genre:u.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",children:[i.jsx("option",{value:"",children:"All Genres"}),l.map(u=>i.jsx("option",{value:u,children:u},u))]}),i.jsxs("select",{value:s.sortBy,onChange:u=>a({...s,sortBy:u.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",children:[i.jsx("option",{value:"newest",children:"Newest First"}),i.jsx("option",{value:"popular",children:"Most Popular"}),i.jsx("option",{value:"price_low",children:"Price: Low to High"}),i.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(s.genre||s.search)&&i.jsx("button",{onClick:()=>a({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 text-white transition",children:"Clear Filters"})]})}),r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-xl text-white",children:"Loading beats..."})}):t.length===0?i.jsxs("div",{className:"text-center py-12 bg-gray-800 border border-gray-700 rounded-xl",children:[i.jsx(Ge,{size:64,className:"mx-auto mb-4 text-gray-600"}),i.jsx("p",{className:"text-xl text-white mb-2",children:"No beats found"}),i.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(u=>{var d;return i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-orange-500/50 transition-all hover:transform hover:scale-105",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:u.artworkUrl||"/placeholder-beat.png",alt:u.title,className:"w-full h-48 object-cover"}),u.featured&&i.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),u.trending&&i.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"}),i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx("button",{className:"bg-orange-600 hover:bg-orange-700 rounded-full p-4 transition-all hover:scale-110",children:i.jsx(Vr,{size:32,className:"text-white"})})})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:u.title}),i.jsx("div",{className:"text-sm text-gray-400 mb-3",children:u.artist}),i.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[i.jsxs("span",{children:[u.bpm," BPM"]}),i.jsx("span",{children:""}),i.jsx("span",{children:u.key}),i.jsx("span",{children:""}),i.jsx("span",{children:u.genre})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Vr,{size:12})," ",u.plays.toLocaleString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(id,{size:12})," ",u.likes.toLocaleString()]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(ls,{size:12})," ",u.downloads.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),i.jsxs("div",{className:"font-bold text-lg text-white",children:["",((d=u.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),i.jsx(X,{to:`/artist/shop/${u.id}`,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-4 py-2 rounded-lg text-white font-medium transition-all",children:"View Beat"})]})]})]},u.id)})}),!r&&t.length>0&&i.jsxs("div",{className:"text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})})},o3=()=>{const{user:t}=Ke(),[e,r]=E.useState([]),[n,s]=E.useState(!0),[a,o]=E.useState("all");E.useEffect(()=>{if(!t)return;(async()=>{try{const d=await Br.getOrdersByCustomer(t.email);r(d)}catch(d){console.error("Failed to load orders:",d)}finally{s(!1)}})()},[t]);const l=e.filter(u=>a==="all"?!0:u.status===a);return n?i.jsx(cs,{children:i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-xl text-white",children:"Loading orders..."})})}):i.jsx(cs,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Purchases"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"View your beat purchases and licenses"})]}),i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:i.jsx("div",{className:"flex gap-4",children:["all","completed","processing","pending"].map(u=>i.jsxs("button",{onClick:()=>o(u),className:`px-4 py-2 rounded-lg capitalize transition ${a===u?"bg-gradient-to-r from-orange-600 to-red-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[u,i.jsxs("span",{className:"ml-2 text-xs",children:["(",u==="all"?e.length:e.filter(d=>d.status===u).length,")"]})]},u))})}),l.length===0?i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[i.jsx(KN,{size:64,className:"mx-auto mb-4 text-gray-600"}),i.jsx("p",{className:"text-xl text-white mb-2",children:"No purchases found"}),i.jsx("p",{className:"text-gray-400 mb-6",children:a==="all"?"You haven't purchased any beats yet":`No ${a} orders`}),i.jsx(X,{to:"/artist/beats",className:"inline-block bg-gradient-to-r from-orange-600 to-red-600 px-6 py-3 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"Browse Beats"})]}):i.jsx("div",{className:"space-y-4",children:l.map(u=>{var d,h,f;return i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-700/50 p-4 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-lg text-white mb-1",children:u.orderNumber}),i.jsxs("div",{className:"text-sm text-gray-400",children:["Placed on ",((f=(h=(d=u.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:f.toLocaleDateString())||"N/A"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2 ${u.status==="completed"?"bg-green-500/20 text-green-400":u.status==="processing"?"bg-blue-500/20 text-blue-400":u.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:u.status}),i.jsxs("div",{className:"font-bold text-white",children:["",u.total.toFixed(2)]})]})]}),i.jsx("div",{className:"p-4",children:i.jsx("div",{className:"space-y-3",children:u.items.map((p,y)=>{var S;return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("img",{src:p.artworkUrl||"/placeholder-beat.png",alt:p.beatTitle,className:"w-16 h-16 rounded object-cover"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-white",children:p.beatTitle}),i.jsxs("div",{className:"text-sm text-gray-400 capitalize",children:[p.licenseType," License"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-white",children:["",p.price.toFixed(2)]}),u.status==="completed"&&((S=u.downloadLinks)==null?void 0:S[p.beatId])&&i.jsxs("a",{href:u.downloadLinks[p.beatId],className:"inline-flex items-center gap-1 text-sm text-orange-400 hover:text-orange-300 mt-1",download:!0,children:[i.jsx(ls,{size:14}),"Download"]})]})]},y)})})})]},u.id)})})]})})},l3=()=>{var w,b;const{user:t,signOut:e}=Ke(),[r,n]=E.useState(!1),[s,a]=E.useState((t==null?void 0:t.displayName)||""),[o,l]=E.useState(""),[u,d]=E.useState(""),[h,f]=E.useState(!1),[p,y]=E.useState(null),S=async N=>{N.preventDefault(),f(!0),y(null);try{await xe.updateUserProfile({displayName:s}),y({type:"success",text:"Profile updated successfully!"}),n(!1)}catch(P){y({type:"error",text:P.message||"Failed to update profile"})}finally{f(!1)}},v=async N=>{if(N.preventDefault(),f(!0),y(null),o!==u){y({type:"error",text:"Passwords do not match"}),f(!1);return}if(o.length<6){y({type:"error",text:"Password must be at least 6 characters"}),f(!1);return}try{await xe.updateUserPassword(o),y({type:"success",text:"Password updated successfully!"}),l(""),d("")}catch(P){y({type:"error",text:P.message||"Failed to update password"})}finally{f(!1)}},x=async()=>{try{await e()}catch(N){console.error("Sign out error:",N)}};return i.jsx(cs,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 text-center",children:[i.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-orange-600 to-red-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4",children:((b=(w=t==null?void 0:t.displayName)==null?void 0:w.charAt(0))==null?void 0:b.toUpperCase())||i.jsx(nn,{size:32,className:"text-white"})}),i.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:(t==null?void 0:t.displayName)||"Artist"}),i.jsx("p",{className:"text-gray-400 text-sm mb-4",children:t==null?void 0:t.email}),i.jsx("div",{className:"inline-block px-3 py-1 bg-orange-900/30 text-orange-300 rounded-full text-xs font-semibold border border-orange-700",children:"Artist Account"})]})}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[p&&i.jsx("div",{className:`p-4 rounded-lg border ${p.type==="success"?"bg-green-900/30 border-green-700 text-green-300":"bg-red-900/30 border-red-700 text-red-300"}`,children:p.text}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile Information"}),!r&&i.jsx("button",{onClick:()=>n(!0),className:"text-orange-400 hover:text-orange-300 text-sm font-medium",children:"Edit"})]}),r?i.jsxs("form",{onSubmit:S,children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[i.jsx(nn,{size:16,className:"inline mr-1"})," Display Name"]}),i.jsx("input",{type:"text",value:s,onChange:N=>a(N.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",required:!0})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[i.jsx(Up,{size:16,className:"inline mr-1"})," Email"]}),i.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-gray-400 opacity-50 cursor-not-allowed",disabled:!0}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[i.jsx(Xn,{size:16})," ",h?"Saving...":"Save Changes"]}),i.jsx("button",{type:"button",onClick:()=>{n(!1),a((t==null?void 0:t.displayName)||"")},className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Cancel"})]})]}):i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Display Name"}),i.jsx("div",{className:"font-semibold text-white",children:(t==null?void 0:t.displayName)||"Not set"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Email"}),i.jsx("div",{className:"font-semibold text-white",children:t==null?void 0:t.email})]})]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Change Password"}),i.jsxs("form",{onSubmit:v,children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[i.jsx(du,{size:16,className:"inline mr-1"})," New Password"]}),i.jsx("input",{type:"password",value:o,onChange:N=>l(N.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"Enter new password",minLength:6})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[i.jsx(du,{size:16,className:"inline mr-1"})," Confirm New Password"]}),i.jsx("input",{type:"password",value:u,onChange:N=>d(N.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"Confirm new password",minLength:6})]}),i.jsxs("button",{type:"submit",disabled:h||!o||!u,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[i.jsx(Xn,{size:16})," ",h?"Updating...":"Update Password"]})]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Actions"}),i.jsxs("button",{onClick:x,className:"w-full bg-red-600 hover:bg-red-700 py-3 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:[i.jsx(la,{size:20})," Sign Out"]})]})]})]})]})})},gs=({children:t})=>{var h,f;const[e,r]=E.useState(!0),{user:n,signOut:s}=Ke(),a=ar(),o=yn(),l=async()=>{await s(),o("/admin/login")},u=[{name:"Dashboard",href:"/admin/dashboard",icon:od},{name:"Beats",href:"/admin/beats",icon:Ge},{name:"Orders",href:"/admin/orders",icon:tr},{name:"Content",href:"/admin/content",icon:WN},{name:"Collaborations",href:"/admin/collaborations",icon:Qs},{name:"Analytics",href:"/admin/analytics",icon:kP},{name:"Chat",href:"/admin/chat",icon:er},{name:"Settings",href:"/admin/settings",icon:DP}],d=p=>a.pathname===p;return i.jsxs("div",{className:"min-h-screen bg-gray-900",children:[i.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Admin"})]}),i.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:i.jsx(Ft,{size:20})})]}),i.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[i.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=n==null?void 0:n.displayName)==null?void 0:h[0])||((f=n==null?void 0:n.email)==null?void 0:f[0])||"A"}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(n==null?void 0:n.displayName)||"Admin"}),i.jsx("p",{className:"text-xs text-gray-400 truncate",children:n==null?void 0:n.email})]})]})}),i.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:u.map(p=>{const y=p.icon;return i.jsxs(X,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[i.jsx(y,{size:18,className:"flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),i.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:i.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[i.jsx(la,{size:18,className:"flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),i.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[i.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[i.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:i.jsx(Ls,{size:24})}),i.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:i.jsx("div",{className:"text-right hidden sm:block",children:i.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),i.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},JN=t=>{const[e,r]=E.useState([]),[n,s]=E.useState(!0),[a,o]=E.useState(null);return E.useEffect(()=>{try{const l=Br.subscribeToOrders(u=>{r(u),s(!1)},t);return()=>l()}catch(l){o(l.message),s(!1)}},[t==null?void 0:t.status,t==null?void 0:t.customerId]),{orders:e,loading:n,error:a}},c3=()=>{const[t,e]=E.useState({totalOrders:0,totalRevenue:0,pendingOrders:0,completedOrders:0,averageOrderValue:0}),[r,n]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{(async()=>{try{const l=await Br.getOrderStatistics();e(l)}catch(l){a(l.message)}finally{n(!1)}})()},[]),{stats:t,loading:r,error:s,refetch:async()=>{n(!0);const o=await Br.getOrderStatistics();e(o),n(!1)}}},XN=t=>{const[e,r]=E.useState([]),[n,s]=E.useState(!0),[a,o]=E.useState(null);return E.useEffect(()=>{try{const l=Vo.subscribeToCollaborations(u=>{r(u),s(!1)},t);return()=>l()}catch(l){o(l.message),s(!1)}},[t==null?void 0:t.status,t==null?void 0:t.type]),{collaborations:e,loading:n,error:a}},u3=()=>{const[t,e]=E.useState({total:0,active:0,completed:0,totalRevenue:0,pendingRevenue:0}),[r,n]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{(async()=>{try{const l=await Vo.getCollaborationStats();e(l)}catch(l){a(l.message)}finally{n(!1)}})()},[]),{stats:t,loading:r,error:s,refetch:async()=>{n(!0);const o=await Vo.getCollaborationStats();e(o),n(!1)}}},d3=()=>{const{stats:t}=c3(),{stats:e}=u3(),[r,n]=E.useState(0),[s,a]=E.useState([]);E.useEffect(()=>{(async()=>{const u=await pn.getAllBeats();n(u.data.length);const d=await Br.getRecentOrders(5);a(d)})()},[]);const o=[{name:"Total Revenue",value:`${t.totalRevenue.toFixed(2)}`,icon:Yi,change:"+12.5%",changeType:"positive"},{name:"Total Orders",value:t.totalOrders,icon:oo,change:`${t.pendingOrders} pending`,changeType:"neutral"},{name:"Total Beats",value:r,icon:Ge,change:"In catalog",changeType:"neutral"},{name:"Active Collaborations",value:e.active,icon:Qs,change:`${e.completed} completed`,changeType:"positive"},{name:"Avg Order Value",value:`${t.averageOrderValue.toFixed(2)}`,icon:ol,change:"+8.2%",changeType:"positive"},{name:"Pending Revenue",value:`${e.pendingRevenue.toFixed(2)}`,icon:Yi,change:"From collaborations",changeType:"neutral"}];return i.jsx(gs,{children:i.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Dashboard"}),i.jsx("p",{className:"text-sm sm:text-base text-gray-400 mt-1 sm:mt-2",children:"Welcome back! Here's what's happening today."})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:o.map(l=>{const u=l.icon;return i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg sm:rounded-xl p-4 sm:p-6 hover:border-purple-500/50 transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:"text-xs sm:text-sm text-gray-400 truncate",children:l.name}),i.jsx("p",{className:"text-xl sm:text-3xl font-bold text-white mt-1 sm:mt-2",children:l.value}),i.jsx("p",{className:`text-xs sm:text-sm mt-1 sm:mt-2 ${l.changeType==="positive"?"text-green-400":l.changeType==="negative"?"text-red-400":"text-gray-400"}`,children:l.change})]}),i.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-2 sm:p-4 rounded-lg sm:rounded-xl flex-shrink-0",children:i.jsx(u,{size:20,className:"sm:w-8 sm:h-8 text-white"})})]})},l.name)})}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg sm:rounded-xl p-4 sm:p-6",children:[i.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white mb-3 sm:mb-4",children:"Recent Orders"}),i.jsx("div",{className:"space-y-2 sm:space-y-4",children:s.length===0?i.jsx("p",{className:"text-gray-400 text-center py-6 sm:py-8 text-sm sm:text-base",children:"No orders yet"}):s.map(l=>i.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gray-700/50 rounded hover:bg-gray-700 transition-colors gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-white font-medium text-sm sm:text-base truncate",children:l.orderNumber}),i.jsx("p",{className:"text-xs sm:text-sm text-gray-400 truncate",children:l.customerEmail})]}),i.jsxs("div",{className:"text-right flex-shrink-0",children:[i.jsxs("p",{className:"text-white font-semibold text-sm sm:text-base",children:["",l.total.toFixed(2)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 sm:py-1 rounded-full inline-block ${l.status==="completed"?"bg-green-500/20 text-green-400":l.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:l.status})]})]},l.id))})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[i.jsxs("a",{href:"/admin/beats",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[i.jsx(Ge,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),i.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Manage Beats"}),i.jsx("p",{className:"text-purple-100 text-xs sm:text-sm mt-1",children:"Add or edit beats"})]}),i.jsxs("a",{href:"/admin/orders",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[i.jsx(oo,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),i.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"View Orders"}),i.jsx("p",{className:"text-blue-100 text-xs sm:text-sm mt-1",children:"Process orders"})]}),i.jsxs("a",{href:"/admin/content",className:"bg-gradient-to-r from-green-600 to-teal-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[i.jsx(VP,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),i.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Content"}),i.jsx("p",{className:"text-green-100 text-xs sm:text-sm mt-1",children:"Manage content"})]}),i.jsxs("a",{href:"/admin/collaborations",className:"bg-gradient-to-r from-orange-600 to-red-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[i.jsx(Qs,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),i.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Collaborations"}),i.jsx("p",{className:"text-orange-100 text-xs sm:text-sm mt-1",children:"Manage deals"})]})]})]})})},ld=t=>{const[e,r]=E.useState([]),[n,s]=E.useState(!0),[a,o]=E.useState(null);return E.useEffect(()=>{const l=pn.subscribeToBeats(u=>{r(u),s(!1)},t);return()=>l()},[t==null?void 0:t.status,t==null?void 0:t.featured,t==null?void 0:t.genre]),{beats:e,loading:n,error:a,setError:o}},h3=()=>{const{beats:t,loading:e}=ld(),[r,n]=E.useState(!1),[s,a]=E.useState(null),[o,l]=E.useState(null),u=()=>{a(null),n(!0)},d=p=>{a(p),n(!0)},h=async p=>{if(confirm("Are you sure you want to delete this beat?"))try{await pn.deleteBeat(p),alert("Beat deleted successfully")}catch(y){alert(y.message)}},f=p=>{l(o===p?null:p)};return i.jsxs(gs,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Beats Management"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your beat catalog"})]}),i.jsxs("button",{onClick:u,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all flex items-center space-x-2",children:[i.jsx(QN,{size:20}),i.jsx("span",{children:"Add Beat"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Beats"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Published"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(p=>p.status==="published").length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Featured"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(p=>p.featured).length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Plays"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.reduce((p,y)=>p+y.plays,0)})]})]}),i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Beat"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Genre"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"BPM / Key"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Plays"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-700",children:e?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"Loading beats..."})}):t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"No beats yet. Create your first beat!"})}):t.map(p=>i.jsxs("tr",{className:"hover:bg-gray-700/50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:p.artworkUrl,alt:p.title,className:"w-12 h-12 rounded object-cover"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:p.title}),i.jsx("p",{className:"text-sm text-gray-400",children:p.artist})]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-sm",children:p.genre})}),i.jsxs("td",{className:"px-6 py-4 text-gray-300",children:[p.bpm," BPM / ",p.key]}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-sm ${p.status==="published"?"bg-green-500/20 text-green-400":p.status==="draft"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:p.status})}),i.jsx("td",{className:"px-6 py-4 text-gray-300",children:p.plays}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[i.jsx("button",{onClick:()=>f(p.id),className:"p-2 text-gray-400 hover:text-purple-400 transition-colors",title:"Play preview",children:o===p.id?i.jsx(gc,{size:18}):i.jsx(Vr,{size:18})}),i.jsx("button",{onClick:()=>d(p),className:"p-2 text-gray-400 hover:text-blue-400 transition-colors",title:"Edit",children:i.jsx(zp,{size:18})}),i.jsx("button",{onClick:()=>h(p.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Delete",children:i.jsx($p,{size:18})})]})})]},p.id))})]})})})]}),r&&i.jsx(f3,{beat:s,onClose:()=>n(!1),onSave:()=>{n(!1),a(null)}})]})},f3=({beat:t,onClose:e,onSave:r})=>{var h,f,p,y,S,v,x;const[n,s]=E.useState({title:(t==null?void 0:t.title)||"",artist:(t==null?void 0:t.artist)||"Jonna Rincon",bpm:(t==null?void 0:t.bpm)||120,key:(t==null?void 0:t.key)||"",genre:(t==null?void 0:t.genre)||"",tags:((h=t==null?void 0:t.tags)==null?void 0:h.join(", "))||"",audioUrl:(t==null?void 0:t.audioUrl)||"",artworkUrl:(t==null?void 0:t.artworkUrl)||"",slug:(t==null?void 0:t.slug)||"",status:(t==null?void 0:t.status)||"draft",featured:(t==null?void 0:t.featured)||!1,basicPrice:((p=(f=t==null?void 0:t.licenses)==null?void 0:f.basic)==null?void 0:p.price)||29,premiumPrice:((S=(y=t==null?void 0:t.licenses)==null?void 0:y.premium)==null?void 0:S.price)||49,exclusivePrice:((x=(v=t==null?void 0:t.licenses)==null?void 0:v.exclusive)==null?void 0:x.price)||199}),[a,o]=E.useState(!1),[l,u]=E.useState(!1),d=async w=>{w.preventDefault(),u(!0);try{const b={title:n.title,artist:n.artist,bpm:n.bpm,key:n.key,genre:n.genre,tags:n.tags.split(",").map(N=>N.trim()),audioUrl:n.audioUrl,artworkUrl:n.artworkUrl,slug:n.slug||n.title.toLowerCase().replace(/\s+/g,"-"),status:n.status,featured:n.featured,trending:!1,licenses:{basic:{type:"basic",price:n.basicPrice,features:["MP3 Download","Non-exclusive rights","Personal use"],downloads:1,streams:1e4,videos:1,distribution:!1},premium:{type:"premium",price:n.premiumPrice,features:["WAV + MP3","Non-exclusive rights","Commercial use","Unlimited streams"],downloads:5,streams:1e6,videos:5,distribution:!0},exclusive:{type:"exclusive",price:n.exclusivePrice,features:["All files","Exclusive rights","Full ownership","Unlimited use"],downloads:-1,streams:-1,videos:-1,distribution:!0}}};t?(await pn.updateBeat(t.id,b),alert("Beat updated successfully")):(await pn.createBeat(b),alert("Beat created successfully")),r()}catch(b){alert(b.message)}finally{u(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full my-8",children:[i.jsx("div",{className:"p-6 border-b border-gray-700",children:i.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Edit Beat":"Add New Beat"})}),i.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),i.jsx("input",{type:"text",value:n.title,onChange:w=>s({...n,title:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Artist"}),i.jsx("input",{type:"text",value:n.artist,onChange:w=>s({...n,artist:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"BPM"}),i.jsx("input",{type:"number",value:n.bpm,onChange:w=>s({...n,bpm:parseInt(w.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key"}),i.jsx("input",{type:"text",value:n.key,onChange:w=>s({...n,key:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Genre"}),i.jsx("input",{type:"text",value:n.genre,onChange:w=>s({...n,genre:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),i.jsxs("select",{value:n.status,onChange:w=>s({...n,status:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"archived",children:"Archived"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),i.jsx("input",{type:"text",value:n.tags,onChange:w=>s({...n,tags:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"trap, dark, atmospheric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Slug"}),i.jsx("input",{type:"text",value:n.slug,onChange:w=>s({...n,slug:w.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"auto-generated from title"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Basic Price ()"}),i.jsx("input",{type:"number",value:n.basicPrice,onChange:w=>s({...n,basicPrice:parseFloat(w.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Premium Price ()"}),i.jsx("input",{type:"number",value:n.premiumPrice,onChange:w=>s({...n,premiumPrice:parseFloat(w.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Exclusive Price ()"}),i.jsx("input",{type:"number",value:n.exclusivePrice,onChange:w=>s({...n,exclusivePrice:parseFloat(w.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:n.featured,onChange:w=>s({...n,featured:w.target.checked}),className:"w-4 h-4"}),i.jsx("span",{className:"text-sm text-gray-300",children:"Featured Beat"})]})}),i.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-700",children:[i.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:l||a,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:l?"Saving...":t?"Update Beat":"Create Beat"})]})]})]})})},m3=()=>{const{orders:t,loading:e}=JN(),[r,n]=E.useState("all"),s=r==="all"?t:t.filter(l=>l.status===r),a=async(l,u)=>{try{await Br.updateOrderStatus(l,u),alert("Order status updated")}catch(d){alert(d.message)}},o=l=>({pending:"bg-yellow-500/20 text-yellow-400",processing:"bg-blue-500/20 text-blue-400",completed:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400",refunded:"bg-gray-500/20 text-gray-400",cancelled:"bg-gray-500/20 text-gray-400"})[l];return i.jsx(gs,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Orders Management"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Manage and process customer orders"})]})}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("select",{value:r,onChange:l=>n(l.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white",children:[i.jsx("option",{value:"all",children:"All Orders"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"processing",children:"Processing"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"failed",children:"Failed"}),i.jsx("option",{value:"refunded",children:"Refunded"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Orders"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Pending"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:t.filter(l=>l.status==="pending").length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),i.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(l=>l.status==="completed").length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),i.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["",t.reduce((l,u)=>u.status==="completed"?l+u.total:l,0).toFixed(2)]})]})]}),i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Order Number"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Customer"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Items"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Total"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Date"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-700",children:e?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Loading orders..."})}):s.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"No orders found"})}):s.map(l=>i.jsxs("tr",{className:"hover:bg-gray-700/50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsx("p",{className:"font-medium text-white",children:l.orderNumber})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-white",children:l.customerName||"Guest"}),i.jsx("p",{className:"text-sm text-gray-400",children:l.customerEmail})]})}),i.jsxs("td",{className:"px-6 py-4 text-gray-300",children:[l.items.length," item(s)"]}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("p",{className:"font-semibold text-white",children:["",l.total.toFixed(2)]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("select",{value:l.status,onChange:u=>a(l.id,u.target.value),className:`px-2 py-1 rounded text-sm ${o(l.status)} bg-transparent border-0`,children:[i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"processing",children:"Processing"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"failed",children:"Failed"}),i.jsx("option",{value:"refunded",children:"Refunded"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),i.jsx("td",{className:"px-6 py-4 text-gray-300 text-sm",children:l.createdAt&&new Date(l.createdAt.seconds*1e3).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"flex items-center justify-end space-x-2",children:i.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-400 transition-colors",title:"View details",children:i.jsx(sd,{size:18})})})})]},l.id))})]})})})]})})},ZN=t=>{const[e,r]=E.useState([]),[n,s]=E.useState(!0);return E.useEffect(()=>{const a=uu.subscribeToContent(o=>{r(o),s(!1)},t);return()=>a()},[t==null?void 0:t.type,t==null?void 0:t.status,t==null?void 0:t.featured]),{content:e,loading:n}},p3=()=>{const{content:t,loading:e}=ZN(),[r,n]=E.useState(!1),[s,a]=E.useState(null),[o,l]=E.useState("all"),[u,d]=E.useState("all"),h=()=>{a(null),n(!0)},f=x=>{a(x),n(!0)},p=async x=>{if(confirm("Are you sure you want to delete this content?"))try{await uu.deleteContent(x),alert("Content deleted successfully")}catch(w){alert(w.message)}},y=t.filter(x=>!(o!=="all"&&x.type!==o||u!=="all"&&x.status!==u)),S=x=>{switch(x){case"published":return"bg-green-500/20 text-green-400";case"draft":return"bg-gray-500/20 text-gray-400";case"scheduled":return"bg-blue-500/20 text-blue-400";case"archived":return"bg-orange-500/20 text-orange-400";default:return"bg-gray-500/20 text-gray-400"}},v=x=>{switch(x){case"blog":return"bg-purple-500/20 text-purple-400";case"news":return"bg-pink-500/20 text-pink-400";case"tutorial":return"bg-blue-500/20 text-blue-400";case"press":return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}};return i.jsxs(gs,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Content Management"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Manage blog posts, news, tutorials, and press releases"})]}),i.jsxs("button",{onClick:h,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all flex items-center space-x-2",children:[i.jsx(QN,{size:20}),i.jsx("span",{children:"Create Content"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Content"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Published"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(x=>x.status==="published").length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Featured"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(x=>x.featured).length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Views"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.reduce((x,w)=>x+w.views,0).toLocaleString()})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Filter by Type"}),i.jsxs("select",{value:o,onChange:x=>l(x.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[i.jsx("option",{value:"all",children:"All Types"}),i.jsx("option",{value:"blog",children:"Blog"}),i.jsx("option",{value:"news",children:"News"}),i.jsx("option",{value:"tutorial",children:"Tutorial"}),i.jsx("option",{value:"press",children:"Press"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Filter by Status"}),i.jsxs("select",{value:u,onChange:x=>d(x.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"scheduled",children:"Scheduled"}),i.jsx("option",{value:"archived",children:"Archived"})]})]})]}),i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Title"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Type"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Author"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Stats"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Published"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-700",children:e?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Loading content..."})}):y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"No content found. Create your first content piece!"})}):y.map(x=>i.jsxs("tr",{className:"hover:bg-gray-700/50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[x.featuredImage&&i.jsx("img",{src:x.featuredImage,alt:x.title,className:"w-12 h-12 rounded object-cover"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:x.title}),x.excerpt&&i.jsx("p",{className:"text-sm text-gray-400 truncate max-w-xs",children:x.excerpt}),x.featured&&i.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-yellow-500/20 text-yellow-400 rounded text-xs",children:"Featured"})]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-sm capitalize ${v(x.type)}`,children:x.type})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-sm capitalize ${S(x.status)}`,children:x.status})}),i.jsx("td",{className:"px-6 py-4 text-gray-300",children:x.authorName}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(sd,{size:14}),i.jsx("span",{children:x.views})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(id,{size:14}),i.jsx("span",{children:x.likes})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(OP,{size:14}),i.jsx("span",{children:x.shares})]})]})}),i.jsx("td",{className:"px-6 py-4",children:x.publishedAt?i.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-400",children:[i.jsx(Mf,{size:14}),i.jsx("span",{children:new Date(x.publishedAt.toDate()).toLocaleDateString()})]}):x.scheduledFor?i.jsxs("div",{className:"flex items-center space-x-1 text-sm text-blue-400",children:[i.jsx(Mf,{size:14}),i.jsx("span",{children:new Date(x.scheduledFor.toDate()).toLocaleDateString()})]}):i.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[i.jsx("button",{onClick:()=>f(x),className:"p-2 text-blue-400 hover:bg-blue-500/20 rounded transition-colors",title:"Edit",children:i.jsx(zp,{size:18})}),i.jsx("button",{onClick:()=>p(x.id),className:"p-2 text-red-400 hover:bg-red-500/20 rounded transition-colors",title:"Delete",children:i.jsx($p,{size:18})})]})})]},x.id))})]})})})]}),r&&i.jsx(g3,{content:s,onClose:()=>n(!1),onSave:()=>{n(!1),a(null)}})]})},g3=({content:t,onClose:e,onSave:r})=>{var p,y,S,v;const[n,s]=E.useState({title:(t==null?void 0:t.title)||"",type:(t==null?void 0:t.type)||"blog",slug:(t==null?void 0:t.slug)||"",excerpt:(t==null?void 0:t.excerpt)||"",category:(t==null?void 0:t.category)||"",tags:((p=t==null?void 0:t.tags)==null?void 0:p.join(", "))||"",featuredImage:(t==null?void 0:t.featuredImage)||"",status:(t==null?void 0:t.status)||"draft",featured:(t==null?void 0:t.featured)||!1,metaTitle:(t==null?void 0:t.metaTitle)||"",metaDescription:(t==null?void 0:t.metaDescription)||"",metaKeywords:((y=t==null?void 0:t.metaKeywords)==null?void 0:y.join(", "))||"",contentText:((v=(S=t==null?void 0:t.blocks)==null?void 0:S.find(x=>x.type==="text"))==null?void 0:v.content)||""}),[a,o]=E.useState(!1),[l,u]=E.useState(!1),d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InRlY2huaWVrQGpvbm5hcmluY29uLm5sIiwiZXhwIjo0OTI0NDk3Nzc0LCJqdGkiOiIwZjY2YjZmNS01OTg2LTRmMzYtYTVlMy01Yzc4MTFhYjJiOGUifQ.o_SjqVg7uIvu5TL9hsjkPD6_Io5CODTMi9XY7kM-f-0",h=async x=>{var b;const w=(b=x.target.files)==null?void 0:b[0];if(w){u(!0);try{const N=new FormData;N.append("file",w),N.append("user","jonnarincon"),N.append("title",n.title||"Content Image");const P=await fetch("https://api.upload-post.com/api/upload",{method:"POST",headers:{Authorization:`Apikey ${d}`},body:N});if(!P.ok){const D=await P.json();throw new Error(D.message||"Upload failed")}const L=await P.json();L&&L.url&&(s(D=>({...D,featuredImage:L.url})),alert("Image uploaded successfully!"))}catch(N){console.error("Upload failed:",N),alert("Upload failed: "+(N.message||"Unknown error"))}finally{u(!1)}}},f=async x=>{x.preventDefault(),o(!0);try{const w=[];n.contentText.trim()&&w.push({id:"1",type:"text",content:n.contentText,order:0});const b={title:n.title,type:n.type,slug:n.slug||n.title.toLowerCase().replace(/\s+/g,"-"),excerpt:n.excerpt,blocks:w,category:n.category,tags:n.tags.split(",").map(N=>N.trim()).filter(N=>N),featuredImage:n.featuredImage,status:n.status,featured:n.featured,metaTitle:n.metaTitle,metaDescription:n.metaDescription,metaKeywords:n.metaKeywords.split(",").map(N=>N.trim()).filter(N=>N)};t?(await uu.updateContent(t.id,b),alert("Content updated successfully")):(await uu.createContent(b),alert("Content created successfully")),r()}catch(w){alert(w.message)}finally{o(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-4xl w-full my-8",children:[i.jsxs("div",{className:"p-6 border-b border-gray-700 flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Edit Content":"Create New Content"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:i.jsx(Ft,{size:24})})]}),i.jsxs("form",{onSubmit:f,className:"p-6 space-y-6 max-h-[calc(100vh-200px)] overflow-y-auto",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Basic Information"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title *"}),i.jsx("input",{type:"text",value:n.title,onChange:x=>s({...n,title:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type *"}),i.jsxs("select",{value:n.type,onChange:x=>s({...n,type:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",required:!0,children:[i.jsx("option",{value:"blog",children:"Blog"}),i.jsx("option",{value:"news",children:"News"}),i.jsx("option",{value:"tutorial",children:"Tutorial"}),i.jsx("option",{value:"press",children:"Press"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Slug"}),i.jsx("input",{type:"text",value:n.slug,onChange:x=>s({...n,slug:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"auto-generated from title"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),i.jsx("input",{type:"text",value:n.category,onChange:x=>s({...n,category:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., Music Production, Industry News"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Excerpt"}),i.jsx("textarea",{value:n.excerpt,onChange:x=>s({...n,excerpt:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",rows:2,placeholder:"Short description of the content"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),i.jsx("input",{type:"text",value:n.tags,onChange:x=>s({...n,tags:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"production, beats, tutorial"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Featured Image"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"flex gap-2",children:i.jsxs("label",{className:"flex-1 cursor-pointer",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-all",children:[i.jsx(MP,{size:18}),l?"Uploading...":"Upload Image"]}),i.jsx("input",{type:"file",accept:"image/*,video/*",onChange:h,className:"hidden",disabled:l})]})}),i.jsx("input",{type:"url",value:n.featuredImage,onChange:x=>s({...n,featuredImage:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"Or paste URL manually"}),n.featuredImage&&i.jsx("div",{className:"mt-2",children:i.jsx("img",{src:n.featuredImage,alt:"Preview",className:"w-full h-48 object-cover rounded-lg",onError:x=>{x.target.style.display="none"}})})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Content"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Main Content *"}),i.jsx("textarea",{value:n.contentText,onChange:x=>s({...n,contentText:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500 font-mono text-sm",rows:10,placeholder:"Write your content here...",required:!0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use markdown syntax for formatting. Rich text editor can be added later."})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"SEO & Meta"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Meta Title"}),i.jsx("input",{type:"text",value:n.metaTitle,onChange:x=>s({...n,metaTitle:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"Leave empty to use title"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Meta Description"}),i.jsx("textarea",{value:n.metaDescription,onChange:x=>s({...n,metaDescription:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",rows:2,placeholder:"SEO description"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Meta Keywords (comma separated)"}),i.jsx("input",{type:"text",value:n.metaKeywords,onChange:x=>s({...n,metaKeywords:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"keyword1, keyword2, keyword3"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Publishing"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status *"}),i.jsxs("select",{value:n.status,onChange:x=>s({...n,status:x.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"scheduled",children:"Scheduled"}),i.jsx("option",{value:"archived",children:"Archived"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:n.featured,onChange:x=>s({...n,featured:x.target.checked}),className:"w-4 h-4 rounded"}),i.jsx("span",{className:"text-sm text-gray-300",children:"Featured Content"})]})})]})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-700",children:[i.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:a,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:a?"Saving...":t?"Update Content":"Create Content"})]})]})]})})},x3=()=>{const{beats:t}=ld(),{orders:e,statistics:r}=JN(),{content:n}=ZN(),{collaborations:s,statistics:a}=XN(),[o,l]=E.useState("30d"),u=(r==null?void 0:r.totalRevenue)||0,d=e.length,h=t.length,f=n.reduce((D,T)=>D+T.views,0),p=t.reduce((D,T)=>D+T.plays,0),y=t.reduce((D,T)=>D+T.downloads,0),S=[...t].sort((D,T)=>T.plays-D.plays).slice(0,5),v=[...n].sort((D,T)=>T.views-D.views).slice(0,5),x=[...e].sort((D,T)=>{var C,R,A,I;const _=((R=(C=D.createdAt)==null?void 0:C.toDate)==null?void 0:R.call(C))||new Date(0);return(((I=(A=T.createdAt)==null?void 0:A.toDate)==null?void 0:I.call(A))||new Date(0)).getTime()-_.getTime()}).slice(0,5),w=12.5,b=t.filter(D=>D.status==="published").length,N=t.filter(D=>D.featured).length,P=n.filter(D=>D.status==="published").length,L=s.filter(D=>D.status==="active").length;return i.jsx(gs,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Analytics Dashboard"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Overview of your platform performance"})]}),i.jsx("div",{children:i.jsxs("select",{value:o,onChange:D=>l(D.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[i.jsx("option",{value:"7d",children:"Last 7 days"}),i.jsx("option",{value:"30d",children:"Last 30 days"}),i.jsx("option",{value:"90d",children:"Last 90 days"}),i.jsx("option",{value:"all",children:"All time"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),i.jsx(Yi,{className:"text-green-400",size:20})]}),i.jsxs("p",{className:"text-3xl font-bold text-white",children:["",u.toLocaleString()]}),i.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[i.jsx(ol,{className:"text-green-400 mr-1",size:16}),i.jsxs("span",{className:"text-green-400",children:["+",w,"%"]}),i.jsx("span",{className:"text-gray-500 ml-1",children:"vs last period"})]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Orders"}),i.jsx(tr,{className:"text-blue-400",size:20})]}),i.jsx("p",{className:"text-3xl font-bold text-white",children:d}),i.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[e.filter(D=>D.status==="completed").length," completed"]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Beats"}),i.jsx(Ge,{className:"text-purple-400",size:20})]}),i.jsx("p",{className:"text-3xl font-bold text-white",children:h}),i.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[b," published  ",N," featured"]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Content Views"}),i.jsx(sd,{className:"text-pink-400",size:20})]}),i.jsx("p",{className:"text-3xl font-bold text-white",children:f.toLocaleString()}),i.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[P," published articles"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Beat Performance"}),i.jsx(Ge,{className:"text-purple-400",size:20})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Total Plays"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:p.toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Total Downloads"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:y.toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Avg Plays per Beat"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:h>0?Math.round(p/h):0})]})]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Content Engagement"}),i.jsx(WN,{className:"text-blue-400",size:20})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Total Articles"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:n.length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Total Likes"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:n.reduce((D,T)=>D+T.likes,0).toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Total Shares"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:n.reduce((D,T)=>D+T.shares,0).toLocaleString()})]})]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Collaborations"}),i.jsx(Qs,{className:"text-green-400",size:20})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Total Collaborations"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:s.length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Active"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:L})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400",children:"Total Revenue"}),i.jsxs("p",{className:"text-2xl font-bold text-white",children:["",((a==null?void 0:a.totalRevenue)||0).toLocaleString()]})]})]})]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Performing Beats"}),i.jsx("div",{className:"space-y-3",children:S.length===0?i.jsx("p",{className:"text-gray-400 text-center py-4",children:"No beats available"}):S.map((D,T)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("span",{className:"text-2xl font-bold text-gray-500",children:["#",T+1]}),i.jsx("img",{src:D.artworkUrl,alt:D.title,className:"w-12 h-12 rounded object-cover"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:D.title}),i.jsx("p",{className:"text-sm text-gray-400",children:D.artist})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold text-white",children:[D.plays.toLocaleString()," plays"]}),i.jsxs("p",{className:"text-sm text-gray-400",children:[D.downloads," downloads"]})]})]},D.id))})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Content by Views"}),i.jsx("div",{className:"space-y-3",children:v.length===0?i.jsx("p",{className:"text-gray-400 text-center py-4",children:"No content available"}):v.map((D,T)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[i.jsxs("span",{className:"text-lg font-bold text-gray-500",children:["#",T+1]}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"font-medium text-white truncate",children:D.title}),i.jsx("p",{className:"text-xs text-gray-400 capitalize",children:D.type})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-semibold text-white",children:D.views.toLocaleString()}),i.jsx("p",{className:"text-xs text-gray-400",children:"views"})]})]},D.id))})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Orders"}),i.jsx("div",{className:"space-y-3",children:x.length===0?i.jsx("p",{className:"text-gray-400 text-center py-4",children:"No orders yet"}):x.map(D=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"font-medium text-white",children:["Order #",D.id.slice(0,8)]}),i.jsx("p",{className:"text-sm text-gray-400",children:D.customerEmail})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold text-white",children:["",D.totalAmount]}),i.jsx("span",{className:`text-xs px-2 py-1 rounded ${D.status==="completed"?"bg-green-500/20 text-green-400":D.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:D.status})]})]},D.id))})]})]})]})})},y3=()=>{const{collaborations:t,loading:e}=XN(),{user:r}=Ke(),[n,s]=E.useState(null),[a,o]=E.useState({}),[l,u]=E.useState(""),d=f=>({inquiry:"bg-gray-500/20 text-gray-400",negotiating:"bg-yellow-500/20 text-yellow-400",agreed:"bg-blue-500/20 text-blue-400",contract_sent:"bg-purple-500/20 text-purple-400",signed:"bg-green-500/20 text-green-400",in_progress:"bg-cyan-500/20 text-cyan-400",completed:"bg-green-600/20 text-green-500",cancelled:"bg-red-500/20 text-red-400"})[f];E.useEffect(()=>{if(!n)return;const f=le(q,"collaborationMessages"),p=ke(f,se("collaborationId","==",n),Ve("createdAt","asc")),y=vr(p,S=>{const v=[];S.forEach(x=>{v.push({id:x.id,...x.data()})}),o(x=>({...x,[n]:v}))});return()=>y()},[n]);const h=async f=>{if(!(!l.trim()||!r))try{await br(le(q,"collaborationMessages"),{collaborationId:f,senderId:r.uid,senderName:r.displayName||"Admin",senderEmail:r.email,message:l.trim(),createdAt:he()}),u("")}catch(p){console.error("Failed to send message:",p)}};return i.jsx(gs,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Collaborations & Contracts"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Manage partnerships and deals"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Active"}),i.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:t.filter(f=>["agreed","contract_sent","signed","in_progress"].includes(f.status)).length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),i.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(f=>f.status==="completed").length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),i.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["",t.reduce((f,p)=>f+p.paidAmount,0).toFixed(2)]})]})]}),i.jsx("div",{className:"space-y-4",children:e?i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading..."}):t.length===0?i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"No collaborations yet"}):t.map(f=>{var p;return i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[i.jsx("div",{onClick:()=>s(n===f.id?null:f.id),className:"p-6 cursor-pointer hover:bg-gray-750 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-xl font-bold text-white",children:f.title}),i.jsx("span",{className:`px-2 py-1 rounded text-xs ${d(f.status)}`,children:f.status.replace("_"," ")})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Client:"}),i.jsx("p",{className:"text-white font-medium",children:f.clientName}),i.jsx("p",{className:"text-gray-400 text-xs",children:f.clientEmail})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Type:"}),i.jsx("p",{className:"text-white font-medium capitalize",children:f.type})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Budget:"}),i.jsx("p",{className:"text-white font-medium",children:f.budget?`${f.budget.toFixed(2)}`:"N/A"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Payment:"}),i.jsxs("p",{className:`font-medium ${f.paymentStatus==="paid"?"text-green-400":f.paymentStatus==="partial"?"text-yellow-400":"text-gray-400"}`,children:["",f.paidAmount.toFixed(2)," (",f.paymentStatus,")"]})]})]})]}),i.jsx("button",{className:"text-gray-400 hover:text-white transition ml-4",children:n===f.id?i.jsx(qN,{size:24}):i.jsx($N,{size:24})})]})}),n===f.id&&i.jsxs("div",{className:"border-t border-gray-700 p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Description"}),i.jsx("p",{className:"text-gray-200",children:f.description})]}),i.jsxs("div",{className:"bg-gray-900 rounded-lg p-4",children:[i.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-4",children:[i.jsx(er,{size:20,className:"text-blue-400"}),"Messages"]}),i.jsx("div",{className:"bg-gray-800 rounded-lg p-4 max-h-80 overflow-y-auto space-y-3 mb-4",children:!a[f.id]||a[f.id].length===0?i.jsxs("div",{className:"text-center text-gray-400 py-8",children:[i.jsx(er,{size:48,className:"mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No messages yet. Start the conversation!"})]}):(p=a[f.id])==null?void 0:p.map(y=>{var S,v,x;return i.jsxs("div",{className:`p-3 rounded-lg ${y.senderId===(r==null?void 0:r.uid)?"bg-purple-900/30 ml-8":"bg-gray-700 mr-8"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"font-semibold text-sm text-white",children:y.senderId===(r==null?void 0:r.uid)?"You (Admin)":y.senderName}),i.jsx("span",{className:"text-xs text-gray-400",children:((x=(v=(S=y.createdAt)==null?void 0:S.toDate)==null?void 0:v.call(S))==null?void 0:x.toLocaleString())||"Just now"})]}),i.jsx("p",{className:"text-gray-300 text-sm",children:y.message})]},y.id)})}),i.jsxs("form",{onSubmit:y=>{y.preventDefault(),h(f.id)},className:"flex gap-2",children:[i.jsx("input",{type:"text",value:l,onChange:y=>u(y.target.value),placeholder:"Type your message to the artist...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),i.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i.jsx(al,{size:18}),"Send"]})]})]})]})]},f.id)})})]})})},v3=()=>{const[t,e]=E.useState("shop"),[r,n]=E.useState(!0),[s,a]=E.useState({storeName:"",storeDescription:"",heroTitle:"",heroSubtitle:"",featuredEnabled:!0,trendingEnabled:!0,genres:[],currency:"EUR",taxRate:21,enableDownloads:!0,watermarkPreviews:!0}),[o,l]=E.useState({emailOrderNotifications:!0,emailCollaborationNotifications:!0,emailAnalyticsReports:!1,emailSecurityAlerts:!0,emailNewFeatures:!1,pushNotifications:!0}),[u,d]=E.useState({twoFactorEnabled:!1,passwordMinLength:12,sessionTimeout:30,enableAutoBackup:!0,backupFrequency:"daily"}),[h,f]=E.useState(null);E.useEffect(()=>{(async()=>{try{n(!0);const[w,b,N]=await Promise.all([oi.getShopSettings(),oi.getNotificationSettings(),oi.getSecuritySettings()]);w&&a(w),b&&l(b),N&&d(N)}catch(w){console.error("Failed to load settings:",w)}finally{n(!1)}})()},[]);const p=async()=>{try{await oi.saveShopSettings(s),f({type:"success",text:"Shop settings saved successfully!"}),setTimeout(()=>f(null),3e3)}catch(x){console.error("Failed to save shop settings:",x),f({type:"error",text:"Failed to save settings. Please try again."})}},y=async()=>{try{await oi.saveNotificationSettings(o),f({type:"success",text:"Notification settings saved successfully!"}),setTimeout(()=>f(null),3e3)}catch(x){console.error("Failed to save notification settings:",x),f({type:"error",text:"Failed to save settings. Please try again."})}},S=async()=>{try{await oi.saveSecuritySettings(u),f({type:"success",text:"Security settings saved successfully!"}),setTimeout(()=>f(null),3e3)}catch(x){console.error("Failed to save security settings:",x),f({type:"error",text:"Failed to save settings. Please try again."})}},v=[{id:"shop",name:"Shop Settings",icon:LP},{id:"notifications",name:"Notifications",icon:Uy},{id:"security",name:"Security",icon:zy}];return i.jsx(gs,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Settings"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your platform configuration and preferences"})]}),r&&i.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:i.jsx("p",{className:"text-blue-300",children:"Loading settings..."})}),i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:i.jsx("div",{className:"flex gap-2 overflow-x-auto",children:v.map(x=>{const w=x.icon;return i.jsxs("button",{onClick:()=>e(x.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition ${t===x.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[i.jsx(w,{size:18}),i.jsx("span",{className:"font-medium",children:x.name})]},x.id)})})}),h&&i.jsx("div",{className:`p-4 rounded-lg border ${h.type==="success"?"bg-green-900/20 border-green-700 text-green-400":"bg-red-900/20 border-red-700 text-red-400"}`,children:h.text}),t==="shop"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Shop Features"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Featured Beats"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Show featured badge on selected beats"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s.featuredEnabled,onChange:x=>a({...s,featuredEnabled:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Trending Beats"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Show trending badge on popular beats"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s.trendingEnabled,onChange:x=>a({...s,trendingEnabled:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Enable Downloads"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Allow customers to download purchased beats"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s.enableDownloads,onChange:x=>a({...s,enableDownloads:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Watermark Previews"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Add watermark to preview audio files"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s.watermarkPreviews,onChange:x=>a({...s,watermarkPreviews:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Payment Settings"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),i.jsxs("select",{value:s.currency,onChange:x=>a({...s,currency:x.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",children:[i.jsx("option",{value:"EUR",children:"EUR ()"}),i.jsx("option",{value:"USD",children:"USD ($)"}),i.jsx("option",{value:"GBP",children:"GBP ()"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tax Rate (%)"}),i.jsx("input",{type:"number",value:s.taxRate,onChange:x=>a({...s,taxRate:parseFloat(x.target.value)}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500"})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:p,className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[i.jsx(Xn,{size:20}),"Save Shop Settings"]})})]}),t==="notifications"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx(Uy,{size:24,className:"text-yellow-400"}),"Notification Settings"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Email on New Orders"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Get notified when customers place orders"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:o.emailOrderNotifications,onChange:x=>l({...o,emailOrderNotifications:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Email on Collaborations"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Get notified about collaboration requests"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:o.emailCollaborationNotifications,onChange:x=>l({...o,emailCollaborationNotifications:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Email Analytics Reports"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Receive weekly analytics reports"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:o.emailAnalyticsReports,onChange:x=>l({...o,emailAnalyticsReports:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Email Security Alerts"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Important security notifications"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:o.emailSecurityAlerts,onChange:x=>l({...o,emailSecurityAlerts:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Email New Features"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Learn about new features and updates"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:o.emailNewFeatures,onChange:x=>l({...o,emailNewFeatures:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Push Notifications"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Receive browser push notifications"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:o.pushNotifications,onChange:x=>l({...o,pushNotifications:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[i.jsx(Xn,{size:20}),"Save Notification Settings"]})})]}),t==="security"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[i.jsx(zy,{size:24,className:"text-red-400"}),"Security Settings"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Two-Factor Authentication"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Require 2FA for admin accounts"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:u.twoFactorEnabled,onChange:x=>d({...u,twoFactorEnabled:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Minimum Password Length"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"range",min:"8",max:"20",value:u.passwordMinLength,onChange:x=>d({...u,passwordMinLength:parseInt(x.target.value)}),className:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),i.jsx("span",{className:"text-white font-medium w-12 text-center",children:u.passwordMinLength})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Timeout (minutes)"}),i.jsx("input",{type:"number",min:"5",max:"480",value:u.sessionTimeout,onChange:x=>d({...u,sessionTimeout:parseInt(x.target.value)}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-red-500"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Users will be logged out after this period of inactivity"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Enable Auto Backup"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Automatically backup database daily"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:u.enableAutoBackup,onChange:x=>d({...u,enableAutoBackup:x.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Backup Frequency"}),i.jsxs("select",{value:u.backupFrequency,onChange:x=>d({...u,backupFrequency:x.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-red-500",children:[i.jsx("option",{value:"daily",children:"Daily"}),i.jsx("option",{value:"weekly",children:"Weekly"}),i.jsx("option",{value:"monthly",children:"Monthly"})]})]})]})]}),i.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:i.jsxs("p",{className:"text-sm text-blue-300",children:[" ",i.jsx("strong",{children:"Tip:"})," Strong security settings protect your platform and user data. We recommend enabling 2FA and auto-backups."]})}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:S,className:"flex items-center gap-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[i.jsx(Xn,{size:20}),"Save Security Settings"]})})]})]})})},w3=()=>{var S;const{user:t}=Ke(),[e,r]=E.useState([]),[n,s]=E.useState(""),[a,o]=E.useState(""),[l,u]=E.useState("all"),[d,h]=E.useState(null);E.useEffect(()=>{const v=le(q,"supportMessages");let x=ke(v,Ve("createdAt","desc"));l!=="all"&&(x=ke(v,se("senderRole","==",l),Ve("createdAt","desc")));const w=vr(x,b=>{const N=[];b.forEach(P=>{N.push({id:P.id,...P.data()})}),r(N)});return()=>w()},[l]);const f=async v=>{if(v.preventDefault(),!(!n.trim()||!t||!d))try{await br(le(q,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Admin",senderEmail:t.email,senderRole:"admin",recipientId:d,message:n.trim(),createdAt:he()}),s("")}catch(x){console.error("Failed to send message:",x)}},p=e.filter(v=>(v.message.toLowerCase().includes(a.toLowerCase())||v.senderName.toLowerCase().includes(a.toLowerCase()))&&(!d||v.senderId===d||v.recipientId===d)),y=Array.from(new Map(e.map(v=>[v.senderId,{id:v.senderId,name:v.senderName,role:v.senderRole,email:v.senderEmail}])).values());return i.jsx(gs,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Manage customer, artist, and manager communications"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Bp,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",value:a,onChange:v=>o(v.target.value),placeholder:"Search messages...",className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(GN,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsxs("select",{value:l,onChange:v=>u(v.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500 appearance-none",children:[i.jsx("option",{value:"all",children:"All Roles"}),i.jsx("option",{value:"customer",children:"Customers"}),i.jsx("option",{value:"artist",children:"Artists"}),i.jsx("option",{value:"manager",children:"Managers"})]})]}),i.jsx("div",{children:i.jsxs("select",{value:d||"",onChange:v=>h(v.target.value||null),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500",children:[i.jsx("option",{value:"",children:"All Users"}),y.map(v=>i.jsxs("option",{value:v.id,children:[v.name," (",v.role,")"]},v.id))]})})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 450px)"},children:[i.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:p.length===0?i.jsxs("div",{className:"text-center text-gray-400 py-12",children:[i.jsx(er,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No messages found"})]}):p.map(v=>{var x,w,b;return i.jsxs("div",{className:`p-4 rounded-lg ${v.senderId===(t==null?void 0:t.uid)?"bg-purple-900/30 ml-12":"bg-gray-700 mr-12"}`,onClick:()=>h(v.senderId),style:{cursor:"pointer"},children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-white",children:v.senderId===(t==null?void 0:t.uid)?"You (Admin)":v.senderName}),i.jsx("span",{className:`ml-2 px-2 py-0.5 rounded text-xs capitalize ${v.senderRole==="customer"?"bg-blue-600 text-blue-100":v.senderRole==="artist"?"bg-purple-600 text-purple-100":v.senderRole==="manager"?"bg-cyan-600 text-cyan-100":"bg-gray-600 text-gray-100"}`,children:v.senderRole}),i.jsx("span",{className:"ml-2 text-xs text-gray-400",children:v.senderEmail})]}),i.jsx("span",{className:"text-xs text-gray-400",children:((b=(w=(x=v.createdAt)==null?void 0:x.toDate)==null?void 0:w.call(x))==null?void 0:b.toLocaleString())||"Just now"})]}),i.jsx("p",{className:"text-gray-300",children:v.message})]},v.id)})}),d&&i.jsxs("form",{onSubmit:f,className:"p-4 border-t border-gray-700 bg-gray-750",children:[i.jsxs("div",{className:"mb-2 text-sm text-gray-400",children:["Replying to: ",i.jsx("span",{className:"text-white font-semibold",children:(S=y.find(v=>v.id===d))==null?void 0:S.name})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:n,onChange:v=>s(v.target.value),placeholder:"Type your reply...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),i.jsxs("button",{type:"submit",disabled:!n.trim(),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i.jsx(al,{size:20}),"Send"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Messages"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:e.length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Customers"}),i.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:e.filter(v=>v.senderRole==="customer").length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Artists"}),i.jsx("p",{className:"text-2xl font-bold text-purple-400 mt-1",children:e.filter(v=>v.senderRole==="artist").length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Managers"}),i.jsx("p",{className:"text-2xl font-bold text-cyan-400 mt-1",children:e.filter(v=>v.senderRole==="manager").length})]})]})]})})},Hp=({children:t})=>{var h,f;const[e,r]=E.useState(!0),{user:n,signOut:s}=Ke(),a=ar(),o=yn(),l=async()=>{await s(),o("/manager/login")},u=[{name:"Dashboard",href:"/manager/dashboard",icon:od},{name:"Beats",href:"/manager/beats",icon:Ge},{name:"Chat",href:"/manager/chat",icon:er}],d=p=>a.pathname===p;return i.jsxs("div",{className:"min-h-screen bg-gray-900",children:[i.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Manager"})]}),i.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:i.jsx(Ft,{size:20})})]}),i.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[i.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=n==null?void 0:n.displayName)==null?void 0:h[0])||((f=n==null?void 0:n.email)==null?void 0:f[0])||"M"}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(n==null?void 0:n.displayName)||"Manager"}),i.jsx("p",{className:"text-xs text-gray-400 truncate",children:n==null?void 0:n.email})]})]})}),i.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:u.map(p=>{const y=p.icon;return i.jsxs(X,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[i.jsx(y,{size:18,className:"flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),i.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:i.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[i.jsx(la,{size:18,className:"flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),i.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[i.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[i.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:i.jsx(Ls,{size:24})}),i.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:i.jsx("div",{className:"text-right hidden sm:block",children:i.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),i.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},b3=()=>{const{beats:t}=ld(),e={totalBeats:t.length,publishedBeats:t.filter(r=>r.status==="published").length,totalPlays:t.reduce((r,n)=>r+n.plays,0),featuredBeats:t.filter(r=>r.featured).length};return i.jsx(Hp,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manager Dashboard"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Overview of beats and platform activity"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-cyan-600 rounded-xl p-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Beats"}),i.jsx("p",{className:"text-3xl font-bold mt-2",children:e.totalBeats})]}),i.jsx(Ge,{size:40,className:"opacity-20"})]})}),i.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Published"}),i.jsx("p",{className:"text-3xl font-bold mt-2",children:e.publishedBeats})]}),i.jsx(ol,{size:40,className:"opacity-20"})]})}),i.jsx("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Total Plays"}),i.jsx("p",{className:"text-3xl font-bold mt-2",children:e.totalPlays.toLocaleString()})]}),i.jsx(sd,{size:40,className:"opacity-20"})]})}),i.jsx("div",{className:"bg-gradient-to-br from-yellow-600 to-orange-600 rounded-xl p-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Featured"}),i.jsx("p",{className:"text-3xl font-bold mt-2",children:e.featuredBeats})]}),i.jsx(Ge,{size:40,className:"opacity-20"})]})})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("a",{href:"/manager/beats",className:"flex items-center gap-3 p-4 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-colors group",children:[i.jsx("div",{className:"p-3 bg-blue-600 rounded-lg group-hover:bg-blue-500 transition-colors",children:i.jsx(Ge,{size:24,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white",children:"Manage Beats"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Edit and update beat information"})]})]}),i.jsxs("a",{href:"/manager/chat",className:"flex items-center gap-3 p-4 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-colors group",children:[i.jsx("div",{className:"p-3 bg-cyan-600 rounded-lg group-hover:bg-cyan-500 transition-colors",children:i.jsx(er,{size:24,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white",children:"Chat"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Communicate with team and artists"})]})]})]})]}),i.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-2",children:"Manager Access"}),i.jsx("p",{className:"text-blue-200 text-sm",children:"As a manager, you have access to edit beats and communicate via chat. You can view all platform data but cannot delete or modify other settings."})]})]})})},_3=()=>{const{beats:t,loading:e}=ld(),[r,n]=E.useState("all"),[s,a]=E.useState(null),o=t.filter(d=>r==="all"?!0:d.status===r),l=d=>{a(d)},u=async(d,h)=>{try{await pn.updateBeat(d,h),alert("Beat updated successfully!"),a(null)}catch(f){alert("Failed to update beat: "+f.message)}};return i.jsx(Hp,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Beats Management"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"View and edit beat information"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Beats"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Published"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(d=>d.status==="published").length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Featured"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(d=>d.featured).length})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Total Plays"}),i.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.reduce((d,h)=>d+h.plays,0).toLocaleString()})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Filter by Status"}),i.jsxs("select",{value:r,onChange:d=>n(d.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"archived",children:"Archived"})]})]}),i.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Beat"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Genre"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"BPM"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),i.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Stats"}),i.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-700",children:e?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"Loading beats..."})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"No beats found"})}):o.map(d=>i.jsxs("tr",{className:"hover:bg-gray-700/50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:d.artworkUrl,alt:d.title,className:"w-12 h-12 rounded object-cover"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:d.title}),i.jsx("p",{className:"text-sm text-gray-400",children:d.artist}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.featured&&i.jsx("span",{className:"px-2 py-0.5 bg-yellow-500/20 text-yellow-400 rounded text-xs",children:"Featured"}),d.trending&&i.jsx("span",{className:"px-2 py-0.5 bg-pink-500/20 text-pink-400 rounded text-xs",children:"Trending"})]})]})]})}),i.jsx("td",{className:"px-6 py-4 text-gray-300",children:d.genre}),i.jsx("td",{className:"px-6 py-4 text-gray-300",children:d.bpm}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-sm capitalize ${d.status==="published"?"bg-green-500/20 text-green-400":d.status==="draft"?"bg-gray-500/20 text-gray-400":"bg-orange-500/20 text-orange-400"}`,children:d.status})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Vr,{size:14}),i.jsx("span",{children:d.plays})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(ls,{size:14}),i.jsx("span",{children:d.downloads})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(id,{size:14}),i.jsx("span",{children:d.likes})]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"flex items-center justify-end",children:i.jsx("button",{onClick:()=>l(d),className:"p-2 text-blue-400 hover:bg-blue-500/20 rounded transition-colors",title:"Edit",children:i.jsx(zp,{size:18})})})})]},d.id))})]})})}),s&&i.jsx(N3,{beat:s,onClose:()=>a(null),onSave:u})]})})},N3=({beat:t,onClose:e,onSave:r})=>{const[n,s]=E.useState({title:t.title,genre:t.genre,bpm:t.bpm,key:t.key,tags:t.tags.join(", "),featured:t.featured,trending:t.trending,status:t.status}),a=o=>{o.preventDefault(),r(t.id,{...n,tags:n.tags.split(",").map(l=>l.trim()).filter(l=>l)})};return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Edit Beat"}),i.jsxs("form",{onSubmit:a,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),i.jsx("input",{type:"text",value:n.title,onChange:o=>s({...n,title:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Genre"}),i.jsx("input",{type:"text",value:n.genre,onChange:o=>s({...n,genre:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"BPM"}),i.jsx("input",{type:"number",value:n.bpm,onChange:o=>s({...n,bpm:parseInt(o.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key"}),i.jsx("input",{type:"text",value:n.key,onChange:o=>s({...n,key:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),i.jsx("input",{type:"text",value:n.tags,onChange:o=>s({...n,tags:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),i.jsxs("select",{value:n.status,onChange:o=>s({...n,status:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[i.jsx("option",{value:"draft",children:"Draft"}),i.jsx("option",{value:"published",children:"Published"}),i.jsx("option",{value:"archived",children:"Archived"})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:n.featured,onChange:o=>s({...n,featured:o.target.checked}),className:"w-4 h-4 rounded"}),i.jsx("span",{className:"text-sm text-gray-300",children:"Featured"})]}),i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:n.trending,onChange:o=>s({...n,trending:o.target.checked}),className:"w-4 h-4 rounded"}),i.jsx("span",{className:"text-sm text-gray-300",children:"Trending"})]})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-700",children:[i.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Save Changes"})]})]})]})})},j3=()=>{const{user:t}=Ke(),[e,r]=E.useState([]),[n,s]=E.useState(""),[a,o]=E.useState("");E.useEffect(()=>{const d=le(q,"collaborationMessages"),h=ke(d,Ve("createdAt","desc")),f=vr(h,p=>{const y=[];p.forEach(S=>{y.push({id:S.id,...S.data()})}),r(y)});return()=>f()},[]);const l=async d=>{if(d.preventDefault(),!(!n.trim()||!t))try{await br(le(q,"collaborationMessages"),{senderId:t.uid,senderName:t.displayName||"Manager",senderEmail:t.email,senderRole:"manager",message:n.trim(),createdAt:he()}),s("")}catch(h){console.error("Failed to send message:",h)}},u=e.filter(d=>d.message.toLowerCase().includes(a.toLowerCase())||d.senderName.toLowerCase().includes(a.toLowerCase()));return i.jsx(Hp,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Chat"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Communicate with artists and team"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Bp,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",value:a,onChange:d=>o(d.target.value),placeholder:"Search messages...",className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500"})]}),i.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 400px)"},children:[i.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:u.length===0?i.jsxs("div",{className:"text-center text-gray-400 py-12",children:[i.jsx(er,{size:48,className:"mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No messages yet"})]}):u.map(d=>{var h,f,p;return i.jsxs("div",{className:`p-4 rounded-lg ${d.senderId===(t==null?void 0:t.uid)?"bg-blue-900/30 ml-12":"bg-gray-700 mr-12"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-white",children:d.senderId===(t==null?void 0:t.uid)?"You":d.senderName}),d.senderRole&&i.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-600 text-gray-300 rounded text-xs capitalize",children:d.senderRole})]}),i.jsx("span",{className:"text-xs text-gray-400",children:((p=(f=(h=d.createdAt)==null?void 0:h.toDate)==null?void 0:f.call(h))==null?void 0:p.toLocaleString())||"Just now"})]}),i.jsx("p",{className:"text-gray-300",children:d.message})]},d.id)})}),i.jsx("form",{onSubmit:l,className:"p-4 border-t border-gray-700 bg-gray-750",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:n,onChange:d=>s(d.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"}),i.jsxs("button",{type:"submit",disabled:!n.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i.jsx(al,{size:20}),"Send"]})]})})]}),i.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:i.jsxs("p",{className:"text-sm text-blue-200",children:[" ",i.jsx("strong",{children:"Manager Chat Access:"})," You can view and send messages across all collaborations. Use this to coordinate with artists and the team."]})})]})})},E3=()=>i.jsx(jP,{children:i.jsx(xT,{children:i.jsxs(K2,{children:[i.jsx(pe,{path:"/",element:i.jsx(KP,{})}),i.jsx(pe,{path:"/login",element:i.jsx(QP,{})}),i.jsx(pe,{path:"/register",element:i.jsx(YP,{})}),i.jsx(pe,{path:"/shop/beats",element:i.jsx(JP,{})}),i.jsx(pe,{path:"/customer/dashboard",element:i.jsx(Le,{allowedRoles:["user"],children:i.jsx(XP,{})})}),i.jsx(pe,{path:"/customer/shop",element:i.jsx(Le,{allowedRoles:["user"],children:i.jsx(r3,{})})}),i.jsx(pe,{path:"/customer/orders",element:i.jsx(Le,{allowedRoles:["user"],children:i.jsx(ZP,{})})}),i.jsx(pe,{path:"/customer/downloads",element:i.jsx(Le,{allowedRoles:["user"],children:i.jsx(e3,{})})}),i.jsx(pe,{path:"/customer/profile",element:i.jsx(Le,{allowedRoles:["user"],children:i.jsx(t3,{})})}),i.jsx(pe,{path:"/customer/chat",element:i.jsx(Le,{allowedRoles:["user"],children:i.jsx(n3,{})})}),i.jsx(pe,{path:"/artist/dashboard",element:i.jsx(Le,{allowedRoles:["artist"],children:i.jsx(s3,{})})}),i.jsx(pe,{path:"/artist/collaborations",element:i.jsx(Le,{allowedRoles:["artist"],children:i.jsx(i3,{})})}),i.jsx(pe,{path:"/artist/beats",element:i.jsx(Le,{allowedRoles:["artist"],children:i.jsx(a3,{})})}),i.jsx(pe,{path:"/artist/orders",element:i.jsx(Le,{allowedRoles:["artist"],children:i.jsx(o3,{})})}),i.jsx(pe,{path:"/artist/profile",element:i.jsx(Le,{allowedRoles:["artist"],children:i.jsx(l3,{})})}),i.jsx(pe,{path:"/admin/dashboard",element:i.jsx(Le,{allowedRoles:["admin"],children:i.jsx(d3,{})})}),i.jsx(pe,{path:"/admin/beats",element:i.jsx(Le,{allowedRoles:["admin"],children:i.jsx(h3,{})})}),i.jsx(pe,{path:"/admin/orders",element:i.jsx(Le,{allowedRoles:["admin"],children:i.jsx(m3,{})})}),i.jsx(pe,{path:"/admin/content",element:i.jsx(Le,{allowedRoles:["admin"],children:i.jsx(p3,{})})}),i.jsx(pe,{path:"/admin/analytics",element:i.jsx(Le,{allowedRoles:["admin"],children:i.jsx(x3,{})})}),i.jsx(pe,{path:"/admin/collaborations",element:i.jsx(Le,{allowedRoles:["admin"],children:i.jsx(y3,{})})}),i.jsx(pe,{path:"/admin/settings",element:i.jsx(Le,{allowedRoles:["admin"],children:i.jsx(v3,{})})}),i.jsx(pe,{path:"/admin/chat",element:i.jsx(Le,{allowedRoles:["admin"],children:i.jsx(w3,{})})}),i.jsx(pe,{path:"/admin",element:i.jsx(eo,{to:"/admin/dashboard",replace:!0})}),i.jsx(pe,{path:"/manager/dashboard",element:i.jsx(Le,{allowedRoles:["manager"],children:i.jsx(b3,{})})}),i.jsx(pe,{path:"/manager/beats",element:i.jsx(Le,{allowedRoles:["manager"],children:i.jsx(_3,{})})}),i.jsx(pe,{path:"/manager/chat",element:i.jsx(Le,{allowedRoles:["manager"],children:i.jsx(j3,{})})}),i.jsx(pe,{path:"/manager",element:i.jsx(eo,{to:"/manager/dashboard",replace:!0})}),i.jsx(pe,{path:"*",element:i.jsx(eo,{to:"/",replace:!0})})]})})});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("Service Worker registered successfully:",t.scope)}).catch(t=>{console.log("Service Worker registration failed:",t)})});tb(document.getElementById("root")).render(i.jsx(E.StrictMode,{children:i.jsx(E3,{})}));
