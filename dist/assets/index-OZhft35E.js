var q_=Object.defineProperty;var H_=(t,e,r)=>e in t?q_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Is=(t,e,r)=>H_(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var tv={exports:{}},wu={},rv={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=Symbol.for("react.element"),W_=Symbol.for("react.portal"),G_=Symbol.for("react.fragment"),K_=Symbol.for("react.strict_mode"),Q_=Symbol.for("react.profiler"),Y_=Symbol.for("react.provider"),J_=Symbol.for("react.context"),X_=Symbol.for("react.forward_ref"),Z_=Symbol.for("react.suspense"),e1=Symbol.for("react.memo"),t1=Symbol.for("react.lazy"),nx=Symbol.iterator;function r1(t){return t===null||typeof t!="object"?null:(t=nx&&t[nx]||t["@@iterator"],typeof t=="function"?t:null)}var nv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sv=Object.assign,iv={};function na(t,e,r){this.props=t,this.context=e,this.refs=iv,this.updater=r||nv}na.prototype.isReactComponent={};na.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};na.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function av(){}av.prototype=na.prototype;function Gm(t,e,r){this.props=t,this.context=e,this.refs=iv,this.updater=r||nv}var Km=Gm.prototype=new av;Km.constructor=Gm;sv(Km,na.prototype);Km.isPureReactComponent=!0;var sx=Array.isArray,ov=Object.prototype.hasOwnProperty,Qm={current:null},lv={key:!0,ref:!0,__self:!0,__source:!0};function cv(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)ov.call(e,n)&&!lv.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Ho,type:t,key:a,ref:o,props:i,_owner:Qm.current}}function n1(t,e){return{$$typeof:Ho,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ym(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ho}function s1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ix=/\/+/g;function Od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?s1(""+t.key):e.toString(36)}function ec(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ho:case W_:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Od(o,0):n,sx(i)?(r="",t!=null&&(r=t.replace(ix,"$&/")+"/"),ec(i,e,r,"",function(d){return d})):i!=null&&(Ym(i)&&(i=n1(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ix,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",sx(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+Od(a,l);o+=ec(a,e,r,c,i)}else if(c=r1(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+Od(a,l++),o+=ec(a,e,r,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kl(t,e,r){if(t==null)return t;var n=[],i=0;return ec(t,n,"","",function(a){return e.call(r,a,i++)}),n}function i1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},tc={transition:null},a1={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:tc,ReactCurrentOwner:Qm};function uv(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:kl,forEach:function(t,e,r){kl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return kl(t,function(){e++}),e},toArray:function(t){return kl(t,function(e){return e})||[]},only:function(t){if(!Ym(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=na;he.Fragment=G_;he.Profiler=Q_;he.PureComponent=Gm;he.StrictMode=K_;he.Suspense=Z_;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a1;he.act=uv;he.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=sv({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Qm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)ov.call(e,c)&&!lv.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ho,type:t.type,key:i,ref:a,props:n,_owner:o}};he.createContext=function(t){return t={$$typeof:J_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Y_,_context:t},t.Consumer=t};he.createElement=cv;he.createFactory=function(t){var e=cv.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:X_,render:t}};he.isValidElement=Ym;he.lazy=function(t){return{$$typeof:t1,_payload:{_status:-1,_result:t},_init:i1}};he.memo=function(t,e){return{$$typeof:e1,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=tc.transition;tc.transition={};try{t()}finally{tc.transition=e}};he.unstable_act=uv;he.useCallback=function(t,e){return Lt.current.useCallback(t,e)};he.useContext=function(t){return Lt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Lt.current.useEffect(t,e)};he.useId=function(){return Lt.current.useId()};he.useImperativeHandle=function(t,e,r){return Lt.current.useImperativeHandle(t,e,r)};he.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Lt.current.useMemo(t,e)};he.useReducer=function(t,e,r){return Lt.current.useReducer(t,e,r)};he.useRef=function(t){return Lt.current.useRef(t)};he.useState=function(t){return Lt.current.useState(t)};he.useSyncExternalStore=function(t,e,r){return Lt.current.useSyncExternalStore(t,e,r)};he.useTransition=function(){return Lt.current.useTransition()};he.version="18.3.1";rv.exports=he;var w=rv.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1=w,l1=Symbol.for("react.element"),c1=Symbol.for("react.fragment"),u1=Object.prototype.hasOwnProperty,d1=o1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h1={key:!0,ref:!0,__self:!0,__source:!0};function dv(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)u1.call(e,n)&&!h1.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:l1,type:t,key:a,ref:o,props:i,_owner:d1.current}}wu.Fragment=c1;wu.jsx=dv;wu.jsxs=dv;tv.exports=wu;var s=tv.exports,hv={exports:{}},rr={},mv={exports:{}},pv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,K){var X=q.length;q.push(K);e:for(;0<X;){var be=X-1>>>1,Q=q[be];if(0<i(Q,K))q[be]=K,q[X]=Q,X=be;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var K=q[0],X=q.pop();if(X!==K){q[0]=X;e:for(var be=0,Q=q.length,se=Q>>>1;be<se;){var xe=2*(be+1)-1,xr=q[xe],It=xe+1,xt=q[It];if(0>i(xr,X))It<Q&&0>i(xt,xr)?(q[be]=xt,q[It]=X,be=It):(q[be]=xr,q[xe]=X,be=xe);else if(It<Q&&0>i(xt,X))q[be]=xt,q[It]=X,be=It;else break e}}return K}function i(q,K){var X=q.sortIndex-K.sortIndex;return X!==0?X:q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,m=null,p=3,y=!1,S=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(q){for(var K=r(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=q)n(d),K.sortIndex=K.expirationTime,e(c,K);else break;K=r(d)}}function P(q){if(b=!1,j(q),!S)if(r(c)!==null)S=!0,Ie(M);else{var K=r(d);K!==null&&Ce(P,K.startTime-q)}}function M(q,K){S=!1,b&&(b=!1,g(_),_=-1),y=!0;var X=p;try{for(j(K),m=r(c);m!==null&&(!(m.expirationTime>K)||q&&!k());){var be=m.callback;if(typeof be=="function"){m.callback=null,p=m.priorityLevel;var Q=be(m.expirationTime<=K);K=t.unstable_now(),typeof Q=="function"?m.callback=Q:m===r(c)&&n(c),j(K)}else n(c);m=r(c)}if(m!==null)var se=!0;else{var xe=r(d);xe!==null&&Ce(P,xe.startTime-K),se=!1}return se}finally{m=null,p=X,y=!1}}var D=!1,T=null,_=-1,I=5,R=-1;function k(){return!(t.unstable_now()-R<I)}function A(){if(T!==null){var q=t.unstable_now();R=q;var K=!0;try{K=T(!0,q)}finally{K?C():(D=!1,T=null)}}else D=!1}var C;if(typeof v=="function")C=function(){v(A)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,B=oe.port2;oe.port1.onmessage=A,C=function(){B.postMessage(null)}}else C=function(){N(A,0)};function Ie(q){T=q,D||(D=!0,C())}function Ce(q,K){_=N(function(){q(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){S||y||(S=!0,Ie(M))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var X=p;p=K;try{return q()}finally{p=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=p;p=q;try{return K()}finally{p=X}},t.unstable_scheduleCallback=function(q,K,X){var be=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?be+X:be):X=be,q){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,q={id:h++,callback:K,priorityLevel:q,startTime:X,expirationTime:Q,sortIndex:-1},X>be?(q.sortIndex=X,e(d,q),r(c)===null&&q===r(d)&&(b?(g(_),_=-1):b=!0,Ce(P,X-be))):(q.sortIndex=Q,e(c,q),S||y||(S=!0,Ie(M))),q},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(q){var K=p;return function(){var X=p;p=K;try{return q.apply(this,arguments)}finally{p=X}}}})(pv);mv.exports=pv;var m1=mv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p1=w,Zt=m1;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fv=new Set,fo={};function ti(t,e){zi(t,e),zi(t+"Capture",e)}function zi(t,e){for(fo[t]=e,t=0;t<e.length;t++)fv.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sh=Object.prototype.hasOwnProperty,f1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ax={},ox={};function g1(t){return Sh.call(ox,t)?!0:Sh.call(ax,t)?!1:f1.test(t)?ox[t]=!0:(ax[t]=!0,!1)}function x1(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function y1(t,e,r,n){if(e===null||typeof e>"u"||x1(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ot(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jm=/[\-:]([a-z])/g;function Xm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jm,Xm);pt[e]=new Ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jm,Xm);pt[e]=new Ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jm,Xm);pt[e]=new Ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zm(t,e,r,n){var i=pt.hasOwnProperty(e)?pt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(y1(e,r,i,n)&&(r=null),n||i===null?g1(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var In=p1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),xi=Symbol.for("react.portal"),yi=Symbol.for("react.fragment"),ep=Symbol.for("react.strict_mode"),Th=Symbol.for("react.profiler"),gv=Symbol.for("react.provider"),xv=Symbol.for("react.context"),tp=Symbol.for("react.forward_ref"),kh=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),rp=Symbol.for("react.memo"),Fn=Symbol.for("react.lazy"),yv=Symbol.for("react.offscreen"),lx=Symbol.iterator;function Aa(t){return t===null||typeof t!="object"?null:(t=lx&&t[lx]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Vd;function Ua(t){if(Vd===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Vd=e&&e[1]||""}return`
`+Vd+t}var Fd=!1;function Ud(t,e){if(!t||Fd)return"";Fd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Fd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ua(t):""}function v1(t){switch(t.tag){case 5:return Ua(t.type);case 16:return Ua("Lazy");case 13:return Ua("Suspense");case 19:return Ua("SuspenseList");case 0:case 2:case 15:return t=Ud(t.type,!1),t;case 11:return t=Ud(t.type.render,!1),t;case 1:return t=Ud(t.type,!0),t;default:return""}}function Ch(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yi:return"Fragment";case xi:return"Portal";case Th:return"Profiler";case ep:return"StrictMode";case kh:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xv:return(t.displayName||"Context")+".Consumer";case gv:return(t._context.displayName||"Context")+".Provider";case tp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rp:return e=t.displayName||null,e!==null?e:Ch(t.type)||"Memo";case Fn:e=t._payload,t=t._init;try{return Ch(t(e))}catch{}}return null}function b1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ch(e);case 8:return e===ep?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function w1(t){var e=vv(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=w1(t))}function bv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=vv(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ec(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ah(t,e){var r=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ls(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wv(t,e){e=e.checked,e!=null&&Zm(t,"checked",e,!1)}function Rh(t,e){wv(t,e);var r=ls(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ph(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ph(t,e.type,ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ux(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ph(t,e,r){(e!=="number"||Ec(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var za=Array.isArray;function Ci(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ls(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Dh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dx(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(U(92));if(za(r)){if(1<r.length)throw Error(U(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ls(r)}}function Nv(t,e){var r=ls(e.value),n=ls(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function hx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Al,_v=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Al=Al||document.createElement("div"),Al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function go(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N1=["Webkit","ms","Moz","O"];Object.keys(Ja).forEach(function(t){N1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ja[e]=Ja[t]})});function Ev(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ja.hasOwnProperty(t)&&Ja[t]?(""+e).trim():e+"px"}function Sv(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Ev(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var j1=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lh(t,e){if(e){if(j1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Oh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vh=null;function np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fh=null,Ai=null,Ri=null;function mx(t){if(t=Ko(t)){if(typeof Fh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Su(e),Fh(t.stateNode,t.type,e))}}function Tv(t){Ai?Ri?Ri.push(t):Ri=[t]:Ai=t}function kv(){if(Ai){var t=Ai,e=Ri;if(Ri=Ai=null,mx(t),e)for(t=0;t<e.length;t++)mx(e[t])}}function Iv(t,e){return t(e)}function Cv(){}var zd=!1;function Av(t,e,r){if(zd)return t(e,r);zd=!0;try{return Iv(t,e,r)}finally{zd=!1,(Ai!==null||Ri!==null)&&(Cv(),kv())}}function xo(t,e){var r=t.stateNode;if(r===null)return null;var n=Su(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(U(231,e,typeof r));return r}var Uh=!1;if(yn)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){Uh=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{Uh=!1}function _1(t,e,r,n,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var Xa=!1,Sc=null,Tc=!1,zh=null,E1={onError:function(t){Xa=!0,Sc=t}};function S1(t,e,r,n,i,a,o,l,c){Xa=!1,Sc=null,_1.apply(E1,arguments)}function T1(t,e,r,n,i,a,o,l,c){if(S1.apply(this,arguments),Xa){if(Xa){var d=Sc;Xa=!1,Sc=null}else throw Error(U(198));Tc||(Tc=!0,zh=d)}}function ri(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Rv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function px(t){if(ri(t)!==t)throw Error(U(188))}function k1(t){var e=t.alternate;if(!e){if(e=ri(t),e===null)throw Error(U(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return px(i),t;if(a===n)return px(i),e;a=a.sibling}throw Error(U(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o)throw Error(U(189))}}if(r.alternate!==n)throw Error(U(190))}if(r.tag!==3)throw Error(U(188));return r.stateNode.current===r?t:e}function Pv(t){return t=k1(t),t!==null?Dv(t):null}function Dv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dv(t);if(e!==null)return e;t=t.sibling}return null}var Mv=Zt.unstable_scheduleCallback,fx=Zt.unstable_cancelCallback,I1=Zt.unstable_shouldYield,C1=Zt.unstable_requestPaint,Ye=Zt.unstable_now,A1=Zt.unstable_getCurrentPriorityLevel,sp=Zt.unstable_ImmediatePriority,Lv=Zt.unstable_UserBlockingPriority,kc=Zt.unstable_NormalPriority,R1=Zt.unstable_LowPriority,Ov=Zt.unstable_IdlePriority,Nu=null,Vr=null;function P1(t){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Nu,t,void 0,(t.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:L1,D1=Math.log,M1=Math.LN2;function L1(t){return t>>>=0,t===0?32:31-(D1(t)/M1|0)|0}var Rl=64,Pl=4194304;function Ba(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ic(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=Ba(l):(a&=o,a!==0&&(n=Ba(a)))}else o=r&~i,o!==0?n=Ba(o):a!==0&&(n=Ba(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Er(e),i=1<<r,n|=t[r],e&=~i;return n}function O1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V1(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Er(a),l=1<<o,c=i[o];c===-1?(!(l&r)||l&n)&&(i[o]=O1(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Bh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vv(){var t=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),t}function Bd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Wo(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Er(e),t[e]=r}function F1(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Er(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function ip(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Er(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var _e=0;function Fv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Uv,ap,zv,Bv,$v,$h=!1,Dl=[],Yn=null,Jn=null,Xn=null,yo=new Map,vo=new Map,zn=[],U1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gx(t,e){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":yo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(e.pointerId)}}function Pa(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ko(e),e!==null&&ap(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function z1(t,e,r,n,i){switch(e){case"focusin":return Yn=Pa(Yn,t,e,r,n,i),!0;case"dragenter":return Jn=Pa(Jn,t,e,r,n,i),!0;case"mouseover":return Xn=Pa(Xn,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return yo.set(a,Pa(yo.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,vo.set(a,Pa(vo.get(a)||null,t,e,r,n,i)),!0}return!1}function qv(t){var e=Ps(t.target);if(e!==null){var r=ri(e);if(r!==null){if(e=r.tag,e===13){if(e=Rv(r),e!==null){t.blockedOn=e,$v(t.priority,function(){zv(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=qh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Vh=n,r.target.dispatchEvent(n),Vh=null}else return e=Ko(r),e!==null&&ap(e),t.blockedOn=r,!1;e.shift()}return!0}function xx(t,e,r){rc(t)&&r.delete(e)}function B1(){$h=!1,Yn!==null&&rc(Yn)&&(Yn=null),Jn!==null&&rc(Jn)&&(Jn=null),Xn!==null&&rc(Xn)&&(Xn=null),yo.forEach(xx),vo.forEach(xx)}function Da(t,e){t.blockedOn===e&&(t.blockedOn=null,$h||($h=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,B1)))}function bo(t){function e(i){return Da(i,t)}if(0<Dl.length){Da(Dl[0],t);for(var r=1;r<Dl.length;r++){var n=Dl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Yn!==null&&Da(Yn,t),Jn!==null&&Da(Jn,t),Xn!==null&&Da(Xn,t),yo.forEach(e),vo.forEach(e),r=0;r<zn.length;r++)n=zn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<zn.length&&(r=zn[0],r.blockedOn===null);)qv(r),r.blockedOn===null&&zn.shift()}var Pi=In.ReactCurrentBatchConfig,Cc=!0;function $1(t,e,r,n){var i=_e,a=Pi.transition;Pi.transition=null;try{_e=1,op(t,e,r,n)}finally{_e=i,Pi.transition=a}}function q1(t,e,r,n){var i=_e,a=Pi.transition;Pi.transition=null;try{_e=4,op(t,e,r,n)}finally{_e=i,Pi.transition=a}}function op(t,e,r,n){if(Cc){var i=qh(t,e,r,n);if(i===null)Xd(t,e,n,Ac,r),gx(t,n);else if(z1(i,t,e,r,n))n.stopPropagation();else if(gx(t,n),e&4&&-1<U1.indexOf(t)){for(;i!==null;){var a=Ko(i);if(a!==null&&Uv(a),a=qh(t,e,r,n),a===null&&Xd(t,e,n,Ac,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Xd(t,e,n,null,r)}}var Ac=null;function qh(t,e,r,n){if(Ac=null,t=np(n),t=Ps(t),t!==null)if(e=ri(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Rv(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ac=t,null}function Hv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A1()){case sp:return 1;case Lv:return 4;case kc:case R1:return 16;case Ov:return 536870912;default:return 16}default:return 16}}var Gn=null,lp=null,nc=null;function Wv(){if(nc)return nc;var t,e=lp,r=e.length,n,i="value"in Gn?Gn.value:Gn.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return nc=i.slice(t,1<n?1-n:void 0)}function sc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ml(){return!0}function yx(){return!1}function nr(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ml:yx,this.isPropagationStopped=yx,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),e}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cp=nr(sa),Go=Be({},sa,{view:0,detail:0}),H1=nr(Go),$d,qd,Ma,ju=Be({},Go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:up,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ma&&(Ma&&t.type==="mousemove"?($d=t.screenX-Ma.screenX,qd=t.screenY-Ma.screenY):qd=$d=0,Ma=t),$d)},movementY:function(t){return"movementY"in t?t.movementY:qd}}),vx=nr(ju),W1=Be({},ju,{dataTransfer:0}),G1=nr(W1),K1=Be({},Go,{relatedTarget:0}),Hd=nr(K1),Q1=Be({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),Y1=nr(Q1),J1=Be({},sa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),X1=nr(J1),Z1=Be({},sa,{data:0}),bx=nr(Z1),e2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=r2[t])?!!e[t]:!1}function up(){return n2}var s2=Be({},Go,{key:function(t){if(t.key){var e=e2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:up,charCode:function(t){return t.type==="keypress"?sc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),i2=nr(s2),a2=Be({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wx=nr(a2),o2=Be({},Go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:up}),l2=nr(o2),c2=Be({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),u2=nr(c2),d2=Be({},ju,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),h2=nr(d2),m2=[9,13,27,32],dp=yn&&"CompositionEvent"in window,Za=null;yn&&"documentMode"in document&&(Za=document.documentMode);var p2=yn&&"TextEvent"in window&&!Za,Gv=yn&&(!dp||Za&&8<Za&&11>=Za),Nx=" ",jx=!1;function Kv(t,e){switch(t){case"keyup":return m2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vi=!1;function f2(t,e){switch(t){case"compositionend":return Qv(e);case"keypress":return e.which!==32?null:(jx=!0,Nx);case"textInput":return t=e.data,t===Nx&&jx?null:t;default:return null}}function g2(t,e){if(vi)return t==="compositionend"||!dp&&Kv(t,e)?(t=Wv(),nc=lp=Gn=null,vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gv&&e.locale!=="ko"?null:e.data;default:return null}}var x2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _x(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!x2[t.type]:e==="textarea"}function Yv(t,e,r,n){Tv(n),e=Rc(e,"onChange"),0<e.length&&(r=new cp("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var eo=null,wo=null;function y2(t){ob(t,0)}function _u(t){var e=Ni(t);if(bv(e))return t}function v2(t,e){if(t==="change")return e}var Jv=!1;if(yn){var Wd;if(yn){var Gd="oninput"in document;if(!Gd){var Ex=document.createElement("div");Ex.setAttribute("oninput","return;"),Gd=typeof Ex.oninput=="function"}Wd=Gd}else Wd=!1;Jv=Wd&&(!document.documentMode||9<document.documentMode)}function Sx(){eo&&(eo.detachEvent("onpropertychange",Xv),wo=eo=null)}function Xv(t){if(t.propertyName==="value"&&_u(wo)){var e=[];Yv(e,wo,t,np(t)),Av(y2,e)}}function b2(t,e,r){t==="focusin"?(Sx(),eo=e,wo=r,eo.attachEvent("onpropertychange",Xv)):t==="focusout"&&Sx()}function w2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _u(wo)}function N2(t,e){if(t==="click")return _u(e)}function j2(t,e){if(t==="input"||t==="change")return _u(e)}function _2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tr=typeof Object.is=="function"?Object.is:_2;function No(t,e){if(Tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Sh.call(e,i)||!Tr(t[i],e[i]))return!1}return!0}function Tx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kx(t,e){var r=Tx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tx(r)}}function Zv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eb(){for(var t=window,e=Ec();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ec(t.document)}return e}function hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function E2(t){var e=eb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Zv(r.ownerDocument.documentElement,r)){if(n!==null&&hp(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=kx(r,a);var o=kx(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var S2=yn&&"documentMode"in document&&11>=document.documentMode,bi=null,Hh=null,to=null,Wh=!1;function Ix(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wh||bi==null||bi!==Ec(n)||(n=bi,"selectionStart"in n&&hp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),to&&No(to,n)||(to=n,n=Rc(Hh,"onSelect"),0<n.length&&(e=new cp("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=bi)))}function Ll(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var wi={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},Kd={},tb={};yn&&(tb=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function Eu(t){if(Kd[t])return Kd[t];if(!wi[t])return t;var e=wi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in tb)return Kd[t]=e[r];return t}var rb=Eu("animationend"),nb=Eu("animationiteration"),sb=Eu("animationstart"),ib=Eu("transitionend"),ab=new Map,Cx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ys(t,e){ab.set(t,e),ti(e,[t])}for(var Qd=0;Qd<Cx.length;Qd++){var Yd=Cx[Qd],T2=Yd.toLowerCase(),k2=Yd[0].toUpperCase()+Yd.slice(1);ys(T2,"on"+k2)}ys(rb,"onAnimationEnd");ys(nb,"onAnimationIteration");ys(sb,"onAnimationStart");ys("dblclick","onDoubleClick");ys("focusin","onFocus");ys("focusout","onBlur");ys(ib,"onTransitionEnd");zi("onMouseEnter",["mouseout","mouseover"]);zi("onMouseLeave",["mouseout","mouseover"]);zi("onPointerEnter",["pointerout","pointerover"]);zi("onPointerLeave",["pointerout","pointerover"]);ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I2=new Set("cancel close invalid load scroll toggle".split(" ").concat($a));function Ax(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,T1(n,e,void 0,t),t.currentTarget=null}function ob(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;Ax(i,l,d),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;Ax(i,l,d),a=c}}}if(Tc)throw t=zh,Tc=!1,zh=null,t}function Pe(t,e){var r=e[Jh];r===void 0&&(r=e[Jh]=new Set);var n=t+"__bubble";r.has(n)||(lb(e,t,2,!1),r.add(n))}function Jd(t,e,r){var n=0;e&&(n|=4),lb(r,t,n,e)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function jo(t){if(!t[Ol]){t[Ol]=!0,fv.forEach(function(r){r!=="selectionchange"&&(I2.has(r)||Jd(r,!1,t),Jd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ol]||(e[Ol]=!0,Jd("selectionchange",!1,e))}}function lb(t,e,r,n){switch(Hv(e)){case 1:var i=$1;break;case 4:i=q1;break;default:i=op}r=i.bind(null,e,r,t),i=void 0,!Uh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Xd(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ps(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Av(function(){var d=a,h=np(r),m=[];e:{var p=ab.get(t);if(p!==void 0){var y=cp,S=t;switch(t){case"keypress":if(sc(r)===0)break e;case"keydown":case"keyup":y=i2;break;case"focusin":S="focus",y=Hd;break;case"focusout":S="blur",y=Hd;break;case"beforeblur":case"afterblur":y=Hd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=G1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=l2;break;case rb:case nb:case sb:y=Y1;break;case ib:y=u2;break;case"scroll":y=H1;break;case"wheel":y=h2;break;case"copy":case"cut":case"paste":y=X1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=wx}var b=(e&4)!==0,N=!b&&t==="scroll",g=b?p!==null?p+"Capture":null:p;b=[];for(var v=d,j;v!==null;){j=v;var P=j.stateNode;if(j.tag===5&&P!==null&&(j=P,g!==null&&(P=xo(v,g),P!=null&&b.push(_o(v,P,j)))),N)break;v=v.return}0<b.length&&(p=new y(p,S,null,r,h),m.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&r!==Vh&&(S=r.relatedTarget||r.fromElement)&&(Ps(S)||S[vn]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(S=r.relatedTarget||r.toElement,y=d,S=S?Ps(S):null,S!==null&&(N=ri(S),S!==N||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=d),y!==S)){if(b=vx,P="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=wx,P="onPointerLeave",g="onPointerEnter",v="pointer"),N=y==null?p:Ni(y),j=S==null?p:Ni(S),p=new b(P,v+"leave",y,r,h),p.target=N,p.relatedTarget=j,P=null,Ps(h)===d&&(b=new b(g,v+"enter",S,r,h),b.target=j,b.relatedTarget=N,P=b),N=P,y&&S)t:{for(b=y,g=S,v=0,j=b;j;j=di(j))v++;for(j=0,P=g;P;P=di(P))j++;for(;0<v-j;)b=di(b),v--;for(;0<j-v;)g=di(g),j--;for(;v--;){if(b===g||g!==null&&b===g.alternate)break t;b=di(b),g=di(g)}b=null}else b=null;y!==null&&Rx(m,p,y,b,!1),S!==null&&N!==null&&Rx(m,N,S,b,!0)}}e:{if(p=d?Ni(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var M=v2;else if(_x(p))if(Jv)M=j2;else{M=w2;var D=b2}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=N2);if(M&&(M=M(t,d))){Yv(m,M,r,h);break e}D&&D(t,p,d),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&Ph(p,"number",p.value)}switch(D=d?Ni(d):window,t){case"focusin":(_x(D)||D.contentEditable==="true")&&(bi=D,Hh=d,to=null);break;case"focusout":to=Hh=bi=null;break;case"mousedown":Wh=!0;break;case"contextmenu":case"mouseup":case"dragend":Wh=!1,Ix(m,r,h);break;case"selectionchange":if(S2)break;case"keydown":case"keyup":Ix(m,r,h)}var T;if(dp)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else vi?Kv(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Gv&&r.locale!=="ko"&&(vi||_!=="onCompositionStart"?_==="onCompositionEnd"&&vi&&(T=Wv()):(Gn=h,lp="value"in Gn?Gn.value:Gn.textContent,vi=!0)),D=Rc(d,_),0<D.length&&(_=new bx(_,t,null,r,h),m.push({event:_,listeners:D}),T?_.data=T:(T=Qv(r),T!==null&&(_.data=T)))),(T=p2?f2(t,r):g2(t,r))&&(d=Rc(d,"onBeforeInput"),0<d.length&&(h=new bx("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:d}),h.data=T))}ob(m,e)})}function _o(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Rc(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=xo(t,r),a!=null&&n.unshift(_o(t,a,i)),a=xo(t,e),a!=null&&n.push(_o(t,a,i))),t=t.return}return n}function di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rx(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,i?(c=xo(r,a),c!=null&&o.unshift(_o(r,c,l))):i||(c=xo(r,a),c!=null&&o.push(_o(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var C2=/\r\n?/g,A2=/\u0000|\uFFFD/g;function Px(t){return(typeof t=="string"?t:""+t).replace(C2,`
`).replace(A2,"")}function Vl(t,e,r){if(e=Px(e),Px(t)!==e&&r)throw Error(U(425))}function Pc(){}var Gh=null,Kh=null;function Qh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yh=typeof setTimeout=="function"?setTimeout:void 0,R2=typeof clearTimeout=="function"?clearTimeout:void 0,Dx=typeof Promise=="function"?Promise:void 0,P2=typeof queueMicrotask=="function"?queueMicrotask:typeof Dx<"u"?function(t){return Dx.resolve(null).then(t).catch(D2)}:Yh;function D2(t){setTimeout(function(){throw t})}function Zd(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),bo(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);bo(e)}function Zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ia=Math.random().toString(36).slice(2),Or="__reactFiber$"+ia,Eo="__reactProps$"+ia,vn="__reactContainer$"+ia,Jh="__reactEvents$"+ia,M2="__reactListeners$"+ia,L2="__reactHandles$"+ia;function Ps(t){var e=t[Or];if(e)return e;for(var r=t.parentNode;r;){if(e=r[vn]||r[Or]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Mx(t);t!==null;){if(r=t[Or])return r;t=Mx(t)}return e}t=r,r=t.parentNode}return null}function Ko(t){return t=t[Or]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Su(t){return t[Eo]||null}var Xh=[],ji=-1;function vs(t){return{current:t}}function Me(t){0>ji||(t.current=Xh[ji],Xh[ji]=null,ji--)}function Ae(t,e){ji++,Xh[ji]=t.current,t.current=e}var cs={},Tt=vs(cs),Bt=vs(!1),Bs=cs;function Bi(t,e){var r=t.type.contextTypes;if(!r)return cs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $t(t){return t=t.childContextTypes,t!=null}function Dc(){Me(Bt),Me(Tt)}function Lx(t,e,r){if(Tt.current!==cs)throw Error(U(168));Ae(Tt,e),Ae(Bt,r)}function cb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(U(108,b1(t)||"Unknown",i));return Be({},r,n)}function Mc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cs,Bs=Tt.current,Ae(Tt,t),Ae(Bt,Bt.current),!0}function Ox(t,e,r){var n=t.stateNode;if(!n)throw Error(U(169));r?(t=cb(t,e,Bs),n.__reactInternalMemoizedMergedChildContext=t,Me(Bt),Me(Tt),Ae(Tt,t)):Me(Bt),Ae(Bt,r)}var on=null,Tu=!1,eh=!1;function ub(t){on===null?on=[t]:on.push(t)}function O2(t){Tu=!0,ub(t)}function bs(){if(!eh&&on!==null){eh=!0;var t=0,e=_e;try{var r=on;for(_e=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}on=null,Tu=!1}catch(i){throw on!==null&&(on=on.slice(t+1)),Mv(sp,bs),i}finally{_e=e,eh=!1}}return null}var _i=[],Ei=0,Lc=null,Oc=0,sr=[],ir=0,$s=null,ln=1,cn="";function Cs(t,e){_i[Ei++]=Oc,_i[Ei++]=Lc,Lc=t,Oc=e}function db(t,e,r){sr[ir++]=ln,sr[ir++]=cn,sr[ir++]=$s,$s=t;var n=ln;t=cn;var i=32-Er(n)-1;n&=~(1<<i),r+=1;var a=32-Er(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,ln=1<<32-Er(e)+i|r<<i|n,cn=a+t}else ln=1<<a|r<<i|n,cn=t}function mp(t){t.return!==null&&(Cs(t,1),db(t,1,0))}function pp(t){for(;t===Lc;)Lc=_i[--Ei],_i[Ei]=null,Oc=_i[--Ei],_i[Ei]=null;for(;t===$s;)$s=sr[--ir],sr[ir]=null,cn=sr[--ir],sr[ir]=null,ln=sr[--ir],sr[ir]=null}var Xt=null,Yt=null,Oe=!1,wr=null;function hb(t,e){var r=or(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Vx(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=Zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=$s!==null?{id:ln,overflow:cn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=or(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Xt=t,Yt=null,!0):!1;default:return!1}}function Zh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function em(t){if(Oe){var e=Yt;if(e){var r=e;if(!Vx(t,e)){if(Zh(t))throw Error(U(418));e=Zn(r.nextSibling);var n=Xt;e&&Vx(t,e)?hb(n,r):(t.flags=t.flags&-4097|2,Oe=!1,Xt=t)}}else{if(Zh(t))throw Error(U(418));t.flags=t.flags&-4097|2,Oe=!1,Xt=t}}}function Fx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function Fl(t){if(t!==Xt)return!1;if(!Oe)return Fx(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qh(t.type,t.memoizedProps)),e&&(e=Yt)){if(Zh(t))throw mb(),Error(U(418));for(;e;)hb(t,e),e=Zn(e.nextSibling)}if(Fx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Yt=Zn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Yt=null}}else Yt=Xt?Zn(t.stateNode.nextSibling):null;return!0}function mb(){for(var t=Yt;t;)t=Zn(t.nextSibling)}function $i(){Yt=Xt=null,Oe=!1}function fp(t){wr===null?wr=[t]:wr.push(t)}var V2=In.ReactCurrentBatchConfig;function La(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(U(309));var n=r.stateNode}if(!n)throw Error(U(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(U(284));if(!r._owner)throw Error(U(290,t))}return t}function Ul(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ux(t){var e=t._init;return e(t._payload)}function pb(t){function e(g,v){if(t){var j=g.deletions;j===null?(g.deletions=[v],g.flags|=16):j.push(v)}}function r(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function n(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=ns(g,v),g.index=0,g.sibling=null,g}function a(g,v,j){return g.index=j,t?(j=g.alternate,j!==null?(j=j.index,j<v?(g.flags|=2,v):j):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,v,j,P){return v===null||v.tag!==6?(v=oh(j,g.mode,P),v.return=g,v):(v=i(v,j),v.return=g,v)}function c(g,v,j,P){var M=j.type;return M===yi?h(g,v,j.props.children,P,j.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Fn&&Ux(M)===v.type)?(P=i(v,j.props),P.ref=La(g,v,j),P.return=g,P):(P=dc(j.type,j.key,j.props,null,g.mode,P),P.ref=La(g,v,j),P.return=g,P)}function d(g,v,j,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==j.containerInfo||v.stateNode.implementation!==j.implementation?(v=lh(j,g.mode,P),v.return=g,v):(v=i(v,j.children||[]),v.return=g,v)}function h(g,v,j,P,M){return v===null||v.tag!==7?(v=Vs(j,g.mode,P,M),v.return=g,v):(v=i(v,j),v.return=g,v)}function m(g,v,j){if(typeof v=="string"&&v!==""||typeof v=="number")return v=oh(""+v,g.mode,j),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Il:return j=dc(v.type,v.key,v.props,null,g.mode,j),j.ref=La(g,null,v),j.return=g,j;case xi:return v=lh(v,g.mode,j),v.return=g,v;case Fn:var P=v._init;return m(g,P(v._payload),j)}if(za(v)||Aa(v))return v=Vs(v,g.mode,j,null),v.return=g,v;Ul(g,v)}return null}function p(g,v,j,P){var M=v!==null?v.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return M!==null?null:l(g,v,""+j,P);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Il:return j.key===M?c(g,v,j,P):null;case xi:return j.key===M?d(g,v,j,P):null;case Fn:return M=j._init,p(g,v,M(j._payload),P)}if(za(j)||Aa(j))return M!==null?null:h(g,v,j,P,null);Ul(g,j)}return null}function y(g,v,j,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return g=g.get(j)||null,l(v,g,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Il:return g=g.get(P.key===null?j:P.key)||null,c(v,g,P,M);case xi:return g=g.get(P.key===null?j:P.key)||null,d(v,g,P,M);case Fn:var D=P._init;return y(g,v,j,D(P._payload),M)}if(za(P)||Aa(P))return g=g.get(j)||null,h(v,g,P,M,null);Ul(v,P)}return null}function S(g,v,j,P){for(var M=null,D=null,T=v,_=v=0,I=null;T!==null&&_<j.length;_++){T.index>_?(I=T,T=null):I=T.sibling;var R=p(g,T,j[_],P);if(R===null){T===null&&(T=I);break}t&&T&&R.alternate===null&&e(g,T),v=a(R,v,_),D===null?M=R:D.sibling=R,D=R,T=I}if(_===j.length)return r(g,T),Oe&&Cs(g,_),M;if(T===null){for(;_<j.length;_++)T=m(g,j[_],P),T!==null&&(v=a(T,v,_),D===null?M=T:D.sibling=T,D=T);return Oe&&Cs(g,_),M}for(T=n(g,T);_<j.length;_++)I=y(T,g,_,j[_],P),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?_:I.key),v=a(I,v,_),D===null?M=I:D.sibling=I,D=I);return t&&T.forEach(function(k){return e(g,k)}),Oe&&Cs(g,_),M}function b(g,v,j,P){var M=Aa(j);if(typeof M!="function")throw Error(U(150));if(j=M.call(j),j==null)throw Error(U(151));for(var D=M=null,T=v,_=v=0,I=null,R=j.next();T!==null&&!R.done;_++,R=j.next()){T.index>_?(I=T,T=null):I=T.sibling;var k=p(g,T,R.value,P);if(k===null){T===null&&(T=I);break}t&&T&&k.alternate===null&&e(g,T),v=a(k,v,_),D===null?M=k:D.sibling=k,D=k,T=I}if(R.done)return r(g,T),Oe&&Cs(g,_),M;if(T===null){for(;!R.done;_++,R=j.next())R=m(g,R.value,P),R!==null&&(v=a(R,v,_),D===null?M=R:D.sibling=R,D=R);return Oe&&Cs(g,_),M}for(T=n(g,T);!R.done;_++,R=j.next())R=y(T,g,_,R.value,P),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?_:R.key),v=a(R,v,_),D===null?M=R:D.sibling=R,D=R);return t&&T.forEach(function(A){return e(g,A)}),Oe&&Cs(g,_),M}function N(g,v,j,P){if(typeof j=="object"&&j!==null&&j.type===yi&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Il:e:{for(var M=j.key,D=v;D!==null;){if(D.key===M){if(M=j.type,M===yi){if(D.tag===7){r(g,D.sibling),v=i(D,j.props.children),v.return=g,g=v;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Fn&&Ux(M)===D.type){r(g,D.sibling),v=i(D,j.props),v.ref=La(g,D,j),v.return=g,g=v;break e}r(g,D);break}else e(g,D);D=D.sibling}j.type===yi?(v=Vs(j.props.children,g.mode,P,j.key),v.return=g,g=v):(P=dc(j.type,j.key,j.props,null,g.mode,P),P.ref=La(g,v,j),P.return=g,g=P)}return o(g);case xi:e:{for(D=j.key;v!==null;){if(v.key===D)if(v.tag===4&&v.stateNode.containerInfo===j.containerInfo&&v.stateNode.implementation===j.implementation){r(g,v.sibling),v=i(v,j.children||[]),v.return=g,g=v;break e}else{r(g,v);break}else e(g,v);v=v.sibling}v=lh(j,g.mode,P),v.return=g,g=v}return o(g);case Fn:return D=j._init,N(g,v,D(j._payload),P)}if(za(j))return S(g,v,j,P);if(Aa(j))return b(g,v,j,P);Ul(g,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,v!==null&&v.tag===6?(r(g,v.sibling),v=i(v,j),v.return=g,g=v):(r(g,v),v=oh(j,g.mode,P),v.return=g,g=v),o(g)):r(g,v)}return N}var qi=pb(!0),fb=pb(!1),Vc=vs(null),Fc=null,Si=null,gp=null;function xp(){gp=Si=Fc=null}function yp(t){var e=Vc.current;Me(Vc),t._currentValue=e}function tm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Di(t,e){Fc=t,gp=Si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zt=!0),t.firstContext=null)}function dr(t){var e=t._currentValue;if(gp!==t)if(t={context:t,memoizedValue:e,next:null},Si===null){if(Fc===null)throw Error(U(308));Si=t,Fc.dependencies={lanes:0,firstContext:t}}else Si=Si.next=t;return e}var Ds=null;function vp(t){Ds===null?Ds=[t]:Ds.push(t)}function gb(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,vp(e)):(r.next=i.next,i.next=r),e.interleaved=r,bn(t,n)}function bn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Un=!1;function bp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function es(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ve&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,bn(t,r)}return i=n.interleaved,i===null?(e.next=e,vp(n)):(e.next=i.next,i.next=e),n.interleaved=e,bn(t,r)}function ic(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ip(t,r)}}function zx(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Uc(t,e,r,n){var i=t.updateQueue;Un=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var m=i.baseState;o=0,h=d=c=null,l=a;do{var p=l.lane,y=l.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=t,b=l;switch(p=e,y=r,b.tag){case 1:if(S=b.payload,typeof S=="function"){m=S.call(y,m,p);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=b.payload,p=typeof S=="function"?S.call(y,m,p):S,p==null)break e;m=Be({},m,p);break e;case 2:Un=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else y={eventTime:y,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=m):h=h.next=y,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(c=m),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Hs|=o,t.lanes=o,t.memoizedState=m}}function Bx(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(U(191,i));i.call(n)}}}var Qo={},Fr=vs(Qo),So=vs(Qo),To=vs(Qo);function Ms(t){if(t===Qo)throw Error(U(174));return t}function wp(t,e){switch(Ae(To,e),Ae(So,t),Ae(Fr,Qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mh(e,t)}Me(Fr),Ae(Fr,e)}function Hi(){Me(Fr),Me(So),Me(To)}function yb(t){Ms(To.current);var e=Ms(Fr.current),r=Mh(e,t.type);e!==r&&(Ae(So,t),Ae(Fr,r))}function Np(t){So.current===t&&(Me(Fr),Me(So))}var Ue=vs(0);function zc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var th=[];function jp(){for(var t=0;t<th.length;t++)th[t]._workInProgressVersionPrimary=null;th.length=0}var ac=In.ReactCurrentDispatcher,rh=In.ReactCurrentBatchConfig,qs=0,ze=null,rt=null,ot=null,Bc=!1,ro=!1,ko=0,F2=0;function vt(){throw Error(U(321))}function _p(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Tr(t[r],e[r]))return!1;return!0}function Ep(t,e,r,n,i,a){if(qs=a,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ac.current=t===null||t.memoizedState===null?$2:q2,t=r(n,i),ro){a=0;do{if(ro=!1,ko=0,25<=a)throw Error(U(301));a+=1,ot=rt=null,e.updateQueue=null,ac.current=H2,t=r(n,i)}while(ro)}if(ac.current=$c,e=rt!==null&&rt.next!==null,qs=0,ot=rt=ze=null,Bc=!1,e)throw Error(U(300));return t}function Sp(){var t=ko!==0;return ko=0,t}function Mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?ze.memoizedState=ot=t:ot=ot.next=t,ot}function hr(){if(rt===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var e=ot===null?ze.memoizedState:ot.next;if(e!==null)ot=e,rt=t;else{if(t===null)throw Error(U(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ot===null?ze.memoizedState=ot=t:ot=ot.next=t}return ot}function Io(t,e){return typeof e=="function"?e(t):e}function nh(t){var e=hr(),r=e.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=t;var n=rt,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,c=null,d=a;do{var h=d.lane;if((qs&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,ze.lanes|=h,Hs|=h}d=d.next}while(d!==null&&d!==a);c===null?o=n:c.next=l,Tr(n,e.memoizedState)||(zt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,ze.lanes|=a,Hs|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function sh(t){var e=hr(),r=e.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Tr(a,e.memoizedState)||(zt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function vb(){}function bb(t,e){var r=ze,n=hr(),i=e(),a=!Tr(n.memoizedState,i);if(a&&(n.memoizedState=i,zt=!0),n=n.queue,Tp(jb.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||ot!==null&&ot.memoizedState.tag&1){if(r.flags|=2048,Co(9,Nb.bind(null,r,n,i,e),void 0,null),lt===null)throw Error(U(349));qs&30||wb(r,e,i)}return i}function wb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Nb(t,e,r,n){e.value=r,e.getSnapshot=n,_b(e)&&Eb(t)}function jb(t,e,r){return r(function(){_b(e)&&Eb(t)})}function _b(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Tr(t,r)}catch{return!0}}function Eb(t){var e=bn(t,1);e!==null&&Sr(e,t,1,-1)}function $x(t){var e=Mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:t},e.queue=t,t=t.dispatch=B2.bind(null,ze,t),[e.memoizedState,t]}function Co(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Sb(){return hr().memoizedState}function oc(t,e,r,n){var i=Mr();ze.flags|=t,i.memoizedState=Co(1|e,r,void 0,n===void 0?null:n)}function ku(t,e,r,n){var i=hr();n=n===void 0?null:n;var a=void 0;if(rt!==null){var o=rt.memoizedState;if(a=o.destroy,n!==null&&_p(n,o.deps)){i.memoizedState=Co(e,r,a,n);return}}ze.flags|=t,i.memoizedState=Co(1|e,r,a,n)}function qx(t,e){return oc(8390656,8,t,e)}function Tp(t,e){return ku(2048,8,t,e)}function Tb(t,e){return ku(4,2,t,e)}function kb(t,e){return ku(4,4,t,e)}function Ib(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cb(t,e,r){return r=r!=null?r.concat([t]):null,ku(4,4,Ib.bind(null,e,t),r)}function kp(){}function Ab(t,e){var r=hr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&_p(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Rb(t,e){var r=hr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&_p(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Pb(t,e,r){return qs&21?(Tr(r,e)||(r=Vv(),ze.lanes|=r,Hs|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zt=!0),t.memoizedState=r)}function U2(t,e){var r=_e;_e=r!==0&&4>r?r:4,t(!0);var n=rh.transition;rh.transition={};try{t(!1),e()}finally{_e=r,rh.transition=n}}function Db(){return hr().memoizedState}function z2(t,e,r){var n=rs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Mb(t))Lb(e,r);else if(r=gb(t,e,r,n),r!==null){var i=Dt();Sr(r,t,n,i),Ob(r,e,n)}}function B2(t,e,r){var n=rs(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Mb(t))Lb(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(i.hasEagerState=!0,i.eagerState=l,Tr(l,o)){var c=e.interleaved;c===null?(i.next=i,vp(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=gb(t,e,i,n),r!==null&&(i=Dt(),Sr(r,t,n,i),Ob(r,e,n))}}function Mb(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function Lb(t,e){ro=Bc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Ob(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ip(t,r)}}var $c={readContext:dr,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},$2={readContext:dr,useCallback:function(t,e){return Mr().memoizedState=[t,e===void 0?null:e],t},useContext:dr,useEffect:qx,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,oc(4194308,4,Ib.bind(null,e,t),r)},useLayoutEffect:function(t,e){return oc(4194308,4,t,e)},useInsertionEffect:function(t,e){return oc(4,2,t,e)},useMemo:function(t,e){var r=Mr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Mr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=z2.bind(null,ze,t),[n.memoizedState,t]},useRef:function(t){var e=Mr();return t={current:t},e.memoizedState=t},useState:$x,useDebugValue:kp,useDeferredValue:function(t){return Mr().memoizedState=t},useTransition:function(){var t=$x(!1),e=t[0];return t=U2.bind(null,t[1]),Mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ze,i=Mr();if(Oe){if(r===void 0)throw Error(U(407));r=r()}else{if(r=e(),lt===null)throw Error(U(349));qs&30||wb(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,qx(jb.bind(null,n,a,t),[t]),n.flags|=2048,Co(9,Nb.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Mr(),e=lt.identifierPrefix;if(Oe){var r=cn,n=ln;r=(n&~(1<<32-Er(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ko++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=F2++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},q2={readContext:dr,useCallback:Ab,useContext:dr,useEffect:Tp,useImperativeHandle:Cb,useInsertionEffect:Tb,useLayoutEffect:kb,useMemo:Rb,useReducer:nh,useRef:Sb,useState:function(){return nh(Io)},useDebugValue:kp,useDeferredValue:function(t){var e=hr();return Pb(e,rt.memoizedState,t)},useTransition:function(){var t=nh(Io)[0],e=hr().memoizedState;return[t,e]},useMutableSource:vb,useSyncExternalStore:bb,useId:Db,unstable_isNewReconciler:!1},H2={readContext:dr,useCallback:Ab,useContext:dr,useEffect:Tp,useImperativeHandle:Cb,useInsertionEffect:Tb,useLayoutEffect:kb,useMemo:Rb,useReducer:sh,useRef:Sb,useState:function(){return sh(Io)},useDebugValue:kp,useDeferredValue:function(t){var e=hr();return rt===null?e.memoizedState=t:Pb(e,rt.memoizedState,t)},useTransition:function(){var t=sh(Io)[0],e=hr().memoizedState;return[t,e]},useMutableSource:vb,useSyncExternalStore:bb,useId:Db,unstable_isNewReconciler:!1};function vr(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function rm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Be({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Iu={isMounted:function(t){return(t=t._reactInternals)?ri(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Dt(),i=rs(t),a=hn(n,i);a.payload=e,r!=null&&(a.callback=r),e=es(t,a,i),e!==null&&(Sr(e,t,i,n),ic(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Dt(),i=rs(t),a=hn(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=es(t,a,i),e!==null&&(Sr(e,t,i,n),ic(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Dt(),n=rs(t),i=hn(r,n);i.tag=2,e!=null&&(i.callback=e),e=es(t,i,n),e!==null&&(Sr(e,t,n,r),ic(e,t,n))}};function Hx(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!No(r,n)||!No(i,a):!0}function Vb(t,e,r){var n=!1,i=cs,a=e.contextType;return typeof a=="object"&&a!==null?a=dr(a):(i=$t(e)?Bs:Tt.current,n=e.contextTypes,a=(n=n!=null)?Bi(t,i):cs),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Iu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Wx(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Iu.enqueueReplaceState(e,e.state,null)}function nm(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},bp(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=dr(a):(a=$t(e)?Bs:Tt.current,i.context=Bi(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(rm(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Iu.enqueueReplaceState(i,i.state,null),Uc(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wi(t,e){try{var r="",n=e;do r+=v1(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function ih(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function sm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var W2=typeof WeakMap=="function"?WeakMap:Map;function Fb(t,e,r){r=hn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Hc||(Hc=!0,pm=n),sm(t,e)},r}function Ub(t,e,r){r=hn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){sm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){sm(t,e),typeof n!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Gx(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new W2;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=aE.bind(null,t,e,r),e.then(t,t))}function Kx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qx(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=hn(-1,1),e.tag=2,es(r,e,1))),r.lanes|=1),t)}var G2=In.ReactCurrentOwner,zt=!1;function Rt(t,e,r,n){e.child=t===null?fb(e,null,r,n):qi(e,t.child,r,n)}function Yx(t,e,r,n,i){r=r.render;var a=e.ref;return Di(e,i),n=Ep(t,e,r,n,a,i),r=Sp(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wn(t,e,i)):(Oe&&r&&mp(e),e.flags|=1,Rt(t,e,n,i),e.child)}function Jx(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!Lp(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,zb(t,e,a,n,i)):(t=dc(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:No,r(o,n)&&t.ref===e.ref)return wn(t,e,i)}return e.flags|=1,t=ns(a,n),t.ref=e.ref,t.return=e,e.child=t}function zb(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(No(a,n)&&t.ref===e.ref)if(zt=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(zt=!0);else return e.lanes=t.lanes,wn(t,e,i)}return im(t,e,r,n,i)}function Bb(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(ki,Gt),Gt|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(ki,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ae(ki,Gt),Gt|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Ae(ki,Gt),Gt|=n;return Rt(t,e,i,r),e.child}function $b(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function im(t,e,r,n,i){var a=$t(r)?Bs:Tt.current;return a=Bi(e,a),Di(e,i),r=Ep(t,e,r,n,a,i),n=Sp(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wn(t,e,i)):(Oe&&n&&mp(e),e.flags|=1,Rt(t,e,r,i),e.child)}function Xx(t,e,r,n,i){if($t(r)){var a=!0;Mc(e)}else a=!1;if(Di(e,i),e.stateNode===null)lc(t,e),Vb(e,r,n),nm(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=dr(d):(d=$t(r)?Bs:Tt.current,d=Bi(e,d));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Wx(e,o,n,d),Un=!1;var p=e.memoizedState;o.state=p,Uc(e,n,o,i),c=e.memoizedState,l!==n||p!==c||Bt.current||Un?(typeof h=="function"&&(rm(e,r,h,n),c=e.memoizedState),(l=Un||Hx(e,r,l,n,p,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,xb(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:vr(e.type,l),o.props=d,m=e.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=dr(c):(c=$t(r)?Bs:Tt.current,c=Bi(e,c));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==c)&&Wx(e,o,n,c),Un=!1,p=e.memoizedState,o.state=p,Uc(e,n,o,i);var S=e.memoizedState;l!==m||p!==S||Bt.current||Un?(typeof y=="function"&&(rm(e,r,y,n),S=e.memoizedState),(d=Un||Hx(e,r,d,n,p,S,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=S),o.props=n,o.state=S,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return am(t,e,r,n,a,i)}function am(t,e,r,n,i,a){$b(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Ox(e,r,!1),wn(t,e,a);n=e.stateNode,G2.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=qi(e,t.child,null,a),e.child=qi(e,null,l,a)):Rt(t,e,l,a),e.memoizedState=n.state,i&&Ox(e,r,!0),e.child}function qb(t){var e=t.stateNode;e.pendingContext?Lx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lx(t,e.context,!1),wp(t,e.containerInfo)}function Zx(t,e,r,n,i){return $i(),fp(i),e.flags|=256,Rt(t,e,r,n),e.child}var om={dehydrated:null,treeContext:null,retryLane:0};function lm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hb(t,e,r){var n=e.pendingProps,i=Ue.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(Ue,i&1),t===null)return em(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Ru(o,n,0,null),t=Vs(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=lm(r),e.memoizedState=om,t):Ip(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return K2(t,e,o,n,l,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ns(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=ns(l,a):(a=Vs(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?lm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=om,n}return a=t.child,t=a.sibling,n=ns(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Ip(t,e){return e=Ru({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zl(t,e,r,n){return n!==null&&fp(n),qi(e,t.child,null,r),t=Ip(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function K2(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=ih(Error(U(422))),zl(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=Ru({mode:"visible",children:n.children},i,0,null),a=Vs(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&qi(e,t.child,null,o),e.child.memoizedState=lm(o),e.memoizedState=om,a);if(!(e.mode&1))return zl(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(U(419)),n=ih(a,n,void 0),zl(t,e,o,n)}if(l=(o&t.childLanes)!==0,zt||l){if(n=lt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,bn(t,i),Sr(n,t,i,-1))}return Mp(),n=ih(Error(U(421))),zl(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=oE.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Yt=Zn(i.nextSibling),Xt=e,Oe=!0,wr=null,t!==null&&(sr[ir++]=ln,sr[ir++]=cn,sr[ir++]=$s,ln=t.id,cn=t.overflow,$s=e),e=Ip(e,n.children),e.flags|=4096,e)}function e0(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),tm(t.return,e,r)}function ah(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Wb(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Rt(t,e,n.children,r),n=Ue.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&e0(t,r,e);else if(t.tag===19)e0(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ae(Ue,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&zc(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),ah(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&zc(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}ah(e,!0,r,null,a);break;case"together":ah(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Hs|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,r=ns(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ns(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Q2(t,e,r){switch(e.tag){case 3:qb(e),$i();break;case 5:yb(e);break;case 1:$t(e.type)&&Mc(e);break;case 4:wp(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ae(Vc,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ae(Ue,Ue.current&1),e.flags|=128,null):r&e.child.childLanes?Hb(t,e,r):(Ae(Ue,Ue.current&1),t=wn(t,e,r),t!==null?t.sibling:null);Ae(Ue,Ue.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Wb(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(Ue,Ue.current),n)break;return null;case 22:case 23:return e.lanes=0,Bb(t,e,r)}return wn(t,e,r)}var Gb,cm,Kb,Qb;Gb=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cm=function(){};Kb=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ms(Fr.current);var a=null;switch(r){case"input":i=Ah(t,i),n=Ah(t,n),a=[];break;case"select":i=Be({},i,{value:void 0}),n=Be({},n,{value:void 0}),a=[];break;case"textarea":i=Dh(t,i),n=Dh(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Pc)}Lh(r,n);var o;r=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fo.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Pe("scroll",t),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};Qb=function(t,e,r,n){r!==n&&(e.flags|=4)};function Oa(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Y2(t,e,r){var n=e.pendingProps;switch(pp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return $t(e.type)&&Dc(),bt(e),null;case 3:return n=e.stateNode,Hi(),Me(Bt),Me(Tt),jp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wr!==null&&(xm(wr),wr=null))),cm(t,e),bt(e),null;case 5:Np(e);var i=Ms(To.current);if(r=e.type,t!==null&&e.stateNode!=null)Kb(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(U(166));return bt(e),null}if(t=Ms(Fr.current),Fl(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Or]=e,n[Eo]=a,t=(e.mode&1)!==0,r){case"dialog":Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":case"embed":Pe("load",n);break;case"video":case"audio":for(i=0;i<$a.length;i++)Pe($a[i],n);break;case"source":Pe("error",n);break;case"img":case"image":case"link":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"input":cx(n,a),Pe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Pe("invalid",n);break;case"textarea":dx(n,a),Pe("invalid",n)}Lh(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Vl(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Vl(n.textContent,l,t),i=["children",""+l]):fo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pe("scroll",n)}switch(r){case"input":Cl(n),ux(n,a,!0);break;case"textarea":Cl(n),hx(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Pc)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jv(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Or]=e,t[Eo]=n,Gb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Oh(r,n),r){case"dialog":Pe("cancel",t),Pe("close",t),i=n;break;case"iframe":case"object":case"embed":Pe("load",t),i=n;break;case"video":case"audio":for(i=0;i<$a.length;i++)Pe($a[i],t);i=n;break;case"source":Pe("error",t),i=n;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),i=n;break;case"details":Pe("toggle",t),i=n;break;case"input":cx(t,n),i=Ah(t,n),Pe("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Be({},n,{value:void 0}),Pe("invalid",t);break;case"textarea":dx(t,n),i=Dh(t,n),Pe("invalid",t);break;default:i=n}Lh(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Sv(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_v(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&go(t,c):typeof c=="number"&&go(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(fo.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Pe("scroll",t):c!=null&&Zm(t,a,c,o))}switch(r){case"input":Cl(t),ux(t,n,!1);break;case"textarea":Cl(t),hx(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ls(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Ci(t,!!n.multiple,a,!1):n.defaultValue!=null&&Ci(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)Qb(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(U(166));if(r=Ms(To.current),Ms(Fr.current),Fl(e)){if(n=e.stateNode,r=e.memoizedProps,n[Or]=e,(a=n.nodeValue!==r)&&(t=Xt,t!==null))switch(t.tag){case 3:Vl(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vl(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Or]=e,e.stateNode=n}return bt(e),null;case 13:if(Me(Ue),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Yt!==null&&e.mode&1&&!(e.flags&128))mb(),$i(),e.flags|=98560,a=!1;else if(a=Fl(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(U(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(U(317));a[Or]=e}else $i(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),a=!1}else wr!==null&&(xm(wr),wr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?nt===0&&(nt=3):Mp())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return Hi(),cm(t,e),t===null&&jo(e.stateNode.containerInfo),bt(e),null;case 10:return yp(e.type._context),bt(e),null;case 17:return $t(e.type)&&Dc(),bt(e),null;case 19:if(Me(Ue),a=e.memoizedState,a===null)return bt(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Oa(a,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=zc(t),o!==null){for(e.flags|=128,Oa(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ae(Ue,Ue.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ye()>Gi&&(e.flags|=128,n=!0,Oa(a,!1),e.lanes=4194304)}else{if(!n)if(t=zc(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Oa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Oe)return bt(e),null}else 2*Ye()-a.renderingStartTime>Gi&&r!==1073741824&&(e.flags|=128,n=!0,Oa(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ye(),e.sibling=null,r=Ue.current,Ae(Ue,n?r&1|2:r&1),e):(bt(e),null);case 22:case 23:return Dp(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Gt&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function J2(t,e){switch(pp(e),e.tag){case 1:return $t(e.type)&&Dc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hi(),Me(Bt),Me(Tt),jp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Np(e),null;case 13:if(Me(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));$i()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(Ue),null;case 4:return Hi(),null;case 10:return yp(e.type._context),null;case 22:case 23:return Dp(),null;case 24:return null;default:return null}}var Bl=!1,jt=!1,X2=typeof WeakSet=="function"?WeakSet:Set,G=null;function Ti(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){We(t,e,n)}else r.current=null}function um(t,e,r){try{r()}catch(n){We(t,e,n)}}var t0=!1;function Z2(t,e){if(Gh=Cc,t=eb(),hp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var y;m!==r||i!==0&&m.nodeType!==3||(l=o+i),m!==a||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)p=m,m=y;for(;;){if(m===t)break t;if(p===r&&++d===i&&(l=o),p===a&&++h===n&&(c=o),(y=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Kh={focusedElem:t,selectionRange:r},Cc=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var b=S.memoizedProps,N=S.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?b:vr(e.type,b),N);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(P){We(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return S=t0,t0=!1,S}function no(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&um(e,r,a)}i=i.next}while(i!==n)}}function Cu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function dm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Yb(t){var e=t.alternate;e!==null&&(t.alternate=null,Yb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Or],delete e[Eo],delete e[Jh],delete e[M2],delete e[L2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jb(t){return t.tag===5||t.tag===3||t.tag===4}function r0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Pc));else if(n!==4&&(t=t.child,t!==null))for(hm(t,e,r),t=t.sibling;t!==null;)hm(t,e,r),t=t.sibling}function mm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(mm(t,e,r),t=t.sibling;t!==null;)mm(t,e,r),t=t.sibling}var ut=null,br=!1;function On(t,e,r){for(r=r.child;r!==null;)Xb(t,e,r),r=r.sibling}function Xb(t,e,r){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Nu,r)}catch{}switch(r.tag){case 5:jt||Ti(r,e);case 6:var n=ut,i=br;ut=null,On(t,e,r),ut=n,br=i,ut!==null&&(br?(t=ut,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ut.removeChild(r.stateNode));break;case 18:ut!==null&&(br?(t=ut,r=r.stateNode,t.nodeType===8?Zd(t.parentNode,r):t.nodeType===1&&Zd(t,r),bo(t)):Zd(ut,r.stateNode));break;case 4:n=ut,i=br,ut=r.stateNode.containerInfo,br=!0,On(t,e,r),ut=n,br=i;break;case 0:case 11:case 14:case 15:if(!jt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&um(r,e,o),i=i.next}while(i!==n)}On(t,e,r);break;case 1:if(!jt&&(Ti(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){We(r,e,l)}On(t,e,r);break;case 21:On(t,e,r);break;case 22:r.mode&1?(jt=(n=jt)||r.memoizedState!==null,On(t,e,r),jt=n):On(t,e,r);break;default:On(t,e,r)}}function n0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new X2),e.forEach(function(n){var i=lE.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function yr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ut=l.stateNode,br=!1;break e;case 3:ut=l.stateNode.containerInfo,br=!0;break e;case 4:ut=l.stateNode.containerInfo,br=!0;break e}l=l.return}if(ut===null)throw Error(U(160));Xb(a,o,i),ut=null,br=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){We(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zb(e,t),e=e.sibling}function Zb(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yr(e,t),Dr(t),n&4){try{no(3,t,t.return),Cu(3,t)}catch(b){We(t,t.return,b)}try{no(5,t,t.return)}catch(b){We(t,t.return,b)}}break;case 1:yr(e,t),Dr(t),n&512&&r!==null&&Ti(r,r.return);break;case 5:if(yr(e,t),Dr(t),n&512&&r!==null&&Ti(r,r.return),t.flags&32){var i=t.stateNode;try{go(i,"")}catch(b){We(t,t.return,b)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&wv(i,a),Oh(l,o);var d=Oh(l,a);for(o=0;o<c.length;o+=2){var h=c[o],m=c[o+1];h==="style"?Sv(i,m):h==="dangerouslySetInnerHTML"?_v(i,m):h==="children"?go(i,m):Zm(i,h,m,d)}switch(l){case"input":Rh(i,a);break;case"textarea":Nv(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?Ci(i,!!a.multiple,y,!1):p!==!!a.multiple&&(a.defaultValue!=null?Ci(i,!!a.multiple,a.defaultValue,!0):Ci(i,!!a.multiple,a.multiple?[]:"",!1))}i[Eo]=a}catch(b){We(t,t.return,b)}}break;case 6:if(yr(e,t),Dr(t),n&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(b){We(t,t.return,b)}}break;case 3:if(yr(e,t),Dr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{bo(e.containerInfo)}catch(b){We(t,t.return,b)}break;case 4:yr(e,t),Dr(t);break;case 13:yr(e,t),Dr(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Rp=Ye())),n&4&&n0(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(jt=(d=jt)||h,yr(e,t),jt=d):yr(e,t),Dr(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(m=G=h;G!==null;){switch(p=G,y=p.child,p.tag){case 0:case 11:case 14:case 15:no(4,p,p.return);break;case 1:Ti(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(b){We(n,r,b)}}break;case 5:Ti(p,p.return);break;case 22:if(p.memoizedState!==null){i0(m);continue}}y!==null?(y.return=p,G=y):i0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ev("display",o))}catch(b){We(t,t.return,b)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){We(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:yr(e,t),Dr(t),n&4&&n0(t);break;case 21:break;default:yr(e,t),Dr(t)}}function Dr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Jb(r)){var n=r;break e}r=r.return}throw Error(U(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(go(i,""),n.flags&=-33);var a=r0(t);mm(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=r0(t);hm(t,l,o);break;default:throw Error(U(161))}}catch(c){We(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eE(t,e,r){G=t,ew(t)}function ew(t,e,r){for(var n=(t.mode&1)!==0;G!==null;){var i=G,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Bl;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||jt;l=Bl;var d=jt;if(Bl=o,(jt=c)&&!d)for(G=i;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?a0(i):c!==null?(c.return=o,G=c):a0(i);for(;a!==null;)G=a,ew(a),a=a.sibling;G=i,Bl=l,jt=d}s0(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,G=a):s0(t)}}function s0(t){for(;G!==null;){var e=G;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||Cu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!jt)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:vr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Bx(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Bx(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&bo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}jt||e.flags&512&&dm(e)}catch(p){We(e,e.return,p)}}if(e===t){G=null;break}if(r=e.sibling,r!==null){r.return=e.return,G=r;break}G=e.return}}function i0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var r=e.sibling;if(r!==null){r.return=e.return,G=r;break}G=e.return}}function a0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Cu(4,e)}catch(c){We(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){We(e,i,c)}}var a=e.return;try{dm(e)}catch(c){We(e,a,c)}break;case 5:var o=e.return;try{dm(e)}catch(c){We(e,o,c)}}}catch(c){We(e,e.return,c)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var tE=Math.ceil,qc=In.ReactCurrentDispatcher,Cp=In.ReactCurrentOwner,lr=In.ReactCurrentBatchConfig,ve=0,lt=null,Xe=null,mt=0,Gt=0,ki=vs(0),nt=0,Ao=null,Hs=0,Au=0,Ap=0,so=null,Ft=null,Rp=0,Gi=1/0,an=null,Hc=!1,pm=null,ts=null,$l=!1,Kn=null,Wc=0,io=0,fm=null,cc=-1,uc=0;function Dt(){return ve&6?Ye():cc!==-1?cc:cc=Ye()}function rs(t){return t.mode&1?ve&2&&mt!==0?mt&-mt:V2.transition!==null?(uc===0&&(uc=Vv()),uc):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Hv(t.type)),t):1}function Sr(t,e,r,n){if(50<io)throw io=0,fm=null,Error(U(185));Wo(t,r,n),(!(ve&2)||t!==lt)&&(t===lt&&(!(ve&2)&&(Au|=r),nt===4&&Bn(t,mt)),qt(t,n),r===1&&ve===0&&!(e.mode&1)&&(Gi=Ye()+500,Tu&&bs()))}function qt(t,e){var r=t.callbackNode;V1(t,e);var n=Ic(t,t===lt?mt:0);if(n===0)r!==null&&fx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&fx(r),e===1)t.tag===0?O2(o0.bind(null,t)):ub(o0.bind(null,t)),P2(function(){!(ve&6)&&bs()}),r=null;else{switch(Fv(n)){case 1:r=sp;break;case 4:r=Lv;break;case 16:r=kc;break;case 536870912:r=Ov;break;default:r=kc}r=lw(r,tw.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function tw(t,e){if(cc=-1,uc=0,ve&6)throw Error(U(327));var r=t.callbackNode;if(Mi()&&t.callbackNode!==r)return null;var n=Ic(t,t===lt?mt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Gc(t,n);else{e=n;var i=ve;ve|=2;var a=nw();(lt!==t||mt!==e)&&(an=null,Gi=Ye()+500,Os(t,e));do try{sE();break}catch(l){rw(t,l)}while(!0);xp(),qc.current=a,ve=i,Xe!==null?e=0:(lt=null,mt=0,e=nt)}if(e!==0){if(e===2&&(i=Bh(t),i!==0&&(n=i,e=gm(t,i))),e===1)throw r=Ao,Os(t,0),Bn(t,n),qt(t,Ye()),r;if(e===6)Bn(t,n);else{if(i=t.current.alternate,!(n&30)&&!rE(i)&&(e=Gc(t,n),e===2&&(a=Bh(t),a!==0&&(n=a,e=gm(t,a))),e===1))throw r=Ao,Os(t,0),Bn(t,n),qt(t,Ye()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(U(345));case 2:As(t,Ft,an);break;case 3:if(Bn(t,n),(n&130023424)===n&&(e=Rp+500-Ye(),10<e)){if(Ic(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Dt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Yh(As.bind(null,t,Ft,an),e);break}As(t,Ft,an);break;case 4:if(Bn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Er(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=Ye()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*tE(n/1960))-n,10<n){t.timeoutHandle=Yh(As.bind(null,t,Ft,an),n);break}As(t,Ft,an);break;case 5:As(t,Ft,an);break;default:throw Error(U(329))}}}return qt(t,Ye()),t.callbackNode===r?tw.bind(null,t):null}function gm(t,e){var r=so;return t.current.memoizedState.isDehydrated&&(Os(t,e).flags|=256),t=Gc(t,e),t!==2&&(e=Ft,Ft=r,e!==null&&xm(e)),t}function xm(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function rE(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Tr(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bn(t,e){for(e&=~Ap,e&=~Au,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Er(e),n=1<<r;t[r]=-1,e&=~n}}function o0(t){if(ve&6)throw Error(U(327));Mi();var e=Ic(t,0);if(!(e&1))return qt(t,Ye()),null;var r=Gc(t,e);if(t.tag!==0&&r===2){var n=Bh(t);n!==0&&(e=n,r=gm(t,n))}if(r===1)throw r=Ao,Os(t,0),Bn(t,e),qt(t,Ye()),r;if(r===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,As(t,Ft,an),qt(t,Ye()),null}function Pp(t,e){var r=ve;ve|=1;try{return t(e)}finally{ve=r,ve===0&&(Gi=Ye()+500,Tu&&bs())}}function Ws(t){Kn!==null&&Kn.tag===0&&!(ve&6)&&Mi();var e=ve;ve|=1;var r=lr.transition,n=_e;try{if(lr.transition=null,_e=1,t)return t()}finally{_e=n,lr.transition=r,ve=e,!(ve&6)&&bs()}}function Dp(){Gt=ki.current,Me(ki)}function Os(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,R2(r)),Xe!==null)for(r=Xe.return;r!==null;){var n=r;switch(pp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Dc();break;case 3:Hi(),Me(Bt),Me(Tt),jp();break;case 5:Np(n);break;case 4:Hi();break;case 13:Me(Ue);break;case 19:Me(Ue);break;case 10:yp(n.type._context);break;case 22:case 23:Dp()}r=r.return}if(lt=t,Xe=t=ns(t.current,null),mt=Gt=e,nt=0,Ao=null,Ap=Au=Hs=0,Ft=so=null,Ds!==null){for(e=0;e<Ds.length;e++)if(r=Ds[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}Ds=null}return t}function rw(t,e){do{var r=Xe;try{if(xp(),ac.current=$c,Bc){for(var n=ze.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Bc=!1}if(qs=0,ot=rt=ze=null,ro=!1,ko=0,Cp.current=null,r===null||r.return===null){nt=1,Ao=e,Xe=null;break}e:{var a=t,o=r.return,l=r,c=e;if(e=mt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Kx(o);if(y!==null){y.flags&=-257,Qx(y,o,l,a,e),y.mode&1&&Gx(a,d,e),e=y,c=d;var S=e.updateQueue;if(S===null){var b=new Set;b.add(c),e.updateQueue=b}else S.add(c);break e}else{if(!(e&1)){Gx(a,d,e),Mp();break e}c=Error(U(426))}}else if(Oe&&l.mode&1){var N=Kx(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Qx(N,o,l,a,e),fp(Wi(c,l));break e}}a=c=Wi(c,l),nt!==4&&(nt=2),so===null?so=[a]:so.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=Fb(a,c,e);zx(a,g);break e;case 1:l=c;var v=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ts===null||!ts.has(j)))){a.flags|=65536,e&=-e,a.lanes|=e;var P=Ub(a,l,e);zx(a,P);break e}}a=a.return}while(a!==null)}iw(r)}catch(M){e=M,Xe===r&&r!==null&&(Xe=r=r.return);continue}break}while(!0)}function nw(){var t=qc.current;return qc.current=$c,t===null?$c:t}function Mp(){(nt===0||nt===3||nt===2)&&(nt=4),lt===null||!(Hs&268435455)&&!(Au&268435455)||Bn(lt,mt)}function Gc(t,e){var r=ve;ve|=2;var n=nw();(lt!==t||mt!==e)&&(an=null,Os(t,e));do try{nE();break}catch(i){rw(t,i)}while(!0);if(xp(),ve=r,qc.current=n,Xe!==null)throw Error(U(261));return lt=null,mt=0,nt}function nE(){for(;Xe!==null;)sw(Xe)}function sE(){for(;Xe!==null&&!I1();)sw(Xe)}function sw(t){var e=ow(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?iw(t):Xe=e,Cp.current=null}function iw(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=J2(r,e),r!==null){r.flags&=32767,Xe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Xe=null;return}}else if(r=Y2(r,e,Gt),r!==null){Xe=r;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);nt===0&&(nt=5)}function As(t,e,r){var n=_e,i=lr.transition;try{lr.transition=null,_e=1,iE(t,e,r,n)}finally{lr.transition=i,_e=n}return null}function iE(t,e,r,n){do Mi();while(Kn!==null);if(ve&6)throw Error(U(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(F1(t,a),t===lt&&(Xe=lt=null,mt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$l||($l=!0,lw(kc,function(){return Mi(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=lr.transition,lr.transition=null;var o=_e;_e=1;var l=ve;ve|=4,Cp.current=null,Z2(t,r),Zb(r,t),E2(Kh),Cc=!!Gh,Kh=Gh=null,t.current=r,eE(r),C1(),ve=l,_e=o,lr.transition=a}else t.current=r;if($l&&($l=!1,Kn=t,Wc=i),a=t.pendingLanes,a===0&&(ts=null),P1(r.stateNode),qt(t,Ye()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Hc)throw Hc=!1,t=pm,pm=null,t;return Wc&1&&t.tag!==0&&Mi(),a=t.pendingLanes,a&1?t===fm?io++:(io=0,fm=t):io=0,bs(),null}function Mi(){if(Kn!==null){var t=Fv(Wc),e=lr.transition,r=_e;try{if(lr.transition=null,_e=16>t?16:t,Kn===null)var n=!1;else{if(t=Kn,Kn=null,Wc=0,ve&6)throw Error(U(331));var i=ve;for(ve|=4,G=t.current;G!==null;){var a=G,o=a.child;if(G.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(G=d;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:no(8,h,a)}var m=h.child;if(m!==null)m.return=h,G=m;else for(;G!==null;){h=G;var p=h.sibling,y=h.return;if(Yb(h),h===d){G=null;break}if(p!==null){p.return=y,G=p;break}G=y}}}var S=a.alternate;if(S!==null){var b=S.child;if(b!==null){S.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}G=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,G=o;else e:for(;G!==null;){if(a=G,a.flags&2048)switch(a.tag){case 0:case 11:case 15:no(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,G=g;break e}G=a.return}}var v=t.current;for(G=v;G!==null;){o=G;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,G=j;else e:for(o=v;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cu(9,l)}}catch(M){We(l,l.return,M)}if(l===o){G=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,G=P;break e}G=l.return}}if(ve=i,bs(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Nu,t)}catch{}n=!0}return n}finally{_e=r,lr.transition=e}}return!1}function l0(t,e,r){e=Wi(r,e),e=Fb(t,e,1),t=es(t,e,1),e=Dt(),t!==null&&(Wo(t,1,e),qt(t,e))}function We(t,e,r){if(t.tag===3)l0(t,t,r);else for(;e!==null;){if(e.tag===3){l0(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ts===null||!ts.has(n))){t=Wi(r,t),t=Ub(e,t,1),e=es(e,t,1),t=Dt(),e!==null&&(Wo(e,1,t),qt(e,t));break}}e=e.return}}function aE(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&r,lt===t&&(mt&r)===r&&(nt===4||nt===3&&(mt&130023424)===mt&&500>Ye()-Rp?Os(t,0):Ap|=r),qt(t,e)}function aw(t,e){e===0&&(t.mode&1?(e=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):e=1);var r=Dt();t=bn(t,e),t!==null&&(Wo(t,e,r),qt(t,r))}function oE(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),aw(t,r)}function lE(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(U(314))}n!==null&&n.delete(e),aw(t,r)}var ow;ow=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bt.current)zt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return zt=!1,Q2(t,e,r);zt=!!(t.flags&131072)}else zt=!1,Oe&&e.flags&1048576&&db(e,Oc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;lc(t,e),t=e.pendingProps;var i=Bi(e,Tt.current);Di(e,r),i=Ep(null,e,n,t,i,r);var a=Sp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(n)?(a=!0,Mc(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bp(e),i.updater=Iu,e.stateNode=i,i._reactInternals=e,nm(e,n,t,r),e=am(null,e,n,!0,a,r)):(e.tag=0,Oe&&a&&mp(e),Rt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(lc(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=uE(n),t=vr(n,t),i){case 0:e=im(null,e,n,t,r);break e;case 1:e=Xx(null,e,n,t,r);break e;case 11:e=Yx(null,e,n,t,r);break e;case 14:e=Jx(null,e,n,vr(n.type,t),r);break e}throw Error(U(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:vr(n,i),im(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:vr(n,i),Xx(t,e,n,i,r);case 3:e:{if(qb(e),t===null)throw Error(U(387));n=e.pendingProps,a=e.memoizedState,i=a.element,xb(t,e),Uc(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Wi(Error(U(423)),e),e=Zx(t,e,n,r,i);break e}else if(n!==i){i=Wi(Error(U(424)),e),e=Zx(t,e,n,r,i);break e}else for(Yt=Zn(e.stateNode.containerInfo.firstChild),Xt=e,Oe=!0,wr=null,r=fb(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if($i(),n===i){e=wn(t,e,r);break e}Rt(t,e,n,r)}e=e.child}return e;case 5:return yb(e),t===null&&em(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Qh(n,i)?o=null:a!==null&&Qh(n,a)&&(e.flags|=32),$b(t,e),Rt(t,e,o,r),e.child;case 6:return t===null&&em(e),null;case 13:return Hb(t,e,r);case 4:return wp(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=qi(e,null,n,r):Rt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:vr(n,i),Yx(t,e,n,i,r);case 7:return Rt(t,e,e.pendingProps,r),e.child;case 8:return Rt(t,e,e.pendingProps.children,r),e.child;case 12:return Rt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Ae(Vc,n._currentValue),n._currentValue=o,a!==null)if(Tr(a.value,o)){if(a.children===i.children&&!Bt.current){e=wn(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=hn(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),tm(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(U(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),tm(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Rt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Di(e,r),i=dr(i),n=n(i),e.flags|=1,Rt(t,e,n,r),e.child;case 14:return n=e.type,i=vr(n,e.pendingProps),i=vr(n.type,i),Jx(t,e,n,i,r);case 15:return zb(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:vr(n,i),lc(t,e),e.tag=1,$t(n)?(t=!0,Mc(e)):t=!1,Di(e,r),Vb(e,n,i),nm(e,n,i,r),am(null,e,n,!0,t,r);case 19:return Wb(t,e,r);case 22:return Bb(t,e,r)}throw Error(U(156,e.tag))};function lw(t,e){return Mv(t,e)}function cE(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(t,e,r,n){return new cE(t,e,r,n)}function Lp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uE(t){if(typeof t=="function")return Lp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tp)return 11;if(t===rp)return 14}return 2}function ns(t,e){var r=t.alternate;return r===null?(r=or(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function dc(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")Lp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case yi:return Vs(r.children,i,a,e);case ep:o=8,i|=8;break;case Th:return t=or(12,r,e,i|2),t.elementType=Th,t.lanes=a,t;case kh:return t=or(13,r,e,i),t.elementType=kh,t.lanes=a,t;case Ih:return t=or(19,r,e,i),t.elementType=Ih,t.lanes=a,t;case yv:return Ru(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gv:o=10;break e;case xv:o=9;break e;case tp:o=11;break e;case rp:o=14;break e;case Fn:o=16,n=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=or(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Vs(t,e,r,n){return t=or(7,t,n,e),t.lanes=r,t}function Ru(t,e,r,n){return t=or(22,t,n,e),t.elementType=yv,t.lanes=r,t.stateNode={isHidden:!1},t}function oh(t,e,r){return t=or(6,t,null,e),t.lanes=r,t}function lh(t,e,r){return e=or(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dE(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bd(0),this.expirationTimes=Bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bd(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Op(t,e,r,n,i,a,o,l,c){return t=new dE(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=or(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},bp(a),t}function hE(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xi,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function cw(t){if(!t)return cs;t=t._reactInternals;e:{if(ri(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var r=t.type;if($t(r))return cb(t,r,e)}return e}function uw(t,e,r,n,i,a,o,l,c){return t=Op(r,n,!0,t,i,a,o,l,c),t.context=cw(null),r=t.current,n=Dt(),i=rs(r),a=hn(n,i),a.callback=e??null,es(r,a,i),t.current.lanes=i,Wo(t,i,n),qt(t,n),t}function Pu(t,e,r,n){var i=e.current,a=Dt(),o=rs(i);return r=cw(r),e.context===null?e.context=r:e.pendingContext=r,e=hn(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=es(i,e,o),t!==null&&(Sr(t,i,o,a),ic(t,i,o)),o}function Kc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function c0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Vp(t,e){c0(t,e),(t=t.alternate)&&c0(t,e)}function mE(){return null}var dw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fp(t){this._internalRoot=t}Du.prototype.render=Fp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Pu(t,e,null,null)};Du.prototype.unmount=Fp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ws(function(){Pu(null,t,null,null)}),e[vn]=null}};function Du(t){this._internalRoot=t}Du.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bv();t={blockedOn:null,target:t,priority:e};for(var r=0;r<zn.length&&e!==0&&e<zn[r].priority;r++);zn.splice(r,0,t),r===0&&qv(t)}};function Up(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function u0(){}function pE(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=Kc(o);a.call(d)}}var o=uw(e,n,t,0,null,!1,!1,"",u0);return t._reactRootContainer=o,t[vn]=o.current,jo(t.nodeType===8?t.parentNode:t),Ws(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var d=Kc(c);l.call(d)}}var c=Op(t,0,!1,null,null,!1,!1,"",u0);return t._reactRootContainer=c,t[vn]=c.current,jo(t.nodeType===8?t.parentNode:t),Ws(function(){Pu(e,c,r,n)}),c}function Lu(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Kc(o);l.call(c)}}Pu(e,o,t,i)}else o=pE(r,e,t,i,n);return Kc(o)}Uv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ba(e.pendingLanes);r!==0&&(ip(e,r|1),qt(e,Ye()),!(ve&6)&&(Gi=Ye()+500,bs()))}break;case 13:Ws(function(){var n=bn(t,1);if(n!==null){var i=Dt();Sr(n,t,1,i)}}),Vp(t,1)}};ap=function(t){if(t.tag===13){var e=bn(t,134217728);if(e!==null){var r=Dt();Sr(e,t,134217728,r)}Vp(t,134217728)}};zv=function(t){if(t.tag===13){var e=rs(t),r=bn(t,e);if(r!==null){var n=Dt();Sr(r,t,e,n)}Vp(t,e)}};Bv=function(){return _e};$v=function(t,e){var r=_e;try{return _e=t,e()}finally{_e=r}};Fh=function(t,e,r){switch(e){case"input":if(Rh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Su(n);if(!i)throw Error(U(90));bv(n),Rh(n,i)}}}break;case"textarea":Nv(t,r);break;case"select":e=r.value,e!=null&&Ci(t,!!r.multiple,e,!1)}};Iv=Pp;Cv=Ws;var fE={usingClientEntryPoint:!1,Events:[Ko,Ni,Su,Tv,kv,Pp]},Va={findFiberByHostInstance:Ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gE={bundleType:Va.bundleType,version:Va.version,rendererPackageName:Va.rendererPackageName,rendererConfig:Va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pv(t),t===null?null:t.stateNode},findFiberByHostInstance:Va.findFiberByHostInstance||mE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{Nu=ql.inject(gE),Vr=ql}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fE;rr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Up(e))throw Error(U(200));return hE(t,e,null,r)};rr.createRoot=function(t,e){if(!Up(t))throw Error(U(299));var r=!1,n="",i=dw;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Op(t,1,!1,null,null,r,!1,n,i),t[vn]=e.current,jo(t.nodeType===8?t.parentNode:t),new Fp(e)};rr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Pv(e),t=t===null?null:t.stateNode,t};rr.flushSync=function(t){return Ws(t)};rr.hydrate=function(t,e,r){if(!Mu(e))throw Error(U(200));return Lu(null,t,e,!0,r)};rr.hydrateRoot=function(t,e,r){if(!Up(t))throw Error(U(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=dw;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=uw(e,null,t,1,r??null,i,!1,a,o),t[vn]=e.current,jo(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Du(e)};rr.render=function(t,e,r){if(!Mu(e))throw Error(U(200));return Lu(null,t,e,!1,r)};rr.unmountComponentAtNode=function(t){if(!Mu(t))throw Error(U(40));return t._reactRootContainer?(Ws(function(){Lu(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};rr.unstable_batchedUpdates=Pp;rr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Mu(r))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Lu(t,e,r,!1,n)};rr.version="18.3.1-next-f1338f8080-20240426";function hw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hw)}catch(t){console.error(t)}}hw(),hv.exports=rr;var xE=hv.exports,mw,d0=xE;mw=d0.createRoot,d0.hydrateRoot;/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var h0="popstate";function yE(t={}){function e(n,i){let{pathname:a,search:o,hash:l}=n.location;return ym("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Ro(i)}return bE(e,r,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vE(){return Math.random().toString(36).substring(2,10)}function m0(t,e){return{usr:t.state,key:t.key,idx:e}}function ym(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?aa(e):e,state:r,key:e&&e.key||n||vE()}}function Ro({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function aa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function bE(t,e,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function m(){l="POP";let N=h(),g=N==null?null:N-d;d=N,c&&c({action:l,location:b.location,delta:g})}function p(N,g){l="PUSH";let v=ym(b.location,N,g);d=h()+1;let j=m0(v,d),P=b.createHref(v);try{o.pushState(j,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(P)}a&&c&&c({action:l,location:b.location,delta:1})}function y(N,g){l="REPLACE";let v=ym(b.location,N,g);d=h();let j=m0(v,d),P=b.createHref(v);o.replaceState(j,"",P),a&&c&&c({action:l,location:b.location,delta:0})}function S(N){return wE(N)}let b={get action(){return l},get location(){return t(i,o)},listen(N){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(h0,m),c=N,()=>{i.removeEventListener(h0,m),c=null}},createHref(N){return e(i,N)},createURL:S,encodeLocation(N){let g=S(N);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:y,go(N){return o.go(N)}};return b}function wE(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Ro(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function pw(t,e,r="/"){return NE(t,e,r,!1)}function NE(t,e,r,n){let i=typeof e=="string"?aa(e):e,a=Nn(i.pathname||"/",r);if(a==null)return null;let o=fw(t);jE(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=DE(a);l=RE(o[c],d,n)}return l}function fw(t,e=[],r=[],n="",i=!1){let a=(o,l,c=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&c)return;Fe(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let m=mn([n,h.relativePath]),p=r.concat(h);o.children&&o.children.length>0&&(Fe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),fw(o.children,e,p,m,c)),!(o.path==null&&!o.index)&&e.push({path:m,score:CE(m,o.index),routesMeta:p})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))a(o,l);else for(let d of gw(o.path))a(o,l,!0,d)}),e}function gw(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=gw(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function jE(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:AE(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var _E=/^:[\w-]+$/,EE=3,SE=2,TE=1,kE=10,IE=-2,p0=t=>t==="*";function CE(t,e){let r=t.split("/"),n=r.length;return r.some(p0)&&(n+=IE),e&&(n+=SE),r.filter(i=>!p0(i)).reduce((i,a)=>i+(_E.test(a)?EE:a===""?TE:kE),n)}function AE(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function RE(t,e,r=!1){let{routesMeta:n}=t,i={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",m=Qc({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!m&&d&&r&&!n[n.length-1].route.index&&(m=Qc({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:mn([a,m.pathname]),pathnameBase:FE(mn([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=mn([a,m.pathnameBase]))}return o}function Qc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=PE(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((d,{paramName:h,isOptional:m},p)=>{if(h==="*"){let S=l[p]||"";o=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const y=l[p];return m&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function PE(t,e=!1,r=!0){mr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function DE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Nn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}var ME=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LE=t=>ME.test(t);function OE(t,e="/"){let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?aa(t):t,a;if(r)if(LE(r))a=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),mr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?a=f0(r.substring(1),"/"):a=f0(r,e)}else a=e;return{pathname:a,search:UE(n),hash:zE(i)}}function f0(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function ch(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VE(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function zp(t){let e=VE(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function Bp(t,e,r,n=!1){let i;typeof t=="string"?i=aa(t):(i={...t},Fe(!i.pathname||!i.pathname.includes("?"),ch("?","pathname","search",i)),Fe(!i.pathname||!i.pathname.includes("#"),ch("#","pathname","hash",i)),Fe(!i.search||!i.search.includes("#"),ch("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=r;else{let m=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}l=m>=0?e[m]:"/"}let c=OE(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var mn=t=>t.join("/").replace(/\/\/+/g,"/"),FE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function $E(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xw=["POST","PUT","PATCH","DELETE"];new Set(xw);var qE=["GET",...xw];new Set(qE);var oa=w.createContext(null);oa.displayName="DataRouter";var Ou=w.createContext(null);Ou.displayName="DataRouterState";w.createContext(!1);var yw=w.createContext({isTransitioning:!1});yw.displayName="ViewTransition";var HE=w.createContext(new Map);HE.displayName="Fetchers";var WE=w.createContext(null);WE.displayName="Await";var fr=w.createContext(null);fr.displayName="Navigation";var Yo=w.createContext(null);Yo.displayName="Location";var Zr=w.createContext({outlet:null,matches:[],isDataRoute:!1});Zr.displayName="Route";var $p=w.createContext(null);$p.displayName="RouteError";function GE(t,{relative:e}={}){Fe(la(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(fr),{hash:i,pathname:a,search:o}=Jo(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:mn([r,a])),n.createHref({pathname:l,search:o,hash:i})}function la(){return w.useContext(Yo)!=null}function gr(){return Fe(la(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Yo).location}var vw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bw(t){w.useContext(fr).static||w.useLayoutEffect(t)}function Cr(){let{isDataRoute:t}=w.useContext(Zr);return t?aS():KE()}function KE(){Fe(la(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(oa),{basename:e,navigator:r}=w.useContext(fr),{matches:n}=w.useContext(Zr),{pathname:i}=gr(),a=JSON.stringify(zp(n)),o=w.useRef(!1);return bw(()=>{o.current=!0}),w.useCallback((c,d={})=>{if(mr(o.current,vw),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=Bp(c,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:mn([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,a,i,t])}w.createContext(null);function Jo(t,{relative:e}={}){let{matches:r}=w.useContext(Zr),{pathname:n}=gr(),i=JSON.stringify(zp(r));return w.useMemo(()=>Bp(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function QE(t,e){return ww(t,e)}function ww(t,e,r,n,i){var v;Fe(la(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=w.useContext(fr),{matches:o}=w.useContext(Zr),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let j=m&&m.path||"";Nw(d,!m||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let p=gr(),y;if(e){let j=typeof e=="string"?aa(e):e;Fe(h==="/"||((v=j.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${j.pathname}" was given in the \`location\` prop.`),y=j}else y=p;let S=y.pathname||"/",b=S;if(h!=="/"){let j=h.replace(/^\//,"").split("/");b="/"+S.replace(/^\//,"").split("/").slice(j.length).join("/")}let N=pw(t,{pathname:b});mr(m||N!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),mr(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=eS(N&&N.map(j=>Object.assign({},j,{params:Object.assign({},c,j.params),pathname:mn([h,a.encodeLocation?a.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?h:mn([h,a.encodeLocation?a.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),o,r,n,i);return e&&g?w.createElement(Yo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},g):g}function YE(){let t=iS(),e=BE(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:a},"ErrorBoundary")," or"," ",w.createElement("code",{style:a},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),r?w.createElement("pre",{style:i},r):null,o)}var JE=w.createElement(YE,null),XE=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?w.createElement(Zr.Provider,{value:this.props.routeContext},w.createElement($p.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZE({routeContext:t,match:e,children:r}){let n=w.useContext(oa);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Zr.Provider,{value:t},r)}function eS(t,e=[],r=null,n=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,o=r==null?void 0:r.errors;if(o!=null){let h=a.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);Fe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,c=-1;if(r)for(let h=0;h<a.length;h++){let m=a[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=h),m.route.id){let{loaderData:p,errors:y}=r,S=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||S){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let d=r&&n?(h,m)=>{var p,y;n(h,{location:r.location,params:((y=(p=r.matches)==null?void 0:p[0])==null?void 0:y.params)??{},unstable_pattern:$E(r.matches),errorInfo:m})}:void 0;return a.reduceRight((h,m,p)=>{let y,S=!1,b=null,N=null;r&&(y=o&&m.route.id?o[m.route.id]:void 0,b=m.route.errorElement||JE,l&&(c<0&&p===0?(Nw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,N=null):c===p&&(S=!0,N=m.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,p+1)),v=()=>{let j;return y?j=b:S?j=N:m.route.Component?j=w.createElement(m.route.Component,null):m.route.element?j=m.route.element:j=h,w.createElement(ZE,{match:m,routeContext:{outlet:h,matches:g,isDataRoute:r!=null},children:j})};return r&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?w.createElement(XE,{location:r.location,revalidation:r.revalidation,component:b,error:y,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:d}):v()},null)}function qp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tS(t){let e=w.useContext(oa);return Fe(e,qp(t)),e}function rS(t){let e=w.useContext(Ou);return Fe(e,qp(t)),e}function nS(t){let e=w.useContext(Zr);return Fe(e,qp(t)),e}function Hp(t){let e=nS(t),r=e.matches[e.matches.length-1];return Fe(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function sS(){return Hp("useRouteId")}function iS(){var n;let t=w.useContext($p),e=rS("useRouteError"),r=Hp("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function aS(){let{router:t}=tS("useNavigate"),e=Hp("useNavigate"),r=w.useRef(!1);return bw(()=>{r.current=!0}),w.useCallback(async(i,a={})=>{mr(r.current,vw),r.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var g0={};function Nw(t,e,r){!e&&!g0[t]&&(g0[t]=!0,mr(!1,r))}w.memo(oS);function oS({routes:t,future:e,state:r,unstable_onError:n}){return ww(t,void 0,r,n,e)}function ao({to:t,replace:e,state:r,relative:n}){Fe(la(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=w.useContext(fr);mr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=w.useContext(Zr),{pathname:o}=gr(),l=Cr(),c=Bp(t,zp(a),o,n==="path"),d=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(d),{replace:e,state:r,relative:n})},[l,d,n,e,r]),null}function le(t){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lS({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){Fe(!la(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:l,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[l,i,a,o]);typeof r=="string"&&(r=aa(r));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:y="default"}=r,S=w.useMemo(()=>{let b=Nn(d,l);return b==null?null:{location:{pathname:b,search:h,hash:m,state:p,key:y},navigationType:n}},[l,d,h,m,p,y,n]);return mr(S!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:w.createElement(fr.Provider,{value:c},w.createElement(Yo.Provider,{children:e,value:S}))}function cS({children:t,location:e}){return QE(vm(t),e)}function vm(t,e=[]){let r=[];return w.Children.forEach(t,(n,i)=>{if(!w.isValidElement(n))return;let a=[...e,i];if(n.type===w.Fragment){r.push.apply(r,vm(n.props.children,a));return}Fe(n.type===le,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=vm(n.props.children,a)),r.push(o)}),r}var hc="get",mc="application/x-www-form-urlencoded";function Vu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function uS(t){return Vu(t)&&t.tagName.toLowerCase()==="button"}function dS(t){return Vu(t)&&t.tagName.toLowerCase()==="form"}function hS(t){return Vu(t)&&t.tagName.toLowerCase()==="input"}function mS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pS(t,e){return t.button===0&&(!e||e==="_self")&&!mS(t)}var Hl=null;function fS(){if(Hl===null)try{new FormData(document.createElement("form"),0),Hl=!1}catch{Hl=!0}return Hl}var gS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uh(t){return t!=null&&!gS.has(t)?(mr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mc}"`),null):t}function xS(t,e){let r,n,i,a,o;if(dS(t)){let l=t.getAttribute("action");n=l?Nn(l,e):null,r=t.getAttribute("method")||hc,i=uh(t.getAttribute("enctype"))||mc,a=new FormData(t)}else if(uS(t)||hS(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?Nn(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||hc,i=uh(t.getAttribute("formenctype"))||uh(l.getAttribute("enctype"))||mc,a=new FormData(l,t),!fS()){let{name:d,type:h,value:m}=t;if(h==="image"){let p=d?`${d}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else d&&a.append(d,m)}}else{if(Vu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=hc,n=null,i=mc,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yS(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Nn(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function vS(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function wS(t,e,r){let n=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await vS(a,r);return o.links?o.links():[]}return[]}));return ES(n.flat(1).filter(bS).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function x0(t,e,r,n,i,a){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>{var h;return r[d].pathname!==c.pathname||((h=r[d].route.path)==null?void 0:h.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):a==="data"?e.filter((c,d)=>{var m;let h=n.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=r[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function NS(t,e,{includeHydrateFallback:r}={}){return jS(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function jS(t){return[...new Set(t)]}function _S(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function ES(t,e){let r=new Set;return new Set(e),t.reduce((n,i)=>{let a=JSON.stringify(_S(i));return r.has(a)||(r.add(a),n.push({key:a,link:i})),n},[])}function jw(){let t=w.useContext(oa);return Wp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function SS(){let t=w.useContext(Ou);return Wp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Gp=w.createContext(void 0);Gp.displayName="FrameworkContext";function _w(){let t=w.useContext(Gp);return Wp(t,"You must render this element inside a <HydratedRouter> element"),t}function TS(t,e){let r=w.useContext(Gp),[n,i]=w.useState(!1),[a,o]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=e,p=w.useRef(null);w.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let b=g=>{g.forEach(v=>{o(v.isIntersecting)})},N=new IntersectionObserver(b,{threshold:.5});return p.current&&N.observe(p.current),()=>{N.disconnect()}}},[t]),w.useEffect(()=>{if(n){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[n]);let y=()=>{i(!0)},S=()=>{i(!1),o(!1)};return r?t!=="intent"?[a,p,{}]:[a,p,{onFocus:Fa(l,y),onBlur:Fa(c,S),onMouseEnter:Fa(d,y),onMouseLeave:Fa(h,S),onTouchStart:Fa(m,y)}]:[!1,p,{}]}function Fa(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function kS({page:t,...e}){let{router:r}=jw(),n=w.useMemo(()=>pw(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?w.createElement(CS,{page:t,matches:n,...e}):null}function IS(t){let{manifest:e,routeModules:r}=_w(),[n,i]=w.useState([]);return w.useEffect(()=>{let a=!1;return wS(t,e,r).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,r]),n}function CS({page:t,matches:e,...r}){let n=gr(),{manifest:i,routeModules:a}=_w(),{basename:o}=jw(),{loaderData:l,matches:c}=SS(),d=w.useMemo(()=>x0(t,e,c,i,n,"data"),[t,e,c,i,n]),h=w.useMemo(()=>x0(t,e,c,i,n,"assets"),[t,e,c,i,n]),m=w.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let S=new Set,b=!1;if(e.forEach(g=>{var j;let v=i.routes[g.route.id];!v||!v.hasLoader||(!d.some(P=>P.route.id===g.route.id)&&g.route.id in l&&((j=a[g.route.id])!=null&&j.shouldRevalidate)||v.hasClientLoader?b=!0:S.add(g.route.id))}),S.size===0)return[];let N=yS(t,o,"data");return b&&S.size>0&&N.searchParams.set("_routes",e.filter(g=>S.has(g.route.id)).map(g=>g.route.id).join(",")),[N.pathname+N.search]},[o,l,n,i,d,e,t,a]),p=w.useMemo(()=>NS(h,i),[h,i]),y=IS(h);return w.createElement(w.Fragment,null,m.map(S=>w.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...r})),p.map(S=>w.createElement("link",{key:S,rel:"modulepreload",href:S,...r})),y.map(({key:S,link:b})=>w.createElement("link",{key:S,nonce:r.nonce,...b})))}function AS(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Ew=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ew&&(window.__reactRouterVersion="7.10.1")}catch{}function RS({basename:t,children:e,unstable_useTransitions:r,window:n}){let i=w.useRef();i.current==null&&(i.current=yE({window:n,v5Compat:!0}));let a=i.current,[o,l]=w.useState({action:a.action,location:a.location}),c=w.useCallback(d=>{r===!1?l(d):w.startTransition(()=>l(d))},[r]);return w.useLayoutEffect(()=>a.listen(c),[a,c]),w.createElement(lS,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:r===!0})}var Sw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z=w.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:i,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:m,...p},y){let{basename:S,unstable_useTransitions:b}=w.useContext(fr),N=typeof d=="string"&&Sw.test(d),g,v=!1;if(typeof d=="string"&&N&&(g=d,Ew))try{let R=new URL(window.location.href),k=d.startsWith("//")?new URL(R.protocol+d):new URL(d),A=Nn(k.pathname,S);k.origin===R.origin&&A!=null?d=A+k.search+k.hash:v=!0}catch{mr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=GE(d,{relative:i}),[P,M,D]=TS(n,p),T=LS(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:m,unstable_useTransitions:b});function _(R){e&&e(R),R.defaultPrevented||T(R)}let I=w.createElement("a",{...p,...D,href:g||j,onClick:v||a?e:_,ref:AS(y,M),target:c,"data-discover":!N&&r==="render"?"true":void 0});return P&&!N?w.createElement(w.Fragment,null,I,w.createElement(kS,{page:j})):I});Z.displayName="Link";var PS=w.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:i=!1,style:a,to:o,viewTransition:l,children:c,...d},h){let m=Jo(o,{relative:d.relative}),p=gr(),y=w.useContext(Ou),{navigator:S,basename:b}=w.useContext(fr),N=y!=null&&zS(m)&&l===!0,g=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,v=p.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(v=v.toLowerCase(),j=j?j.toLowerCase():null,g=g.toLowerCase()),j&&b&&(j=Nn(j,b)||j);const P=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let M=v===g||!i&&v.startsWith(g)&&v.charAt(P)==="/",D=j!=null&&(j===g||!i&&j.startsWith(g)&&j.charAt(g.length)==="/"),T={isActive:M,isPending:D,isTransitioning:N},_=M?e:void 0,I;typeof n=="function"?I=n(T):I=[n,M?"active":null,D?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(T):a;return w.createElement(Z,{...d,"aria-current":_,className:I,ref:h,style:R,to:o,viewTransition:l},typeof c=="function"?c(T):c)});PS.displayName="NavLink";var DS=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:i,state:a,method:o=hc,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:m,...p},y)=>{let{unstable_useTransitions:S}=w.useContext(fr),b=FS(),N=US(l,{relative:d}),g=o.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&Sw.test(l),j=P=>{if(c&&c(P),P.defaultPrevented)return;P.preventDefault();let M=P.nativeEvent.submitter,D=(M==null?void 0:M.getAttribute("formmethod"))||o,T=()=>b(M||P.currentTarget,{fetcherKey:e,method:D,navigate:r,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:m});S&&r!==!1?w.startTransition(()=>T()):T()};return w.createElement("form",{ref:y,method:g,action:N,onSubmit:n?c:j,...p,"data-discover":!v&&t==="render"?"true":void 0})});DS.displayName="Form";function MS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tw(t){let e=w.useContext(oa);return Fe(e,MS(t)),e}function LS(t,{target:e,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:o,unstable_useTransitions:l}={}){let c=Cr(),d=gr(),h=Jo(t,{relative:a});return w.useCallback(m=>{if(pS(m,e)){m.preventDefault();let p=r!==void 0?r:Ro(d)===Ro(h),y=()=>c(t,{replace:p,state:n,preventScrollReset:i,relative:a,viewTransition:o});l?w.startTransition(()=>y()):y()}},[d,c,h,r,n,e,t,i,a,o,l])}var OS=0,VS=()=>`__${String(++OS)}__`;function FS(){let{router:t}=Tw("useSubmit"),{basename:e}=w.useContext(fr),r=sS(),n=t.fetch,i=t.navigate;return w.useCallback(async(a,o={})=>{let{action:l,method:c,encType:d,formData:h,body:m}=xS(a,e);if(o.navigate===!1){let p=o.fetcherKey||VS();await n(p,r,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await i(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,i,e,r])}function US(t,{relative:e}={}){let{basename:r}=w.useContext(fr),n=w.useContext(Zr);Fe(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Jo(t||".",{relative:e})},o=gr();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(m=>m).forEach(m=>l.append("index",m));let h=l.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:mn([r,a.pathname])),Ro(a)}function zS(t,{relative:e}={}){let r=w.useContext(yw);Fe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Tw("useViewTransitionState"),i=Jo(t,{relative:e});if(!r.isTransitioning)return!1;let a=Nn(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Nn(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Qc(i.pathname,o)!=null||Qc(i.pathname,a)!=null}const BS=()=>{};var y0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},$S=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],l=t[r++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Iw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=a>>2,m=(a&3)<<4|l>>4;let p=(l&15)<<2|d>>6,y=d&63;c||(y=64,o||(p=64)),n.push(r[h],r[m],r[p],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$S(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],l=i<t.length?r[t.charAt(i)]:0;++i;const d=i<t.length?r[t.charAt(i)]:64;++i;const m=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||l==null||d==null||m==null)throw new qS;const p=a<<2|l>>4;if(n.push(p),d!==64){const y=l<<4&240|d>>2;if(n.push(y),m!==64){const S=d<<6&192|m;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HS=function(t){const e=kw(t);return Iw.encodeByteArray(e,!0)},Yc=function(t){return HS(t).replace(/\./g,"")},Cw=function(t){try{return Iw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=()=>WS().__FIREBASE_DEFAULTS__,KS=()=>{if(typeof process>"u"||typeof y0>"u")return;const t=y0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Cw(t[1]);return e&&JSON.parse(e)},Fu=()=>{try{return BS()||GS()||KS()||QS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Aw=t=>{var e,r;return(r=(e=Fu())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},Rw=t=>{const e=Aw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Pw=()=>{var t;return(t=Fu())==null?void 0:t.config},Dw=t=>{var e;return(e=Fu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Yc(JSON.stringify(r)),Yc(JSON.stringify(o)),""].join(".")}const oo={};function JS(){const t={prod:[],emulator:[]};for(const e of Object.keys(oo))oo[e]?t.emulator.push(e):t.prod.push(e);return t}function XS(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let v0=!1;function Qp(t,e){if(typeof window>"u"||typeof document>"u"||!ni(window.location.host)||oo[t]===e||oo[t]||v0)return;oo[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",a=JS().prod.length>0;function o(){const p=document.getElementById(n);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{v0=!0,o()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=XS(n),y=r("text"),S=document.getElementById(y)||document.createElement("span"),b=r("learnmore"),N=document.getElementById(b)||document.createElement("a"),g=r("preprendIcon"),v=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const j=p.element;l(j),h(N,b);const P=d();c(v,g),j.append(v,S,N,P),document.body.appendChild(j)}a?(S.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function e4(){var e;const t=(e=Fu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function r4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function n4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s4(){const t=kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function i4(){return!e4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function a4(){try{return typeof indexedDB=="object"}catch{return!1}}function o4(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="FirebaseError";class en extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=l4,Object.setPrototypeOf(this,en.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xo.prototype.create)}}class Xo{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?c4(a,n):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new en(i,l,n)}}function c4(t,e){return t.replace(u4,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const u4=/\{\$([^}]+)}/g;function d4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gs(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(b0(a)&&b0(o)){if(!Gs(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function b0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function qa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Ha(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function h4(t,e){const r=new m4(t,e);return r.subscribe.bind(r)}class m4{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");p4(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=dh),i.error===void 0&&(i.error=dh),i.complete===void 0&&(i.complete=dh);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p4(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function dh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t){return t&&t._delegate?t._delegate:t}class us{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new YS;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(x4(e))try{this.getOrInitializeService({instanceIdentifier:Rs})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rs){return this.instances.has(e)}getOptions(e=Rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:g4(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Rs){return this.component?this.component.multipleInstances?e:Rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g4(t){return t===Rs?void 0:t}function x4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new f4(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const v4={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},b4=me.INFO,w4={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},N4=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=w4[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yp{constructor(e){this.name=e,this._logLevel=b4,this._logHandler=N4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?v4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const j4=(t,e)=>e.some(r=>t instanceof r);let w0,N0;function _4(){return w0||(w0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E4(){return N0||(N0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lw=new WeakMap,bm=new WeakMap,Ow=new WeakMap,hh=new WeakMap,Jp=new WeakMap;function S4(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(ss(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&Lw.set(r,t)}).catch(()=>{}),Jp.set(e,t),e}function T4(t){if(bm.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});bm.set(t,e)}let wm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return bm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ow.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ss(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function k4(t){wm=t(wm)}function I4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(mh(this),e,...r);return Ow.set(n,e.sort?e.sort():[e]),ss(n)}:E4().includes(t)?function(...e){return t.apply(mh(this),e),ss(Lw.get(this))}:function(...e){return ss(t.apply(mh(this),e))}}function C4(t){return typeof t=="function"?I4(t):(t instanceof IDBTransaction&&T4(t),j4(t,_4())?new Proxy(t,wm):t)}function ss(t){if(t instanceof IDBRequest)return S4(t);if(hh.has(t))return hh.get(t);const e=C4(t);return e!==t&&(hh.set(t,e),Jp.set(e,t)),e}const mh=t=>Jp.get(t);function A4(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=ss(o);return n&&o.addEventListener("upgradeneeded",c=>{n(ss(o.result),c.oldVersion,c.newVersion,ss(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const R4=["get","getKey","getAll","getAllKeys","count"],P4=["put","add","delete","clear"],ph=new Map;function j0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ph.get(e))return ph.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=P4.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||R4.includes(r)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),i&&c.done]))[0]};return ph.set(e,a),a}k4(t=>({...t,get:(e,r,n)=>j0(e,r)||t.get(e,r,n),has:(e,r)=>!!j0(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(M4(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function M4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nm="@firebase/app",_0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new Yp("@firebase/app"),L4="@firebase/app-compat",O4="@firebase/analytics-compat",V4="@firebase/analytics",F4="@firebase/app-check-compat",U4="@firebase/app-check",z4="@firebase/auth",B4="@firebase/auth-compat",$4="@firebase/database",q4="@firebase/data-connect",H4="@firebase/database-compat",W4="@firebase/functions",G4="@firebase/functions-compat",K4="@firebase/installations",Q4="@firebase/installations-compat",Y4="@firebase/messaging",J4="@firebase/messaging-compat",X4="@firebase/performance",Z4="@firebase/performance-compat",eT="@firebase/remote-config",tT="@firebase/remote-config-compat",rT="@firebase/storage",nT="@firebase/storage-compat",sT="@firebase/firestore",iT="@firebase/ai",aT="@firebase/firestore-compat",oT="firebase",lT="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",cT={[Nm]:"fire-core",[L4]:"fire-core-compat",[V4]:"fire-analytics",[O4]:"fire-analytics-compat",[U4]:"fire-app-check",[F4]:"fire-app-check-compat",[z4]:"fire-auth",[B4]:"fire-auth-compat",[$4]:"fire-rtdb",[q4]:"fire-data-connect",[H4]:"fire-rtdb-compat",[W4]:"fire-fn",[G4]:"fire-fn-compat",[K4]:"fire-iid",[Q4]:"fire-iid-compat",[Y4]:"fire-fcm",[J4]:"fire-fcm-compat",[X4]:"fire-perf",[Z4]:"fire-perf-compat",[eT]:"fire-rc",[tT]:"fire-rc-compat",[rT]:"fire-gcs",[nT]:"fire-gcs-compat",[sT]:"fire-fst",[aT]:"fire-fst-compat",[iT]:"fire-vertex","fire-js":"fire-js",[oT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Map,uT=new Map,_m=new Map;function E0(t,e){try{t.container.addComponent(e)}catch(r){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ks(t){const e=t.name;if(_m.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;_m.set(e,t);for(const r of Jc.values())E0(r,t);for(const r of uT.values())E0(r,t);return!0}function Uu(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Qt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new Xo("app","Firebase",dT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=lT;function Vw(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:jm,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw is.create("bad-app-name",{appName:String(i)});if(r||(r=Pw()),!r)throw is.create("no-options");const a=Jc.get(i);if(a){if(Gs(r,a.options)&&Gs(n,a.config))return a;throw is.create("duplicate-app",{appName:i})}const o=new y4(i);for(const c of _m.values())o.addComponent(c);const l=new hT(r,n,o);return Jc.set(i,l),l}function Xp(t=jm){const e=Jc.get(t);if(!e&&t===jm&&Pw())return Vw();if(!e)throw is.create("no-app",{appName:t});return e}function Ur(t,e,r){let n=cT[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${n}" with version "${e}":`];i&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(o.join(" "));return}Ks(new us(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="firebase-heartbeat-database",pT=1,Po="firebase-heartbeat-store";let fh=null;function Fw(){return fh||(fh=A4(mT,pT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Po)}catch(r){console.warn(r)}}}}).catch(t=>{throw is.create("idb-open",{originalErrorMessage:t.message})})),fh}async function fT(t){try{const r=(await Fw()).transaction(Po),n=await r.objectStore(Po).get(Uw(t));return await r.done,n}catch(e){if(e instanceof en)jn.warn(e.message);else{const r=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jn.warn(r.message)}}}async function S0(t,e){try{const n=(await Fw()).transaction(Po,"readwrite");await n.objectStore(Po).put(e,Uw(t)),await n.done}catch(r){if(r instanceof en)jn.warn(r.message);else{const n=is.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});jn.warn(n.message)}}}function Uw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=1024,xT=30;class yT{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new bT(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=T0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>xT){const o=wT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){jn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=T0(),{heartbeatsToSend:n,unsentEntries:i}=vT(this._heartbeatsCache.heartbeats),a=Yc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return jn.warn(r),""}}}function T0(){return new Date().toISOString().substring(0,10)}function vT(t,e=gT){const r=[];let n=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),k0(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),k0(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class bT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return a4()?o4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await fT(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return S0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return S0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function k0(t){return Yc(JSON.stringify({version:2,heartbeats:t})).length}function wT(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t){Ks(new us("platform-logger",e=>new D4(e),"PRIVATE")),Ks(new us("heartbeat",e=>new yT(e),"PRIVATE")),Ur(Nm,_0,t),Ur(Nm,_0,"esm2020"),Ur("fire-js","")}NT("");function zw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jT=zw,Bw=new Xo("auth","Firebase",zw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Yp("@firebase/auth");function _T(t,...e){Xc.logLevel<=me.WARN&&Xc.warn(`Auth (${si}): ${t}`,...e)}function pc(t,...e){Xc.logLevel<=me.ERROR&&Xc.error(`Auth (${si}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,...e){throw Zp(t,...e)}function zr(t,...e){return Zp(t,...e)}function $w(t,e,r){const n={...jT(),[e]:r};return new Xo("auth","Firebase",n).create(e,{appName:t.name})}function pn(t){return $w(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zp(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Bw.create(t,...e)}function te(t,e,...r){if(!t)throw Zp(e,...r)}function un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pc(e),new Error(e)}function _n(t,e){t||un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function ET(){return I0()==="http:"||I0()==="https:"}function I0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ET()||r4()||"connection"in navigator)?navigator.onLine:!0}function TT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,r){this.shortDelay=e,this.longDelay=r,_n(r>e,"Short delay should be less than long delay!"),this.isMobile=ZS()||n4()}get(){return ST()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t,e){_n(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CT=new el(3e4,6e4);function Cn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ar(t,e,r,n,i={}){return Hw(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=Zo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...a};return t4()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ni(t.emulatorConfig.host)&&(d.credentials="include"),qw.fetch()(await Ww(t,t.config.apiHost,r,l),d)})}async function Hw(t,e,r){t._canInitEmulator=!1;const n={...kT,...e};try{const i=new RT(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Wl(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Wl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Wl(t,"user-disabled",o);const h=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw $w(t,h,d);kr(t,h)}}catch(i){if(i instanceof en)throw i;kr(t,"network-request-failed",{message:String(i)})}}async function tl(t,e,r,n,i={}){const a=await Ar(t,e,r,n,i);return"mfaPendingCredential"in a&&kr(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function Ww(t,e,r,n){const i=`${e}${r}?${n}`,a=t,o=a.config.emulator?ef(t.config,i):`${t.config.apiScheme}://${i}`;return IT.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function AT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(zr(this.auth,"network-request-failed")),CT.get())})}}function Wl(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=zr(t,e,n);return i.customData._tokenResponse=r,i}function C0(t){return t!==void 0&&t.enterprise!==void 0}class PT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return AT(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DT(t,e){return Ar(t,"GET","/v2/recaptchaConfig",Cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(t,e){return Ar(t,"POST","/v1/accounts:delete",e)}async function Zc(t,e){return Ar(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LT(t,e=!1){const r=$e(t),n=await r.getIdToken(e),i=tf(n);te(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:lo(gh(i.auth_time)),issuedAtTime:lo(gh(i.iat)),expirationTime:lo(gh(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function gh(t){return Number(t)*1e3}function tf(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return pc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Cw(r);return i?JSON.parse(i):(pc("Failed to decode base64 JWT payload"),null)}catch(i){return pc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function A0(t){const e=tf(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof en&&OT(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function OT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t){var m;const e=t.auth,r=await t.getIdToken(),n=await Qs(t,Zc(e,{idToken:r}));te(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const a=(m=i.providerUserInfo)!=null&&m.length?Gw(i.providerUserInfo):[],o=UT(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function FT(t){const e=$e(t);await eu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UT(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Gw(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zT(t,e){const r=await Hw(t,{},async()=>{const n=Zo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await Ww(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&ni(t.emulatorConfig.host)&&(c.credentials="include"),qw.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function BT(t,e){return Ar(t,"POST","/v2/accounts:revokeToken",Cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){te(e.length!==0,"internal-error");const r=A0(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await zT(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,o=new Li;return n&&(te(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(te(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Li,this.toJSON())}_performRefresh(){return un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nr{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new VT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Sm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Qs(this,this.stsTokenManager.getToken(this.auth,e));return te(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return LT(this,e)}reload(){return FT(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await eu(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(pn(this.auth));const e=await this.getIdToken();return await Qs(this,MT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,a=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,d=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:y,providerData:S,stsTokenManager:b}=r;te(m&&b,e,"internal-error");const N=Li.fromJSON(this.name,b);te(typeof m=="string",e,"internal-error"),Vn(n,e.name),Vn(i,e.name),te(typeof p=="boolean",e,"internal-error"),te(typeof y=="boolean",e,"internal-error"),Vn(a,e.name),Vn(o,e.name),Vn(l,e.name),Vn(c,e.name),Vn(d,e.name),Vn(h,e.name);const g=new Nr({uid:m,auth:e,email:i,emailVerified:p,displayName:n,isAnonymous:y,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:N,createdAt:d,lastLoginAt:h});return S&&Array.isArray(S)&&(g.providerData=S.map(v=>({...v}))),c&&(g._redirectEventId=c),g}static async _fromIdTokenResponse(e,r,n=!1){const i=new Li;i.updateFromServerResponse(r);const a=new Nr({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await eu(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];te(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Gw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new Li;l.updateFromIdToken(n);const c=new Nr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Sm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map;function dn(t){_n(t instanceof Function,"Expected a class definition");let e=R0.get(t);return e?(_n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,R0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Kw.type="NONE";const P0=Kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,r){return`firebase:${t}:${e}:${r}`}class Oi{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=fc(this.userKey,i.apiKey,a),this.fullPersistenceKey=fc("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Zc(this.auth,{idToken:e}).catch(()=>{});return r?Nr._fromGetAccountInfoResponse(this.auth,r,e):null}return Nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Oi(dn(P0),e,n);const i=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||dn(P0);const o=fc(n,e.config.apiKey,e.name);let l=null;for(const d of r)try{const h=await d._get(o);if(h){let m;if(typeof h=="string"){const p=await Zc(e,{idToken:h}).catch(()=>{});if(!p)break;m=await Nr._fromGetAccountInfoResponse(e,p,h)}else m=Nr._fromJSON(e,h);d!==a&&(l=m),a=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Oi(a,e,n):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Oi(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eN(e))return"Blackberry";if(tN(e))return"Webos";if(Yw(e))return"Safari";if((e.includes("chrome/")||Jw(e))&&!e.includes("edge/"))return"Chrome";if(Zw(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Qw(t=kt()){return/firefox\//i.test(t)}function Yw(t=kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jw(t=kt()){return/crios\//i.test(t)}function Xw(t=kt()){return/iemobile/i.test(t)}function Zw(t=kt()){return/android/i.test(t)}function eN(t=kt()){return/blackberry/i.test(t)}function tN(t=kt()){return/webos/i.test(t)}function rf(t=kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $T(t=kt()){var e;return rf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function qT(){return s4()&&document.documentMode===10}function rN(t=kt()){return rf(t)||Zw(t)||tN(t)||eN(t)||/windows phone/i.test(t)||Xw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t,e=[]){let r;switch(t){case"Browser":r=D0(kt());break;case"Worker":r=`${D0(kt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${si}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WT(t,e={}){return Ar(t,"GET","/v2/passwordPolicy",Cn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=6;class KT{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??GT,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M0(this),this.idTokenSubscription=new M0(this),this.beforeStateQueue=new HT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=dn(r)),this._initializationPromise=this.queue(async()=>{var n,i,a;if(!this._deleted&&(this.persistenceManager=await Oi.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Zc(this,{idToken:e}),n=await Nr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Qt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await eu(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(pn(this));const r=e?$e(e):null;return r&&te(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(pn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(pn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WT(this),r=new KT(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xo("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await BT(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&dn(e)||this._popupRedirectResolver;te(r,this,"argument-error"),this.redirectPersistenceManager=await Oi.create(this,[dn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,i);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&_T(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ws(t){return $e(t)}class M0{constructor(e){this.auth=e,this.observer=null,this.addObserver=h4(r=>this.observer=r)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YT(t){zu=t}function sN(t){return zu.loadJS(t)}function JT(){return zu.recaptchaEnterpriseScript}function XT(){return zu.gapiScript}function ZT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ek{constructor(){this.enterprise=new tk}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class tk{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const rk="recaptcha-enterprise",iN="NO_RECAPTCHA";class nk{constructor(e){this.type=rk,this.auth=ws(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{DT(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new PT(c);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function i(a,o,l){const c=window.grecaptcha;C0(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(iN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ek().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{n(this.auth).then(l=>{if(!r&&C0(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=JT();c.length!==0&&(c+=l),sN(c).then(()=>{i(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function L0(t,e,r,n=!1,i=!1){const a=new nk(t);let o;if(i)o=iN;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function tu(t,e,r,n,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await L0(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await L0(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t,e){const r=Uu(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(Gs(a,e??{}))return i;kr(i,"already-initialized")}return r.initialize({options:e})}function ik(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function ak(t,e,r){const n=ws(t);te(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=aN(e),{host:o,port:l}=ok(e),c=l===null?"":`:${l}`,d={url:`${a}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){te(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),te(Gs(d,n.config.emulator)&&Gs(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,ni(o)?(Kp(`${a}//${o}${c}`),Qp("Auth",!0)):lk()}function aN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ok(t){const e=aN(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:O0(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:O0(o)}}}function O0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lk(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return un("not implemented")}_getIdTokenResponse(e){return un("not implemented")}_linkToIdToken(e,r){return un("not implemented")}_getReauthenticationResolver(e){return un("not implemented")}}async function ck(t,e){return Ar(t,"POST","/v1/accounts:update",e)}async function uk(t,e){return Ar(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e){return tl(t,"POST","/v1/accounts:signInWithPassword",Cn(t,e))}async function hk(t,e){return Ar(t,"POST","/v1/accounts:sendOobCode",Cn(t,e))}async function mk(t,e){return hk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(t,e){return tl(t,"POST","/v1/accounts:signInWithEmailLink",Cn(t,e))}async function fk(t,e){return tl(t,"POST","/v1/accounts:signInWithEmailLink",Cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends nf{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new Do(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Do(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tu(e,r,"signInWithPassword",dk);case"emailLink":return pk(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tu(e,n,"signUpPassword",uk);case"emailLink":return fk(e,{idToken:r,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vi(t,e){return tl(t,"POST","/v1/accounts:signInWithIdp",Cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="http://localhost";class Ys extends nf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):kr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...a}=r;if(!n||!i)return null;const o=new Ys(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Vi(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Vi(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Vi(e,r)}buildRequest(){const e={requestUri:gk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Zo(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yk(t){const e=qa(Ha(t)).link,r=e?qa(Ha(e)).deep_link_id:null,n=qa(Ha(t)).deep_link_id;return(n?qa(Ha(n)).link:null)||n||r||e||t}class sf{constructor(e){const r=qa(Ha(e)),n=r.apiKey??null,i=r.oobCode??null,a=xk(r.mode??null);te(n&&i&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=yk(e);try{return new sf(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.providerId=ca.PROVIDER_ID}static credential(e,r){return Do._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=sf.parseLink(r);return te(n,"argument-error"),Do._fromEmailAndCode(e,n.code,n.tenantId)}}ca.PROVIDER_ID="password";ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends oN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends rl{constructor(){super("facebook.com")}static credential(e){return Ys._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $n.credential(e.oauthAccessToken)}catch{return null}}}$n.FACEBOOK_SIGN_IN_METHOD="facebook.com";$n.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ys._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return qn.credential(r,n)}catch{return null}}}qn.GOOGLE_SIGN_IN_METHOD="google.com";qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends rl{constructor(){super("github.com")}static credential(e){return Ys._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hn.credential(e.oauthAccessToken)}catch{return null}}}Hn.GITHUB_SIGN_IN_METHOD="github.com";Hn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends rl{constructor(){super("twitter.com")}static credential(e,r){return Ys._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Wn.credential(r,n)}catch{return null}}}Wn.TWITTER_SIGN_IN_METHOD="twitter.com";Wn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e){return tl(t,"POST","/v1/accounts:signUp",Cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await Nr._fromIdTokenResponse(e,n,i),o=V0(n);return new Js({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=V0(n);return new Js({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function V0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends en{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ru.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new ru(e,r,n,i)}}function lN(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ru._fromErrorAndOperation(t,a,e,n):a})}async function bk(t,e,r=!1){const n=await Qs(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Js._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(t,e,r=!1){const{auth:n}=t;if(Qt(n.app))return Promise.reject(pn(n));const i="reauthenticate";try{const a=await Qs(t,lN(n,i,e,t),r);te(a.idToken,n,"internal-error");const o=tf(a.idToken);te(o,n,"internal-error");const{sub:l}=o;return te(t.uid===l,n,"user-mismatch"),Js._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&kr(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t,e,r=!1){if(Qt(t.app))return Promise.reject(pn(t));const n="signIn",i=await lN(t,n,e),a=await Js._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function Nk(t,e){return cN(ws(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t){const e=ws(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jk(t,e,r){const n=ws(t);await tu(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",mk)}async function _k(t,e,r){if(Qt(t.app))return Promise.reject(pn(t));const n=ws(t),o=await tu(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vk).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&uN(t),c}),l=await Js._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function Ek(t,e,r){return Qt(t.app)?Promise.reject(pn(t)):Nk($e(t),ca.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&uN(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(t,e){return Ar(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=$e(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await Qs(n,Sk(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function af(t,e){return Tk($e(t),null,e)}async function Tk(t,e,r){const{auth:n}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};r&&(a.password=r);const o=await Qs(t,ck(n,a));await t._updateTokensIfNecessary(o,!0)}function kk(t,e,r,n){return $e(t).onIdTokenChanged(e,r,n)}function Ik(t,e,r){return $e(t).beforeAuthStateChanged(e,r)}function Ck(t,e,r,n){return $e(t).onAuthStateChanged(e,r,n)}function Ak(t){return $e(t).signOut()}const su="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(su,"1"),this.storage.removeItem(su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=1e3,Pk=10;class hN extends dN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);qT()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Pk):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Rk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}hN.type="LOCAL";const Dk=hN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN extends dN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}mN.type="SESSION";const pN=mN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Bu(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(o).map(async d=>d(r.origin,a)),c=await Mk(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const d=of("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(h),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(){return window}function Ok(t){Br().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function Vk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Uk(){return fN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="firebaseLocalStorageDb",zk=1,iu="firebaseLocalStorage",xN="fbase_key";class nl{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function $u(t,e){return t.transaction([iu],e?"readwrite":"readonly").objectStore(iu)}function Bk(){const t=indexedDB.deleteDatabase(gN);return new nl(t).toPromise()}function Tm(){const t=indexedDB.open(gN,zk);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(iu,{keyPath:xN})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(iu)?e(n):(n.close(),await Bk(),e(await Tm()))})})}async function F0(t,e,r){const n=$u(t,!0).put({[xN]:e,value:r});return new nl(n).toPromise()}async function $k(t,e){const r=$u(t,!1).get(e),n=await new nl(r).toPromise();return n===void 0?null:n.value}function U0(t,e){const r=$u(t,!0).delete(e);return new nl(r).toPromise()}const qk=800,Hk=3;class yN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tm(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Hk)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bu._getInstance(Uk()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Vk(),!this.activeServiceWorker)return;this.sender=new Lk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Fk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tm();return await F0(e,su,"1"),await U0(e,su),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>F0(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>$k(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>U0(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=$u(i,!1).getAll();return new nl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yN.type="LOCAL";const Wk=yN;new el(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t,e){return e?dn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends nf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vi(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Vi(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Vi(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Kk(t){return cN(t.auth,new lf(t),t.bypassAuthState)}function Qk(t){const{auth:e,user:r}=t;return te(r,e,"internal-error"),wk(r,new lf(t),t.bypassAuthState)}async function Yk(t){const{auth:e,user:r}=t;return te(r,e,"internal-error"),bk(r,new lf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kk;case"linkViaPopup":case"linkViaRedirect":return Yk;case"reauthViaPopup":case"reauthViaRedirect":return Qk;default:kr(this.auth,"internal-error")}}resolve(e){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=new el(2e3,1e4);class Ii extends vN{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Ii.currentPopupAction&&Ii.currentPopupAction.cancel(),Ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){_n(this.filter.length===1,"Popup operations only handle one event");const e=of();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Jk.get())};e()}}Ii.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="pendingRedirect",gc=new Map;class Zk extends vN{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=gc.get(this.auth._key());if(!e){try{const n=await eI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}gc.set(this.auth._key(),e)}return this.bypassAuthState||gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eI(t,e){const r=nI(e),n=rI(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function tI(t,e){gc.set(t._key(),e)}function rI(t){return dn(t._redirectPersistence)}function nI(t){return fc(Xk,t.config.apiKey,t.name)}async function sI(t,e,r=!1){if(Qt(t.app))return Promise.reject(pn(t));const n=ws(t),i=Gk(n,e),o=await new Zk(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=10*60*1e3;class aI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oI(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!bN(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(zr(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iI&&this.cachedEventUids.clear(),this.cachedEventUids.has(z0(e))}saveEventToCache(e){this.cachedEventUids.add(z0(e)),this.lastProcessedEventTime=Date.now()}}function z0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(t,e={}){return Ar(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uI=/^https?/;async function dI(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lI(t);for(const r of e)try{if(hI(r))return}catch{}kr(t,"unauthorized-domain")}function hI(t){const e=Em(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!uI.test(r))return!1;if(cI.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new el(3e4,6e4);function B0(){const t=Br().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function pI(t){return new Promise((e,r)=>{var i,a,o;function n(){B0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B0(),r(zr(t,"network-request-failed"))},timeout:mI.get()})}if((a=(i=Br().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=Br().gapi)!=null&&o.load)n();else{const l=ZT("iframefcb");return Br()[l]=()=>{gapi.load?n():r(zr(t,"network-request-failed"))},sN(`${XT()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw xc=null,e})}let xc=null;function fI(t){return xc=xc||pI(t),xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new el(5e3,15e3),xI="__/auth/iframe",yI="emulator/auth/iframe",vI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wI(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?ef(e,yI):`https://${t.config.authDomain}/${xI}`,n={apiKey:e.apiKey,appName:t.name,v:si},i=bI.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Zo(n).slice(1)}`}async function NI(t){const e=await fI(t),r=Br().gapi;return te(r,t,"internal-error"),e.open({where:document.body,url:wI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vI,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=zr(t,"network-request-failed"),l=Br().setTimeout(()=>{a(o)},gI.get());function c(){Br().clearTimeout(l),i(n)}n.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_I=500,EI=600,SI="_blank",TI="http://localhost";class $0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kI(t,e,r,n=_I,i=EI){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...jI,width:n.toString(),height:i.toString(),top:a,left:o},d=kt().toLowerCase();r&&(l=Jw(d)?SI:r),Qw(d)&&(e=e||TI,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[y,S])=>`${p}${y}=${S},`,"");if($T(d)&&l!=="_self")return II(e||"",l),new $0(null);const m=window.open(e||"",l,h);te(m,t,"popup-blocked");try{m.focus()}catch{}return new $0(m)}function II(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="__/auth/handler",AI="emulator/auth/handler",RI=encodeURIComponent("fac");async function q0(t,e,r,n,i,a){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:si,eventId:i};if(e instanceof oN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",d4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof rl){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${RI}=${encodeURIComponent(c)}`:"";return`${PI(t)}?${Zo(l).slice(1)}${d}`}function PI({config:t}){return t.emulator?ef(t,AI):`https://${t.authDomain}/${CI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh="webStorageSupport";class DI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pN,this._completeRedirectFn=sI,this._overrideRedirectResult=tI}async _openPopup(e,r,n,i){var o;_n((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await q0(e,r,n,Em(),i);return kI(e,a,of())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await q0(e,r,n,Em(),i);return Ok(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(_n(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await NI(e),n=new aI(e);return r.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(xh,{type:xh},i=>{var o;const a=(o=i==null?void 0:i[0])==null?void 0:o[xh];a!==void 0&&r(!!a),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=dI(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return rN()||Yw()||rf()}}const MI=DI;var H0="@firebase/auth",W0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VI(t){Ks(new us("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nN(t)},d=new QT(n,i,a,c);return ik(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ks(new us("auth-internal",e=>{const r=ws(e.getProvider("auth").getImmediate());return(n=>new LI(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(H0,W0,OI(t)),Ur(H0,W0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=5*60,UI=Dw("authIdTokenMaxAge")||FI;let G0=null;const zI=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>UI)return;const i=r==null?void 0:r.token;G0!==i&&(G0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function BI(t=Xp()){const e=Uu(t,"auth");if(e.isInitialized())return e.getImmediate();const r=sk(t,{popupRedirectResolver:MI,persistence:[Wk,Dk,pN]}),n=Dw("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=zI(a.toString());Ik(r,o,()=>o(r.currentUser)),kk(r,l=>o(l))}}const i=Aw("auth");return i&&ak(r,`http://${i}`),r}function $I(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}YT({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=zr("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",$I().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VI("Browser");var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,wN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function I(){}I.prototype=_.prototype,T.F=_.prototype,T.prototype=new I,T.prototype.constructor=T,T.D=function(R,k,A){for(var C=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)C[oe-2]=arguments[oe];return _.prototype[k].apply(R,C)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,I){I||(I=0);const R=Array(16);if(typeof _=="string")for(var k=0;k<16;++k)R[k]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(k=0;k<16;++k)R[k]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=T.g[0],I=T.g[1],k=T.g[2];let A=T.g[3],C;C=_+(A^I&(k^A))+R[0]+3614090360&4294967295,_=I+(C<<7&4294967295|C>>>25),C=A+(k^_&(I^k))+R[1]+3905402710&4294967295,A=_+(C<<12&4294967295|C>>>20),C=k+(I^A&(_^I))+R[2]+606105819&4294967295,k=A+(C<<17&4294967295|C>>>15),C=I+(_^k&(A^_))+R[3]+3250441966&4294967295,I=k+(C<<22&4294967295|C>>>10),C=_+(A^I&(k^A))+R[4]+4118548399&4294967295,_=I+(C<<7&4294967295|C>>>25),C=A+(k^_&(I^k))+R[5]+1200080426&4294967295,A=_+(C<<12&4294967295|C>>>20),C=k+(I^A&(_^I))+R[6]+2821735955&4294967295,k=A+(C<<17&4294967295|C>>>15),C=I+(_^k&(A^_))+R[7]+4249261313&4294967295,I=k+(C<<22&4294967295|C>>>10),C=_+(A^I&(k^A))+R[8]+1770035416&4294967295,_=I+(C<<7&4294967295|C>>>25),C=A+(k^_&(I^k))+R[9]+2336552879&4294967295,A=_+(C<<12&4294967295|C>>>20),C=k+(I^A&(_^I))+R[10]+4294925233&4294967295,k=A+(C<<17&4294967295|C>>>15),C=I+(_^k&(A^_))+R[11]+2304563134&4294967295,I=k+(C<<22&4294967295|C>>>10),C=_+(A^I&(k^A))+R[12]+1804603682&4294967295,_=I+(C<<7&4294967295|C>>>25),C=A+(k^_&(I^k))+R[13]+4254626195&4294967295,A=_+(C<<12&4294967295|C>>>20),C=k+(I^A&(_^I))+R[14]+2792965006&4294967295,k=A+(C<<17&4294967295|C>>>15),C=I+(_^k&(A^_))+R[15]+1236535329&4294967295,I=k+(C<<22&4294967295|C>>>10),C=_+(k^A&(I^k))+R[1]+4129170786&4294967295,_=I+(C<<5&4294967295|C>>>27),C=A+(I^k&(_^I))+R[6]+3225465664&4294967295,A=_+(C<<9&4294967295|C>>>23),C=k+(_^I&(A^_))+R[11]+643717713&4294967295,k=A+(C<<14&4294967295|C>>>18),C=I+(A^_&(k^A))+R[0]+3921069994&4294967295,I=k+(C<<20&4294967295|C>>>12),C=_+(k^A&(I^k))+R[5]+3593408605&4294967295,_=I+(C<<5&4294967295|C>>>27),C=A+(I^k&(_^I))+R[10]+38016083&4294967295,A=_+(C<<9&4294967295|C>>>23),C=k+(_^I&(A^_))+R[15]+3634488961&4294967295,k=A+(C<<14&4294967295|C>>>18),C=I+(A^_&(k^A))+R[4]+3889429448&4294967295,I=k+(C<<20&4294967295|C>>>12),C=_+(k^A&(I^k))+R[9]+568446438&4294967295,_=I+(C<<5&4294967295|C>>>27),C=A+(I^k&(_^I))+R[14]+3275163606&4294967295,A=_+(C<<9&4294967295|C>>>23),C=k+(_^I&(A^_))+R[3]+4107603335&4294967295,k=A+(C<<14&4294967295|C>>>18),C=I+(A^_&(k^A))+R[8]+1163531501&4294967295,I=k+(C<<20&4294967295|C>>>12),C=_+(k^A&(I^k))+R[13]+2850285829&4294967295,_=I+(C<<5&4294967295|C>>>27),C=A+(I^k&(_^I))+R[2]+4243563512&4294967295,A=_+(C<<9&4294967295|C>>>23),C=k+(_^I&(A^_))+R[7]+1735328473&4294967295,k=A+(C<<14&4294967295|C>>>18),C=I+(A^_&(k^A))+R[12]+2368359562&4294967295,I=k+(C<<20&4294967295|C>>>12),C=_+(I^k^A)+R[5]+4294588738&4294967295,_=I+(C<<4&4294967295|C>>>28),C=A+(_^I^k)+R[8]+2272392833&4294967295,A=_+(C<<11&4294967295|C>>>21),C=k+(A^_^I)+R[11]+1839030562&4294967295,k=A+(C<<16&4294967295|C>>>16),C=I+(k^A^_)+R[14]+4259657740&4294967295,I=k+(C<<23&4294967295|C>>>9),C=_+(I^k^A)+R[1]+2763975236&4294967295,_=I+(C<<4&4294967295|C>>>28),C=A+(_^I^k)+R[4]+1272893353&4294967295,A=_+(C<<11&4294967295|C>>>21),C=k+(A^_^I)+R[7]+4139469664&4294967295,k=A+(C<<16&4294967295|C>>>16),C=I+(k^A^_)+R[10]+3200236656&4294967295,I=k+(C<<23&4294967295|C>>>9),C=_+(I^k^A)+R[13]+681279174&4294967295,_=I+(C<<4&4294967295|C>>>28),C=A+(_^I^k)+R[0]+3936430074&4294967295,A=_+(C<<11&4294967295|C>>>21),C=k+(A^_^I)+R[3]+3572445317&4294967295,k=A+(C<<16&4294967295|C>>>16),C=I+(k^A^_)+R[6]+76029189&4294967295,I=k+(C<<23&4294967295|C>>>9),C=_+(I^k^A)+R[9]+3654602809&4294967295,_=I+(C<<4&4294967295|C>>>28),C=A+(_^I^k)+R[12]+3873151461&4294967295,A=_+(C<<11&4294967295|C>>>21),C=k+(A^_^I)+R[15]+530742520&4294967295,k=A+(C<<16&4294967295|C>>>16),C=I+(k^A^_)+R[2]+3299628645&4294967295,I=k+(C<<23&4294967295|C>>>9),C=_+(k^(I|~A))+R[0]+4096336452&4294967295,_=I+(C<<6&4294967295|C>>>26),C=A+(I^(_|~k))+R[7]+1126891415&4294967295,A=_+(C<<10&4294967295|C>>>22),C=k+(_^(A|~I))+R[14]+2878612391&4294967295,k=A+(C<<15&4294967295|C>>>17),C=I+(A^(k|~_))+R[5]+4237533241&4294967295,I=k+(C<<21&4294967295|C>>>11),C=_+(k^(I|~A))+R[12]+1700485571&4294967295,_=I+(C<<6&4294967295|C>>>26),C=A+(I^(_|~k))+R[3]+2399980690&4294967295,A=_+(C<<10&4294967295|C>>>22),C=k+(_^(A|~I))+R[10]+4293915773&4294967295,k=A+(C<<15&4294967295|C>>>17),C=I+(A^(k|~_))+R[1]+2240044497&4294967295,I=k+(C<<21&4294967295|C>>>11),C=_+(k^(I|~A))+R[8]+1873313359&4294967295,_=I+(C<<6&4294967295|C>>>26),C=A+(I^(_|~k))+R[15]+4264355552&4294967295,A=_+(C<<10&4294967295|C>>>22),C=k+(_^(A|~I))+R[6]+2734768916&4294967295,k=A+(C<<15&4294967295|C>>>17),C=I+(A^(k|~_))+R[13]+1309151649&4294967295,I=k+(C<<21&4294967295|C>>>11),C=_+(k^(I|~A))+R[4]+4149444226&4294967295,_=I+(C<<6&4294967295|C>>>26),C=A+(I^(_|~k))+R[11]+3174756917&4294967295,A=_+(C<<10&4294967295|C>>>22),C=k+(_^(A|~I))+R[2]+718787259&4294967295,k=A+(C<<15&4294967295|C>>>17),C=I+(A^(k|~_))+R[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+A&4294967295}n.prototype.v=function(T,_){_===void 0&&(_=T.length);const I=_-this.blockSize,R=this.C;let k=this.h,A=0;for(;A<_;){if(k==0)for(;A<=I;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(R[k++]=T.charCodeAt(A++),k==this.blockSize){i(this,R),k=0;break}}else for(;A<_;)if(R[k++]=T[A++],k==this.blockSize){i(this,R),k=0;break}}this.h=k,this.o+=_},n.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var I=T.length-8;I<T.length;++I)T[I]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,I=0;I<4;++I)for(let R=0;R<32;R+=8)T[_++]=this.g[I]>>>R&255;return T};function a(T,_){var I=l;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=_(T)}function o(T,_){this.h=_;const I=[];let R=!0;for(let k=T.length-1;k>=0;k--){const A=T[k]|0;R&&A==_||(I[k]=A,R=!1)}this.g=I}var l={};function c(T){return-128<=T&&T<128?a(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return N(d(-T));const _=[];let I=1;for(let R=0;T>=I;R++)_[R]=T/I|0,I*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return N(h(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(_,8));let R=m;for(let A=0;A<T.length;A+=8){var k=Math.min(8,T.length-A);const C=parseInt(T.substring(A,A+k),_);k<8?(k=d(Math.pow(_,k)),R=R.j(k).add(d(C))):(R=R.j(I),R=R.add(d(C)))}return R}var m=c(0),p=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(b(this))return-N(this).m();let T=0,_=1;for(let I=0;I<this.g.length;I++){const R=this.i(I);T+=(R>=0?R:4294967296+R)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S(this))return"0";if(b(this))return"-"+N(this).toString(T);const _=d(Math.pow(T,6));var I=this;let R="";for(;;){const k=P(I,_).g;I=g(I,k.j(_));let A=((I.g.length>0?I.g[0]:I.h)>>>0).toString(T);if(I=k,S(I))return A+R;for(;A.length<6;)A="0"+A;R=A+R}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function S(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function b(T){return T.h==-1}t.l=function(T){return T=g(this,T),b(T)?-1:S(T)?0:1};function N(T){const _=T.g.length,I=[];for(let R=0;R<_;R++)I[R]=~T.g[R];return new o(I,~T.h).add(p)}t.abs=function(){return b(this)?N(this):this},t.add=function(T){const _=Math.max(this.g.length,T.g.length),I=[];let R=0;for(let k=0;k<=_;k++){let A=R+(this.i(k)&65535)+(T.i(k)&65535),C=(A>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);R=C>>>16,A&=65535,C&=65535,I[k]=C<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function g(T,_){return T.add(N(_))}t.j=function(T){if(S(this)||S(T))return m;if(b(this))return b(T)?N(this).j(N(T)):N(N(this).j(T));if(b(T))return N(this.j(N(T)));if(this.l(y)<0&&T.l(y)<0)return d(this.m()*T.m());const _=this.g.length+T.g.length,I=[];for(var R=0;R<2*_;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(let k=0;k<T.g.length;k++){const A=this.i(R)>>>16,C=this.i(R)&65535,oe=T.i(k)>>>16,B=T.i(k)&65535;I[2*R+2*k]+=C*B,v(I,2*R+2*k),I[2*R+2*k+1]+=A*B,v(I,2*R+2*k+1),I[2*R+2*k+1]+=C*oe,v(I,2*R+2*k+1),I[2*R+2*k+2]+=A*oe,v(I,2*R+2*k+2)}for(T=0;T<_;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=_;T<2*_;T++)I[T]=0;return new o(I,0)};function v(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function j(T,_){this.g=T,this.h=_}function P(T,_){if(S(_))throw Error("division by zero");if(S(T))return new j(m,m);if(b(T))return _=P(N(T),_),new j(N(_.g),N(_.h));if(b(_))return _=P(T,N(_)),new j(N(_.g),_.h);if(T.g.length>30){if(b(T)||b(_))throw Error("slowDivide_ only works with positive integers.");for(var I=p,R=_;R.l(T)<=0;)I=M(I),R=M(R);var k=D(I,1),A=D(R,1);for(R=D(R,2),I=D(I,2);!S(R);){var C=A.add(R);C.l(T)<=0&&(k=k.add(I),A=C),R=D(R,1),I=D(I,1)}return _=g(T,k.j(_)),new j(k,_)}for(k=m;T.l(_)>=0;){for(I=Math.max(1,Math.floor(T.m()/_.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),A=d(I),C=A.j(_);b(C)||C.l(T)>0;)I-=R,A=d(I),C=A.j(_);S(A)&&(A=p),k=k.add(A),T=g(T,C)}return new j(k,T)}t.B=function(T){return P(this,T).h},t.and=function(T){const _=Math.max(this.g.length,T.g.length),I=[];for(let R=0;R<_;R++)I[R]=this.i(R)&T.i(R);return new o(I,this.h&T.h)},t.or=function(T){const _=Math.max(this.g.length,T.g.length),I=[];for(let R=0;R<_;R++)I[R]=this.i(R)|T.i(R);return new o(I,this.h|T.h)},t.xor=function(T){const _=Math.max(this.g.length,T.g.length),I=[];for(let R=0;R<_;R++)I[R]=this.i(R)^T.i(R);return new o(I,this.h^T.h)};function M(T){const _=T.g.length+1,I=[];for(let R=0;R<_;R++)I[R]=T.i(R)<<1|T.i(R-1)>>>31;return new o(I,T.h)}function D(T,_){const I=_>>5;_%=32;const R=T.g.length-I,k=[];for(let A=0;A<R;A++)k[A]=_>0?T.i(A+I)>>>_|T.i(A+I+1)<<32-_:T.i(A+I);return new o(k,T.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,wN=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,as=o}).apply(typeof K0<"u"?K0:typeof self<"u"?self:typeof window<"u"?window:{});var Gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NN,Wa,jN,yc,km,_N,EN,SN;(function(){var t,e=Object.defineProperty;function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gl=="object"&&Gl];for(var f=0;f<u.length;++f){var x=u[f];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var n=r(this);function i(u,f){if(f)e:{var x=n;u=u.split(".");for(var E=0;E<u.length-1;E++){var L=u[E];if(!(L in x))break e;x=x[L]}u=u[u.length-1],E=x[u],f=f(E),f!=E&&f!=null&&e(x,u,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(f){var x=[],E;for(E in f)Object.prototype.hasOwnProperty.call(f,E)&&x.push([E,f[E]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function c(u,f,x){return u.call.apply(u.bind,arguments)}function d(u,f,x){return d=c,d.apply(null,arguments)}function h(u,f){var x=Array.prototype.slice.call(arguments,1);return function(){var E=x.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function m(u,f){function x(){}x.prototype=f.prototype,u.Z=f.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(E,L,O){for(var H=Array(arguments.length-2),de=2;de<arguments.length;de++)H[de-2]=arguments[de];return f.prototype[L].apply(E,H)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function y(u){const f=u.length;if(f>0){const x=Array(f);for(let E=0;E<f;E++)x[E]=u[E];return x}return[]}function S(u,f){for(let E=1;E<arguments.length;E++){const L=arguments[E];var x=typeof L;if(x=x!="object"?x:L?Array.isArray(L)?"array":x:"null",x=="array"||x=="object"&&typeof L.length=="number"){x=u.length||0;const O=L.length||0;u.length=x+O;for(let H=0;H<O;H++)u[x+H]=L[H]}else u.push(L)}}class b{constructor(f,x){this.i=f,this.j=x,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function N(u){o.setTimeout(()=>{throw u},0)}function g(){var u=T;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class v{constructor(){this.h=this.g=null}add(f,x){const E=j.get();E.set(f,x),this.h?this.h.next=E:this.g=E,this.h=E}}var j=new b(()=>new P,u=>u.reset());class P{constructor(){this.next=this.g=this.h=null}set(f,x){this.h=f,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let M,D=!1,T=new v,_=()=>{const u=Promise.resolve(void 0);M=()=>{u.then(I)}};function I(){for(var u;u=g();){try{u.h.call(u.g)}catch(x){N(x)}var f=j;f.j(u),f.h<100&&(f.h++,u.next=f.g,f.g=u)}D=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};o.addEventListener("test",x,f),o.removeEventListener("test",x,f)}catch{}return u}();function C(u){return/^[\s\xa0]*$/.test(u)}function oe(u,f){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,f)}m(oe,k),oe.prototype.init=function(u,f){const x=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget,f||(x=="mouseover"?f=u.fromElement:x=="mouseout"&&(f=u.toElement)),this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var B="closure_listenable_"+(Math.random()*1e6|0),Ie=0;function Ce(u,f,x,E,L){this.listener=u,this.proxy=null,this.src=f,this.type=x,this.capture=!!E,this.ha=L,this.key=++Ie,this.da=this.fa=!1}function q(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function K(u,f,x){for(const E in u)f.call(x,u[E],E,u)}function X(u,f){for(const x in u)f.call(void 0,u[x],x,u)}function be(u){const f={};for(const x in u)f[x]=u[x];return f}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,f){let x,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(x in E)u[x]=E[x];for(let O=0;O<Q.length;O++)x=Q[O],Object.prototype.hasOwnProperty.call(E,x)&&(u[x]=E[x])}}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,f,x,E,L){const O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);const H=It(u,f,E,L);return H>-1?(f=u[H],x||(f.fa=!1)):(f=new Ce(f,this.src,O,!!E,L),f.fa=x,u.push(f)),f};function xr(u,f){const x=f.type;if(x in u.g){var E=u.g[x],L=Array.prototype.indexOf.call(E,f,void 0),O;(O=L>=0)&&Array.prototype.splice.call(E,L,1),O&&(q(f),u.g[x].length==0&&(delete u.g[x],u.h--))}}function It(u,f,x,E){for(let L=0;L<u.length;++L){const O=u[L];if(!O.da&&O.listener==f&&O.capture==!!x&&O.ha==E)return L}return-1}var xt="closure_lm_"+(Math.random()*1e6|0),gd={};function ig(u,f,x,E,L){if(Array.isArray(f)){for(let O=0;O<f.length;O++)ig(u,f[O],x,E,L);return null}return x=lg(x),u&&u[B]?u.J(f,x,l(E)?!!E.capture:!1,L):f_(u,f,x,!1,E,L)}function f_(u,f,x,E,L,O){if(!f)throw Error("Invalid event type");const H=l(L)?!!L.capture:!!L;let de=yd(u);if(de||(u[xt]=de=new xe(u)),x=de.add(f,x,E,H,O),x.proxy)return x;if(E=g_(),x.proxy=E,E.src=u,E.listener=x,u.addEventListener)A||(L=H),L===void 0&&(L=!1),u.addEventListener(f.toString(),E,L);else if(u.attachEvent)u.attachEvent(og(f.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return x}function g_(){function u(x){return f.call(u.src,u.listener,x)}const f=x_;return u}function ag(u,f,x,E,L){if(Array.isArray(f))for(var O=0;O<f.length;O++)ag(u,f[O],x,E,L);else E=l(E)?!!E.capture:!!E,x=lg(x),u&&u[B]?(u=u.i,O=String(f).toString(),O in u.g&&(f=u.g[O],x=It(f,x,E,L),x>-1&&(q(f[x]),Array.prototype.splice.call(f,x,1),f.length==0&&(delete u.g[O],u.h--)))):u&&(u=yd(u))&&(f=u.g[f.toString()],u=-1,f&&(u=It(f,x,E,L)),(x=u>-1?f[u]:null)&&xd(x))}function xd(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[B])xr(f.i,u);else{var x=u.type,E=u.proxy;f.removeEventListener?f.removeEventListener(x,E,u.capture):f.detachEvent?f.detachEvent(og(x),E):f.addListener&&f.removeListener&&f.removeListener(E),(x=yd(f))?(xr(x,u),x.h==0&&(x.src=null,f[xt]=null)):q(u)}}}function og(u){return u in gd?gd[u]:gd[u]="on"+u}function x_(u,f){if(u.da)u=!0;else{f=new oe(f,this);const x=u.listener,E=u.ha||u.src;u.fa&&xd(u),u=x.call(E,f)}return u}function yd(u){return u=u[xt],u instanceof xe?u:null}var vd="__closure_events_fn_"+(Math.random()*1e9>>>0);function lg(u){return typeof u=="function"?u:(u[vd]||(u[vd]=function(f){return u.handleEvent(f)}),u[vd])}function yt(){R.call(this),this.i=new xe(this),this.M=this,this.G=null}m(yt,R),yt.prototype[B]=!0,yt.prototype.removeEventListener=function(u,f,x,E){ag(this,u,f,x,E)};function Ct(u,f){var x,E=u.G;if(E)for(x=[];E;E=E.G)x.push(E);if(u=u.M,E=f.type||f,typeof f=="string")f=new k(f,u);else if(f instanceof k)f.target=f.target||u;else{var L=f;f=new k(E,u),se(f,L)}L=!0;let O,H;if(x)for(H=x.length-1;H>=0;H--)O=f.g=x[H],L=gl(O,E,!0,f)&&L;if(O=f.g=u,L=gl(O,E,!0,f)&&L,L=gl(O,E,!1,f)&&L,x)for(H=0;H<x.length;H++)O=f.g=x[H],L=gl(O,E,!1,f)&&L}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var u=this.i;for(const f in u.g){const x=u.g[f];for(let E=0;E<x.length;E++)q(x[E]);delete u.g[f],u.h--}}this.G=null},yt.prototype.J=function(u,f,x,E){return this.i.add(String(u),f,!1,x,E)},yt.prototype.K=function(u,f,x,E){return this.i.add(String(u),f,!0,x,E)};function gl(u,f,x,E){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();let L=!0;for(let O=0;O<f.length;++O){const H=f[O];if(H&&!H.da&&H.capture==x){const de=H.listener,tt=H.ha||H.src;H.fa&&xr(u.i,H),L=de.call(tt,E)!==!1&&L}}return L&&!E.defaultPrevented}function y_(u,f){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(u,f||0)}function cg(u){u.g=y_(()=>{u.g=null,u.i&&(u.i=!1,cg(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class v_ extends R{constructor(f,x){super(),this.m=f,this.l=x,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:cg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fa(u){R.call(this),this.h=u,this.g={}}m(fa,R);var ug=[];function dg(u){K(u.g,function(f,x){this.g.hasOwnProperty(x)&&xd(f)},u),u.g={}}fa.prototype.N=function(){fa.Z.N.call(this),dg(this)},fa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bd=o.JSON.stringify,b_=o.JSON.parse,w_=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function hg(){}function mg(){}var ga={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wd(){k.call(this,"d")}m(wd,k);function Nd(){k.call(this,"c")}m(Nd,k);var _s={},pg=null;function xl(){return pg=pg||new yt}_s.Ia="serverreachability";function fg(u){k.call(this,_s.Ia,u)}m(fg,k);function xa(u){const f=xl();Ct(f,new fg(f))}_s.STAT_EVENT="statevent";function gg(u,f){k.call(this,_s.STAT_EVENT,u),this.stat=f}m(gg,k);function At(u){const f=xl();Ct(f,new gg(f,u))}_s.Ja="timingevent";function xg(u,f){k.call(this,_s.Ja,u),this.size=f}m(xg,k);function ya(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},f)}function va(){this.g=!0}va.prototype.ua=function(){this.g=!1};function N_(u,f,x,E,L,O){u.info(function(){if(u.g)if(O){var H="",de=O.split("&");for(let Ee=0;Ee<de.length;Ee++){var tt=de[Ee].split("=");if(tt.length>1){const it=tt[0];tt=tt[1];const Pr=it.split("_");H=Pr.length>=2&&Pr[1]=="type"?H+(it+"="+tt+"&"):H+(it+"=redacted&")}}}else H=null;else H=O;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+f+`
`+x+`
`+H})}function j_(u,f,x,E,L,O,H){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+f+`
`+x+`
`+O+" "+H})}function li(u,f,x,E){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+E_(u,x)+(E?" "+E:"")})}function __(u,f){u.info(function(){return"TIMEOUT: "+f})}va.prototype.info=function(){};function E_(u,f){if(!u.g)return f;if(!f)return null;try{const O=JSON.parse(f);if(O){for(u=0;u<O.length;u++)if(Array.isArray(O[u])){var x=O[u];if(!(x.length<2)){var E=x[1];if(Array.isArray(E)&&!(E.length<1)){var L=E[0];if(L!="noop"&&L!="stop"&&L!="close")for(let H=1;H<E.length;H++)E[H]=""}}}}return bd(O)}catch{return f}}var yl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vg;function jd(){}m(jd,hg),jd.prototype.g=function(){return new XMLHttpRequest},vg=new jd;function ba(u){return encodeURIComponent(String(u))}function S_(u){var f=1;u=u.split(":");const x=[];for(;f>0&&u.length;)x.push(u.shift()),f--;return u.length&&x.push(u.join(":")),x}function An(u,f,x,E){this.j=u,this.i=f,this.l=x,this.S=E||1,this.V=new fa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bg}function bg(){this.i=null,this.g="",this.h=!1}var wg={},_d={};function Ed(u,f,x){u.M=1,u.A=bl(Rr(f)),u.u=x,u.R=!0,Ng(u,null)}function Ng(u,f){u.F=Date.now(),vl(u),u.B=Rr(u.A);var x=u.B,E=u.S;Array.isArray(E)||(E=[String(E)]),Mg(x.i,"t",E),u.C=0,x=u.j.L,u.h=new bg,u.g=Zg(u.j,x?f:null,!u.u),u.P>0&&(u.O=new v_(d(u.Y,u,u.g),u.P)),f=u.V,x=u.g,E=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(ug[0]=L.toString()),L=ug);for(let O=0;O<L.length;O++){const H=ig(x,L[O],E||f.handleEvent,!1,f.h||f);if(!H)break;f.g[H.key]=H}f=u.J?be(u.J):{},u.u?(u.v||(u.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,f)):(u.v="GET",u.g.ea(u.B,u.v,null,f)),xa(),N_(u.i,u.v,u.B,u.l,u.S,u.u)}An.prototype.ba=function(u){u=u.target;const f=this.O;f&&Dn(u)==3?f.j():this.Y(u)},An.prototype.Y=function(u){try{if(u==this.g)e:{const de=Dn(this.g),tt=this.g.ya(),Ee=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||Bg(this.g)))){this.K||de!=4||tt==7||(tt==8||Ee<=0?xa(3):xa(2)),Sd(this);var f=this.g.ca();this.X=f;var x=T_(this);if(this.o=f==200,j_(this.i,this.v,this.B,this.l,this.S,de,f),this.o){if(this.U&&!this.L){t:{if(this.g){var E,L=this.g;if((E=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(E)){var O=E;break t}}O=null}if(u=O)li(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Td(this,u);else{this.o=!1,this.m=3,At(12),Es(this),wa(this);break e}}if(this.R){u=!0;let it;for(;!this.K&&this.C<x.length;)if(it=k_(this,x),it==_d){de==4&&(this.m=4,At(14),u=!1),li(this.i,this.l,null,"[Incomplete Response]");break}else if(it==wg){this.m=4,At(15),li(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else li(this.i,this.l,it,null),Td(this,it);if(jg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||x.length!=0||this.h.h||(this.m=1,At(16),u=!1),this.o=this.o&&u,!u)li(this.i,this.l,x,"[Invalid Chunked Response]"),Es(this),wa(this);else if(x.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Md(H),H.P=!0,At(11))}}else li(this.i,this.l,x,null),Td(this,x);de==4&&Es(this),this.o&&!this.K&&(de==4?Qg(this.j,this):(this.o=!1,vl(this)))}else B_(this.g),f==400&&x.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Es(this),wa(this)}}}catch{}finally{}};function T_(u){if(!jg(u))return u.g.la();const f=Bg(u.g);if(f==="")return"";let x="";const E=f.length,L=Dn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Es(u),wa(u),"";u.h.i=new o.TextDecoder}for(let O=0;O<E;O++)u.h.h=!0,x+=u.h.i.decode(f[O],{stream:!(L&&O==E-1)});return f.length=0,u.h.g+=x,u.C=0,u.h.g}function jg(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function k_(u,f){var x=u.C,E=f.indexOf(`
`,x);return E==-1?_d:(x=Number(f.substring(x,E)),isNaN(x)?wg:(E+=1,E+x>f.length?_d:(f=f.slice(E,E+x),u.C=E+x,f)))}An.prototype.cancel=function(){this.K=!0,Es(this)};function vl(u){u.T=Date.now()+u.H,_g(u,u.H)}function _g(u,f){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ya(d(u.aa,u),f)}function Sd(u){u.D&&(o.clearTimeout(u.D),u.D=null)}An.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(__(this.i,this.B),this.M!=2&&(xa(),At(17)),Es(this),this.m=2,wa(this)):_g(this,this.T-u)};function wa(u){u.j.I==0||u.K||Qg(u.j,u)}function Es(u){Sd(u);var f=u.O;f&&typeof f.dispose=="function"&&f.dispose(),u.O=null,dg(u.V),u.g&&(f=u.g,u.g=null,f.abort(),f.dispose())}function Td(u,f){try{var x=u.j;if(x.I!=0&&(x.g==u||kd(x.h,u))){if(!u.L&&kd(x.h,u)&&x.I==3){try{var E=x.Ba.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)El(x),jl(x);else break e;Dd(x),At(18)}}else x.xa=L[1],0<x.xa-x.K&&L[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=ya(d(x.Va,x),6e3));Tg(x.h)<=1&&x.ta&&(x.ta=void 0)}else Ts(x,11)}else if((u.L||x.g==u)&&El(x),!C(f))for(L=x.Ba.g.parse(f),f=0;f<L.length;f++){let Ee=L[f];const it=Ee[0];if(!(it<=x.K))if(x.K=it,Ee=Ee[1],x.I==2)if(Ee[0]=="c"){x.M=Ee[1],x.ba=Ee[2];const Pr=Ee[3];Pr!=null&&(x.ka=Pr,x.j.info("VER="+x.ka));const ks=Ee[4];ks!=null&&(x.za=ks,x.j.info("SVER="+x.za));const Mn=Ee[5];Mn!=null&&typeof Mn=="number"&&Mn>0&&(E=1.5*Mn,x.O=E,x.j.info("backChannelRequestTimeoutMs_="+E)),E=x;const Ln=u.g;if(Ln){const Tl=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tl){var O=E.h;O.g||Tl.indexOf("spdy")==-1&&Tl.indexOf("quic")==-1&&Tl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Id(O,O.h),O.h=null))}if(E.G){const Ld=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Ld&&(E.wa=Ld,Re(E.J,E.G,Ld))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),E=x;var H=u;if(E.na=Xg(E,E.L?E.ba:null,E.W),H.L){kg(E.h,H);var de=H,tt=E.O;tt&&(de.H=tt),de.D&&(Sd(de),vl(de)),E.g=H}else Gg(E);x.i.length>0&&_l(x)}else Ee[0]!="stop"&&Ee[0]!="close"||Ts(x,7);else x.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Ts(x,7):Pd(x):Ee[0]!="noop"&&x.l&&x.l.qa(Ee),x.A=0)}}xa(4)}catch{}}var I_=class{constructor(u,f){this.g=u,this.map=f}};function Eg(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sg(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Tg(u){return u.h?1:u.g?u.g.size:0}function kd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Id(u,f){u.g?u.g.add(f):u.h=f}function kg(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Eg.prototype.cancel=function(){if(this.i=Ig(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ig(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const x of u.g.values())f=f.concat(x.G);return f}return y(u.i)}var Cg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function C_(u,f){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const E=u[x].indexOf("=");let L,O=null;E>=0?(L=u[x].substring(0,E),O=u[x].substring(E+1)):L=u[x],f(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Rn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;u instanceof Rn?(this.l=u.l,Na(this,u.j),this.o=u.o,this.g=u.g,ja(this,u.u),this.h=u.h,Cd(this,Lg(u.i)),this.m=u.m):u&&(f=String(u).match(Cg))?(this.l=!1,Na(this,f[1]||"",!0),this.o=_a(f[2]||""),this.g=_a(f[3]||"",!0),ja(this,f[4]),this.h=_a(f[5]||"",!0),Cd(this,f[6]||"",!0),this.m=_a(f[7]||"")):(this.l=!1,this.i=new Sa(null,this.l))}Rn.prototype.toString=function(){const u=[];var f=this.j;f&&u.push(Ea(f,Ag,!0),":");var x=this.g;return(x||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ea(f,Ag,!0),"@"),u.push(ba(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Ea(x,x.charAt(0)=="/"?P_:R_,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Ea(x,M_)),u.join("")},Rn.prototype.resolve=function(u){const f=Rr(this);let x=!!u.j;x?Na(f,u.j):x=!!u.o,x?f.o=u.o:x=!!u.g,x?f.g=u.g:x=u.u!=null;var E=u.h;if(x)ja(f,u.u);else if(x=!!u.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var L=f.h.lastIndexOf("/");L!=-1&&(E=f.h.slice(0,L+1)+E)}if(L=E,L==".."||L==".")E="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){E=L.lastIndexOf("/",0)==0,L=L.split("/");const O=[];for(let H=0;H<L.length;){const de=L[H++];de=="."?E&&H==L.length&&O.push(""):de==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),E&&H==L.length&&O.push("")):(O.push(de),E=!0)}E=O.join("/")}else E=L}return x?f.h=E:x=u.i.toString()!=="",x?Cd(f,Lg(u.i)):x=!!u.m,x&&(f.m=u.m),f};function Rr(u){return new Rn(u)}function Na(u,f,x){u.j=x?_a(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function ja(u,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);u.u=f}else u.u=null}function Cd(u,f,x){f instanceof Sa?(u.i=f,L_(u.i,u.l)):(x||(f=Ea(f,D_)),u.i=new Sa(f,u.l))}function Re(u,f,x){u.i.set(f,x)}function bl(u){return Re(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function _a(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ea(u,f,x){return typeof u=="string"?(u=encodeURI(u).replace(f,A_),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function A_(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ag=/[#\/\?@]/g,R_=/[#\?:]/g,P_=/[#\?]/g,D_=/[#\?@]/g,M_=/#/g;function Sa(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Ss(u){u.g||(u.g=new Map,u.h=0,u.i&&C_(u.i,function(f,x){u.add(decodeURIComponent(f.replace(/\+/g," ")),x)}))}t=Sa.prototype,t.add=function(u,f){Ss(this),this.i=null,u=ci(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(f),this.h+=1,this};function Rg(u,f){Ss(u),f=ci(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Pg(u,f){return Ss(u),f=ci(u,f),u.g.has(f)}t.forEach=function(u,f){Ss(this),this.g.forEach(function(x,E){x.forEach(function(L){u.call(f,L,E,this)},this)},this)};function Dg(u,f){Ss(u);let x=[];if(typeof f=="string")Pg(u,f)&&(x=x.concat(u.g.get(ci(u,f))));else for(u=Array.from(u.g.values()),f=0;f<u.length;f++)x=x.concat(u[f]);return x}t.set=function(u,f){return Ss(this),this.i=null,u=ci(this,u),Pg(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=Dg(this,u),u.length>0?String(u[0]):f):f};function Mg(u,f,x){Rg(u,f),x.length>0&&(u.i=null,u.g.set(ci(u,f),y(x)),u.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(let E=0;E<f.length;E++){var x=f[E];const L=ba(x);x=Dg(this,x);for(let O=0;O<x.length;O++){let H=L;x[O]!==""&&(H+="="+ba(x[O])),u.push(H)}}return this.i=u.join("&")};function Lg(u){const f=new Sa;return f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),f}function ci(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function L_(u,f){f&&!u.j&&(Ss(u),u.i=null,u.g.forEach(function(x,E){const L=E.toLowerCase();E!=L&&(Rg(this,E),Mg(this,L,x))},u)),u.j=f}function O_(u,f){const x=new va;if(o.Image){const E=new Image;E.onload=h(Pn,x,"TestLoadImage: loaded",!0,f,E),E.onerror=h(Pn,x,"TestLoadImage: error",!1,f,E),E.onabort=h(Pn,x,"TestLoadImage: abort",!1,f,E),E.ontimeout=h(Pn,x,"TestLoadImage: timeout",!1,f,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else f(!1)}function V_(u,f){const x=new va,E=new AbortController,L=setTimeout(()=>{E.abort(),Pn(x,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:E.signal}).then(O=>{clearTimeout(L),O.ok?Pn(x,"TestPingServer: ok",!0,f):Pn(x,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Pn(x,"TestPingServer: error",!1,f)})}function Pn(u,f,x,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(x)}catch{}}function F_(){this.g=new w_}function Ad(u){this.i=u.Sb||null,this.h=u.ab||!1}m(Ad,hg),Ad.prototype.g=function(){return new wl(this.i,this.h)};function wl(u,f){yt.call(this),this.H=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(wl,yt),t=wl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=f,this.readyState=1,ka(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(f.body=u),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ta(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Og(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Og(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Ta(this):ka(this),this.readyState==3&&Og(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Ta(this))},t.Na=function(u){this.g&&(this.response=u,Ta(this))},t.ga=function(){this.g&&Ta(this)};function Ta(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ka(u)}t.setRequestHeader=function(u,f){this.A.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var x=f.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=f.next();return u.join(`\r
`)};function ka(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vg(u){let f="";return K(u,function(x,E){f+=E,f+=":",f+=x,f+=`\r
`}),f}function Rd(u,f,x){e:{for(E in x){var E=!1;break e}E=!0}E||(x=Vg(x),typeof u=="string"?x!=null&&ba(x):Re(u,f,x))}function He(u){yt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(He,yt);var U_=/^https?$/i,z_=["POST","PUT"];t=He.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,f,x,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vg.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){Fg(this,O);return}if(u=x||"",x=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)x.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const O of E.keys())x.set(O,E.get(O));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(x.keys()).find(O=>O.toLowerCase()=="content-type"),L=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(z_,f,void 0)>=0)||E||L||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,H]of x)this.g.setRequestHeader(O,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(O){Fg(this,O)}};function Fg(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.o=5,Ug(u),Nl(u)}function Ug(u){u.A||(u.A=!0,Ct(u,"complete"),Ct(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ct(this,"complete"),Ct(this,"abort"),Nl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nl(this,!0)),He.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?zg(this):this.Xa())},t.Xa=function(){zg(this)};function zg(u){if(u.h&&typeof a<"u"){if(u.v&&Dn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ct(u,"readystatechange"),Dn(u)==4){u.h=!1;try{const O=u.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var x;if(!(x=f)){var E;if(E=O===0){let H=String(u.D).match(Cg)[1]||null;!H&&o.self&&o.self.location&&(H=o.self.location.protocol.slice(0,-1)),E=!U_.test(H?H.toLowerCase():"")}x=E}if(x)Ct(u,"complete"),Ct(u,"success");else{u.o=6;try{var L=Dn(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Ug(u)}}finally{Nl(u)}}}}function Nl(u,f){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,f||Ct(u,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Dn(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Dn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),b_(f)}};function Bg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function B_(u){const f={};u=(u.g&&Dn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(C(u[E]))continue;var x=S_(u[E]);const L=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const O=f[L]||[];f[L]=O,O.push(x)}X(f,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ia(u,f,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||f}function $g(u){this.za=0,this.i=[],this.j=new va,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ia("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ia("baseRetryDelayMs",5e3,u),this.Za=Ia("retryDelaySeedMs",1e4,u),this.Ta=Ia("forwardChannelMaxRetries",2,u),this.va=Ia("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Eg(u&&u.concurrentRequestLimit),this.Ba=new F_,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=$g.prototype,t.ka=8,t.I=1,t.connect=function(u,f,x,E){At(0),this.W=u,this.H=f||{},x&&E!==void 0&&(this.H.OSID=x,this.H.OAID=E),this.F=this.X,this.J=Xg(this,null,this.W),_l(this)};function Pd(u){if(qg(u),u.I==3){var f=u.V++,x=Rr(u.J);if(Re(x,"SID",u.M),Re(x,"RID",f),Re(x,"TYPE","terminate"),Ca(u,x),f=new An(u,u.j,f),f.M=2,f.A=bl(Rr(x)),x=!1,o.navigator&&o.navigator.sendBeacon)try{x=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!x&&o.Image&&(new Image().src=f.A,x=!0),x||(f.g=Zg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),vl(f)}Jg(u)}function jl(u){u.g&&(Md(u),u.g.cancel(),u.g=null)}function qg(u){jl(u),u.v&&(o.clearTimeout(u.v),u.v=null),El(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function _l(u){if(!Sg(u.h)&&!u.m){u.m=!0;var f=u.Ea;M||_(),D||(M(),D=!0),T.add(f,u),u.D=0}}function $_(u,f){return Tg(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=f.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ya(d(u.Ea,u,f),Yg(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new An(this,this.j,u);let O=this.o;if(this.U&&(O?(O=be(O),se(O,this.U)):O=this.U),this.u!==null||this.R||(L.J=O,O=null),this.S)e:{for(var f=0,x=0;x<this.i.length;x++){t:{var E=this.i[x];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,f>4096){f=x;break e}if(f===4096||x===this.i.length-1){f=x+1;break e}}f=1e3}else f=1e3;f=Wg(this,L,f),x=Rr(this.J),Re(x,"RID",u),Re(x,"CVER",22),this.G&&Re(x,"X-HTTP-Session-Id",this.G),Ca(this,x),O&&(this.R?f="headers="+ba(Vg(O))+"&"+f:this.u&&Rd(x,this.u,O)),Id(this.h,L),this.Ra&&Re(x,"TYPE","init"),this.S?(Re(x,"$req",f),Re(x,"SID","null"),L.U=!0,Ed(L,x,null)):Ed(L,x,f),this.I=2}}else this.I==3&&(u?Hg(this,u):this.i.length==0||Sg(this.h)||Hg(this))};function Hg(u,f){var x;f?x=f.l:x=u.V++;const E=Rr(u.J);Re(E,"SID",u.M),Re(E,"RID",x),Re(E,"AID",u.K),Ca(u,E),u.u&&u.o&&Rd(E,u.u,u.o),x=new An(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),f&&(u.i=f.G.concat(u.i)),f=Wg(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Id(u.h,x),Ed(x,E,f)}function Ca(u,f){u.H&&K(u.H,function(x,E){Re(f,E,x)}),u.l&&K({},function(x,E){Re(f,E,x)})}function Wg(u,f,x){x=Math.min(u.i.length,x);const E=u.l?d(u.l.Ka,u.l,u):null;e:{var L=u.i;let de=-1;for(;;){const tt=["count="+x];de==-1?x>0?(de=L[0].g,tt.push("ofs="+de)):de=0:tt.push("ofs="+de);let Ee=!0;for(let it=0;it<x;it++){var O=L[it].g;const Pr=L[it].map;if(O-=de,O<0)de=Math.max(0,L[it].g-100),Ee=!1;else try{O="req"+O+"_"||"";try{var H=Pr instanceof Map?Pr:Object.entries(Pr);for(const[ks,Mn]of H){let Ln=Mn;l(Mn)&&(Ln=bd(Mn)),tt.push(O+ks+"="+encodeURIComponent(Ln))}}catch(ks){throw tt.push(O+"type="+encodeURIComponent("_badmap")),ks}}catch{E&&E(Pr)}}if(Ee){H=tt.join("&");break e}}H=void 0}return u=u.i.splice(0,x),f.G=u,H}function Gg(u){if(!u.g&&!u.v){u.Y=1;var f=u.Da;M||_(),D||(M(),D=!0),T.add(f,u),u.A=0}}function Dd(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ya(d(u.Da,u),Yg(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Kg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ya(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),jl(this),Kg(this))};function Md(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Kg(u){u.g=new An(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var f=Rr(u.na);Re(f,"RID","rpc"),Re(f,"SID",u.M),Re(f,"AID",u.K),Re(f,"CI",u.F?"0":"1"),!u.F&&u.ia&&Re(f,"TO",u.ia),Re(f,"TYPE","xmlhttp"),Ca(u,f),u.u&&u.o&&Rd(f,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=bl(Rr(f)),x.u=null,x.R=!0,Ng(x,u)}t.Va=function(){this.C!=null&&(this.C=null,jl(this),Dd(this),At(19))};function El(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Qg(u,f){var x=null;if(u.g==f){El(u),Md(u),u.g=null;var E=2}else if(kd(u.h,f))x=f.G,kg(u.h,f),E=1;else return;if(u.I!=0){if(f.o)if(E==1){x=f.u?f.u.length:0,f=Date.now()-f.F;var L=u.D;E=xl(),Ct(E,new xg(E,x)),_l(u)}else Gg(u);else if(L=f.m,L==3||L==0&&f.X>0||!(E==1&&$_(u,f)||E==2&&Dd(u)))switch(x&&x.length>0&&(f=u.h,f.i=f.i.concat(x)),L){case 1:Ts(u,5);break;case 4:Ts(u,10);break;case 3:Ts(u,6);break;default:Ts(u,2)}}}function Yg(u,f){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*f}function Ts(u,f){if(u.j.info("Error code "+f),f==2){var x=d(u.bb,u),E=u.Ua;const L=!E;E=new Rn(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Na(E,"https"),bl(E),L?O_(E.toString(),x):V_(E.toString(),x)}else At(2);u.I=0,u.l&&u.l.pa(f),Jg(u),qg(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Jg(u){if(u.I=0,u.ja=[],u.l){const f=Ig(u.h);(f.length!=0||u.i.length!=0)&&(S(u.ja,f),S(u.ja,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.oa()}}function Xg(u,f,x){var E=x instanceof Rn?Rr(x):new Rn(x);if(E.g!="")f&&(E.g=f+"."+E.g),ja(E,E.u);else{var L=o.location;E=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;const O=new Rn(null);E&&Na(O,E),f&&(O.g=f),L&&ja(O,L),x&&(O.h=x),E=O}return x=u.G,f=u.wa,x&&f&&Re(E,x,f),Re(E,"VER",u.ka),Ca(u,E),E}function Zg(u,f,x){if(f&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Aa&&!u.ma?new He(new Ad({ab:x})):new He(u.ma),f.Fa(u.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ex(){}t=ex.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Sl(){}Sl.prototype.g=function(u,f){return new Wt(u,f)};function Wt(u,f){yt.call(this),this.g=new $g(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(u?u["X-WebChannel-Client-Profile"]=f.sa:u={"X-WebChannel-Client-Profile":f.sa}),this.g.U=u,(u=f&&f.Qb)&&!C(u)&&(this.g.u=u),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!C(f)&&(this.g.G=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ui(this)}m(Wt,yt),Wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){Pd(this.g)},Wt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=bd(u),u=x);f.i.push(new I_(f.Ya++,u)),f.I==3&&_l(f)},Wt.prototype.N=function(){this.g.l=null,delete this.j,Pd(this.g),delete this.g,Wt.Z.N.call(this)};function tx(u){wd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const x in f){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}m(tx,wd);function rx(){Nd.call(this),this.status=1}m(rx,Nd);function ui(u){this.g=u}m(ui,ex),ui.prototype.ra=function(){Ct(this.g,"a")},ui.prototype.qa=function(u){Ct(this.g,new tx(u))},ui.prototype.pa=function(u){Ct(this.g,new rx)},ui.prototype.oa=function(){Ct(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,SN=function(){return new Sl},EN=function(){return xl()},_N=_s,km={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yl.NO_ERROR=0,yl.TIMEOUT=8,yl.HTTP_ERROR=6,yc=yl,yg.COMPLETE="complete",jN=yg,mg.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",yt.prototype.listen=yt.prototype.J,Wa=mg,He.prototype.listenOnce=He.prototype.K,He.prototype.getLastError=He.prototype.Ha,He.prototype.getLastErrorCode=He.prototype.ya,He.prototype.getStatus=He.prototype.ca,He.prototype.getResponseJson=He.prototype.La,He.prototype.getResponseText=He.prototype.la,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Fa,NN=He}).apply(typeof Gl<"u"?Gl:typeof self<"u"?self:typeof window<"u"?window:{});const Q0="@firebase/firestore",Y0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Yp("@firebase/firestore");function mi(){return Xs.logLevel}function W(t,...e){if(Xs.logLevel<=me.DEBUG){const r=e.map(cf);Xs.debug(`Firestore (${ua}): ${t}`,...r)}}function En(t,...e){if(Xs.logLevel<=me.ERROR){const r=e.map(cf);Xs.error(`Firestore (${ua}): ${t}`,...r)}}function Ki(t,...e){if(Xs.logLevel<=me.WARN){const r=e.map(cf);Xs.warn(`Firestore (${ua}): ${t}`,...r)}}function cf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,TN(t,n,r)}function TN(t,e,r){let n=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw En(n),new Error(n)}function we(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||TN(e,i,n)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends en{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Nt.UNAUTHENTICATED))}shutdown(){}}class HI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class WI{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){we(this.o===void 0,42304);let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let a=new fn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new fn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new fn)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(we(typeof n.accessToken=="string",31837,{l:n}),new kN(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}}class GI{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KI{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new GI(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QI{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){we(this.o===void 0,3512);const n=a=>{a.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new J0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(we(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new J0(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=YI(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%62))}return n}}function pe(t,e){return t<e?-1:t>e?1:0}function Im(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),a=e.charAt(n);if(i!==a)return yh(i)===yh(a)?pe(i,a):yh(i)?1:-1}return pe(t.length,e.length)}const JI=55296,XI=57343;function yh(t){const e=t.charCodeAt(0);return e>=JI&&e<=XI}function Qi(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="__name__";class Lr{constructor(e,r,n){r===void 0?r=0:r>e.length&&re(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&re(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=Lr.compareSegments(e.get(i),r.get(i));if(a!==0)return a}return pe(e.length,r.length)}static compareSegments(e,r){const n=Lr.isNumericId(e),i=Lr.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?Lr.extractNumericId(e).compare(Lr.extractNumericId(r)):Im(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return as.fromString(e.substring(4,e.length-2))}}class Se extends Lr{construct(e,r,n){return new Se(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new $(V.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Se(r)}static emptyPath(){return new Se([])}}const ZI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends Lr{construct(e,r,n){return new ht(e,r,n)}static isValidIdentifier(e){return ZI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X0}static keyField(){return new ht([X0])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new $(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(n+=l,i++):(a(),i++)}if(a(),o)throw new $(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(r)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Se.fromString(e))}static fromName(e){return new J(Se.fromString(e).popFirst(5))}static empty(){return new J(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Se.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Se(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t,e,r){if(!r)throw new $(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eC(t,e,r,n){if(e===!0&&n===!0)throw new $(V.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Z0(t){if(!J.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ey(t){if(J.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function CN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function qu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function Ht(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qu(t);throw new $(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function tC(t,e){if(e<=0)throw new $(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t,e){const r={typeString:t};return e&&(r.value=e),r}function sl(t,e){if(!CN(t))throw new $(V.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(i&&typeof o!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new $(V.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=-62135596800,ry=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*ry);return new De(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<ty)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ry}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sl(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ty;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:et("string",De._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new De(0,0))}static max(){return new ne(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=-1;function rC(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(n===1e9?new De(r+1,0):new De(r,n));return new ds(i,J.empty(),e)}function nC(t){return new ds(t.readTime,t.key,Mo)}class ds{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ds(ne.min(),J.empty(),Mo)}static max(){return new ds(ne.max(),J.empty(),Mo)}}function sC(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=J.comparator(t.documentKey,e.documentKey),r!==0?r:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==iC)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new F((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof F?r:F.resolve(r)}catch(r){return F.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):F.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):F.reject(r)}static resolve(e){return new F((r,n)=>{r(e)})}static reject(e){return new F((r,n)=>{n(e)})}static waitFor(e){return new F((r,n)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&r()},c=>n(c))}),o=!0,a===i&&r()})}static or(e){let r=F.resolve(!1);for(const n of e)r=r.next(i=>i?F.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new F((n,i)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const d=c;r(e[d]).next(h=>{o[d]=h,++l,l===a&&n(o)},h=>i(h))}})}static doWhile(e,r){return new F((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}function oC(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ha(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=-1;function Wu(t){return t==null}function au(t){return t===0&&1/t==-1/0}function lC(t){return typeof t=="number"&&Number.isInteger(t)&&!au(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="";function cC(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=ny(e)),e=uC(t.get(r),e);return ny(e)}function uC(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case AN:r+="";break;default:r+=a}}return r}function ny(t){return t+AN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ns(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function RN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,r){this.comparator=e,this.root=r||dt.EMPTY}insert(e,r){return new qe(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}}class Kl{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??dt.RED,this.left=i??dt.EMPTY,this.right=a??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new dt(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return dt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,r,n,i,a){return this}insert(e,r,n){return new dt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new iy(this.data.getIterator())}getIteratorFrom(e){return new iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new st(this.comparator);return r.data=e,r}}class iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new Jt([])}unionWith(e){let r=new st(ht.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Jt(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Qi(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new PN("Invalid base64 string: "+a):a}}(e);return new ft(r)}static fromUint8Array(e){const r=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new ft(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const dC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(t){if(we(!!t,39018),typeof t=="string"){let e=0;const r=dC.exec(t);if(we(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ms(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="server_timestamp",MN="__type__",LN="__previous_value__",ON="__local_write_time__";function Gu(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[MN])==null?void 0:n.stringValue)===DN}function Ku(t){const e=t.mapValue.fields[LN];return Gu(e)?Ku(e):e}function Lo(t){const e=hs(t.mapValue.fields[ON].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,r,n,i,a,o,l,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const ou="(default)";class Oo{constructor(e,r){this.projectId=e,this.database=r||ou}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database===ou}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="__type__",mC="__max__",Ql={mapValue:{}},FN="__vector__",lu="value";function ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gu(t)?4:fC(t)?9007199254740991:pC(t)?10:11:re(28295,{value:t})}function Yr(t,e){if(t===e)return!0;const r=ps(t);if(r!==ps(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lo(t).isEqual(Lo(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=hs(i.timestampValue),l=hs(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return ms(i.bytesValue).isEqual(ms(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Qe(i.geoPointValue.latitude)===Qe(a.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Qe(i.integerValue)===Qe(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Qe(i.doubleValue),l=Qe(a.doubleValue);return o===l?au(o)===au(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Qi(t.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(sy(o)!==sy(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Yr(o[c],l[c])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function Vo(t,e){return(t.values||[]).find(r=>Yr(r,e))!==void 0}function Yi(t,e){if(t===e)return 0;const r=ps(t),n=ps(e);if(r!==n)return pe(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=Qe(a.integerValue||a.doubleValue),c=Qe(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return ay(t.timestampValue,e.timestampValue);case 4:return ay(Lo(t),Lo(e));case 5:return Im(t.stringValue,e.stringValue);case 6:return function(a,o){const l=ms(a),c=ms(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=pe(l[d],c[d]);if(h!==0)return h}return pe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=pe(Qe(a.latitude),Qe(o.latitude));return l!==0?l:pe(Qe(a.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return oy(t.arrayValue,e.arrayValue);case 10:return function(a,o){var p,y,S,b;const l=a.fields||{},c=o.fields||{},d=(p=l[lu])==null?void 0:p.arrayValue,h=(y=c[lu])==null?void 0:y.arrayValue,m=pe(((S=d==null?void 0:d.values)==null?void 0:S.length)||0,((b=h==null?void 0:h.values)==null?void 0:b.length)||0);return m!==0?m:oy(d,h)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Ql.mapValue&&o===Ql.mapValue)return 0;if(a===Ql.mapValue)return 1;if(o===Ql.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const p=Im(c[m],h[m]);if(p!==0)return p;const y=Yi(l[c[m]],d[h[m]]);if(y!==0)return y}return pe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw re(23264,{he:r})}}function ay(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const r=hs(t),n=hs(e),i=pe(r.seconds,n.seconds);return i!==0?i:pe(r.nanos,n.nanos)}function oy(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Yi(r[i],n[i]);if(a)return a}return pe(r.length,n.length)}function Ji(t){return Cm(t)}function Cm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=hs(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ms(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return J.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=Cm(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${Cm(r.fields[o])}`;return i+"}"}(t.mapValue):re(61005,{value:t})}function vc(t){switch(ps(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ku(t);return e?16+vc(e):16;case 5:return 2*t.stringValue.length;case 6:return ms(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,a)=>i+vc(a),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return Ns(n.fields,(a,o)=>{i+=a.length+vc(o)}),i}(t.mapValue);default:throw re(13486,{value:t})}}function cu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Am(t){return!!t&&"integerValue"in t}function hf(t){return!!t&&"arrayValue"in t}function ly(t){return!!t&&"nullValue"in t}function cy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bc(t){return!!t&&"mapValue"in t}function pC(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[VN])==null?void 0:n.stringValue)===FN}function co(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ns(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=co(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=co(t.arrayValue.values[r]);return e}return{...t}}function fC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===mC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!bc(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=co(r)}setAll(e){let r=ht.emptyPath(),n={},i=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=l.popLast()}o?n[l.lastSegment()]=co(o):i.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());bc(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];bc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Ns(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new Ut(co(this.value))}}function UN(t){const e=[];return Ns(t.fields,(r,n)=>{const i=new ht([r]);if(bc(n)){const a=UN(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,r,n,i,a,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new _t(e,0,ne.min(),ne.min(),ne.min(),Ut.empty(),0)}static newFoundDocument(e,r,n,i){return new _t(e,1,r,ne.min(),n,i,0)}static newNoDocument(e,r){return new _t(e,2,r,ne.min(),ne.min(),Ut.empty(),0)}static newUnknownDocument(e,r){return new _t(e,3,r,ne.min(),ne.min(),Ut.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,r){this.position=e,this.inclusive=r}}function uy(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=J.comparator(J.fromName(o.referenceValue),r.key):n=Yi(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function dy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Yr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,r="asc"){this.field=e,this.dir=r}}function gC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zN=class{};class Ze extends zN{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new yC(e,r,n):r==="array-contains"?new wC(e,n):r==="in"?new NC(e,n):r==="not-in"?new jC(e,n):r==="array-contains-any"?new _C(e,n):new Ze(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new vC(e,n):new bC(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Yi(r,this.value)):r!==null&&ps(this.value)===ps(r)&&this.matchesComparison(Yi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ir extends zN{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Ir(e,r)}matches(e){return BN(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function BN(t){return t.op==="and"}function $N(t){return xC(t)&&BN(t)}function xC(t){for(const e of t.filters)if(e instanceof Ir)return!1;return!0}function Rm(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+Ji(t.value);if($N(t))return t.filters.map(e=>Rm(e)).join(",");{const e=t.filters.map(r=>Rm(r)).join(",");return`${t.op}(${e})`}}function qN(t,e){return t instanceof Ze?function(n,i){return i instanceof Ze&&n.op===i.op&&n.field.isEqual(i.field)&&Yr(n.value,i.value)}(t,e):t instanceof Ir?function(n,i){return i instanceof Ir&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,o,l)=>a&&qN(o,i.filters[l]),!0):!1}(t,e):void re(19439)}function HN(t){return t instanceof Ze?function(r){return`${r.field.canonicalString()} ${r.op} ${Ji(r.value)}`}(t):t instanceof Ir?function(r){return r.op.toString()+" {"+r.getFilters().map(HN).join(" ,")+"}"}(t):"Filter"}class yC extends Ze{constructor(e,r,n){super(e,r,n),this.key=J.fromName(n.referenceValue)}matches(e){const r=J.comparator(e.key,this.key);return this.matchesComparison(r)}}class vC extends Ze{constructor(e,r){super(e,"in",r),this.keys=WN("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class bC extends Ze{constructor(e,r){super(e,"not-in",r),this.keys=WN("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function WN(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>J.fromName(n.referenceValue))}class wC extends Ze{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return hf(r)&&Vo(r.arrayValue,this.value)}}class NC extends Ze{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Vo(this.value.arrayValue,r)}}class jC extends Ze{constructor(e,r){super(e,"not-in",r)}matches(e){if(Vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Vo(this.value.arrayValue,r)}}class _C extends Ze{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!hf(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Vo(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,r=null,n=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function hy(t,e=null,r=[],n=[],i=null,a=null,o=null){return new EC(t,e,r,n,i,a,o)}function mf(t){const e=ie(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Rm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Wu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Ji(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Ji(n)).join(",")),e.Te=r}return e.Te}function pf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!gC(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!qN(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dy(t.startAt,e.startAt)&&dy(t.endAt,e.endAt)}function Pm(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,r=null,n=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SC(t,e,r,n,i,a,o,l){return new ii(t,e,r,n,i,a,o,l)}function Qu(t){return new ii(t)}function my(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ff(t){return t.collectionGroup!==null}function Fi(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new st(ht.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Fo(a,n))}),r.has(ht.keyField().canonicalString())||e.Ie.push(new Fo(ht.keyField(),n))}return e.Ie}function $r(t){const e=ie(t);return e.Ee||(e.Ee=TC(e,Fi(t))),e.Ee}function TC(t,e){if(t.limitType==="F")return hy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Fo(i.field,a)});const r=t.endAt?new Xi(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Xi(t.startAt.position,t.startAt.inclusive):null;return hy(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Dm(t,e){const r=t.filters.concat([e]);return new ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function uu(t,e,r){return new ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Yu(t,e){return pf($r(t),$r(e))&&t.limitType===e.limitType}function GN(t){return`${mf($r(t))}|lt:${t.limitType}`}function pi(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>HN(i)).join(", ")}]`),Wu(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Ji(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Ji(i)).join(",")),`Target(${n})`}($r(t))}; limitType=${t.limitType})`}function Ju(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):J.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of Fi(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(o,l,c){const d=uy(o,l,c);return o.inclusive?d<=0:d<0}(n.startAt,Fi(n),i)||n.endAt&&!function(o,l,c){const d=uy(o,l,c);return o.inclusive?d>=0:d>0}(n.endAt,Fi(n),i))}(t,e)}function kC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KN(t){return(e,r)=>{let n=!1;for(const i of Fi(t)){const a=IC(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function IC(t,e,r){const n=t.field.isKeyField()?J.comparator(e.key,r.key):function(a,o,l){const c=o.data.field(a),d=l.data.field(a);return c!==null&&d!==null?Yi(c,d):re(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return RN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new qe(J.comparator);function Sn(){return CC}const QN=new qe(J.comparator);function Ga(...t){let e=QN;for(const r of t)e=e.insert(r.key,r);return e}function YN(t){let e=QN;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Ls(){return uo()}function JN(){return uo()}function uo(){return new ai(t=>t.toString(),(t,e)=>t.isEqual(e))}const AC=new qe(J.comparator),RC=new st(J.comparator);function fe(...t){let e=RC;for(const r of t)e=e.add(r);return e}const PC=new st(pe);function DC(){return PC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:au(e)?"-0":e}}function XN(t){return{integerValue:""+t}}function ZN(t,e){return lC(e)?XN(e):gf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this._=void 0}}function MC(t,e,r){return t instanceof Uo?function(i,a){const o={fields:{[MN]:{stringValue:DN},[ON]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Gu(a)&&(a=Ku(a)),a&&(o.fields[LN]=a),{mapValue:o}}(r,e):t instanceof zo?tj(t,e):t instanceof Bo?rj(t,e):function(i,a){const o=ej(i,a),l=py(o)+py(i.Ae);return Am(o)&&Am(i.Ae)?XN(l):gf(i.serializer,l)}(t,e)}function LC(t,e,r){return t instanceof zo?tj(t,e):t instanceof Bo?rj(t,e):r}function ej(t,e){return t instanceof $o?function(n){return Am(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Uo extends Xu{}class zo extends Xu{constructor(e){super(),this.elements=e}}function tj(t,e){const r=nj(e);for(const n of t.elements)r.some(i=>Yr(i,n))||r.push(n);return{arrayValue:{values:r}}}class Bo extends Xu{constructor(e){super(),this.elements=e}}function rj(t,e){let r=nj(e);for(const n of t.elements)r=r.filter(i=>!Yr(i,n));return{arrayValue:{values:r}}}class $o extends Xu{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function py(t){return Qe(t.integerValue||t.doubleValue)}function nj(t){return hf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,r){this.field=e,this.transform=r}}function OC(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof zo&&i instanceof zo||n instanceof Bo&&i instanceof Bo?Qi(n.elements,i.elements,Yr):n instanceof $o&&i instanceof $o?Yr(n.Ae,i.Ae):n instanceof Uo&&i instanceof Uo}(t.transform,e.transform)}class VC{constructor(e,r){this.version=e,this.transformResults=r}}class cr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zu{}function ij(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xf(t.key,cr.none()):new il(t.key,t.data,cr.none());{const r=t.data,n=Ut.empty();let i=new st(ht.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new js(t.key,n,new Jt(i.toArray()),cr.none())}}function FC(t,e,r){t instanceof il?function(i,a,o){const l=i.value.clone(),c=gy(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof js?function(i,a,o){if(!wc(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=gy(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(aj(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function ho(t,e,r,n){return t instanceof il?function(a,o,l,c){if(!wc(a.precondition,o))return l;const d=a.value.clone(),h=xy(a.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof js?function(a,o,l,c){if(!wc(a.precondition,o))return l;const d=xy(a.fieldTransforms,c,o),h=o.data;return h.setAll(aj(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,r,n):function(a,o,l){return wc(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function UC(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=ej(n.transform,i||null);a!=null&&(r===null&&(r=Ut.empty()),r.set(n.field,a))}return r||null}function fy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Qi(n,i,(a,o)=>OC(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class il extends Zu{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class js extends Zu{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function aj(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function gy(t,e,r){const n=new Map;we(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);n.set(a.field,LC(o,l,r[i]))}return n}function xy(t,e,r){const n=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);n.set(i.field,MC(a,o,e))}return n}class xf extends Zu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zC extends Zu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&FC(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=ho(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=ho(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=JN();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(i.key)?null:l;const c=ij(o,l);c!==null&&n.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ne.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),fe())}isEqual(e){return this.batchId===e.batchId&&Qi(this.mutations,e.mutations,(r,n)=>fy(r,n))&&Qi(this.baseMutations,e.baseMutations,(r,n)=>fy(r,n))}}class yf{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){we(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return AC}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new yf(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,ge;function HC(t){switch(t){case V.OK:return re(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function oj(t){if(t===void 0)return En("GRPC error has no .code"),V.UNKNOWN;switch(t){case Je.OK:return V.OK;case Je.CANCELLED:return V.CANCELLED;case Je.UNKNOWN:return V.UNKNOWN;case Je.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Je.INTERNAL:return V.INTERNAL;case Je.UNAVAILABLE:return V.UNAVAILABLE;case Je.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Je.NOT_FOUND:return V.NOT_FOUND;case Je.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Je.ABORTED:return V.ABORTED;case Je.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Je.DATA_LOSS:return V.DATA_LOSS;default:return re(39323,{code:t})}}(ge=Je||(Je={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new as([4294967295,4294967295],0);function yy(t){const e=WC().encode(t),r=new wN;return r.update(e),new Uint8Array(r.digest())}function vy(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new as([r,n],0),new as([i,a],0)]}class vf{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Ka(`Invalid padding: ${r}`);if(n<0)throw new Ka(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=as.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(as.fromNumber(n)));return i.compare(GC)===1&&(i=new as([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=yy(e),[n,i]=vy(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,i,a);if(!this.we(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new vf(a,i,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const r=yy(e),[n,i]=vy(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,i,a);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new ed(ne.min(),i,new qe(pe),Sn(),fe())}}class al{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new al(n,r,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class lj{constructor(e,r){this.targetId=e,this.Ce=r}}class cj{constructor(e,r,n=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class by{constructor(){this.ve=0,this.Fe=wy(),this.Me=ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=fe(),r=fe(),n=fe();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:re(38017,{changeType:a})}}),new al(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=wy()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sn(),this.Je=Yl(),this.He=Yl(),this.Ye=new qe(pe)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const a=i.target;if(Pm(a))if(n===0){const o=new J(a.path);this.et(r,o,_t.newNoDocument(o,ne.min()))}else we(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(r);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let o,l;try{o=ms(n).toUint8Array()}catch(c){if(c instanceof PN)return Ki("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new vf(o,i,a)}catch(c){return Ki(c instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(r,a,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&Pm(l.target)){const c=new J(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,_t.newNoDocument(c,e))}a.Be&&(r.set(o,a.ke()),a.qe())}});let n=fe();this.He.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const i=new ed(e,r,this.Ye,this.je,n);return this.je=Sn(),this.Je=Yl(),this.He=Yl(),this.Ye=new qe(pe),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new by,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new st(pe),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new st(pe),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||W("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new by),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Yl(){return new qe(J.comparator)}function wy(){return new qe(J.comparator)}const QC={asc:"ASCENDING",desc:"DESCENDING"},YC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JC={and:"AND",or:"OR"};class XC{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Mm(t,e){return t.useProto3Json||Wu(e)?e:{value:e}}function du(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZC(t,e){return du(t,e.toTimestamp())}function qr(t){return we(!!t,49232),ne.fromTimestamp(function(r){const n=hs(r);return new De(n.seconds,n.nanos)}(t))}function bf(t,e){return Lm(t,e).canonicalString()}function Lm(t,e){const r=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function dj(t){const e=Se.fromString(t);return we(gj(e),10190,{key:e.toString()}),e}function Om(t,e){return bf(t.databaseId,e.path)}function vh(t,e){const r=dj(e);if(r.get(1)!==t.databaseId.projectId)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new J(mj(r))}function hj(t,e){return bf(t.databaseId,e)}function eA(t){const e=dj(t);return e.length===4?Se.emptyPath():mj(e)}function Vm(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mj(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ny(t,e,r){return{name:Om(t,e),fields:r.value.mapValue.fields}}function tA(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(we(h===void 0||typeof h=="string",58123),ft.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ft.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?V.UNKNOWN:oj(d.code);return new $(h,d.message||"")}(o);r=new cj(n,i,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=vh(t,n.document.name),a=qr(n.document.updateTime),o=n.document.createTime?qr(n.document.createTime):ne.min(),l=new Ut({mapValue:{fields:n.document.fields}}),c=_t.newFoundDocument(i,a,o,l),d=n.targetIds||[],h=n.removedTargetIds||[];r=new Nc(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=vh(t,n.document),a=n.readTime?qr(n.readTime):ne.min(),o=_t.newNoDocument(i,a),l=n.removedTargetIds||[];r=new Nc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=vh(t,n.document),a=n.removedTargetIds||[];r=new Nc([],a,i,null)}else{if(!("filter"in e))return re(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new qC(i,a),l=n.targetId;r=new lj(l,o)}}return r}function rA(t,e){let r;if(e instanceof il)r={update:Ny(t,e.key,e.value)};else if(e instanceof xf)r={delete:Om(t,e.key)};else if(e instanceof js)r={update:Ny(t,e.key,e.data),updateMask:dA(e.fieldMask)};else{if(!(e instanceof zC))return re(16599,{Vt:e.type});r={verify:Om(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof Uo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof $o)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw re(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:ZC(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:re(27497)}(t,e.precondition)),r}function nA(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(r=>function(i,a){let o=i.updateTime?qr(i.updateTime):qr(a);return o.isEqual(ne.min())&&(o=qr(a)),new VC(o,i.transformResults||[])}(r,e))):[]}function sA(t,e){return{documents:[hj(t,e.path)]}}function iA(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=hj(t,i);const a=function(d){if(d.length!==0)return fj(Ir.create(d,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:fi(p.field),direction:lA(p.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Mm(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:r,parent:i}}function aA(t){let e=eA(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){we(n===1,65062);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];r.where&&(a=function(m){const p=pj(m);return p instanceof Ir&&$N(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(m){return m.map(p=>function(S){return new Fo(gi(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Wu(p)?null:p}(r.limit));let c=null;r.startAt&&(c=function(m){const p=!!m.before,y=m.values||[];return new Xi(y,p)}(r.startAt));let d=null;return r.endAt&&(d=function(m){const p=!m.before,y=m.values||[];return new Xi(y,p)}(r.endAt)),SC(e,i,o,a,l,"F",c,d)}function oA(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function pj(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=gi(r.unaryFilter.field);return Ze.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=gi(r.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=gi(r.unaryFilter.field);return Ze.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gi(r.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(r){return Ze.create(gi(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ir.create(r.compositeFilter.filters.map(n=>pj(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(r.compositeFilter.op))}(t):re(30097,{filter:t})}function lA(t){return QC[t]}function cA(t){return YC[t]}function uA(t){return JC[t]}function fi(t){return{fieldPath:t.canonicalString()}}function gi(t){return ht.fromServerFormat(t.fieldPath)}function fj(t){return t instanceof Ze?function(r){if(r.op==="=="){if(cy(r.value))return{unaryFilter:{field:fi(r.field),op:"IS_NAN"}};if(ly(r.value))return{unaryFilter:{field:fi(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(cy(r.value))return{unaryFilter:{field:fi(r.field),op:"IS_NOT_NAN"}};if(ly(r.value))return{unaryFilter:{field:fi(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fi(r.field),op:cA(r.op),value:r.value}}}(t):t instanceof Ir?function(r){const n=r.getFilters().map(i=>fj(i));return n.length===1?n[0]:{compositeFilter:{op:uA(r.op),filters:n}}}(t):re(54877,{filter:t})}function dA(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function gj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,r,n,i,a=ne.min(),o=ne.min(),l=ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.yt=e}}function mA(t){const e=aA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.Cn=new fA}addToCollectionParentIndex(e,r){return this.Cn.add(r),F.resolve()}getCollectionParents(e,r){return F.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return F.resolve()}deleteFieldIndex(e,r){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,r){return F.resolve()}getDocumentsMatchingTarget(e,r){return F.resolve(null)}getIndexType(e,r){return F.resolve(0)}getFieldIndexes(e,r){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,r){return F.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,r){return F.resolve(ds.min())}updateCollectionGroup(e,r,n){return F.resolve()}updateIndexEntries(e,r){return F.resolve()}}class fA{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new st(Se.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new st(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xj=41943040;class Vt{static withCacheSize(e){return new Vt(e,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(xj,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zi(0)}static cr(){return new Zi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="LruGarbageCollector",gA=1048576;function Ey([t,e],[r,n]){const i=pe(t,r);return i===0?pe(e,n):i}class xA{constructor(e){this.Ir=e,this.buffer=new st(Ey),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Ey(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class yA{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(_y,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ha(r)?W(_y,"Ignoring IndexedDB error during garbage collection: ",r):await da(r)}await this.Vr(3e5)})}}class vA{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return F.resolve(Hu.ce);const n=new xA(r);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(jy)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jy):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,a,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(n=m,l=Date.now(),this.removeTargets(e,n,r))).next(m=>(a=m,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(m=>(d=Date.now(),mi()<=me.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:m})))}}function bA(t,e){return new vA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this.changes=new ai(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?F.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&ho(n.mutation,i,Jt.empty(),De.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,fe()).next(()=>n))}getLocalViewOfDocuments(e,r,n=fe()){const i=Ls();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let o=Ga();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Ls();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,fe()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,i){let a=Sn();const o=uo(),l=function(){return uo()}();return r.forEach((c,d)=>{const h=n.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof js)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),ho(h.mutation,d,h.mutation.getFieldMask(),De.now())):o.set(d.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((d,h)=>o.set(d,h)),r.forEach((d,h)=>l.set(d,new NA(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,r){const n=uo();let i=new qe((o,l)=>o-l),a=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=r.get(c);if(d===null)return;let h=n.get(c)||Jt.empty();h=l.applyToLocalView(d,h),n.set(c,h);const m=(i.get(l.batchId)||fe()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,m=JN();h.forEach(p=>{if(!a.has(p)){const y=ij(r.get(p),n.get(p));y!==null&&m.set(p,y),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):ff(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):F.resolve(Ls());let l=Mo,c=a;return o.next(d=>F.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,c,d,fe())).next(h=>({batchId:l,changes:YN(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new J(r)).next(n=>{let i=Ga();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let o=Ga();return this.indexManager.getCollectionParents(e,a).next(l=>F.forEach(l,c=>{const d=function(m,p){return new ii(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(r,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i))).next(o=>{a.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,_t.newInvalidDocument(h)))});let l=Ga();return o.forEach((c,d)=>{const h=a.get(c);h!==void 0&&ho(h.mutation,d,Jt.empty(),De.now()),Ju(r,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return F.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:qr(i.createTime)}}(r)),F.resolve()}getNamedQuery(e,r){return F.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:mA(i.bundledQuery),readTime:qr(i.readTime)}}(r)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.overlays=new qe(J.comparator),this.qr=new Map}getOverlay(e,r){return F.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Ls();return F.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.St(e,r,a)}),F.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),F.resolve()}getOverlaysForCollection(e,r,n){const i=Ls(),a=r.length+1,o=new J(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===a&&c.largestBatchId>n&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new qe((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let h=a.get(d.largestBatchId);h===null&&(h=Ls(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Ls(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return F.resolve(l)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new $C(r,n));let a=this.qr.get(r);a===void 0&&(a=fe(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this.Qr=new st(at.$r),this.Ur=new st(at.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new at(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new at(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new J(new Se([])),n=new at(r,e),i=new at(r,e+1),a=[];return this.Ur.forEachInRange([n,i],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new J(new Se([])),n=new at(r,e),i=new at(r,e+1);let a=fe();return this.Ur.forEachInRange([n,i],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new at(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class at{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return J.comparator(e.key,r.key)||pe(e.Yr,r.Yr)}static Kr(e,r){return pe(e.Yr,r.Yr)||J.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new st(at.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new BC(a,r,n,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new at(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,r){return F.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),a=i<0?0:i;return F.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?df:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new at(r,0),i=new at(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,i],o=>{const l=this.Xr(o.Yr);a.push(l)}),F.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new st(pe);return r.forEach(i=>{const a=new at(i,0),o=new at(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],l=>{n=n.add(l.Yr)})}),F.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;J.isDocumentKey(a)||(a=a.child(""));const o=new at(new J(a),0);let l=new st(pe);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Yr)),!0)},o),F.resolve(this.ti(l))}ti(e){const r=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){we(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return F.forEach(r.mutations,i=>{const a=new at(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new at(r,0),i=this.Zr.firstAfterOrEqual(n);return F.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.ri=e,this.docs=function(){return new qe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return F.resolve(n?n.document.mutableCopy():_t.newInvalidDocument(r))}getEntries(e,r){let n=Sn();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():_t.newInvalidDocument(i))}),F.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=Sn();const o=r.path,l=new J(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||sC(nC(h),n)<=0||(i.has(h.key)||Ju(r,h))&&(a=a.insert(h.key,h.mutableCopy()))}return F.resolve(a)}getAllFromCollectionGroup(e,r,n,i){re(9500)}ii(e,r){return F.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new IA(this)}getSize(e){return F.resolve(this.size)}}class IA extends wA{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),F.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.persistence=e,this.si=new ai(r=>mf(r),pf),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new wf,this.targetCount=0,this.ai=Zi.ur()}forEachTarget(e,r){return this.si.forEach((n,i)=>r(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),F.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Zi(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,F.resolve()}updateTargetData(e,r){return this.Pr(r),F.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(a).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return F.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),F.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),F.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return F.resolve(n)}containsKey(e,r){return F.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,r){this.ui={},this.overlays={},this.ci=new Hu(0),this.li=!1,this.li=!0,this.hi=new SA,this.referenceDelegate=e(this),this.Pi=new CA(this),this.indexManager=new pA,this.remoteDocumentCache=function(i){return new kA(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new hA(r),this.Ii=new _A(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new EA,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new TA(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){W("MemoryPersistence","Starting transaction:",e);const i=new AA(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,r){return F.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class AA extends aC{constructor(e){super(),this.currentSequenceNumber=e}}class Nf{constructor(e){this.persistence=e,this.Ri=new wf,this.Vi=null}static mi(e){return new Nf(e)}get fi(){if(this.Vi)return this.Vi;throw re(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),F.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),F.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),F.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,n=>{const i=J.fromPath(n);return this.gi(e,i).next(a=>{a||r.removeEntry(i,ne.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return F.or([()=>F.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class hu{constructor(e,r){this.persistence=e,this.pi=new ai(n=>cC(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=bA(this,r)}static mi(e,r){return new hu(e,r)}Ei(){}di(e){return F.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return F.forEach(this.pi,(n,i)=>this.br(e,n,i).next(a=>a?F.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,r).next(l=>{l||(n++,a.removeEntry(o,ne.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=vc(e.data.value)),r}br(e,r,n){return F.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return F.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=fe(),i=fe();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new jf(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return i4()?8:oC(kt())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.ys(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,r,i,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new RA;return this.Ss(e,r,o).next(l=>{if(a.result=l,this.Vs)return this.bs(e,r,o,l.size)})}).next(()=>a.result)}bs(e,r,n,i){return n.documentReadCount<this.fs?(mi()<=me.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",pi(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(mi()<=me.DEBUG&&W("QueryEngine","Query:",pi(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(mi()<=me.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",pi(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(r))):F.resolve())}ys(e,r){if(my(r))return F.resolve(null);let n=$r(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=uu(r,null,"F"),n=$r(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=fe(...a);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const d=this.Ds(r,l);return this.Cs(r,d,o,c.readTime)?this.ys(e,uu(r,null,"F")):this.vs(e,d,r,c)}))})))}ws(e,r,n,i){return my(r)||i.isEqual(ne.min())?F.resolve(null):this.ps.getDocuments(e,n).next(a=>{const o=this.Ds(r,a);return this.Cs(r,o,n,i)?F.resolve(null):(mi()<=me.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pi(r)),this.vs(e,o,r,rC(i,Mo)).next(l=>l))})}Ds(e,r){let n=new st(KN(e));return r.forEach((i,a)=>{Ju(e,a)&&(n=n.add(a))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,r,n){return mi()<=me.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",pi(r)),this.ps.getDocumentsMatchingQuery(e,r,ds.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="LocalStore",DA=3e8;class MA{constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new qe(pe),this.xs=new ai(a=>mf(a),pf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function LA(t,e,r,n){return new MA(t,e,r,n)}async function vj(t,e){const r=ie(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let c=fe();for(const d of i){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return r.localDocuments.getDocuments(n,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function OA(t,e){const r=ie(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const m=d.batch,p=m.keys();let y=F.resolve();return p.forEach(S=>{y=y.next(()=>h.getEntry(c,S)).next(b=>{const N=d.docVersions.get(S);we(N!==null,48541),b.version.compareTo(N)<0&&(m.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),h.addEntry(b)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=fe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function bj(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function VA(t,e){const r=ie(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const p=i.get(m);if(!p)return;l.push(r.Pi.removeMatchingKeys(a,h.removedDocuments,m).next(()=>r.Pi.addMatchingKeys(a,h.addedDocuments,m)));let y=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(ft.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,n)),i=i.insert(m,y),function(b,N,g){return b.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=DA?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(p,y,h)&&l.push(r.Pi.updateTargetData(a,y))});let c=Sn(),d=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(FA(a,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!n.isEqual(ne.min())){const h=r.Pi.getLastRemoteSnapshotVersion(a).next(m=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(h)}return F.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,c,d)).next(()=>c)}).then(a=>(r.Ms=i,a))}function FA(t,e,r){let n=fe(),i=fe();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=Sn();return r.forEach((l,c)=>{const d=a.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):W(_f,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function UA(t,e){const r=ie(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=df),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function zA(t,e){const r=ie(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Pi.getTargetData(n,e).next(a=>a?(i=a,F.resolve(i)):r.Pi.allocateTargetId(n).next(o=>(i=new Qn(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Fm(t,e,r){const n=ie(t),i=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ha(o))throw o;W(_f,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function Sy(t,e,r){const n=ie(t);let i=ne.min(),a=fe();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const m=ie(c),p=m.xs.get(h);return p!==void 0?F.resolve(m.Ms.get(p)):m.Pi.getTargetData(d,h)}(n,o,$r(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,r?i:ne.min(),r?a:fe())).next(l=>(BA(n,kC(e),l),{documents:l,Qs:a})))}function BA(t,e,r){let n=t.Os.get(e)||ne.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Os.set(e,n)}class Ty{constructor(){this.activeTargetIds=DC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $A{constructor(){this.Mo=new Ty,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ty,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="ConnectivityMonitor";class Iy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(ky,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(ky,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl=null;function Um(){return Jl===null?Jl=function(){return 268435456+Math.round(2147483648*Math.random())}():Jl++,"0x"+Jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh="RestConnection",HA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===ou?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,a){const o=Um(),l=this.zo(e,r.toUriEncodedString());W(bh,`Sending RPC '${e}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:d}=new URL(l),h=ni(d);return this.Jo(e,l,c,n,h).then(m=>(W(bh,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ki(bh,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",n),m})}Ho(e,r,n,i,a,o){return this.Go(e,r,n,i,a)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ua}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>e[a]=i),n&&n.headers.forEach((i,a)=>e[a]=i)}zo(e,r){const n=HA[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class KA extends WA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,a){const o=Um();return new Promise((l,c)=>{const d=new NN;d.setWithCredentials(!0),d.listenOnce(jN.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case yc.NO_ERROR:const m=d.getResponseJson();W(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case yc.TIMEOUT:W(wt,`RPC '${e}' ${o} timed out`),c(new $(V.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:const p=d.getStatus();if(W(wt,`RPC '${e}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const S=y==null?void 0:y.error;if(S&&S.status&&S.message){const b=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(v)>=0?v:V.UNKNOWN}(S.status);c(new $(b,S.message))}else c(new $(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new $(V.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{W(wt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);W(wt,`RPC '${e}' ${o} sending request:`,i),d.send(r,"POST",h,n,15)})}T_(e,r,n){const i=Um(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SN(),l=EN(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const h=a.join("");W(wt,`Creating RPC '${e}' stream ${i}: ${h}`,c);const m=o.createWebChannel(h,c);this.I_(m);let p=!1,y=!1;const S=new GA({Yo:N=>{y?W(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(p||(W(wt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),W(wt,`RPC '${e}' stream ${i} sending:`,N),m.send(N))},Zo:()=>m.close()}),b=(N,g,v)=>{N.listen(g,j=>{try{v(j)}catch(P){setTimeout(()=>{throw P},0)}})};return b(m,Wa.EventType.OPEN,()=>{y||(W(wt,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),b(m,Wa.EventType.CLOSE,()=>{y||(y=!0,W(wt,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(m))}),b(m,Wa.EventType.ERROR,N=>{y||(y=!0,Ki(wt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),S.a_(new $(V.UNAVAILABLE,"The operation could not be completed")))}),b(m,Wa.EventType.MESSAGE,N=>{var g;if(!y){const v=N.data[0];we(!!v,16349);const j=v,P=(j==null?void 0:j.error)||((g=j[0])==null?void 0:g.error);if(P){W(wt,`RPC '${e}' stream ${i} received error:`,P);const M=P.status;let D=function(I){const R=Je[I];if(R!==void 0)return oj(R)}(M),T=P.message;D===void 0&&(D=V.INTERNAL,T="Unknown error status: "+M+" with message "+P.message),y=!0,S.a_(new $(D,T)),m.close()}else W(wt,`RPC '${e}' stream ${i} received:`,v),S.u_(v)}}),b(l,_N.STAT_EVENT,N=>{N.stat===km.PROXY?W(wt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===km.NOPROXY&&W(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function wh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){return new XC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,r,n=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="PersistentStream";class Nj{constructor(e,r,n,i,a,o,l,c){this.Mi=e,this.S_=n,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wj(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===V.RESOURCE_EXHAUSTED?(En(r.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===r&&this.G_(n,i)},n=>{e(()=>{const i=new $(V.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(Cy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(W(Cy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QA extends Nj{constructor(e,r,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=tA(this.serializer,e),n=function(a){if(!("targetChange"in a))return ne.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?qr(o.readTime):ne.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=Vm(this.serializer),r.addTarget=function(a,o){let l;const c=o.target;if(l=Pm(c)?{documents:sA(a,c)}:{query:iA(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=uj(a,o.resumeToken);const d=Mm(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){l.readTime=du(a,o.snapshotVersion.toTimestamp());const d=Mm(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=oA(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=Vm(this.serializer),r.removeTarget=e,this.q_(r)}}class YA extends Nj{constructor(e,r,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=nA(e.writeResults,e.commitTime),n=qr(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=Vm(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>rA(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{}class XA extends JA{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,Lm(r,n),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $(V.UNKNOWN,a.toString())})}Ho(e,r,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Lm(r,n),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(V.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ZA{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(En(r),this.aa=!1):W("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="RemoteStore";class eR{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{oi(this)&&(W(Zs,"Restarting streams for network reachability change."),await async function(c){const d=ie(c);d.Ea.add(4),await ol(d),d.Ra.set("Unknown"),d.Ea.delete(4),await rd(d)}(this))})}),this.Ra=new ZA(n,i)}}async function rd(t){if(oi(t))for(const e of t.da)await e(!0)}async function ol(t){for(const e of t.da)await e(!1)}function jj(t,e){const r=ie(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),kf(r)?Tf(r):ma(r).O_()&&Sf(r,e))}function Ef(t,e){const r=ie(t),n=ma(r);r.Ia.delete(e),n.O_()&&_j(r,e),r.Ia.size===0&&(n.O_()?n.L_():oi(r)&&r.Ra.set("Unknown"))}function Sf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ma(t).Y_(e)}function _j(t,e){t.Va.Ue(e),ma(t).Z_(e)}function Tf(t){t.Va=new KC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ma(t).start(),t.Ra.ua()}function kf(t){return oi(t)&&!ma(t).x_()&&t.Ia.size>0}function oi(t){return ie(t).Ea.size===0}function Ej(t){t.Va=void 0}async function tR(t){t.Ra.set("Online")}async function rR(t){t.Ia.forEach((e,r)=>{Sf(t,e)})}async function nR(t,e){Ej(t),kf(t)?(t.Ra.ha(e),Tf(t)):t.Ra.set("Unknown")}async function sR(t,e,r){if(t.Ra.set("Online"),e instanceof cj&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(n){W(Zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await mu(t,n)}else if(e instanceof Nc?t.Va.Ze(e):e instanceof lj?t.Va.st(e):t.Va.tt(e),!r.isEqual(ne.min()))try{const n=await bj(t.localStore);r.compareTo(n)>=0&&await function(a,o){const l=a.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=a.Ia.get(d);h&&a.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=a.Ia.get(c);if(!h)return;a.Ia.set(c,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),_j(a,c);const m=new Qn(h.target,c,d,h.sequenceNumber);Sf(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){W(Zs,"Failed to raise snapshot:",n),await mu(t,n)}}async function mu(t,e,r){if(!ha(e))throw e;t.Ea.add(1),await ol(t),t.Ra.set("Offline"),r||(r=()=>bj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(Zs,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await rd(t)})}function Sj(t,e){return e().catch(r=>mu(t,r,e))}async function nd(t){const e=ie(t),r=fs(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:df;for(;iR(e);)try{const i=await UA(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,aR(e,i)}catch(i){await mu(e,i)}Tj(e)&&kj(e)}function iR(t){return oi(t)&&t.Ta.length<10}function aR(t,e){t.Ta.push(e);const r=fs(t);r.O_()&&r.X_&&r.ea(e.mutations)}function Tj(t){return oi(t)&&!fs(t).x_()&&t.Ta.length>0}function kj(t){fs(t).start()}async function oR(t){fs(t).ra()}async function lR(t){const e=fs(t);for(const r of t.Ta)e.ea(r.mutations)}async function cR(t,e,r){const n=t.Ta.shift(),i=yf.from(n,e,r);await Sj(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nd(t)}async function uR(t,e){e&&fs(t).X_&&await async function(n,i){if(function(o){return HC(o)&&o!==V.ABORTED}(i.code)){const a=n.Ta.shift();fs(n).B_(),await Sj(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await nd(n)}}(t,e),Tj(t)&&kj(t)}async function Ay(t,e){const r=ie(t);r.asyncQueue.verifyOperationInProgress(),W(Zs,"RemoteStore received new credentials");const n=oi(r);r.Ea.add(3),await ol(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await rd(r)}async function dR(t,e){const r=ie(t);e?(r.Ea.delete(2),await rd(r)):e||(r.Ea.add(2),await ol(r),r.Ra.set("Unknown"))}function ma(t){return t.ma||(t.ma=function(r,n,i){const a=ie(r);return a.sa(),new QA(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:tR.bind(null,t),t_:rR.bind(null,t),r_:nR.bind(null,t),H_:sR.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),kf(t)?Tf(t):t.Ra.set("Unknown")):(await t.ma.stop(),Ej(t))})),t.ma}function fs(t){return t.fa||(t.fa=function(r,n,i){const a=ie(r);return a.sa(),new YA(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:oR.bind(null,t),r_:uR.bind(null,t),ta:lR.bind(null,t),na:cR.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await nd(t)):(await t.fa.stop(),t.Ta.length>0&&(W(Zs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const o=Date.now()+n,l=new If(e,r,o,i,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cf(t,e){if(En("AsyncQueue",`${e}: ${t}`),ha(t))return new $(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{static emptySet(e){return new Ui(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||J.comparator(r.key,n.key):(r,n)=>J.comparator(r.key,n.key),this.keyedMap=Ga(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ui)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ui;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(){this.ga=new qe(J.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):re(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class ea{constructor(e,r,n,i,a,o,l,c,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,i,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new ea(e,r,Ui.emptySet(r),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class mR{constructor(){this.queries=Py(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=ie(r),a=i.queries;i.queries=Py(),a.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new $(V.ABORTED,"Firestore shutting down"))}}function Py(){return new ai(t=>GN(t),Yu)}async function Af(t,e){const r=ie(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.ba()&&e.Da()&&(n=2):(a=new hR,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(i,!0);break;case 1:a.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const l=Cf(o,`Initialization of query '${pi(e.query)}' failed`);return void e.onError(l)}r.queries.set(i,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&Pf(r)}async function Rf(t,e){const r=ie(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function pR(t,e){const r=ie(t);let n=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const l of o.Sa)l.Fa(i)&&(n=!0);o.wa=i}}n&&Pf(r)}function fR(t,e,r){const n=ie(t),i=n.queries.get(e);if(i)for(const a of i.Sa)a.onError(r);n.queries.delete(e)}function Pf(t){t.Ca.forEach(e=>{e.next()})}var zm,Dy;(Dy=zm||(zm={})).Ma="default",Dy.Cache="cache";class Df{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new ea(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.key=e}}class Cj{constructor(e){this.key=e}}class gR{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=fe(),this.mutatedKeys=fe(),this.eu=KN(e),this.tu=new Ui(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new Ry,i=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const p=i.get(h),y=Ju(this.query,m)?m:null,S=!!p&&this.mutatedKeys.has(p.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let N=!1;p&&y?p.data.isEqual(y.data)?S!==b&&(n.track({type:3,doc:y}),N=!0):this.su(p,y)||(n.track({type:2,doc:y}),N=!0,(c&&this.eu(y,c)>0||d&&this.eu(y,d)<0)&&(l=!0)):!p&&y?(n.track({type:0,doc:y}),N=!0):p&&!y&&(n.track({type:1,doc:p}),N=!0,(c||d)&&(l=!0)),N&&(y?(o=o.add(y),a=b?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),n.track({type:1,doc:h})}return{tu:o,iu:n,Cs:l,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(y,S){const b=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Rt:N})}};return b(y)-b(S)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(n),i=i??!1;const l=r&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new ea(this.query,e.tu,a,o,e.mutatedKeys,c===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ry,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=fe(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new Cj(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new Ij(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=fe();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return ea.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Mf="SyncEngine";class xR{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class yR{constructor(e){this.key=e,this.hu=!1}}class vR{constructor(e,r,n,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ai(l=>GN(l),Yu),this.Iu=new Map,this.Eu=new Set,this.du=new qe(J.comparator),this.Au=new Map,this.Ru=new wf,this.Vu={},this.mu=new Map,this.fu=Zi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bR(t,e,r=!0){const n=Lj(t);let i;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Aj(n,e,r,!0),i}async function wR(t,e){const r=Lj(t);await Aj(r,e,!0,!1)}async function Aj(t,e,r,n){const i=await zA(t.localStore,$r(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return n&&(l=await NR(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&jj(t.remoteStore,i),l}async function NR(t,e,r,n,i){t.pu=(m,p,y)=>async function(b,N,g,v){let j=N.view.ru(g);j.Cs&&(j=await Sy(b.localStore,N.query,!1).then(({documents:T})=>N.view.ru(T,j)));const P=v&&v.targetChanges.get(N.targetId),M=v&&v.targetMismatches.get(N.targetId)!=null,D=N.view.applyChanges(j,b.isPrimaryClient,P,M);return Ly(b,N.targetId,D.au),D.snapshot}(t,m,p,y);const a=await Sy(t.localStore,e,!0),o=new gR(e,a.Qs),l=o.ru(a.documents),c=al.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,c);Ly(t,r,d.au);const h=new xR(e,r,o);return t.Tu.set(e,h),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function jR(t,e,r){const n=ie(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);if(a.length>1)return n.Iu.set(i.targetId,a.filter(o=>!Yu(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Fm(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Ef(n.remoteStore,i.targetId),Bm(n,i.targetId)}).catch(da)):(Bm(n,i.targetId),await Fm(n.localStore,i.targetId,!0))}async function _R(t,e){const r=ie(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Ef(r.remoteStore,n.targetId))}async function ER(t,e,r){const n=RR(t);try{const i=await function(o,l){const c=ie(o),d=De.now(),h=l.reduce((y,S)=>y.add(S.key),fe());let m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=Sn(),b=fe();return c.Ns.getEntries(y,h).next(N=>{S=N,S.forEach((g,v)=>{v.isValidDocument()||(b=b.add(g))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,S)).next(N=>{m=N;const g=[];for(const v of l){const j=UC(v,m.get(v.key).overlayedDocument);j!=null&&g.push(new js(v.key,j,UN(j.value.mapValue),cr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,g,l)}).next(N=>{p=N;const g=N.applyToLocalDocumentSet(m,b);return c.documentOverlayCache.saveOverlays(y,N.batchId,g)})}).then(()=>({batchId:p.batchId,changes:YN(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new qe(pe)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(n,i.batchId,r),await ll(n,i.changes),await nd(n.remoteStore)}catch(i){const a=Cf(i,"Failed to persist write");r.reject(a)}}async function Rj(t,e){const r=ie(t);try{const n=await VA(r.localStore,e);e.targetChanges.forEach((i,a)=>{const o=r.Au.get(a);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?we(o.hu,14607):i.removedDocuments.size>0&&(we(o.hu,42227),o.hu=!1))}),await ll(r,n,e)}catch(n){await da(n)}}function My(t,e,r){const n=ie(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=ie(o);c.onlineState=l;let d=!1;c.queries.forEach((h,m)=>{for(const p of m.Sa)p.va(l)&&(d=!0)}),d&&Pf(c)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function SR(t,e,r){const n=ie(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),a=i&&i.key;if(a){let o=new qe(J.comparator);o=o.insert(a,_t.newNoDocument(a,ne.min()));const l=fe().add(a),c=new ed(ne.min(),new Map,new qe(pe),o,l);await Rj(n,c),n.du=n.du.remove(a),n.Au.delete(e),Lf(n)}else await Fm(n.localStore,e,!1).then(()=>Bm(n,e,r)).catch(da)}async function TR(t,e){const r=ie(t),n=e.batch.batchId;try{const i=await OA(r.localStore,e);Dj(r,n,null),Pj(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await ll(r,i)}catch(i){await da(i)}}async function kR(t,e,r){const n=ie(t);try{const i=await function(o,l){const c=ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(m=>(we(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(n.localStore,e);Dj(n,e,r),Pj(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await ll(n,i)}catch(i){await da(i)}}function Pj(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function Dj(t,e,r){const n=ie(t);let i=n.Vu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function Bm(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||Mj(t,n)})}function Mj(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(Ef(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),Lf(t))}function Ly(t,e,r){for(const n of r)n instanceof Ij?(t.Ru.addReference(n.key,e),IR(t,n)):n instanceof Cj?(W(Mf,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||Mj(t,n.key)):re(19791,{wu:n})}function IR(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(W(Mf,"New document in limbo: "+r),t.Eu.add(n),Lf(t))}function Lf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new J(Se.fromString(e)),n=t.fu.next();t.Au.set(n,new yR(r)),t.du=t.du.insert(r,n),jj(t.remoteStore,new Qn($r(Qu(r.path)),n,"TargetPurposeLimboResolution",Hu.ce))}}async function ll(t,e,r){const n=ie(t),i=[],a=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,e,r).then(d=>{var h;if((d||r)&&n.isPrimaryClient){const m=d?!d.fromCache:(h=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:h.current;n.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){i.push(d);const m=jf.As(c.targetId,d);a.push(m)}}))}),await Promise.all(o),n.Pu.H_(i),await async function(c,d){const h=ie(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,p=>F.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(m,p.targetId,y)).next(()=>F.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(m,p.targetId,y)))))}catch(m){if(!ha(m))throw m;W(_f,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const y=h.Ms.get(p),S=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(S);h.Ms=h.Ms.insert(p,b)}}}(n.localStore,a))}async function CR(t,e){const r=ie(t);if(!r.currentUser.isEqual(e)){W(Mf,"User change. New user:",e.toKey());const n=await vj(r.localStore,e);r.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new $(V.CANCELLED,o))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ll(r,n.Ls)}}function AR(t,e){const r=ie(t),n=r.Au.get(e);if(n&&n.hu)return fe().add(n.key);{let i=fe();const a=r.Iu.get(e);if(!a)return i;for(const o of a){const l=r.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function Lj(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SR.bind(null,e),e.Pu.H_=pR.bind(null,e.eventManager),e.Pu.yu=fR.bind(null,e.eventManager),e}function RR(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kR.bind(null,e),e}class pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=td(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return LA(this.persistence,new PA,e.initialUser,this.serializer)}Cu(e){return new yj(Nf.mi,this.serializer)}Du(e){return new $A}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pu.provider={build:()=>new pu};class PR extends pu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){we(this.persistence.referenceDelegate instanceof hu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new yA(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new yj(n=>hu.mi(n,r),this.serializer)}}class $m{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>My(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=CR.bind(null,this.syncEngine),await dR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mR}()}createDatastore(e){const r=td(e.databaseInfo.databaseId),n=function(a){return new KA(a)}(e.databaseInfo);return function(a,o,l,c){return new XA(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,a,o,l){return new eR(n,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>My(this.syncEngine,r,0),function(){return Iy.v()?new Iy:new qA}())}createSyncEngine(e,r){return function(i,a,o,l,c,d,h){const m=new vR(i,a,o,l,c,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const a=ie(i);W(Zs,"RemoteStore shutting down."),a.Ea.add(5),await ol(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}$m.provider={build:()=>new $m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class DR{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=uf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{W(gs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(W(gs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Cf(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Nh(t,e){t.asyncQueue.verifyOperationInProgress(),W(gs,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await vj(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Oy(t,e){t.asyncQueue.verifyOperationInProgress();const r=await MR(t);W(gs,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>Ay(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>Ay(e.remoteStore,i)),t._onlineComponents=e}async function MR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(gs,"Using user provided OfflineComponentProvider");try{await Nh(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Ki("Error using user provided cache. Falling back to memory cache: "+r),await Nh(t,new pu)}}else W(gs,"Using default OfflineComponentProvider"),await Nh(t,new PR(void 0));return t._offlineComponents}async function Oj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(gs,"Using user provided OnlineComponentProvider"),await Oy(t,t._uninitializedComponentsProvider._online)):(W(gs,"Using default OnlineComponentProvider"),await Oy(t,new $m))),t._onlineComponents}function LR(t){return Oj(t).then(e=>e.syncEngine)}async function fu(t){const e=await Oj(t),r=e.eventManager;return r.onListen=bR.bind(null,e.syncEngine),r.onUnlisten=jR.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=wR.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=_R.bind(null,e.syncEngine),r}function OR(t,e,r={}){const n=new fn;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,d){const h=new Of({next:p=>{h.Nu(),o.enqueueAndForget(()=>Rf(a,m));const y=p.docs.has(l);!y&&p.fromCache?d.reject(new $(V.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&c&&c.source==="server"?d.reject(new $(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Df(Qu(l.path),h,{includeMetadataChanges:!0,qa:!0});return Af(a,m)}(await fu(t),t.asyncQueue,e,r,n)),n.promise}function VR(t,e,r={}){const n=new fn;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,d){const h=new Of({next:p=>{h.Nu(),o.enqueueAndForget(()=>Rf(a,m)),p.fromCache&&c.source==="server"?d.reject(new $(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Df(l,h,{includeMetadataChanges:!0,qa:!0});return Af(a,m)}(await fu(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj="firestore.googleapis.com",Fy=!0;class Uy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fj,this.ssl=Fy}else this.host=e.host,this.ssl=e.ssl??Fy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gA)throw new $(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vj(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qI;switch(n.type){case"firstParty":return new KI(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new $(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Vy.get(r);n&&(W("ComponentProvider","Removing Datastore"),Vy.delete(r),n.terminate())}(this),Promise.resolve()}}function FR(t,e,r,n={}){var d;t=Ht(t,sd);const i=ni(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;i&&(Kp(`https://${l}`),Qp("Firestore",!0)),a.host!==Fj&&a.host!==l&&Ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:i,emulatorOptions:n};if(!Gs(c,o)&&(t._setSettings(c),n.mockUserToken)){let h,m;if(typeof n.mockUserToken=="string")h=n.mockUserToken,m=Nt.MOCK_USER;else{h=Mw(n.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new $(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Nt(p)}t._authCredentials=new HI(new kN(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new tn(this.firestore,e,this._query)}}class Ge{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(sl(r,Ge._jsonSchema))return new Ge(e,n||null,new J(Se.fromString(r.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:et("string",Ge._jsonSchemaVersion),referencePath:et("string")};class os extends tn{constructor(e,r,n){super(e,r,Qu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new J(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function ee(t,e,...r){if(t=$e(t),IN("collection","path",e),t instanceof sd){const n=Se.fromString(e,...r);return ey(n),new os(t,null,n)}{if(!(t instanceof Ge||t instanceof os))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Se.fromString(e,...r));return ey(n),new os(t.firestore,null,n)}}function ce(t,e,...r){if(t=$e(t),arguments.length===1&&(e=uf.newId()),IN("doc","path",e),t instanceof sd){const n=Se.fromString(e,...r);return Z0(n),new Ge(t,null,new J(n))}{if(!(t instanceof Ge||t instanceof os))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Se.fromString(e,...r));return Z0(n),new Ge(t.firestore,t instanceof os?t.converter:null,new J(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="AsyncQueue";class By{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wj(this,"async_queue_retry"),this._c=()=>{const n=wh();n&&W(zy,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=wh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=wh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new fn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ha(e))throw e;W(zy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,En("INTERNAL UNHANDLED ERROR: ",$y(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=If.createAndSchedule(this,e,r,n,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&re(47125,{Pc:$y(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function $y(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Tn extends sd{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new By,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new By(e),this._firestoreClient=void 0,await e}}}function UR(t,e){const r=typeof t=="object"?t:Xp(),n=typeof t=="string"?t:ou,i=Uu(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=Rw("firestore");a&&FR(i,...a)}return i}function id(t){if(t._terminated)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zR(t),t._firestoreClient}function zR(t){var n,i,a;const e=t._freezeSettings(),r=function(l,c,d,h){return new hC(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Vj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new DR(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ar(ft.fromBase64String(e))}catch(r){throw new $(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ar(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sl(e,ar._jsonSchema))return ar.fromBase64String(e.bytes)}}ar._jsonSchemaVersion="firestore/bytes/1.0",ar._jsonSchema={type:et("string",ar._jsonSchemaVersion),bytes:et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new $(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new $(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new $(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(sl(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:et("string",Hr._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sl(e,Wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Wr(e.vectorValues);throw new $(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wr._jsonSchemaVersion="firestore/vectorValue/1.0",Wr._jsonSchema={type:et("string",Wr._jsonSchemaVersion),vectorValues:et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=/^__.*__$/;class $R{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new js(e,this.data,this.fieldMask,r,this.fieldTransforms):new il(e,this.data,r,this.fieldTransforms)}}class Uj{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new js(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function zj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ac:t})}}class Vf{constructor(e,r,n,i,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var i;const r=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zj(this.Ac)&&BR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class qR{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||td(e)}Cc(e,r,n,i=!1){return new Vf({Ac:e,methodName:r,Dc:n,path:ht.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ul(t){const e=t._freezeSettings(),r=td(t._databaseId);return new qR(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Bj(t,e,r,n,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,r,i);zf("Data must be an object, but it was:",o,n);const l=qj(n,o);let c,d;if(a.merge)c=new Jt(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const p=qm(e,m,r);if(!o.contains(p))throw new $(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Wj(h,p)||h.push(p)}c=new Jt(h),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new $R(new Ut(l),c,d)}class od extends cl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof od}}class Ff extends cl{_toFieldTransform(e){return new sj(e.path,new Uo)}isEqual(e){return e instanceof Ff}}class Uf extends cl{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new $o(e.serializer,ZN(e.serializer,this.Fc));return new sj(e.path,r)}isEqual(e){return e instanceof Uf&&this.Fc===e.Fc}}function HR(t,e,r,n){const i=t.Cc(1,e,r);zf("Data must be an object, but it was:",i,n);const a=[],o=Ut.empty();Ns(n,(c,d)=>{const h=Bf(e,c,r);d=$e(d);const m=i.yc(h);if(d instanceof od)a.push(h);else{const p=dl(d,m);p!=null&&(a.push(h),o.set(h,p))}});const l=new Jt(a);return new Uj(o,l,i.fieldTransforms)}function WR(t,e,r,n,i,a){const o=t.Cc(1,e,r),l=[qm(e,n,r)],c=[i];if(a.length%2!=0)throw new $(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(qm(e,a[p])),c.push(a[p+1]);const d=[],h=Ut.empty();for(let p=l.length-1;p>=0;--p)if(!Wj(d,l[p])){const y=l[p];let S=c[p];S=$e(S);const b=o.yc(y);if(S instanceof od)d.push(y);else{const N=dl(S,b);N!=null&&(d.push(y),h.set(y,N))}}const m=new Jt(d);return new Uj(h,m,o.fieldTransforms)}function $j(t,e,r,n=!1){return dl(r,t.Cc(n?4:3,e))}function dl(t,e){if(Hj(t=$e(t)))return zf("Unsupported field value:",e,t),qj(t,e);if(t instanceof cl)return function(n,i){if(!zj(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const a=[];let o=0;for(const l of n){let c=dl(l,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=$e(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return ZN(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=De.fromDate(n);return{timestampValue:du(i.serializer,a)}}if(n instanceof De){const a=new De(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:du(i.serializer,a)}}if(n instanceof Hr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ar)return{bytesValue:uj(i.serializer,n._byteString)};if(n instanceof Ge){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:bf(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Wr)return function(o,l){return{mapValue:{fields:{[VN]:{stringValue:FN},[lu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return gf(l.serializer,d)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${qu(n)}`)}(t,e)}function qj(t,e){const r={};return RN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(t,(n,i)=>{const a=dl(i,e.mc(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function Hj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Hr||t instanceof ar||t instanceof Ge||t instanceof cl||t instanceof Wr)}function zf(t,e,r){if(!Hj(r)||!CN(r)){const n=qu(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function qm(t,e,r){if((e=$e(e))instanceof ad)return e._internalPath;if(typeof e=="string")return Bf(t,e);throw gu("Field path arguments must be of type string or ",t,!1,void 0,r)}const GR=new RegExp("[~\\*/\\[\\]]");function Bf(t,e,r){if(e.search(GR)>=0)throw gu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ad(...e.split("."))._internalPath}catch{throw gu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function gu(t,e,r,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${n}`),o&&(c+=` in document ${i}`),c+=")"),new $(V.INVALID_ARGUMENT,l+t+c)}function Wj(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(ld("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class KR extends $f{data(){return super.data()}}function ld(t,e){return typeof e=="string"?Bf(t,e):e instanceof ad?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qf{}class cd extends qf{}function je(t,e,...r){let n=[];e instanceof qf&&n.push(e),n=n.concat(r),function(a){const o=a.filter(c=>c instanceof ml).length,l=a.filter(c=>c instanceof hl).length;if(o>1||o>0&&l>0)throw new $(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class hl extends cd{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new hl(e,r,n)}_apply(e){const r=this._parse(e);return Qj(e._query,r),new tn(e.firestore,e.converter,Dm(e._query,r))}_parse(e){const r=ul(e.firestore);return function(a,o,l,c,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Wy(m,h);const S=[];for(const b of m)S.push(Hy(c,a,b));p={arrayValue:{values:S}}}else p=Hy(c,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Wy(m,h),p=$j(l,o,m,h==="in"||h==="not-in");return Ze.create(d,h,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function ae(t,e,r){const n=e,i=ld("where",t);return hl._create(i,n,r)}class ml extends qf{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new ml(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ir.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)Qj(o,c),o=Dm(o,c)}(e._query,r),new tn(e.firestore,e.converter,Dm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Kj(...t){return t.forEach(e=>JR("or",e)),ml._create("or",t)}class Hf extends cd{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Hf(e,r)}_apply(e){const r=function(i,a,o){if(i.startAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fo(a,o)}(e._query,this._field,this._direction);return new tn(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new ii(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function Te(t,e="asc"){const r=e,n=ld("orderBy",t);return Hf._create(n,r)}class Wf extends cd{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Wf(e,r,n)}_apply(e){return new tn(e.firestore,e.converter,uu(e._query,this._limit,this._limitType))}}function Gr(t){return tC("limit",t),Wf._create("limit",t,"F")}class Gf extends cd{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Gf(e,r,n)}_apply(e){const r=YR(e,this.type,this._docOrFields,this._inclusive);return new tn(e.firestore,e.converter,function(i,a){return new ii(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)}(e._query,r))}}function QR(...t){return Gf._create("startAfter",t,!1)}function YR(t,e,r,n){if(r[0]=$e(r[0]),r[0]instanceof $f)return function(a,o,l,c,d){if(!c)throw new $(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const m of Fi(a))if(m.field.isKeyField())h.push(cu(o,c.key));else{const p=c.data.field(m.field);if(Gu(p))throw new $(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=m.field.canonicalString();throw new $(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(p)}return new Xi(h,d)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const i=ul(t.firestore);return function(o,l,c,d,h,m){const p=o.explicitOrderBy;if(h.length>p.length)throw new $(V.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let S=0;S<h.length;S++){const b=h[S];if(p[S].field.isKeyField()){if(typeof b!="string")throw new $(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof b}`);if(!ff(o)&&b.indexOf("/")!==-1)throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${b}' contains a slash.`);const N=o.path.child(Se.fromString(b));if(!J.isDocumentKey(N))throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const g=new J(N);y.push(cu(l,g))}else{const N=$j(c,d,b);y.push(N)}}return new Xi(y,m)}(t._query,t.firestore._databaseId,i,e,r,n)}}function Hy(t,e,r){if(typeof(r=$e(r))=="string"){if(r==="")throw new $(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ff(e)&&r.indexOf("/")!==-1)throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Se.fromString(r));if(!J.isDocumentKey(n))throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return cu(t,new J(n))}if(r instanceof Ge)return cu(t,r._key);throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qu(r)}.`)}function Wy(t,e){if(!Array.isArray(t)||t.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qj(t,e){const r=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function JR(t,e){if(!(e instanceof hl||e instanceof ml))throw new $(V.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class XR{convertValue(e,r="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ns(e,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertVectorValue(e){var n,i,a;const r=(a=(i=(n=e.fields)==null?void 0:n[lu].arrayValue)==null?void 0:i.values)==null?void 0:a.map(o=>Qe(o.doubleValue));return new Wr(r)}convertGeoPoint(e){return new Hr(Qe(e.latitude),Qe(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ku(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Lo(e));default:return null}}convertTimestamp(e){const r=hs(e);return new De(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Se.fromString(e);we(gj(n),9688,{name:e});const i=new Oo(n.get(1),n.get(3)),a=new J(n.popFirst(5));return i.isEqual(r)||En(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class Qa{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fs extends $f{constructor(e,r,n,i,a,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(ld("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Fs._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Fs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fs._jsonSchema={type:et("string",Fs._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};class jc extends Fs{data(e={}){return super.data(e)}}class Us{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Qa(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new jc(this._firestore,this._userDataWriter,n.key,n,new Qa(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new $(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new jc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Qa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new jc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Qa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:ZR(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Us._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){t=Ht(t,Ge);const e=Ht(t.firestore,Tn);return OR(id(e),t._key).then(r=>Jj(e,t,r))}Us._jsonSchemaVersion="firestore/querySnapshot/1.0",Us._jsonSchema={type:et("string",Us._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};class Kf extends XR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,r)}}function Et(t){t=Ht(t,tn);const e=Ht(t.firestore,Tn),r=id(e),n=new Kf(e);return Gj(t._query),VR(r,t._query).then(i=>new Us(e,n,t,i))}function Ya(t,e,r){t=Ht(t,Ge);const n=Ht(t.firestore,Tn),i=Yj(t.converter,e);return ud(n,[Bj(ul(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,cr.none())])}function Ve(t,e,r,...n){t=Ht(t,Ge);const i=Ht(t.firestore,Tn),a=ul(i);let o;return o=typeof(e=$e(e))=="string"||e instanceof ad?WR(a,"updateDoc",t._key,e,r,n):HR(a,"updateDoc",t._key,e),ud(i,[o.toMutation(t._key,cr.exists(!0))])}function pl(t){return ud(Ht(t.firestore,Tn),[new xf(t._key,cr.none())])}function ct(t,e){const r=Ht(t.firestore,Tn),n=ce(t),i=Yj(t.converter,e);return ud(r,[Bj(ul(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,cr.exists(!1))]).then(()=>n)}function gt(t,...e){var c,d,h;t=$e(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||qy(e[n])||(r=e[n++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(qy(e[n])){const m=e[n];e[n]=(c=m.next)==null?void 0:c.bind(m),e[n+1]=(d=m.error)==null?void 0:d.bind(m),e[n+2]=(h=m.complete)==null?void 0:h.bind(m)}let a,o,l;if(t instanceof Ge)o=Ht(t.firestore,Tn),l=Qu(t._key.path),a={next:m=>{e[n]&&e[n](Jj(o,t,m))},error:e[n+1],complete:e[n+2]};else{const m=Ht(t,tn);o=Ht(m.firestore,Tn),l=m._query;const p=new Kf(o);a={next:y=>{e[n]&&e[n](new Us(o,p,m,y))},error:e[n+1],complete:e[n+2]},Gj(t._query)}return function(p,y,S,b){const N=new Of(b),g=new Df(y,N,S);return p.asyncQueue.enqueueAndForget(async()=>Af(await fu(p),g)),()=>{N.Nu(),p.asyncQueue.enqueueAndForget(async()=>Rf(await fu(p),g))}}(id(o),l,i,a)}function ud(t,e){return function(n,i){const a=new fn;return n.asyncQueue.enqueueAndForget(async()=>ER(await LR(n),i,a)),a.promise}(id(t),e)}function Jj(t,e,r){const n=r.docs.get(e._key),i=new Kf(t);return new Fs(t,i,e._key,n,new Qa(r.hasPendingWrites,r.fromCache),e.converter)}function ue(){return new Ff("serverTimestamp")}function mo(t){return new Uf("increment",t)}(function(e,r=!0){(function(i){ua=i})(si),Ks(new us("firestore",(n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new Tn(new WI(n.getProvider("auth-internal")),new QI(o,n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(d.options.projectId,h)}(o,i),o);return a={useFetchStreams:r,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Ur(Q0,Y0,e),Ur(Q0,Y0,"esm2020")})();var eP="firebase",tP="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur(eP,tP,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="firebasestorage.googleapis.com",rP="storageBucket",nP=2*60*1e3,sP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn extends en{constructor(e,r,n=0){super(jh(e),`Firebase Storage: ${r} (${jh(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Jr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Jr||(Jr={}));function jh(t){return"storage/"+t}function iP(){const t="An unknown error occurred, please check the error payload for server response.";return new rn(Jr.UNKNOWN,t)}function aP(){return new rn(Jr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oP(){return new rn(Jr.CANCELED,"User canceled the upload/download.")}function lP(t){return new rn(Jr.INVALID_URL,"Invalid URL '"+t+"'.")}function cP(t){return new rn(Jr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Gy(t){return new rn(Jr.INVALID_ARGUMENT,t)}function Zj(){return new rn(Jr.APP_DELETED,"The Firebase app was deleted.")}function uP(t){return new rn(Jr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=jr.makeFromUrl(e,r)}catch{return new jr(e,"")}if(n.path==="")return n;throw cP(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function d(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${h}/b/${i}/o${p}`,"i"),S={bucket:1,path:3},b=r===Xj?"(?:storage.googleapis.com|storage.cloud.google.com)":r,N="([^?#]*)",g=new RegExp(`^https?://${b}/${i}/${N}`,"i"),j=[{regex:l,indices:c,postModify:a},{regex:y,indices:S,postModify:d},{regex:g,indices:{bucket:1,path:2},postModify:d}];for(let P=0;P<j.length;P++){const M=j[P],D=M.regex.exec(e);if(D){const T=D[M.indices.bucket];let _=D[M.indices.path];_||(_=""),n=new jr(T,_),M.postModify(n);break}}if(n==null)throw lP(e);return n}}class dP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t,e,r){let n=1,i=null,a=null,o=!1,l=0;function c(){return l===2}let d=!1;function h(...N){d||(d=!0,e.apply(null,N))}function m(N){i=setTimeout(()=>{i=null,t(y,c())},N)}function p(){a&&clearTimeout(a)}function y(N,...g){if(d){p();return}if(N){p(),h.call(null,N,...g);return}if(c()||o){p(),h.call(null,N,...g);return}n<64&&(n*=2);let j;l===1?(l=2,j=0):j=(n+Math.random())*1e3,m(j)}let S=!1;function b(N){S||(S=!0,p(),!d&&(i!==null?(N||(l=2),clearTimeout(i),m(0)):N||(l=1)))}return m(0),a=setTimeout(()=>{o=!0,b(!0)},r),b}function mP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(t){return t!==void 0}function Ky(t,e,r,n){if(n<e)throw Gy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Gy(`Invalid value for '${t}'. Expected ${r} or less.`)}function fP(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var xu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xu||(xu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,r,n,i,a,o,l,c,d,h,m,p=!0,y=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,b)=>{this.resolve_=S,this.reject_=b,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Xl(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===xu.NO_ERROR,c=a.getStatus();if(!l||gP(c,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===xu.ABORT;n(!1,new Xl(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;n(!0,new Xl(d,a))})},r=(n,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());pP(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=iP();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?Zj():oP();o(c)}else{const c=aP();o(c)}};this.canceled_?r(!1,new Xl(!1,null,!0)):this.backoffId_=hP(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xl{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function yP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function vP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function wP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function NP(t,e,r,n,i,a,o=!0,l=!1){const c=fP(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return bP(h,e),yP(h,r),vP(h,a),wP(h,n),new xP(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _P(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,r){this._service=e,r instanceof jr?this._location=r:this._location=jr.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new yu(e,r)}get root(){const e=new jr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _P(this._location.path)}get storage(){return this._service}get parent(){const e=jP(this._location.path);if(e===null)return null;const r=new jr(this._location.bucket,e);return new yu(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw uP(e)}}function Qy(t,e){const r=e==null?void 0:e[rP];return r==null?null:jr.makeFromBucketSpec(r,t)}function EP(t,e,r,n={}){t.host=`${e}:${r}`;const i=ni(e);i&&(Kp(`https://${t.host}/b`),Qp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:Mw(a,t.app.options.projectId))}class SP{constructor(e,r,n,i,a,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=Xj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nP,this._maxUploadRetryTime=sP,this._requests=new Set,i!=null?this._bucket=jr.makeFromBucketSpec(i,this._host):this._bucket=Qy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jr.makeFromBucketSpec(this._url,e):this._bucket=Qy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ky("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ky("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yu(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new dP(Zj());{const o=NP(e,this._appId,n,i,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const Yy="@firebase/storage",Jy="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="storage";function TP(t=Xp(),e){t=$e(t);const n=Uu(t,e_).getImmediate({identifier:e}),i=Rw("storage");return i&&kP(n,...i),n}function kP(t,e,r,n={}){EP(t,e,r,n)}function IP(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new SP(r,n,i,e,si)}function CP(){Ks(new us(e_,IP,"PUBLIC").setMultipleInstances(!0)),Ur(Yy,Jy,""),Ur(Yy,Jy,"esm2020")}CP();const AP={apiKey:"AIzaSyBbTfR42ZW61pY4x2_3YYsqZyPv5I6tFoU",authDomain:"jonna-8cd90.firebaseapp.com",projectId:"jonna-8cd90",storageBucket:"jonna-8cd90.firebasestorage.app",messagingSenderId:"152710460832",appId:"1:152710460832:web:74928c608ca5c55b71e0c5"};let Zl,sn,z,RP;try{Zl=Vw(AP),sn=BI(Zl),z=UR(Zl),RP=TP(Zl)}catch(t){throw console.error("Firebase initialization error:",t),t}class PP{constructor(){Is(this,"currentUser",null)}async signIn(e,r){try{const n=await Ek(sn,e,r),i=await this.getUserData(n.user.uid);if(!i)throw new Error("User data not found");return await this.updateLastLogin(i.uid),this.currentUser=i,i}catch(n){throw console.error("Sign in error:",n),new Error(n.message||"Failed to sign in")}}async signUp(e,r,n){try{const a=(await _k(sn,e,r)).user;n&&await nu(a,{displayName:n});const o={uid:a.uid,email:a.email,role:"user",createdAt:ue(),updatedAt:ue(),lastLoginAt:ue()};return(n||a.displayName)&&(o.displayName=n||a.displayName),a.photoURL&&(o.photoURL=a.photoURL),await Ya(ce(z,"users",a.uid),o),this.currentUser=o,o}catch(i){throw console.error("Sign up error:",i),new Error(i.message||"Failed to sign up")}}async signOut(){try{await Ak(sn),this.currentUser=null}catch(e){throw console.error("Sign out error:",e),new Error(e.message||"Failed to sign out")}}async resetPassword(e){try{await jk(sn,e)}catch(r){throw console.error("Password reset error:",r),new Error(r.message||"Failed to send password reset email")}}async updateUserPassword(e){const r=sn.currentUser;if(!r)throw new Error("No user is currently signed in");try{await af(r,e)}catch(n){throw console.error("Update password error:",n),new Error(n.message||"Failed to update password")}}async updateUserProfile(e){const r=sn.currentUser;if(!r)throw new Error("No user is currently signed in");try{await nu(r,e),await Ve(ce(z,"users",r.uid),{...e,updatedAt:ue()})}catch(n){throw console.error("Update profile error:",n),new Error(n.message||"Failed to update profile")}}async getUserData(e){try{const r=await Kt(ce(z,"users",e));return r.exists()?r.data():null}catch(r){return console.error("Get user data error:",r),null}}async updateLastLogin(e){try{await Ve(ce(z,"users",e),{lastLoginAt:ue()})}catch(r){console.error("Update last login error:",r)}}async updateUserRole(e,r){const n=this.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can update user roles");try{await Ve(ce(z,"users",e),{role:r,updatedAt:ue()})}catch(i){throw console.error("Update user role error:",i),new Error(i.message||"Failed to update user role")}}onAuthStateChange(e){return Ck(sn,async r=>{if(r){const n=await this.getUserData(r.uid);this.currentUser=n,e(n)}else this.currentUser=null,e(null)})}getCurrentUser(){return this.currentUser}getFirebaseUser(){return sn.currentUser}isAuthenticated(){return this.currentUser!==null}isAdmin(){var e;return((e=this.currentUser)==null?void 0:e.role)==="admin"}async checkAdminAccess(){const e=this.getCurrentUser();if(!e)return!1;const r=await this.getUserData(e.uid);return(r==null?void 0:r.role)==="admin"}}const Ne=new PP;class DP{constructor(){Is(this,"collectionName","beats")}async getPublishedBeats(){try{const e=je(ee(z,this.collectionName),ae("status","==","published"),Te("createdAt","desc")),r=await Et(e),n=[];return r.forEach(i=>{n.push({id:i.id,...i.data()})}),n}catch(e){return console.error("Get published beats error:",e),[]}}async createBeat(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can create beats");try{const n={...e,plays:0,downloads:0,likes:0,createdBy:r.uid,lastUpdatedBy:r.uid,createdAt:ue(),updatedAt:ue()},i=await ct(ee(z,this.collectionName),n),a=await this.getBeatById(i.id);if(!a)throw new Error("Failed to retrieve created beat");return a}catch(n){throw console.error("Create beat error:",n),new Error(n.message||"Failed to create beat")}}async getBeatById(e){try{const r=await Kt(ce(z,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get beat by ID error:",r),null}}async getAllBeats(e){try{const r=[];e!=null&&e.status&&r.push(ae("status","==",e.status)),e!=null&&e.genre&&r.push(ae("genre","==",e.genre)),(e==null?void 0:e.featured)!==void 0&&r.push(ae("featured","==",e.featured)),r.push(Te("createdAt","desc"));const n=(e==null?void 0:e.pageSize)||20;r.push(Gr(n+1)),e!=null&&e.lastDoc&&r.push(QR(e.lastDoc));const i=je(ee(z,this.collectionName),...r),a=await Et(i),o=[];a.forEach(c=>{o.length<n&&o.push({id:c.id,...c.data()})});const l=a.docs.length>n;return{data:o,total:o.length,page:0,pageSize:n,hasMore:l}}catch(r){return console.error("Get all beats error:",r),{data:[],total:0,page:0,pageSize:(e==null?void 0:e.pageSize)||20,hasMore:!1}}}async updateBeat(e,r){const n=Ne.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized");try{await Ve(ce(z,this.collectionName,e),{...r,lastUpdatedBy:n.uid,updatedAt:ue()})}catch(i){throw console.error("Update beat error:",i),new Error(i.message||"Failed to update beat")}}async deleteBeat(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized");try{await pl(ce(z,this.collectionName,e))}catch(n){throw console.error("Delete beat error:",n),new Error(n.message||"Failed to delete beat")}}async getFeaturedBeats(){try{const e=je(ee(z,this.collectionName),ae("featured","==",!0),ae("status","==","published"),Te("createdAt","desc"),Gr(6)),r=await Et(e),n=[];return r.forEach(i=>{n.push({id:i.id,...i.data()})}),n}catch(e){return console.error("Get featured beats error:",e),[]}}async getTrendingBeats(){try{const e=je(ee(z,this.collectionName),ae("trending","==",!0),ae("status","==","published"),Te("plays","desc"),Gr(10)),r=await Et(e),n=[];return r.forEach(i=>{n.push({id:i.id,...i.data()})}),n}catch(e){return console.error("Get trending beats error:",e),[]}}async getGenres(){try{const e=await Et(ee(z,this.collectionName)),r=new Set;return e.forEach(n=>{const i=n.data();i.genre&&r.add(i.genre)}),Array.from(r).sort()}catch(e){return console.error("Get genres error:",e),[]}}subscribeToBeats(e,r){const n=[Te("createdAt","desc")];r!=null&&r.status&&n.push(ae("status","==",r.status)),(r==null?void 0:r.featured)!==void 0&&n.push(ae("featured","==",r.featured)),r!=null&&r.genre&&n.push(ae("genre","==",r.genre));const i=je(ee(z,this.collectionName),...n);return gt(i,a=>{const o=[];a.forEach(l=>{o.push({id:l.id,...l.data()})}),e(o)},a=>{console.error("Subscribe to beats error:",a)})}async incrementPlays(e){try{await Ve(ce(z,this.collectionName,e),{plays:mo(1)})}catch(r){console.error("Increment plays error:",r)}}async incrementDownloads(e){try{await Ve(ce(z,this.collectionName,e),{downloads:mo(1)})}catch(r){console.error("Increment downloads error:",r)}}}const kn=new DP;class MP{constructor(){Is(this,"collectionName","orders")}generateOrderNumber(){const e=new Date().getFullYear(),r=Math.floor(Math.random()*99999).toString().padStart(5,"0");return`JR-${e}-${r}`}async createOrder(e){try{const r={...e,orderNumber:this.generateOrderNumber(),createdAt:ue(),updatedAt:ue()},n=await ct(ee(z,this.collectionName),r),i=await this.getOrderById(n.id);if(!i)throw new Error("Failed to retrieve created order");return i}catch(r){throw console.error("Create order error:",r),new Error(r.message||"Failed to create order")}}async getOrderById(e){try{const r=await Kt(ce(z,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get order by ID error:",r),null}}async getOrderByNumber(e){try{const r=je(ee(z,this.collectionName),ae("orderNumber","==",e),Gr(1)),n=await Et(r);if(!n.empty){const i=n.docs[0];return{id:i.id,...i.data()}}return null}catch(r){return console.error("Get order by number error:",r),null}}async getAllOrders(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can view all orders");try{const n=[];e!=null&&e.status&&n.push(ae("status","==",e.status));const i=(e==null?void 0:e.orderByField)||"createdAt",a=(e==null?void 0:e.orderDirection)||"desc";n.push(Te(i,a)),e!=null&&e.limit&&n.push(Gr(e.limit));const o=je(ee(z,this.collectionName),...n),l=await Et(o),c=[];return l.forEach(d=>{c.push({id:d.id,...d.data()})}),c}catch(n){throw console.error("Get all orders error:",n),new Error("Failed to fetch orders")}}async getOrdersByCustomer(e){try{const r=je(ee(z,this.collectionName),ae("customerEmail","==",e),Te("createdAt","desc")),n=await Et(r),i=[];return n.forEach(a=>{i.push({id:a.id,...a.data()})}),i}catch(r){throw console.error("Get orders by customer error:",r),new Error("Failed to fetch customer orders")}}async updateOrderStatus(e,r,n){const i=Ne.getCurrentUser();if(!i||i.role!=="admin")throw new Error("Unauthorized: Only admins can update order status");try{const a={status:r,updatedAt:ue()};r==="completed"&&(a.completedAt=ue()),n&&(a.adminNote=n),await Ve(ce(z,this.collectionName,e),a)}catch(a){throw console.error("Update order status error:",a),new Error(a.message||"Failed to update order status")}}async updateOrder(e,r){const n=Ne.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can update orders");try{const i={...r,updatedAt:ue()};delete i.id,delete i.createdAt,delete i.orderNumber,await Ve(ce(z,this.collectionName,e),i)}catch(i){throw console.error("Update order error:",i),new Error(i.message||"Failed to update order")}}async addDownloadLinks(e,r){try{await Ve(ce(z,this.collectionName,e),{downloadLinks:r,updatedAt:ue()})}catch(n){throw console.error("Add download links error:",n),new Error(n.message||"Failed to add download links")}}async addLicensePDFs(e,r){try{await Ve(ce(z,this.collectionName,e),{licensePDFs:r,updatedAt:ue()})}catch(n){throw console.error("Add license PDFs error:",n),new Error(n.message||"Failed to add license PDFs")}}async getOrderStatistics(){const e=Ne.getCurrentUser();if(!e||e.role!=="admin")throw new Error("Unauthorized: Only admins can view statistics");try{const r=await Et(ee(z,this.collectionName));let n=0,i=0,a=0,o=0;r.forEach(c=>{const d=c.data();n++,d.status==="completed"&&(i+=d.total,o++),(d.status==="pending"||d.status==="processing")&&a++});const l=n>0?i/o:0;return{totalOrders:n,totalRevenue:i,pendingOrders:a,completedOrders:o,averageOrderValue:l}}catch(r){throw console.error("Get order statistics error:",r),new Error("Failed to fetch order statistics")}}async getRecentOrders(e=10){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can view recent orders");try{const n=je(ee(z,this.collectionName),Te("createdAt","desc"),Gr(e)),i=await Et(n),a=[];return i.forEach(o=>{a.push({id:o.id,...o.data()})}),a}catch(n){return console.error("Get recent orders error:",n),[]}}subscribeToOrders(e,r){const n=Ne.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can subscribe to orders");const i=[Te("createdAt","desc")];r!=null&&r.status&&i.push(ae("status","==",r.status)),r!=null&&r.customerId&&i.push(ae("customerId","==",r.customerId));const a=je(ee(z,this.collectionName),...i);return gt(a,o=>{const l=[];o.forEach(c=>{l.push({id:c.id,...c.data()})}),e(l)},o=>{console.error("Subscribe to orders error:",o)})}subscribeToOrder(e,r){return gt(ce(z,this.collectionName,e),n=>{n.exists()?r({id:n.id,...n.data()}):r(null)},n=>{console.error("Subscribe to order error:",n),r(null)})}}const Xr=new MP;class LP{constructor(){Is(this,"collectionName","content")}async createContent(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can create content");try{const n={...e,author:r.uid,authorName:r.displayName||r.email,views:0,likes:0,shares:0,createdAt:ue(),updatedAt:ue()},i=await ct(ee(z,this.collectionName),n),a=await this.getContentById(i.id);if(!a)throw new Error("Failed to retrieve created content");return a}catch(n){throw console.error("Create content error:",n),new Error(n.message||"Failed to create content")}}async getContentById(e){try{const r=await Kt(ce(z,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get content by ID error:",r),null}}async getContentBySlug(e){try{const r=je(ee(z,this.collectionName),ae("slug","==",e),Gr(1)),n=await Et(r);if(!n.empty){const i=n.docs[0];return{id:i.id,...i.data()}}return null}catch(r){return console.error("Get content by slug error:",r),null}}async getAllContent(e){try{const r=[];e!=null&&e.type&&r.push(ae("type","==",e.type)),e!=null&&e.status&&r.push(ae("status","==",e.status)),(e==null?void 0:e.featured)!==void 0&&r.push(ae("featured","==",e.featured)),e!=null&&e.category&&r.push(ae("category","==",e.category)),r.push(Te("createdAt","desc")),e!=null&&e.limitCount&&r.push(Gr(e.limitCount));const n=je(ee(z,this.collectionName),...r),i=await Et(n),a=[];return i.forEach(o=>{a.push({id:o.id,...o.data()})}),a}catch(r){throw console.error("Get all content error:",r),new Error("Failed to fetch content")}}async getPublishedContent(e,r){try{const n=[ae("status","==","published"),Te("publishedAt","desc")];e&&n.push(ae("type","==",e)),r&&n.push(Gr(r));const i=je(ee(z,this.collectionName),...n),a=await Et(i),o=[];return a.forEach(l=>{o.push({id:l.id,...l.data()})}),o}catch(n){return console.error("Get published content error:",n),[]}}async getFeaturedContent(e){try{const r=[ae("featured","==",!0),ae("status","==","published"),Te("publishedAt","desc")];e&&r.push(ae("type","==",e));const n=je(ee(z,this.collectionName),...r),i=await Et(n),a=[];return i.forEach(o=>{a.push({id:o.id,...o.data()})}),a}catch(r){return console.error("Get featured content error:",r),[]}}async updateContent(e,r){const n=Ne.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized: Only admins can update content");try{const i={...r,updatedAt:ue()};r.status==="published"&&!r.publishedAt&&(i.publishedAt=ue()),delete i.id,delete i.createdAt,delete i.author,await Ve(ce(z,this.collectionName,e),i)}catch(i){throw console.error("Update content error:",i),new Error(i.message||"Failed to update content")}}async deleteContent(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can delete content");try{await pl(ce(z,this.collectionName,e))}catch(n){throw console.error("Delete content error:",n),new Error(n.message||"Failed to delete content")}}async incrementViews(e){try{await Ve(ce(z,this.collectionName,e),{views:mo(1)})}catch(r){console.error("Increment views error:",r)}}async incrementLikes(e){try{await Ve(ce(z,this.collectionName,e),{likes:mo(1)})}catch(r){console.error("Increment likes error:",r)}}async incrementShares(e){try{await Ve(ce(z,this.collectionName,e),{shares:mo(1)})}catch(r){console.error("Increment shares error:",r)}}subscribeToContent(e,r){const n=[Te("createdAt","desc")];r!=null&&r.type&&n.push(ae("type","==",r.type)),r!=null&&r.status&&n.push(ae("status","==",r.status)),(r==null?void 0:r.featured)!==void 0&&n.push(ae("featured","==",r.featured));const i=je(ee(z,this.collectionName),...n);return gt(i,a=>{const o=[];a.forEach(l=>{o.push({id:l.id,...l.data()})}),e(o)},a=>{console.error("Subscribe to content error:",a)})}}const OP=new LP;class VP{constructor(){Is(this,"collectionName","collaborations")}async getAll(){try{const e=await Et(ee(z,this.collectionName)),r=[];return e.forEach(n=>{r.push({id:n.id,...n.data()})}),r}catch(e){return console.error("Get all collaborations error:",e),[]}}async createCollaboration(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can create collaborations");try{const n={...e,paidAmount:0,createdBy:r.uid,createdAt:ue(),updatedAt:ue()},i=await ct(ee(z,this.collectionName),n),a=await this.getCollaborationById(i.id);if(!a)throw new Error("Failed to retrieve created collaboration");return a}catch(n){throw console.error("Create collaboration error:",n),new Error(n.message||"Failed to create collaboration")}}async getCollaborationById(e){try{const r=await Kt(ce(z,this.collectionName,e));return r.exists()?{id:r.id,...r.data()}:null}catch(r){return console.error("Get collaboration by ID error:",r),null}}async getAllCollaborations(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can view collaborations");try{const n=[];e!=null&&e.status&&n.push(ae("status","==",e.status)),e!=null&&e.type&&n.push(ae("type","==",e.type)),n.push(Te("createdAt","desc")),e!=null&&e.limitCount&&n.push(Gr(e.limitCount));const i=je(ee(z,this.collectionName),...n),a=await Et(i),o=[];return a.forEach(l=>{o.push({id:l.id,...l.data()})}),o}catch(n){throw console.error("Get all collaborations error:",n),new Error("Failed to fetch collaborations")}}async updateCollaboration(e,r){const n=Ne.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized");try{await Ve(ce(z,this.collectionName,e),{...r,updatedAt:ue()})}catch(i){throw console.error("Update collaboration error:",i),new Error(i.message||"Failed to update collaboration")}}async deleteCollaboration(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized");try{await pl(ce(z,this.collectionName,e))}catch(n){throw console.error("Delete collaboration error:",n),new Error(n.message||"Failed to delete collaboration")}}subscribeToCollaborations(e,r){try{const n=[Te("createdAt","desc")];r!=null&&r.status&&n.push(ae("status","==",r.status)),r!=null&&r.type&&n.push(ae("type","==",r.type));const i=je(ee(z,this.collectionName),...n);return gt(i,a=>{const o=[];a.forEach(l=>{o.push({id:l.id,...l.data()})}),e(o)})}catch(n){return console.error("Subscribe to collaborations error:",n),()=>{}}}async getCollaborationStats(){try{const e=await this.getAll();return{total:e.length,active:e.filter(n=>["agreed","contract_sent","signed","in_progress"].includes(n.status)).length,completed:e.filter(n=>n.status==="completed").length,totalRevenue:e.reduce((n,i)=>n+i.paidAmount,0),pendingRevenue:e.reduce((n,i)=>n+(i.budget-i.paidAmount),0)}}catch(e){return console.error("Get collaboration stats error:",e),{total:0,active:0,completed:0,totalRevenue:0,pendingRevenue:0}}}}const qo=new VP;class FP{constructor(){Is(this,"collectionName","settings")}async getShopSettings(){try{const e=ce(z,this.collectionName,"shop"),r=await Kt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get shop settings error:",e),new Error(e.message||"Failed to get shop settings")}}async saveShopSettings(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const n=ce(z,this.collectionName,"shop"),i={...e,updatedAt:ue(),updatedBy:r.uid};(await Kt(n)).exists()?await Ve(n,i):await Ya(n,i)}catch(n){throw console.error("Save shop settings error:",n),new Error(n.message||"Failed to save shop settings")}}async getGeneralSettings(){try{const e=ce(z,this.collectionName,"general"),r=await Kt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get general settings error:",e),new Error(e.message||"Failed to get general settings")}}async saveGeneralSettings(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const n=ce(z,this.collectionName,"general"),i={...e,updatedAt:ue(),updatedBy:r.uid};(await Kt(n)).exists()?await Ve(n,i):await Ya(n,i)}catch(n){throw console.error("Save general settings error:",n),new Error(n.message||"Failed to save general settings")}}async getNotificationSettings(){try{const e=ce(z,this.collectionName,"notifications"),r=await Kt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get notification settings error:",e),new Error(e.message||"Failed to get notification settings")}}async saveNotificationSettings(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const n=ce(z,this.collectionName,"notifications"),i={...e,updatedAt:ue(),updatedBy:r.uid};(await Kt(n)).exists()?await Ve(n,i):await Ya(n,i)}catch(n){throw console.error("Save notification settings error:",n),new Error(n.message||"Failed to save notification settings")}}async getSecuritySettings(){try{const e=ce(z,this.collectionName,"security"),r=await Kt(e);return r.exists()?r.data():null}catch(e){throw console.error("Get security settings error:",e),new Error(e.message||"Failed to get security settings")}}async saveSecuritySettings(e){const r=Ne.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized: Only admins can save settings");try{const n=ce(z,this.collectionName,"security"),i={...e,updatedAt:ue(),updatedBy:r.uid};(await Kt(n)).exists()?await Ve(n,i):await Ya(n,i)}catch(n){throw console.error("Save security settings error:",n),new Error(n.message||"Failed to save security settings")}}}const hi=new FP,t_=w.createContext(void 0),ke=()=>{const t=w.useContext(t_);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},UP=({children:t})=>{const[e,r]=w.useState(null),[n,i]=w.useState(!0);w.useEffect(()=>{const h=Ne.onAuthStateChange(m=>{r(m),i(!1)});return()=>h()},[]);const d={user:e,loading:n,signIn:async(h,m)=>{const p=await Ne.signIn(h,m);return r(p),p},signUp:async(h,m,p)=>{const y=await Ne.signUp(h,m,p);return r(y),y},signOut:async()=>{await Ne.signOut(),r(null)},resetPassword:async h=>{await Ne.resetPassword(h)},isAuthenticated:e!==null,isAdmin:(e==null?void 0:e.role)==="admin"};return s.jsx(t_.Provider,{value:d,children:t})};function zP(t){switch(t){case"admin":return"/admin/dashboard";case"artist":return"/artist/dashboard";default:return"/customer/dashboard"}}const ye=({children:t,allowedRoles:e})=>{const{user:r,loading:n}=ke();return n?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white",children:"Loading..."})}):r?e&&!e.includes(r.role)?s.jsx(ao,{to:zP(r.role),replace:!0}):s.jsx(s.Fragment,{children:t}):s.jsx(ao,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(t,e)=>{const r=w.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...d},h)=>w.createElement("svg",{ref:h,...BP,width:i,height:i,stroke:n,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${$P(t)}`,l].join(" "),...d},[...e.map(([m,p])=>w.createElement(m,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qP=Y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=Y("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Y("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=Y("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=Y("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=Y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=Y("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=Y("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=Y("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Y("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=Y("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=Y("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Y("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=Y("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=Y("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=Y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=Y("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=Y("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=Y("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=Y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=Y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=Y("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=Y("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=Y("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Y("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Y("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Y("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=Y("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Y("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Y("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=Y("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Y("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=Y("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=Y("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=Y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=Y("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=Y("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Y("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);function d_({cartItemCount:t=0,onCartClick:e}){const[r,n]=w.useState(!1),[i,a]=w.useState(!1),[o,l]=w.useState("login"),[c,d]=w.useState(!1),[h,m]=w.useState(""),[p,y]=w.useState(""),[S,b]=w.useState(""),[N,g]=w.useState(""),[v,j]=w.useState(!1),{user:P,signIn:M,signUp:D,signOut:T}=ke(),_=Cr(),I=async B=>{B.preventDefault(),g(""),j(!0);try{if(o==="login")await M(h,p);else{if(p.length<6){g("Password must be at least 6 characters"),j(!1);return}await D(h,p,S||void 0)}a(!1),m(""),y(""),b(""),_("/customer/dashboard")}catch(Ie){g(Ie.message||"Something went wrong")}finally{j(!1)}};w.useEffect(()=>{const B=()=>{d(window.scrollY>50)};return window.addEventListener("scroll",B,{passive:!0}),()=>window.removeEventListener("scroll",B)},[]);const R=async()=>{try{await T(),_("/")}catch(B){console.error("Sign out error:",B)}},k=()=>{if(!P)return"/login";switch(P.role){case"admin":return"/admin/dashboard";case"artist":return"/artist/dashboard";case"user":return"/customer/dashboard";default:return"/login"}},A=()=>P!=null&&P.displayName?P.displayName.split(" ").map(B=>B[0]).join("").toUpperCase().slice(0,2):P!=null&&P.email?P.email[0].toUpperCase():"U",C=()=>{P?_(k()):(l("login"),a(!0))},oe=()=>{l(o==="login"?"signup":"login"),g("")};return s.jsx("nav",{className:"fixed top-0 left-0 right-0 z-30",children:s.jsxs("div",{className:"w-full pl-4 pr-4 py-5",children:[s.jsxs("div",{className:"hidden md:flex items-center justify-between",children:[s.jsx("div",{className:`absolute left-1/2 -translate-x-1/2 transition-opacity duration-500 ${c?"opacity-0 pointer-events-none":"opacity-100"}`,children:s.jsxs(Z,{to:"/",className:"flex flex-col items-center group",children:[s.jsx("span",{className:"text-3xl font-black text-white leading-none",children:"JONNA RINCON"}),s.jsx("span",{className:"text-xs text-purple-400 tracking-wide mt-1 text-center",children:"Producer  DJ  Audio Engineer"})]})}),s.jsx("div",{className:`transition-opacity duration-500 ${c?"opacity-100":"opacity-0"}`,children:s.jsxs(Z,{to:"/",className:"flex flex-col items-center group",children:[s.jsx("span",{className:"text-3xl font-black text-white leading-none",children:"JONNA RINCON"}),s.jsx("span",{className:"text-xs text-purple-400 tracking-wide mt-1 text-center",children:"Producer  DJ  Audio Engineer"})]})}),s.jsxs("div",{className:"flex items-center gap-5",children:[P?s.jsx(Z,{to:k(),className:"rounded-full bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-base hover:scale-110 transition-all duration-300 neon-border-subtle hover:neon-border",style:{width:"60px",height:"60px"},title:P.displayName||P.email||"Profile",children:A()}):s.jsx("button",{onClick:C,className:"rounded-full glass flex items-center justify-center text-white hover:text-gray-200 hover:scale-110 transition-all duration-300 neon-border-subtle hover:neon-border",style:{width:"60px",height:"60px"},title:"Login",children:s.jsx(xn,{className:"w-7 h-7"})}),e&&s.jsxs("button",{onClick:e,className:"relative glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 active:scale-95 group/cart",style:{width:"60px",height:"60px",padding:"16px"},children:[s.jsx(ur,{className:"w-7 h-7 group-hover/cart:animate-pulse"}),t>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center text-sm font-black neon-border-subtle animate-pulse",style:{width:"32px",height:"32px"},children:t})]}),s.jsx("button",{onClick:()=>n(!r),className:"glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 active:scale-95 flex items-center justify-center",style:{width:"60px",height:"60px"},children:r?s.jsx(Pt,{className:"w-7 h-7"}):s.jsx(zs,{className:"w-7 h-7"})})]})]}),s.jsxs("div",{className:"md:hidden",children:[s.jsxs("div",{className:`transition-opacity duration-500 ${c?"opacity-0 pointer-events-none absolute":"opacity-100"}`,children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsxs(Z,{to:"/",className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-2xl font-black text-white leading-none",children:"JONNA RINCON"}),s.jsx("span",{className:"text-xs text-purple-400 tracking-wide mt-1 text-center",children:"Producer  DJ  Audio Engineer"})]})}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[P?s.jsx(Z,{to:k(),className:"rounded-full bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-sm hover:scale-110 transition-all duration-300",style:{width:"30px",height:"30px"},children:A()}):s.jsx("button",{onClick:C,className:"rounded-full glass flex items-center justify-center text-white hover:text-gray-200 hover:scale-110 transition-all duration-300",style:{width:"30px",height:"30px"},children:s.jsx(xn,{className:"w-4 h-4"})}),e&&s.jsxs("button",{onClick:e,className:"relative glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"30px",height:"30px"},children:[s.jsx(ur,{className:"w-4 h-4"}),t>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-purple-600 rounded-full flex items-center justify-center text-xs font-black",style:{width:"16px",height:"16px",fontSize:"8px"},children:t})]}),s.jsx("button",{onClick:()=>n(!r),className:"glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"30px",height:"30px"},children:r?s.jsx(Pt,{className:"w-4 h-4"}):s.jsx(zs,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:`transition-opacity duration-500 flex items-center justify-between ${c?"opacity-100":"opacity-0 pointer-events-none absolute"}`,children:[s.jsxs(Z,{to:"/",className:"flex flex-col items-start",children:[s.jsx("span",{className:"text-xl font-black text-white leading-none",children:"JONNA RINCON"}),s.jsx("span",{className:"text-xs text-purple-400 tracking-wide",children:"Producer  DJ  Audio Engineer"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[P?s.jsx(Z,{to:k(),className:"rounded-full bg-gradient-to-r from-purple-600 to-pink-600 flex items-center justify-center text-white font-bold text-xs hover:scale-110 transition-all duration-300",style:{width:"36px",height:"36px"},children:A()}):s.jsx("button",{onClick:C,className:"rounded-full glass flex items-center justify-center text-white hover:text-gray-200 hover:scale-110 transition-all duration-300",style:{width:"36px",height:"36px"},children:s.jsx(xn,{className:"w-5 h-5"})}),e&&s.jsxs("button",{onClick:e,className:"relative glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"36px",height:"36px"},children:[s.jsx(ur,{className:"w-5 h-5"}),t>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-purple-600 rounded-full flex items-center justify-center text-xs font-black",style:{width:"20px",height:"20px",fontSize:"10px"},children:t})]}),s.jsx("button",{onClick:()=>n(!r),className:"glass rounded-full hover:scale-110 transition-all flex items-center justify-center",style:{width:"36px",height:"36px"},children:r?s.jsx(Pt,{className:"w-5 h-5"}):s.jsx(zs,{className:"w-5 h-5"})})]})]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-xl z-[120] animate-fade-in",onClick:()=>a(!1)}),s.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 pointer-events-none",children:s.jsx("div",{className:"pointer-events-auto bg-black/80 backdrop-blur-xl border-2 border-purple-500/30 rounded-3xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-in",children:s.jsxs("div",{className:"p-8",children:[s.jsx("button",{onClick:()=>a(!1),className:"absolute top-6 right-6 p-2 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 hover:rotate-90",children:s.jsx(Pt,{className:"w-5 h-5 text-white"})}),s.jsx("h2",{className:"text-4xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent mb-8",children:o==="login"?"Welcome Back":"Create Account"}),s.jsxs("form",{onSubmit:I,className:"flex flex-col gap-5",children:[N&&s.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-400 px-4 py-3 rounded-xl text-sm",children:N}),o==="signup"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",value:S,onChange:B=>b(B.target.value),className:"w-full px-4 py-3 bg-white/5 border-2 border-purple-500/30 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all",placeholder:"Your name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:h,onChange:B=>m(B.target.value),required:!0,className:"w-full px-4 py-3 bg-white/5 border-2 border-purple-500/30 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all",placeholder:"your@email.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Password"}),s.jsx("input",{type:"password",value:p,onChange:B=>y(B.target.value),required:!0,className:"w-full px-4 py-3 bg-white/5 border-2 border-purple-500/30 rounded-xl text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none transition-all",placeholder:""})]}),o==="login"&&s.jsx("div",{className:"flex justify-end",children:s.jsx("a",{href:"#",className:"text-sm text-purple-400 hover:text-purple-300 transition-colors",children:"Forgot password?"})}),s.jsx("button",{type:"submit",disabled:v,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-xl font-bold text-lg transition-all hover:scale-105 active:scale-95 shadow-xl disabled:opacity-50",children:v?"Loading...":o==="login"?"Sign In":"Create Account"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-gray-400 text-sm",children:o==="login"?s.jsxs(s.Fragment,{children:["Don't have an account?"," ",s.jsx("button",{onClick:oe,className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Create one"})]}):s.jsxs(s.Fragment,{children:["Already have an account?"," ",s.jsx("button",{onClick:oe,className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Sign in"})]})})})]})})})]}),r&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"hidden md:block",children:[s.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-xl z-[100] animate-fade-in",onClick:()=>n(!1)}),s.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-8 pointer-events-none",children:s.jsx("div",{className:"pointer-events-auto bg-black/80 backdrop-blur-xl border-2 border-purple-500/30 rounded-3xl shadow-2xl max-w-5xl w-full overflow-hidden animate-scale-in",children:s.jsxs("div",{className:"grid grid-cols-2 min-h-[600px]",children:[s.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-purple-900/30 to-black",children:[s.jsx("img",{src:"/menu-artist-image.png",alt:"Jonna Rincon",className:"absolute inset-0 w-full h-full object-cover scale-150",style:{objectPosition:"center 35%",filter:"brightness(0.9) contrast(1.1)"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-black/40"})]}),s.jsxs("div",{className:"flex flex-col p-12 justify-center",children:[s.jsx("button",{onClick:()=>n(!1),className:"absolute top-8 right-8 p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 hover:rotate-90",children:s.jsx(Pt,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsx(Z,{to:"/",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Home"}),s.jsx("a",{href:"#beats",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Beats"}),s.jsx("a",{href:"#music",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Music"}),s.jsx("a",{href:"#socials",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Socials"}),s.jsx(Z,{to:"/shop/beats",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Shop"}),s.jsx("div",{className:"border-t-2 border-purple-500/30 my-4"}),P?s.jsxs(s.Fragment,{children:[s.jsx(Z,{to:k(),onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Dashboard"}),s.jsx("button",{onClick:()=>{n(!1),R()},className:"text-white hover:text-red-400 transition-all font-black text-4xl text-left hover:translate-x-4 transform duration-300",children:"Sign Out"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Z,{to:"/login",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-4xl hover:translate-x-4 transform duration-300",children:"Sign In"}),s.jsx("div",{className:"mt-4",children:s.jsxs("p",{className:"text-gray-400 text-base",children:["Don't have an account?"," ",s.jsx(Z,{to:"/register",onClick:()=>n(!1),className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Create one"})]})})]})]}),s.jsx("div",{className:"mt-auto pt-8",children:s.jsx("p",{className:"text-sm text-gray-500",children:" 2025 Jonna Rincon"})})]})]})})})]}),s.jsxs("div",{className:"md:hidden",children:[s.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-xl z-[100] animate-fade-in",onClick:()=>n(!1)}),s.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center pointer-events-none",children:s.jsxs("div",{className:"pointer-events-auto bg-black/90 backdrop-blur-2xl border border-purple-500/20 rounded-2xl shadow-2xl w-[92%] max-w-lg max-h-[85vh] overflow-hidden flex flex-col animate-scale-in",children:[s.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-purple-900/20 to-black flex-shrink-0",style:{height:"45vh"},children:[s.jsx("img",{src:"/menu-artist-image.png",alt:"Jonna Rincon",className:"w-full h-full object-cover object-center",style:{objectPosition:"center 35%",filter:"brightness(0.85) contrast(1.15) saturate(1.1)"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/80"}),s.jsx("button",{onClick:()=>n(!1),className:"absolute top-5 right-5 w-10 h-10 flex items-center justify-center rounded-full bg-black/40 backdrop-blur-md border border-white/10 hover:bg-black/60 hover:border-white/20 transition-all",children:s.jsx(Pt,{className:"w-5 h-5 text-white",strokeWidth:2.5})})]}),s.jsx("div",{className:"flex-1 flex flex-col justify-center px-10 py-8 overflow-y-auto",children:s.jsxs("div",{className:"flex flex-col items-center gap-6 text-center",children:[s.jsx(Z,{to:"/",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Home"}),s.jsx("a",{href:"#beats",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Beats"}),s.jsx("a",{href:"#music",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Music"}),s.jsx("a",{href:"#socials",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Socials"}),s.jsx(Z,{to:"/shop/beats",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Shop"}),s.jsx("div",{className:"w-16 border-t border-purple-500/30 my-2"}),P?s.jsxs(s.Fragment,{children:[s.jsx(Z,{to:k(),onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Dashboard"}),s.jsx("button",{onClick:()=>{n(!1),R()},className:"text-white/80 hover:text-red-400 transition-all font-bold text-xl tracking-tight hover:scale-105 transform duration-200",children:"Sign Out"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Z,{to:"/login",onClick:()=>n(!1),className:"text-white hover:text-purple-400 transition-all font-black text-3xl tracking-tight hover:scale-105 transform duration-200",children:"Sign In"}),s.jsx("div",{className:"mt-2",children:s.jsxs("p",{className:"text-gray-400 text-sm",children:["Don't have an account?"," ",s.jsx(Z,{to:"/register",onClick:()=>n(!1),className:"text-purple-400 hover:text-purple-300 font-semibold transition-colors",children:"Create one"})]})})]})]})}),s.jsx("div",{className:"flex-shrink-0 py-5 border-t border-white/5",children:s.jsx("p",{className:"text-xs text-gray-500 text-center font-medium tracking-wide",children:" 2025 JONNA RINCON"})})]})})]})]})]})})}function e3(){const t=w.useRef(null),e=w.useRef(null),r=w.useCallback(()=>{const n=window.scrollY,i=window.innerHeight,a=n/i*100;let o;a<10?o=a/10*.3:a<70?o=.3+(a-10)/60*.5:o=.8;const l=Math.min(n/i*10,10);t.current&&(t.current.style.opacity=String(o),t.current.style.backdropFilter=`blur(${l}px)`,t.current.style.webkitBackdropFilter=`blur(${l}px)`),e.current&&(e.current.style.opacity=String(o))},[]);return w.useEffect(()=>(window.addEventListener("scroll",r,{passive:!0}),r(),()=>window.removeEventListener("scroll",r)),[r]),s.jsxs("section",{className:"relative w-full min-h-screen flex items-center justify-center -mt-24",children:[s.jsxs("div",{className:"fixed inset-0 w-full h-screen -z-10",children:[s.jsx("img",{src:"/DJ Screenshot 3-2-26.png",alt:"Jonna Rincon",className:"w-full h-full object-cover",style:{objectFit:"cover",objectPosition:"center"}}),s.jsx("div",{ref:t,className:"absolute inset-0 bg-black",style:{opacity:0}}),s.jsx("div",{ref:e,className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/40",style:{opacity:0}})]}),s.jsx("div",{className:"relative z-10 w-full min-h-screen flex items-center justify-center px-6 pt-24",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 animate-fade-in",children:[s.jsxs("a",{href:"#beats",className:"group relative px-10 py-5 backdrop-blur-md bg-purple-900/20 border-2 border-purple-500/50 rounded-xl font-bold text-xl transition-all duration-300 hover:border-purple-400 hover:bg-purple-600/30 hover:scale-105 active:scale-95 flex items-center justify-center gap-3 min-w-[220px]",children:[s.jsx(Kr,{className:"w-6 h-6",fill:"currentColor"}),s.jsx("span",{children:"Browse Beats"})]}),s.jsx("a",{href:"#music",className:"group relative px-10 py-5 backdrop-blur-md bg-purple-900/20 border-2 border-purple-500/50 rounded-xl font-bold text-xl transition-all duration-300 hover:border-purple-400 hover:bg-purple-600/30 hover:scale-105 active:scale-95 flex items-center justify-center gap-3 min-w-[220px]",children:s.jsx("span",{children:"Listen Now"})})]})})]})}function t3(){const[t,e]=w.useState(0),r=["/DJI_20251115114029_0004_D.JPG","/IMG_1027.jpg","/Maastricht Screenshot 15-12-25.png"],n=()=>{e(a=>(a+1)%r.length)},i=()=>{e(a=>(a-1+r.length)%r.length)};return s.jsx("section",{id:"about",className:"py-8 md:py-80 pb-49 px-4 bg-transparent",children:s.jsx("div",{className:"max-w-[1600px] mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-32",children:[s.jsxs("div",{id:"about-gallery",className:"py-12 md:py-0",children:[s.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:r.map((a,o)=>s.jsx("div",{className:`transition-opacity duration-500 ${o===t?"opacity-100":"opacity-0 absolute inset-0"}`,children:s.jsx("img",{src:a,alt:`Jonna Rincon ${o+1}`,className:"w-full h-auto object-cover",style:{minHeight:"300px",maxHeight:"500px"}})},o))}),s.jsxs("div",{className:"flex items-center justify-center gap-6 mt-6",children:[s.jsx("button",{onClick:i,className:"w-10 h-10 lg:w-14 lg:h-14 rounded-full bg-black/60 backdrop-blur-md border border-purple-500/30 flex items-center justify-center hover:bg-purple-600/80 hover:scale-110 transition-all","aria-label":"Previous image",children:s.jsx(hd,{className:"w-5 h-5 lg:w-7 lg:h-7 rotate-[-90deg]"})}),s.jsx("div",{className:"flex gap-2",children:r.map((a,o)=>s.jsx("button",{onClick:()=>e(o),className:`h-2 rounded-full transition-all ${o===t?"w-8 bg-purple-400":"w-2 bg-gray-600"}`,"aria-label":`Go to image ${o+1}`},o))}),s.jsx("button",{onClick:n,className:"w-10 h-10 lg:w-14 lg:h-14 rounded-full bg-black/60 backdrop-blur-md border border-purple-500/30 flex items-center justify-center hover:bg-purple-600/80 hover:scale-110 transition-all","aria-label":"Next image",children:s.jsx(dd,{className:"w-5 h-5 lg:w-7 lg:h-7 rotate-[-90deg]"})})]})]}),s.jsxs("div",{id:"about-bio",className:"pt-4 md:pt-0",children:[s.jsx("h3",{className:"text-2xl lg:text-4xl font-bold mb-2 md:mb-4 neon-glow",children:"About Jonna"}),s.jsxs("div",{className:"space-y-2 text-gray-300 text-xs lg:text-lg leading-relaxed",children:[s.jsxs("p",{children:["Jonathan aka ",s.jsx("span",{className:"text-purple-400 font-semibold",children:"j18"})," is a human being with a creative mind which is described by many people as ",s.jsx("span",{className:"italic",children:'"not from this world"'}),". You may already recognize his J18 tag at the beginning and/or end of every track, or by the clock sound in his work."]}),s.jsx("p",{children:"Mostly known for his raw and authentic moombahton style in tracks or beats. But have in mind that this young man has much to offer. From modern rap beats to the dirty old classic hip hop beats, from warm and smooth r&b instrumentals to the world of EDM (electronic dance music) to studying to jonna's lo-fi instrumentals which he made on his trip on earth;"}),s.jsx("p",{children:"Born in Maastricht, The Netherlands & based in Tilburg he began making music when first made contact with any music instrument nearby. When he visited his nephews in Dominican Republic, he was shown FL Studio for the first time. When Jonna saw that it was possible to make a track with a PC, he made his first track immediately together with his oldest nephew and that's where the music production journey started."}),s.jsxs("p",{children:["10+ Years later and the stuff what he can do with a creative program like that is absolute crazy. From the most little things and the most weird noises....never-mind, Jonna Rincon is able to make something out of it... And you can hear that on songs like ",s.jsx("span",{className:"text-purple-400",children:"___"})," and ",s.jsx("span",{className:"text-purple-400",children:"___"})," which have been played on MTV and the Dutch Radio. Not there yet, but on the way. J18"]}),s.jsx("p",{className:"text-purple-300 font-semibold text-xs lg:text-xl italic",children:"(J18=Jeighteen) (Jeighteen=his tag & clothing/brand & nickname)"}),s.jsx("p",{className:"text-purple-300 font-semibold text-xs lg:text-xl",children:"Based in the Netherlands, working with artists worldwide."})]})]})]})})})}function r3({onAddToCart:t}){const[e,r]=w.useState([]),[n,i]=w.useState([]),[a,o]=w.useState(""),[l,c]=w.useState("All"),[d,h]=w.useState(!0),[m,p]=w.useState(null),[y,S]=w.useState("list"),[b,N]=w.useState(null),[g,v]=w.useState(0);w.useEffect(()=>{h(!0),p(null);const A=je(ee(z,"beats"),ae("status","==","published"),Te("createdAt","desc")),C=gt(A,oe=>{const B=oe.docs.map(Ie=>{var q,K,X,be;const Ce=Ie.data();return{id:Ie.id,...Ce,price:((K=(q=Ce.licenses)==null?void 0:q.basic)==null?void 0:K.price)||Ce.price||29,created_at:((X=Ce.createdAt)==null?void 0:X.toDate().toISOString())||new Date().toISOString(),updated_at:((be=Ce.updatedAt)==null?void 0:be.toDate().toISOString())||new Date().toISOString()}});r(B),i(B),h(!1)},oe=>{console.error("Firebase error:",oe),p("Failed to load beats. Please try again."),h(!1)});return()=>C()},[]),w.useEffect(()=>{j()},[a,l,e]),w.useEffect(()=>{v(0)},[y]);const j=()=>{let A=[...e];if(a){const C=a.toLowerCase();A=A.filter(oe=>oe.title.toLowerCase().includes(C)||oe.genre.toLowerCase().includes(C)||oe.tags.some(B=>B.toLowerCase().includes(C)))}l!=="All"&&(A=A.filter(C=>C.genre===l)),i(A),v(0)},P=["All",...Array.from(new Set(e.map(A=>A.genre)))],D=y==="grid"?window.innerWidth<768?6:12:window.innerWidth<768?5:7,T=Math.ceil(n.length/D),_=n.slice(g*D,(g+1)*D),I=()=>{g<T-1&&v(g+1)},R=()=>{g>0&&v(g-1)},k=e.filter(A=>A.featured).slice(0,6);return s.jsx("section",{id:"beats",className:"min-h-screen py-24 px-4 bg-transparent flex flex-col",children:s.jsxs("div",{className:"max-w-7xl mx-auto w-full flex-1 flex flex-col",children:[s.jsx("div",{className:"text-center mb-6 md:mb-12",children:s.jsx("h2",{className:"text-3xl md:text-6xl font-bold neon-glow",children:"Beat Store"})}),!d&&k.length>0&&s.jsxs("div",{className:"mb-8 md:mb-12",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-purple-400",children:"Featured Beats"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 md:gap-4",children:k.map(A=>s.jsxs("div",{className:"glass rounded-xl overflow-hidden hover:scale-105 transition-all group flex flex-col relative neon-border",children:[s.jsx("div",{className:"absolute top-2 right-2 z-10 bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-2 py-1 rounded-full text-xs font-bold shadow-lg",children:" FEATURED"}),s.jsxs("div",{className:"relative aspect-square",children:[s.jsx("img",{src:A.artwork_url,alt:A.title,className:"w-full h-full object-cover"}),s.jsx("button",{onClick:()=>N(b===A.id?null:A.id),className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity",children:b===A.id?s.jsx(_c,{className:"w-8 h-8 text-white",fill:"currentColor"}):s.jsx(Kr,{className:"w-8 h-8 text-white ml-1",fill:"currentColor"})})]}),s.jsxs("div",{className:"p-3 flex-1 flex flex-col",children:[s.jsx("h3",{className:"text-sm md:text-base font-bold mb-1 truncate",children:A.title}),s.jsx("p",{className:"text-xs text-gray-400 mb-2 truncate",children:A.artist}),s.jsxs("div",{className:"flex gap-1 mb-2",children:[s.jsx("span",{className:"px-2 py-0.5 bg-purple-900/30 rounded text-xs",children:A.bpm}),s.jsx("span",{className:"px-2 py-0.5 bg-purple-900/30 rounded text-xs",children:A.key})]}),s.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[s.jsxs("span",{className:"text-base md:text-lg font-black text-purple-400",children:["",A.price.toFixed(0)]}),s.jsx("button",{onClick:()=>t(A,"basic"),className:"p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-all hover:scale-110",children:s.jsx(ur,{className:"w-4 h-4"})})]})]})]},A.id))}),s.jsx("div",{className:"my-8 border-t border-purple-900/50"})]}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"All Beats"})}),s.jsxs("div",{className:"mb-6 flex gap-2 items-center",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(eg,{className:"absolute left-3 md:left-4 top-1/2 -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 text-purple-400"}),s.jsx("input",{type:"text",placeholder:"Search beats...",value:a,onChange:A=>o(A.target.value),className:"w-full pl-10 md:pl-12 pr-3 md:pr-4 py-2.5 md:py-4 glass rounded-xl text-white text-sm md:text-base placeholder-gray-500 focus:outline-none focus:neon-border transition-all"})]}),s.jsxs("div",{className:"relative w-24 md:w-auto",children:[s.jsx(o_,{className:"absolute left-2 md:left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 md:w-4 md:h-4 text-purple-400"}),s.jsx("select",{value:l,onChange:A=>c(A.target.value),className:"w-full pl-7 md:pl-10 pr-2 md:pr-3 py-2.5 md:py-4 glass rounded-xl text-white text-xs md:text-sm focus:outline-none focus:neon-border transition-all appearance-none cursor-pointer",children:P.map(A=>s.jsx("option",{value:A,className:"bg-gray-900",children:A},A))})]}),s.jsx("button",{onClick:()=>S(y==="list"?"grid":"list"),className:"p-2.5 md:p-4 glass rounded-xl text-white hover:bg-purple-600/30 transition-all neon-border-subtle",children:y==="list"?s.jsx(KP,{className:"w-4 h-4 md:w-5 md:h-5"}):s.jsx(QP,{className:"w-4 h-4 md:w-5 md:h-5"})})]}),d?s.jsx("div",{className:"flex justify-center items-center flex-1",children:s.jsx("div",{className:"w-16 h-16 border-4 border-purple-600 border-t-transparent rounded-full animate-spin neon-border"})}):m?s.jsx("div",{className:"text-center flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"glass p-8 rounded-xl neon-border max-w-md",children:[s.jsxs("p",{className:"text-2xl text-red-400 mb-4",children:[" ",m]}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-xl font-semibold transition-all",children:"Retry"})]})}):n.length===0?s.jsx("div",{className:"text-center flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"glass p-8 rounded-xl neon-border max-w-md",children:[s.jsx("p",{className:"text-2xl text-gray-400 mb-4",children:"No beats found"}),e.length===0?s.jsx("p",{className:"text-gray-500",children:"Add beats via the admin dashboard"}):s.jsx("p",{className:"text-gray-500",children:"Try adjusting your search filters"})]})}):y==="list"?s.jsx("div",{className:"space-y-1 md:space-y-2",children:_.map((A,C)=>s.jsx("div",{className:"glass hover:bg-purple-900/20 rounded-xl p-2 md:p-4 transition-all hover:scale-[1.02] group",children:s.jsxs("div",{className:"grid grid-cols-12 gap-2 md:gap-4 items-center",children:[s.jsx("div",{className:"col-span-1 text-gray-400 text-xs md:text-sm font-semibold",children:g*D+C+1}),s.jsxs("div",{className:"col-span-5 flex items-center gap-2 md:gap-4",children:[s.jsxs("div",{className:"relative w-10 h-10 md:w-16 md:h-16 flex-shrink-0",children:[s.jsx("img",{src:A.artwork_url,alt:A.title,className:"w-full h-full object-cover rounded-lg"}),s.jsx("button",{onClick:()=>N(b===A.id?null:A.id),className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:b===A.id?s.jsx(_c,{className:"w-4 h-4 md:w-6 md:h-6 text-white",fill:"currentColor"}):s.jsx(Kr,{className:"w-4 h-4 md:w-6 md:h-6 text-white ml-1",fill:"currentColor"})})]}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-white text-xs md:text-base font-semibold truncate",children:A.title}),A.featured&&s.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-1.5 py-0.5 rounded-full text-xs font-bold whitespace-nowrap flex-shrink-0",children:" FEATURED"})]}),s.jsx("p",{className:"text-gray-400 text-xs md:text-sm truncate",children:A.artist})]})]}),s.jsx("div",{className:"col-span-2 text-gray-400 text-xs md:text-sm truncate",children:A.genre}),s.jsxs("div",{className:"col-span-2 text-gray-400 text-xs md:text-sm",children:[A.bpm," BPM  ",A.key]}),s.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2 md:gap-3",children:[s.jsxs("span",{className:"text-sm md:text-xl font-bold text-purple-400",children:["",A.price.toFixed(2)]}),s.jsx("button",{onClick:()=>t(A,"basic"),className:"p-1.5 md:p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-all hover:scale-110",children:s.jsx(ur,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]})},A.id))}):s.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-6 gap-1.5 md:gap-3",children:_.map(A=>s.jsxs("div",{className:"glass rounded-xl overflow-hidden hover:scale-[1.02] transition-all group flex flex-col",style:{minHeight:window.innerWidth<768?"130px":"180px"},children:[s.jsxs("div",{className:"relative aspect-square",children:[s.jsx("img",{src:A.artwork_url,alt:A.title,className:"w-full h-full object-cover"}),s.jsx("button",{onClick:()=>N(b===A.id?null:A.id),className:"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity",children:b===A.id?s.jsx(_c,{className:"w-5 h-5 md:w-8 md:h-8 text-white",fill:"currentColor"}):s.jsx(Kr,{className:"w-5 h-5 md:w-8 md:h-8 text-white ml-1",fill:"currentColor"})}),A.featured&&s.jsx("div",{className:"absolute top-0.5 right-0.5 md:top-2 md:right-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-1.5 py-0.5 md:px-2 md:py-1 rounded-full text-xs font-bold shadow-lg",children:""})]}),s.jsxs("div",{className:"p-1.5 md:p-3 flex-1 flex flex-col",children:[s.jsx("h3",{className:"text-xs md:text-sm font-bold mb-0.5 md:mb-1 truncate leading-tight",children:A.title}),s.jsx("p",{className:"text-xs text-gray-400 mb-0.5 md:mb-2 truncate",children:A.genre}),s.jsxs("div",{className:"flex gap-0.5 md:gap-1 mb-0.5 md:mb-1",children:[s.jsx("span",{className:"px-1 md:px-2 py-0.5 bg-purple-900/30 rounded text-xs leading-none",children:A.bpm}),s.jsx("span",{className:"px-1 md:px-2 py-0.5 bg-purple-900/30 rounded text-xs leading-none",children:A.key})]}),s.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs md:text-base font-black text-purple-400",children:["",A.price.toFixed(0)]}),s.jsx("button",{onClick:()=>t(A,"basic"),className:"p-1.5 md:p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-all hover:scale-110",children:s.jsx(ur,{className:"w-3 h-3 md:w-4 md:h-4"})})]})]})]},A.id))}),n.length>D&&s.jsxs("div",{className:"mt-3 md:mt-4 flex items-center justify-center gap-3 md:gap-4",children:[s.jsx("button",{onClick:R,disabled:g===0,className:"p-2 md:p-3 glass rounded-xl hover:bg-purple-600/30 transition-all disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous page",children:s.jsx(n_,{className:"w-5 h-5 md:w-6 md:h-6"})}),s.jsx("span",{className:"text-xl md:text-2xl font-bold text-purple-400 px-3 md:px-4 min-w-[40px] md:min-w-[50px] text-center",children:g+1}),s.jsx("button",{onClick:I,disabled:g>=T-1,className:"p-2 md:p-3 glass rounded-xl hover:bg-purple-600/30 transition-all disabled:opacity-30 disabled:cursor-not-allowed",title:"Next page",children:s.jsx(s_,{className:"w-5 h-5 md:w-6 md:h-6"})})]})]})})}function n3(){const[t,e]=w.useState(0),r=[{name:"Top Tracks",embedUrl:"https://open.spotify.com/embed/artist/6o3BlWTeK4EKUyByo35y6F?utm_source=generator"},{name:"Playlist 2",embedUrl:"https://open.spotify.com/embed/playlist/5SaEeqVSV9vyLUvqsrrfJ7?utm_source=generator&theme=0"},{name:"Playlist 3",embedUrl:"https://open.spotify.com/embed/playlist/7mIjrYgNeQxVw2lBBsEDjE?utm_source=generator&theme=0"},{name:"Playlist 4",embedUrl:"https://open.spotify.com/embed/playlist/5smfHiU4egb6uyHYzgmqdC?utm_source=generator"},{name:"This is Jonna Rincon",embedUrl:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3LPWh3?utm_source=generator"}],n=[{id:"This Is Jonna Rincon",name:"This Is",url:"https://open.spotify.com/playlist/37i9dQZF1DZ06evO3LPWh3?si=9f9b5ebdf6de4887",cover:"ThisIsJonna.png"},{id:"DJ Sets",name:"DJ SETS",url:"https://youtube.com/playlist?list=PLgWPe6V88vwBmK5X5WCsj5kvvCb4IXjkM&si=iC-9_BTA0seIFWfr",cover:"TN-DJSet.jpg"},{id:"Mix & Master",name:"Mix & Master",url:"https://open.spotify.com/playlist/5smfHiU4egb6uyHYzgmqdC?si=b9cc2a2438b640ef",cover:"MixedBy.png"},{id:"Moombahton",name:"Moombah Time",url:"https://open.spotify.com/playlist/37i9dQZF1DZ06evO3LPWh3?si=3cf757f3a9604be9",cover:"MoombahTime.png"},{id:"Vlog",name:"Vlogs",url:"https://youtube.com/playlist?list=PLgWPe6V88vwAoxr8xVTv85989fwEe5a10&si=yGwkn0Y3sYluSLcs",cover:"Vlog Foto.png",isYoutube:!0}];return s.jsxs(s.Fragment,{children:[s.jsx("section",{id:"music",className:"py-12 md:py-24 px-4 bg-transparent md:min-h-0 min-h-screen flex items-center",children:s.jsxs("div",{className:"max-w-7xl mx-auto w-full scale-85 md:scale-100 origin-center",children:[s.jsx("div",{className:"text-center mb-8 md:mb-16",children:s.jsxs("h2",{className:"text-3xl md:text-6xl font-bold neon-glow",children:[s.jsx("span",{className:"md:hidden",children:r[t].name}),s.jsx("span",{className:"hidden md:block",children:"Music"})]})}),s.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[s.jsxs("div",{className:"flex items-center justify-center gap-6 mb-6",children:[s.jsx("p",{className:"hidden md:block text-2xl md:text-3xl font-bold neon-glow",children:r[t].name}),s.jsx("div",{className:"flex gap-3",children:r.map((i,a)=>s.jsx("button",{onClick:()=>e(a),className:`w-4 h-4 rounded-full transition-all ${t===a?"bg-purple-500 w-8":"bg-gray-600 hover:bg-gray-500"}`,title:i.name,"aria-label":`Switch to ${i.name}`},a))})]}),s.jsx("div",{className:"rounded-xl overflow-hidden relative",children:r.map((i,a)=>s.jsx("div",{className:`transition-opacity duration-500 ${a===t?"opacity-100":"opacity-0 absolute inset-0"}`,children:s.jsx("iframe",{style:{borderRadius:"12px"},src:i.embedUrl,width:"100%",height:"400",frameBorder:"0",allowFullScreen:!0,allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})},a))}),s.jsx("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"mt-6 w-full inline-block text-center py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Open in Spotify"})]})]})}),s.jsx("section",{id:"compilations",className:"py-12 md:py-0 px-4 bg-transparent md:min-h-0 min-h-screen flex items-center",children:s.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[s.jsx("div",{className:"text-center mb-8 md:hidden",children:s.jsx("h2",{className:"text-3xl font-bold neon-glow",children:"Playlists"})}),s.jsx("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-5 gap-3 max-w-5xl",children:n.map(i=>s.jsxs("a",{href:i.url.replace("/embed/","/"),target:"_blank",rel:"noopener noreferrer",className:"group text-center",children:[s.jsx("h4",{className:"text-sm font-bold mb-2 text-purple-300 truncate",children:i.name}),s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden hover:scale-105 transition-all glass neon-border-subtle hover:neon-border",children:s.jsx("img",{src:i.cover,alt:i.name,className:"w-full h-full object-cover"})})]},i.id))})})})]})}),s.jsx("section",{id:"youtube",className:"py-12 md:py-44 md:mt-96 px-4 bg-transparent md:min-h-0 min-h-screen flex items-center",children:s.jsxs("div",{className:"max-w-7xl mx-auto w-full scale-[0.70] md:scale-100 origin-center",children:[s.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[s.jsx("h2",{className:"text-3xl md:text-6xl font-bold mb-4 neon-glow",children:"YouTube"}),s.jsx("p",{className:"text-base md:text-xl text-gray-400",children:"Watch my latest DJ sets and vlogs"})]}),s.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[s.jsxs("div",{className:"relative rounded-xl overflow-hidden group cursor-pointer",children:[s.jsxs("div",{className:"absolute inset-0 z-10 transition-opacity duration-500 group-[.playing]:opacity-0 group-[.playing]:pointer-events-none",onClick:i=>{const a=i.currentTarget.closest(".relative");a==null||a.classList.add("playing");const o=a==null?void 0:a.querySelector("iframe");if(o){const l=o.src;o.src=l+(l.includes("?")?"&":"?")+"autoplay=1"}},children:[s.jsx("img",{src:"DJI_20251017150728_0019_D.JPG",alt:"YouTube thumbnail",className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/20 transition-all",children:s.jsx("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:s.jsx("svg",{className:"w-10 h-10 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),s.jsx("iframe",{width:"100%",height:"500",src:"https://www.youtube.com/embed/videoseries?si=-lcpC5aW0SSgSOXa&list=PLgWPe6V88vwBmK5X5WCsj5kvvCb4IXjkM",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0,style:{borderRadius:"12px"}})]}),s.jsx("a",{href:"https://youtube.com/@jonnarincon?si=zp6ECLUFUSCXIhhn",target:"_blank",rel:"noopener noreferrer",className:"mt-6 w-full inline-block text-center py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Visit Channel"})]})]})})]})}function s3(){const t=[{name:"Instagram",icon:gn,url:"https://www.instagram.com/jonnarincon/",color:"from-pink-600 to-purple-600"},{name:"TikTok",icon:bu,url:"#",color:"from-black to-teal-600"},{name:"Apple Music",icon:bu,url:"#",color:"from-red-600 to-pink-600"},{name:"YouTube Music",icon:ei,url:"#",color:"from-red-600 to-orange-600"}];return s.jsx("section",{id:"socials",className:"py-64 pb-64 px-4 bg-transparent",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-3xl md:text-6xl font-bold mb-4 neon-glow",children:"Social Media"}),s.jsx("p",{className:"text-xl text-gray-400"})]}),s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:t.map(e=>{const r=e.icon;return s.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"glass rounded-2xl p-8 neon-border-subtle hover:neon-border transition-all hover:scale-105 flex flex-col items-center text-center group",children:[s.jsx("div",{className:`w-20 h-20 rounded-full bg-gradient-to-br ${e.color} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:s.jsx(r,{className:"w-10 h-10 text-white"})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:e.name}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Follow me"})]},e.name)})}),s.jsxs("div",{className:"glass rounded-2xl p-8 neon-border text-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-4 text-purple-300",children:"Want exclusive releases?"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Subscribe to get early access to new beats, free downloads, and special offers"}),s.jsxs("div",{className:"flex gap-4 max-w-md mx-auto",children:[s.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all"}),s.jsx("button",{className:"px-8 py-3 bg-purple-600 hover:bg-purple-700 rounded-xl font-semibold transition-all neon-border-subtle hover:scale-105",children:"Subscribe"})]})]})]})})}function i3(){return s.jsx("section",{className:"py-48 pb-64 px-4 bg-transparent",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("div",{className:"inline-flex items-center gap-3 mb-4",children:s.jsx("h2",{className:"text-3xl md:text-6xl font-bold neon-glow",children:"Live Studio"})}),s.jsx("p",{className:"text-xl text-gray-400"})]}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("div",{className:"glass rounded-2xl overflow-hidden neon-border aspect-video relative",children:s.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-purple-900/20 to-black flex items-center justify-center relative",children:[s.jsx("img",{src:"https://images.pexels.com/photos/164938/pexels-photo-164938.jpeg?auto=compress&cs=tinysrgb&w=1200",alt:"Studio",className:"absolute inset-0 w-full h-full object-cover opacity-30"}),s.jsxs("div",{className:"relative text-center z-10",children:[s.jsx(YP,{className:"w-20 h-20 text-purple-400 mx-auto mb-4"}),s.jsx("p",{className:"text-2xl font-bold text-purple-300 mb-2",children:"Currently Offline"}),s.jsx("p",{className:"text-gray-400",children:"Check back soon for the next session"})]})]})}),s.jsxs("div",{className:"mt-6 glass rounded-2xl p-6 neon-border-subtle",children:[s.jsx("h3",{className:"text-2xl font-bold mb-4 text-purple-300",children:"About Live Sessions"}),s.jsx("p",{className:"text-gray-400 leading-relaxed",children:"Join me in the studio as I create beats from scratch. Watch the creative process, ask questions in real-time, and get insider tips on production techniques. Sessions include beat making, mixing, sound design, and more."})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),s.jsx("span",{className:"font-semibold text-lg",children:"OFFLINE"})]}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Next stream coming soon"})]}),s.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Hm,{className:"w-6 h-6 text-purple-400"}),s.jsx("h3",{className:"text-xl font-bold",children:"Upcoming Streams"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border-l-2 border-purple-500 pl-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(_r,{className:"w-4 h-4 text-purple-400"}),s.jsx("span",{className:"text-sm text-gray-400",children:"This Friday, 8:00 PM"})]}),s.jsx("p",{className:"font-semibold text-purple-200",children:"Beat Making Session"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Trap & Drill production"})]}),s.jsxs("div",{className:"border-l-2 border-purple-500 pl-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(_r,{className:"w-4 h-4 text-purple-400"}),s.jsx("span",{className:"text-sm text-gray-400",children:"Next Monday, 7:00 PM"})]}),s.jsx("p",{className:"font-semibold text-purple-200",children:"Q&A + Production Tips"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Ask me anything"})]})]})]}),s.jsx("button",{className:"w-full py-4 bg-purple-600 hover:bg-purple-700 rounded-xl font-bold transition-all neon-border hover:scale-105",children:"Set Reminder"}),s.jsxs("div",{className:"glass rounded-2xl p-6 neon-border-subtle",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 text-purple-300",children:"Follow on Socials"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Get notified when I go live and never miss a session"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 bg-purple-900/30 hover:bg-purple-900/50 rounded-lg text-center font-medium transition-all",children:"YouTube"}),s.jsx("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 bg-purple-900/30 hover:bg-purple-900/50 rounded-lg text-center font-medium transition-all",children:"Instagram"})]})]})]})]})]})})}function a3(){const[t,e]=w.useState({name:"",email:"",subject:"commission",message:""}),r=n=>{n.preventDefault(),console.log("Form submitted:",t)};return s.jsx("section",{id:"contact",className:"py-24 pb-32 px-4 bg-transparent",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-3xl md:text-6xl font-bold mb-4 neon-glow",children:"Get In Touch"}),s.jsx("p",{className:"text-xl text-gray-400",children:"Let's create something amazing together"})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold mb-6 text-purple-300",children:"Contact Info"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Xf,{className:"w-6 h-6 text-purple-400 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold mb-1",children:"Email"}),s.jsx("a",{href:"mailto:contact@jonnarincon.com",className:"text-purple-400 hover:text-purple-300 transition-colors",children:"contact@jonnarincon.com"})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Le,{className:"w-6 h-6 text-purple-400 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold mb-1",children:"Response Time"}),s.jsx("p",{className:"text-gray-400",children:"Usually within 24 hours"})]})]})]})]}),s.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[s.jsx("h3",{className:"text-2xl font-bold mb-6 text-purple-300",children:"Connect"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[s.jsx(gn,{className:"w-6 h-6 text-purple-400"}),s.jsx("span",{className:"font-semibold",children:"Instagram"})]}),s.jsxs("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[s.jsx(ei,{className:"w-6 h-6 text-purple-400"}),s.jsx("span",{className:"font-semibold",children:"YouTube"})]}),s.jsxs("a",{href:"https://soundcloud.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[s.jsx(i_,{className:"w-6 h-6 text-purple-400"}),s.jsx("span",{className:"font-semibold",children:"SoundCloud"})]}),s.jsxs("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-purple-900/20 hover:bg-purple-900/40 rounded-xl transition-all neon-border-subtle hover:scale-105",children:[s.jsx(Le,{className:"w-6 h-6 text-purple-400"}),s.jsx("span",{className:"font-semibold",children:"Spotify"})]})]})]})]}),s.jsxs("div",{className:"glass rounded-2xl p-8 neon-border-subtle",children:[s.jsx("h3",{className:"text-3xl font-bold mb-6 text-purple-300",children:"Send a Message"}),s.jsxs("form",{onSubmit:r,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Name"}),s.jsx("input",{type:"text",required:!0,value:t.name,onChange:n=>e({...t,name:n.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all",placeholder:"Your name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Email"}),s.jsx("input",{type:"email",required:!0,value:t.email,onChange:n=>e({...t,email:n.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all",placeholder:"your@email.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Subject"}),s.jsxs("select",{value:t.subject,onChange:n=>e({...t,subject:n.target.value}),className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white focus:outline-none focus:neon-border-subtle transition-all appearance-none cursor-pointer",children:[s.jsx("option",{value:"commission",children:"Beat Commission"}),s.jsx("option",{value:"collaboration",children:"Collaboration"}),s.jsx("option",{value:"booking",children:"Booking"}),s.jsx("option",{value:"general",children:"General Inquiry"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold mb-2 text-purple-200",children:"Message"}),s.jsx("textarea",{required:!0,value:t.message,onChange:n=>e({...t,message:n.target.value}),rows:6,className:"w-full px-4 py-3 bg-black/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:neon-border-subtle transition-all resize-none",placeholder:"Tell me about your project..."})]}),s.jsx("button",{type:"submit",className:"w-full py-4 bg-purple-600 hover:bg-purple-700 rounded-xl font-bold text-lg transition-all neon-border hover:scale-105",children:"Send Message"})]})]})]})]})})}function o3(){return s.jsx("footer",{className:"bg-transparent border-t border-purple-500/30 py-12 px-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-12 mb-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Le,{className:"w-8 h-8 text-purple-400 neon-glow"}),s.jsx("span",{className:"text-2xl font-bold neon-glow",children:"JONNA RINCON"})]}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Professional producer and beatmaker crafting premium beats for artists worldwide."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-300",children:"Quick Links"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("a",{href:"#beats",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Browse Beats"}),s.jsx("a",{href:"#music",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Listen to Music"}),s.jsx("a",{href:"#contact",className:"block text-gray-400 hover:text-purple-400 transition-colors",children:"Get in Touch"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-300",children:"Follow"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("a",{href:"https://www.instagram.com/jonnarincon/",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:s.jsx(gn,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://www.youtube.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:s.jsx(ei,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://soundcloud.com/jonnarincon",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:s.jsx(i_,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://open.spotify.com/artist/6o3BlWTeK4EKUyByo35y6F",target:"_blank",rel:"noopener noreferrer",className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110",children:s.jsx(Le,{className:"w-5 h-5"})})]})]})]}),s.jsxs("div",{className:"border-t border-purple-500/30 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Copyright  2025 Jonna Rincon. All Rights Reserved."}),s.jsxs("div",{className:"flex gap-6 text-sm",children:[s.jsx("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Privacy Policy"}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-purple-400 transition-colors",children:"Terms of Service"})]})]})]})})}function l3({isOpen:t,onClose:e,items:r,onRemoveItem:n,onCheckout:i}){const a=r.reduce((o,l)=>o+l.price,0);return t?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-xl z-[100] animate-fade-in",onClick:e}),s.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 pointer-events-none",children:s.jsxs("div",{className:"pointer-events-auto bg-black/80 backdrop-blur-2xl border-2 border-purple-500/30 rounded-3xl shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col animate-scale-in",children:[s.jsxs("div",{className:"flex items-center justify-between p-8 border-b border-purple-500/20 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ur,{className:"w-8 h-8 text-purple-400"}),s.jsx("h2",{className:"text-3xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Shopping Cart"})]}),s.jsx("button",{onClick:e,className:"p-3 glass rounded-full neon-border-subtle hover:neon-border transition-all hover:scale-110 hover:rotate-90",children:s.jsx(Pt,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:r.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx(ur,{className:"w-24 h-24 text-purple-400/30 mx-auto mb-6"}),s.jsx("p",{className:"text-gray-400 text-xl font-medium mb-2",children:"Your cart is empty"}),s.jsx("p",{className:"text-gray-500 text-sm mb-8",children:"Add some beats to get started!"}),s.jsx("button",{onClick:e,className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-xl font-bold text-lg transition-all hover:scale-105 shadow-xl",children:"Browse Beats"})]}):s.jsx("div",{className:"space-y-4",children:r.map((o,l)=>s.jsx("div",{className:"glass rounded-2xl p-5 neon-border-subtle hover:neon-border transition-all",children:s.jsxs("div",{className:"flex gap-5",children:[s.jsx("img",{src:o.beat.artwork_url,alt:o.beat.title,className:"w-24 h-24 rounded-xl object-cover flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-xl text-purple-200 mb-1 truncate",children:o.beat.title}),s.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:[o.beat.artist,"  ",o.beat.bpm," BPM  ",o.beat.key]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"px-3 py-1 bg-purple-600/30 rounded-lg text-xs font-semibold text-purple-300 uppercase",children:[o.license," License"]}),s.jsxs("span",{className:"text-2xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:["",o.price.toFixed(2)]})]})]}),s.jsx("button",{onClick:()=>n(o.beat.id),className:"p-3 hover:bg-red-600/20 rounded-xl transition-all group flex-shrink-0",title:"Remove from cart",children:s.jsx(rg,{className:"w-5 h-5 text-gray-400 group-hover:text-red-400 transition-colors"})})]})},`${o.beat.id}-${o.license}-${l}`))})}),r.length>0&&s.jsxs("div",{className:"border-t-2 border-purple-500/20 p-8 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("span",{className:"text-xl font-bold text-gray-300",children:"Total:"}),s.jsxs("span",{className:"text-4xl font-black bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:["",a.toFixed(2)]})]}),s.jsx("button",{onClick:i,className:"w-full py-5 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-2xl font-black text-xl transition-all hover:scale-105 active:scale-95 shadow-2xl",children:"Proceed to Checkout"}),s.jsx("p",{className:"text-center text-xs text-gray-500 mt-4",children:"Secure checkout  All licenses included"})]})]})})]}):null}function c3(){const[t,e]=w.useState([]),[r,n]=w.useState(!1),[i,a]=w.useState(0),[o,l]=w.useState("down"),[c,d]=w.useState(!1),h=()=>window.innerWidth<768?["hero","about","beats","music","compilations","youtube","socials","live-studio","contact"]:["hero","about","beats","music","youtube","socials","live-studio","contact"],[m,p]=w.useState(h()),y=(P,M)=>{let D=P.price;M==="premium"&&(D=P.price*1.5),M==="exclusive"&&(D=P.price*3);const T={beat:P,license:M,price:D};e([...t,T]),n(!0)},S=P=>{e(t.filter(M=>M.beat.id!==P))},b=async()=>{const P={customerEmail:"customer@example.com",items:t.map(M=>({beatId:M.beat.id,beatTitle:M.beat.title,licenseType:M.license,price:M.price})),total:t.reduce((M,D)=>M+D.price,0),status:"pending",createdAt:new Date};try{await ct(ee(z,"orders"),P),alert("Order created successfully!"),e([])}catch(M){console.error("Order creation failed:",M),alert("Failed to create order")}},N=()=>{const P=window.innerWidth<768;if(c||d(!0),o==="down"){const M=Math.min(i+1,m.length-1),D=document.getElementById(m[M]);if(D)if(m[M]==="music"&&!P){const T=D.offsetTop;window.scrollTo({top:T-50,behavior:"smooth"}),a(M)}else D.scrollIntoView({behavior:"smooth",block:"start"}),a(M);M===m.length-1&&l("up")}else{const M=Math.max(i-1,0),D=document.getElementById(m[M]);if(D)if(m[M]==="music"&&!P){const T=D.offsetTop;window.scrollTo({top:T-50,behavior:"smooth"}),a(M)}else D.scrollIntoView({behavior:"smooth",block:"start"}),a(M);M===0&&l("down")}};w.useEffect(()=>{const P=()=>{const M=window.scrollY+window.innerHeight/2;for(let D=m.length-1;D>=0;D--){const T=document.getElementById(m[D]);if(T&&T.offsetTop<=M){a(_=>_!==D?(D===0&&l("down"),D===m.length-1&&l("up"),D):_);break}}};return window.addEventListener("scroll",P,{passive:!0}),P(),()=>window.removeEventListener("scroll",P)},[m]),w.useEffect(()=>{let P=0,M=!1;const D=()=>{M||(M=!0,P=window.scrollY)},T=()=>{M&&(window.scrollTo({top:P,behavior:"auto"}),p(h()),M=!1)};let _;const I=()=>{D(),clearTimeout(_),_=setTimeout(T,200)};return window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I),clearTimeout(_)}},[]);const g=i===m.length-1,v=!c||g,j=o==="up"?"Back":"Click Me!";return s.jsxs("div",{className:"min-h-screen",children:[s.jsx(d_,{cartItemCount:t.length,onCartClick:()=>n(!0)}),s.jsx(l3,{isOpen:r,onClose:()=>n(!1),items:t,onRemoveItem:S,onCheckout:b}),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block fixed bottom-8 left-8 z-50",children:s.jsx("button",{onClick:N,className:"animate-bounce cursor-pointer hover:scale-110 transition-all focus:outline-none backdrop-blur-md bg-purple-900/20 px-4 py-3 rounded-full border-2 border-purple-500/50 hover:border-purple-400 hover:bg-purple-600/30 duration-300",style:{width:v?"80px":"56px"},children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-h-[44px]",children:[v&&s.jsx("span",{className:"text-sm text-purple-300 font-light whitespace-nowrap",children:j}),s.jsx("svg",{className:`w-5 h-5 text-purple-400 transition-transform duration-300 ${o==="up"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})})}),s.jsx("div",{className:"md:hidden fixed bottom-8 left-8 z-50",children:s.jsx("button",{onClick:N,className:"cursor-pointer hover:scale-110 transition-all focus:outline-none backdrop-blur-md bg-purple-900/20 px-4 py-3 rounded-full border-2 border-purple-500/50 hover:border-purple-400 hover:bg-purple-600/30 duration-300",style:{width:v?"100px":"56px"},children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-h-[44px]",children:[v&&s.jsx("span",{className:"text-xs text-purple-300 font-light whitespace-nowrap",children:j}),s.jsx("svg",{className:`w-5 h-5 text-purple-400 transition-transform duration-300 ${o==="up"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})})})]}),s.jsxs("main",{className:"pt-20",children:[s.jsx("div",{id:"hero",className:"h-screen overflow-hidden",children:s.jsx(e3,{})}),s.jsx(t3,{}),s.jsx(r3,{onAddToCart:y}),s.jsx(n3,{}),s.jsx(s3,{}),s.jsx("div",{id:"live-studio",children:s.jsx(i3,{})}),s.jsx(a3,{})]}),s.jsx(o3,{})]})}const u3=()=>{const[t,e]=w.useState(""),[r,n]=w.useState(""),[i,a]=w.useState(""),[o,l]=w.useState(!1),{signIn:c}=ke(),d=Cr(),h=async m=>{m.preventDefault(),a(""),l(!0);try{const p=await c(t,r);p.role==="admin"?d("/admin/dashboard"):p.role==="artist"?d("/artist/dashboard"):d("/customer/dashboard")}catch(p){a(p.message||"Failed to sign in")}finally{l(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center p-4",children:s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl p-8 border border-purple-500/20",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-400",children:"Sign in to your account"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[i&&s.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-3 rounded-lg",children:i}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",type:"email",value:t,onChange:m=>e(m.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"your@email.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),s.jsx("input",{id:"password",type:"password",value:r,onChange:m=>n(m.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),s.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:o?"Signing in...":"Sign In"})]}),s.jsxs("div",{className:"mt-6 text-center space-y-2",children:[s.jsxs("p",{className:"text-sm text-gray-400",children:["Don't have an account?"," ",s.jsx(Z,{to:"/register",className:"text-purple-400 hover:text-purple-300",children:"Create one"})]}),s.jsx("p",{className:"text-sm text-gray-400",children:s.jsx(Z,{to:"/",className:"text-purple-400 hover:text-purple-300",children:"Back to home"})})]})]})})})},d3=()=>{const[t,e]=w.useState(""),[r,n]=w.useState(""),[i,a]=w.useState(""),[o,l]=w.useState(""),[c,d]=w.useState(""),[h,m]=w.useState(!1),{signUp:p}=ke(),y=Cr(),S=async b=>{if(b.preventDefault(),d(""),r!==i){d("Passwords do not match");return}if(r.length<6){d("Password must be at least 6 characters");return}m(!0);try{const N=await p(t,r,o);y("/customer/dashboard")}catch(N){d(N.message||"Failed to create account")}finally{m(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 flex items-center justify-center p-4",children:s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-2xl p-8 border border-purple-500/20",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Create Account"}),s.jsx("p",{className:"text-gray-400",children:"Join Jonna Rincon's beat store"})]}),s.jsxs("form",{onSubmit:S,className:"space-y-6",children:[c&&s.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-3 rounded-lg",children:c}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),s.jsx("input",{id:"displayName",type:"text",value:o,onChange:b=>l(b.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Your name"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",type:"email",value:t,onChange:b=>e(b.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"your@email.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),s.jsx("input",{id:"password",type:"password",value:r,onChange:b=>n(b.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),s.jsx("input",{id:"confirmPassword",type:"password",value:i,onChange:b=>a(b.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:""})]}),s.jsx("button",{type:"submit",disabled:h,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:h?"Creating Account...":"Create Account"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-400",children:["Already have an account?"," ",s.jsx(Z,{to:"/login",className:"text-purple-400 hover:text-purple-300",children:"Sign in"})]})})]})})})},h3=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(!0),[i,a]=w.useState({sortBy:"newest"});w.useEffect(()=>{o()},[i]);const o=async()=>{try{n(!0);let d=await kn.getPublishedBeats();if(i.genre&&(d=d.filter(h=>h.genre===i.genre)),i.search){const h=i.search.toLowerCase();d=d.filter(m=>m.title.toLowerCase().includes(h)||m.artist.toLowerCase().includes(h)||m.tags.some(p=>p.toLowerCase().includes(h)))}d.sort((h,m)=>{var p,y,S,b;switch(i.sortBy){case"newest":return m.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return m.plays-h.plays;case"price_low":return(((p=h.licenses.basic)==null?void 0:p.price)||0)-(((y=m.licenses.basic)==null?void 0:y.price)||0);case"price_high":return(((S=m.licenses.basic)==null?void 0:S.price)||0)-(((b=h.licenses.basic)==null?void 0:b.price)||0);default:return 0}}),e(d)}catch(c){console.error("Failed to load beats:",c)}finally{n(!1)}},l=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return s.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[s.jsx(d_,{}),s.jsxs("div",{className:"container mx-auto px-4 pt-28 pb-12",children:[s.jsxs("div",{className:"mb-12 text-center",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Premium Beats"}),s.jsx("p",{className:"text-xl text-gray-400",children:"Explore high-quality beats by Jonna Rincon"})]}),s.jsx("div",{className:"mb-8 bg-gray-800 rounded-lg p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search beats...",value:i.search||"",onChange:c=>a({...i,search:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500"}),s.jsxs("select",{value:i.genre||"",onChange:c=>a({...i,genre:c.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[s.jsx("option",{value:"",children:"All Genres"}),l.map(c=>s.jsx("option",{value:c,children:c},c))]}),s.jsxs("select",{value:i.sortBy,onChange:c=>a({...i,sortBy:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[s.jsx("option",{value:"newest",children:"Newest First"}),s.jsx("option",{value:"popular",children:"Most Popular"}),s.jsx("option",{value:"price_low",children:"Price: Low to High"}),s.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(i.genre||i.search)&&s.jsx("button",{onClick:()=>a({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 transition",children:"Clear Filters"})]})}),r?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-xl",children:"Loading beats..."})}):t.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("p",{className:"text-xl mb-2",children:"No beats found"}),s.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>{var d;return s.jsxs(Z,{to:`/shop/beats/${c.id}`,className:"bg-gray-800 rounded-lg overflow-hidden hover:transform hover:scale-105 transition-all duration-200",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:c.artworkUrl||"/placeholder-beat.png",alt:c.title,className:"w-full h-48 object-cover"}),c.featured&&s.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),c.trending&&s.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:c.title}),s.jsx("div",{className:"text-sm text-gray-400 mb-3",children:c.artist}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[s.jsxs("span",{children:[c.bpm," BPM"]}),s.jsx("span",{children:""}),s.jsx("span",{children:c.key}),s.jsx("span",{children:""}),s.jsx("span",{children:c.genre})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[s.jsxs("span",{children:[" ",c.plays.toLocaleString()]}),s.jsxs("span",{children:[" ",c.likes.toLocaleString()]}),s.jsxs("span",{children:[" ",c.downloads.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),s.jsxs("div",{className:"font-bold text-lg",children:["",((d=c.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),s.jsx("div",{className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded transition",children:"View Beat"})]})]})]},c.id)})}),!r&&t.length>0&&s.jsxs("div",{className:"mt-8 text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})]})},Mt=({children:t})=>{var h,m;const[e,r]=w.useState(!0),{user:n,signOut:i}=ke(),a=gr(),o=Cr(),l=async()=>{await i(),o("/")},c=[{name:"Dashboard",href:"/customer/dashboard",icon:md},{name:"Shop Beats",href:"/customer/shop",icon:Le},{name:"My Orders",href:"/customer/orders",icon:ur},{name:"Downloads",href:"/customer/downloads",icon:St},{name:"Free Downloads",href:"/customer/free-downloads",icon:St},{name:"Collaborations",href:"/customer/collaborations",icon:pr},{name:"Become Artist",href:"/customer/request-artist-role",icon:ng},{name:"Chat",href:"/customer/chat",icon:Ke},{name:"Profile",href:"/customer/profile",icon:xn},{name:"Settings",href:"/customer/settings",icon:tg}],d=p=>a.pathname===p;return s.jsxs("div",{className:"min-h-screen bg-gray-900",children:[s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Customer"})]}),s.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:s.jsx(Pt,{size:20})})]}),s.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=n==null?void 0:n.displayName)==null?void 0:h[0])||((m=n==null?void 0:n.email)==null?void 0:m[0])||"C"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(n==null?void 0:n.displayName)||"Customer"}),s.jsx("p",{className:"text-xs text-gray-400 truncate",children:n==null?void 0:n.email})]})]})}),s.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:c.map(p=>{const y=p.icon;return s.jsxs(Z,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[s.jsx(y,{size:18,className:"flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),s.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:s.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[s.jsx(pa,{size:18,className:"flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),s.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[s.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[s.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:s.jsx(zs,{size:24})}),s.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:s.jsx("div",{className:"text-right hidden sm:block",children:s.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),s.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},m3=()=>{const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState(!0),[a,o]=w.useState({totalOrders:0,totalSpent:0,totalDownloads:0});w.useEffect(()=>{if(!t)return;(async()=>{try{const d=await Xr.getOrdersByCustomer(t.email),h=d.slice(0,5);r(h);const m=d.filter(y=>y.status==="completed").reduce((y,S)=>y+S.total,0),p=d.filter(y=>y.status==="completed").reduce((y,S)=>y+S.items.length,0);o({totalOrders:d.length,totalSpent:m,totalDownloads:p})}catch(d){console.error("Failed to load dashboard data:",d)}finally{i(!1)}})()},[t]);const l=[{name:"Total Orders",value:a.totalOrders,icon:po,change:a.totalOrders>0?`${a.totalOrders} orders placed`:"No orders yet",changeType:"neutral"},{name:"Total Spent",value:`${a.totalSpent.toFixed(2)}`,icon:ta,change:a.totalSpent>0?"On beats & licenses":"Start shopping",changeType:"neutral"},{name:"Total Downloads",value:a.totalDownloads,icon:St,change:`${a.totalDownloads} beats owned`,changeType:"positive"}];return n?s.jsx(Mt,{children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-xl text-white",children:"Loading..."})})}):s.jsx(Mt,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Dashboard"}),s.jsxs("p",{className:"text-gray-400 mt-2",children:["Welcome back, ",(t==null?void 0:t.displayName)||"Customer","!"]})]}),s.jsxs(Z,{to:"/",className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 px-4 py-2 rounded-lg text-white font-medium transition-all flex items-center gap-2",children:[s.jsx(Jf,{size:18}),"Back to Home"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:l.map(c=>{const d=c.icon;return s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-blue-500/50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:c.name}),s.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:c.value}),s.jsx("p",{className:"text-sm mt-2 text-gray-400",children:c.change})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 rounded-xl",children:s.jsx(d,{size:32,className:"text-white"})})]})},c.name)})}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Recent Orders"}),s.jsx(Z,{to:"/customer/orders",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View All "})]}),e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("p",{className:"text-xl text-gray-300 mb-2",children:"No orders yet"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Start shopping to see your orders here"}),s.jsx(Z,{to:"/shop/beats",className:"inline-block bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-3 rounded-lg text-white font-medium hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Browse Beats"})]}):s.jsx("div",{className:"space-y-4",children:e.map(c=>{var d,h,m;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium",children:c.orderNumber}),s.jsxs("p",{className:"text-sm text-gray-400",children:[c.items.length," item(s)  ",((m=(h=(d=c.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:m.toLocaleDateString())||"N/A"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-white font-semibold",children:["",c.total.toFixed(2)]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${c.status==="completed"?"bg-green-500/20 text-green-400":c.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:c.status})]})]},c.id)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(Z,{to:"/shop/beats",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[s.jsx(po,{size:32,className:"text-white mb-3"}),s.jsx("h3",{className:"text-white font-semibold",children:"Browse Beats"}),s.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Find your next hit"})]}),s.jsxs(Z,{to:"/customer/orders",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-6 rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[s.jsx(po,{size:32,className:"text-white mb-3"}),s.jsx("h3",{className:"text-white font-semibold",children:"My Orders"}),s.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"View order history"})]}),s.jsxs(Z,{to:"/customer/downloads",className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[s.jsx(St,{size:32,className:"text-white mb-3"}),s.jsx("h3",{className:"text-white font-semibold",children:"Downloads"}),s.jsx("p",{className:"text-green-100 text-sm mt-1",children:"Access your beats"})]}),s.jsxs(Z,{to:"/customer/profile",className:"bg-gradient-to-r from-orange-600 to-red-600 p-6 rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[s.jsx(fl,{size:32,className:"text-white mb-3"}),s.jsx("h3",{className:"text-white font-semibold",children:"Profile"}),s.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Manage account"})]})]})]})})},p3=()=>{const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState(!0),[a,o]=w.useState("all");w.useEffect(()=>{if(!t)return;(async()=>{try{const d=await Xr.getOrdersByCustomer(t.email);r(d)}catch(d){console.error("Failed to load orders:",d)}finally{i(!1)}})()},[t]);const l=e.filter(c=>a==="all"?!0:c.status===a);return n?s.jsx(Mt,{children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-xl text-white",children:"Loading orders..."})})}):s.jsx(Mt,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Orders"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"View and manage your order history"})]}),s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:s.jsx("div",{className:"flex gap-4",children:["all","completed","processing","pending"].map(c=>s.jsxs("button",{onClick:()=>o(c),className:`px-4 py-2 rounded-lg capitalize transition ${a===c?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[c,s.jsxs("span",{className:"ml-2 text-xs",children:["(",c==="all"?e.length:e.filter(d=>d.status===c).length,")"]})]},c))})}),l.length===0?s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(l_,{size:64,className:"mx-auto mb-4 text-gray-600"}),s.jsx("p",{className:"text-xl text-white mb-2",children:"No orders found"}),s.jsx("p",{className:"text-gray-400 mb-6",children:a==="all"?"You haven't placed any orders yet":`No ${a} orders`}),s.jsx(Z,{to:"/shop/beats",className:"inline-block bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-3 rounded-lg text-white font-medium hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Browse Beats"})]}):s.jsx("div",{className:"space-y-4",children:l.map(c=>{var d,h,m;return s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-700/50 p-4 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-lg text-white mb-1",children:c.orderNumber}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Placed on ",((m=(h=(d=c.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:m.toLocaleDateString())||"N/A"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2 ${c.status==="completed"?"bg-green-500/20 text-green-400":c.status==="processing"?"bg-blue-500/20 text-blue-400":c.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:c.status}),s.jsxs("div",{className:"font-bold text-white",children:["",c.total.toFixed(2)]})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"space-y-3",children:c.items.map((p,y)=>{var S;return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:p.artworkUrl||"/placeholder-beat.png",alt:p.beatTitle,className:"w-16 h-16 rounded object-cover"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-white",children:p.beatTitle}),s.jsxs("div",{className:"text-sm text-gray-400 capitalize",children:[p.licenseType," License"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-white",children:["",p.price.toFixed(2)]}),c.status==="completed"&&((S=c.downloadLinks)==null?void 0:S[p.beatId])&&s.jsxs("a",{href:c.downloadLinks[p.beatId],className:"inline-flex items-center gap-1 text-sm text-blue-400 hover:text-blue-300 mt-1",download:!0,children:[s.jsx(St,{size:14}),"Download"]})]})]},y)})}),c.status==="completed"&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700 flex gap-4",children:s.jsx(Z,{to:"/customer/downloads",className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"View All Downloads "})})]})]},c.id)})})]})})},f3=()=>{const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState([]),[a,o]=w.useState(!0),[l,c]=w.useState("all");return w.useEffect(()=>{if(!t)return;(async()=>{try{const h=await Xr.getOrdersByCustomer(t.email);i(h);const m=[];h.filter(p=>p.status==="completed").forEach(p=>{p.items.forEach(y=>{var N,g,v,j,P,M;const S=(N=p.downloadLinks)==null?void 0:N[y.beatId],b=(g=p.licensePDFs)==null?void 0:g[y.beatId];S&&m.push({...y,orderId:p.id,orderNumber:p.orderNumber,downloadUrl:S,licenseUrl:b,purchasedAt:((j=(v=p.completedAt)==null?void 0:v.toDate)==null?void 0:j.call(v))||((M=(P=p.createdAt)==null?void 0:P.toDate)==null?void 0:M.call(P))||new Date})})}),m.sort((p,y)=>y.purchasedAt.getTime()-p.purchasedAt.getTime()),r(m)}catch(h){console.error("Failed to load downloads:",h)}finally{o(!1)}})()},[t]),a?s.jsx(Mt,{children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-xl text-white",children:"Loading downloads..."})})}):s.jsx(Mt,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Downloads"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Access all your purchased beats and licenses"})]}),s.jsxs("div",{className:"flex gap-2 border-b border-gray-700 mb-6",children:[s.jsx("button",{onClick:()=>c("all"),className:`px-4 py-2 font-medium transition-all ${l==="all"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"All Downloads"}),s.jsx("button",{onClick:()=>c("orders"),className:`px-4 py-2 font-medium transition-all ${l==="orders"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"My Orders"}),s.jsx("button",{onClick:()=>c("completed"),className:`px-4 py-2 font-medium transition-all ${l==="completed"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:"Completed"})]}),l==="all"&&s.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-8",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold mb-1",children:"Download Tips"}),s.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[s.jsx("li",{children:" All purchases include unlimited re-downloads"}),s.jsx("li",{children:" Download your license agreement for legal protection"}),s.jsx("li",{children:" Files are available in high-quality formats"})]})]})]})}),l==="orders"?n.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("p",{className:"text-xl mb-2",children:"No orders yet"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Start shopping for beats"}),s.jsx(Z,{to:"/customer/shop",className:"inline-block bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg transition",children:"Browse Beats"})]}):s.jsx("div",{className:"space-y-4",children:n.map(d=>{var h,m,p;return s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-white",children:["Order #",d.orderNumber]}),s.jsx("p",{className:"text-sm text-gray-400",children:((p=(m=(h=d.createdAt)==null?void 0:h.toDate)==null?void 0:m.call(h))==null?void 0:p.toLocaleDateString())||"N/A"})]}),s.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium ${d.status==="completed"?"bg-green-600/20 text-green-400":d.status==="pending"?"bg-yellow-600/20 text-yellow-400":"bg-blue-600/20 text-blue-400"}`,children:d.status})]}),s.jsx("div",{className:"space-y-2",children:d.items.map((y,S)=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-300",children:[y.beatTitle," (",y.licenseType,")"]}),s.jsxs("span",{className:"text-white font-medium",children:["",y.price.toFixed(2)]})]},S))}),s.jsx("div",{className:"border-t border-gray-700 mt-4 pt-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Total"}),s.jsxs("span",{className:"text-xl font-bold text-white",children:["",d.totalAmount.toFixed(2)]})]})})]},d.id)})}):e.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("p",{className:"text-xl mb-2",children:"No downloads available"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Purchase beats to access downloads"}),s.jsx(Z,{to:"/customer/shop",className:"inline-block bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg transition",children:"Browse Beats"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((d,h)=>s.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-750 transition",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:d.artworkUrl||"/placeholder-beat.png",alt:d.beatTitle,className:"w-full h-48 object-cover"}),s.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-xs capitalize",children:[d.licenseType," License"]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-lg mb-2",children:d.beatTitle}),s.jsxs("div",{className:"text-sm text-gray-400 mb-4",children:["Purchased: ",d.purchasedAt.toLocaleDateString()]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("a",{href:d.downloadUrl,className:"block w-full bg-purple-600 hover:bg-purple-700 text-center py-2 rounded transition",download:!0,children:" Download Beat"}),d.licenseUrl&&s.jsx("a",{href:d.licenseUrl,className:"block w-full bg-gray-700 hover:bg-gray-600 text-center py-2 rounded transition text-sm",download:!0,children:" Download License"})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:s.jsxs(Z,{to:"/customer/orders",className:"text-xs text-gray-400 hover:text-gray-300",children:["Order: ",d.orderNumber," "]})})]})]},h))}),l!=="orders"&&e.length>0&&s.jsxs("div",{className:"mt-12 bg-gray-800 rounded-lg p-6 text-center",children:[s.jsx("h3",{className:"font-bold mb-2",children:"Need Help?"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Having trouble downloading? Contact support for assistance."}),s.jsx("a",{href:"mailto:support@jonnarincon.com",className:"text-purple-400 hover:text-purple-300",children:"support@jonnarincon.com"})]})]})})},g3=()=>{const[t,e]=w.useState("all"),r=[{id:"1",title:"Summer Vibes Remix",category:"remix",description:"Tropical house remix with uplifting melodies",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"8.5 MB",releaseDate:"2024-01-15"},{id:"2",title:"Free Type Beat",category:"beat",description:"Trap beat with hard 808s - free for non-profit use",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"12.3 MB",releaseDate:"2024-02-01"},{id:"3",title:"Neon Dreams Wallpaper",category:"wallpaper",description:"iPhone wallpaper with neon aesthetic",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"2.1 MB",releaseDate:"2024-01-20"}],n=t==="all"?r:r.filter(o=>o.category===t),i=o=>{switch(o){case"remix":return s.jsx(Le,{size:20});case"beat":return s.jsx(vu,{size:20});case"wallpaper":return s.jsx(ra,{size:20});default:return s.jsx(St,{size:20})}},a=o=>{switch(o){case"remix":return"bg-purple-600/20 text-purple-400";case"beat":return"bg-orange-600/20 text-orange-400";case"wallpaper":return"bg-blue-600/20 text-blue-400";default:return"bg-gray-600/20 text-gray-400"}};return s.jsx(Mt,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Free Downloads"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Get free remixes, beats, and wallpapers"})]}),s.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-green-200",children:[" ",s.jsx("strong",{children:"100% Free!"})," Download any of these items for personal use. For commercial use of beats and remixes, please contact us for licensing."]})}),s.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[s.jsx("button",{onClick:()=>e("all"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 ${t==="all"?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:"All Downloads"}),s.jsxs("button",{onClick:()=>e("remix"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="remix"?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[s.jsx(Le,{size:16}),"Remixes"]}),s.jsxs("button",{onClick:()=>e("beat"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="beat"?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[s.jsx(vu,{size:16}),"Beats"]}),s.jsxs("button",{onClick:()=>e("wallpaper"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="wallpaper"?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[s.jsx(ra,{size:16}),"Wallpapers"]})]}),n.length===0?s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(St,{size:64,className:"mx-auto mb-4 text-gray-600"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No downloads available"}),s.jsx("p",{className:"text-gray-400",children:"Check back soon for new free content"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(o=>s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-blue-500 transition-all",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:o.imageUrl,alt:o.title,className:"w-full h-48 object-cover"}),s.jsxs("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-lg text-xs font-medium flex items-center gap-1 ${a(o.category)}`,children:[i(o.category),s.jsx("span",{className:"capitalize",children:o.category})]})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:o.title}),s.jsx("p",{className:"text-sm text-gray-400",children:o.description})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:o.fileSize}),s.jsx("span",{children:new Date(o.releaseDate).toLocaleDateString()})]}),s.jsxs("a",{href:o.downloadUrl,download:!0,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-3 rounded-lg text-white font-semibold transition-all flex items-center justify-center gap-2",children:[s.jsx(St,{size:18}),"Download Free"]})]})]},o.id))})]})})},x3=()=>{var D,T;const{user:t,signOut:e}=ke(),[r,n]=w.useState(!1),[i,a]=w.useState((t==null?void 0:t.displayName)||""),[o,l]=w.useState(""),[c,d]=w.useState(""),[h,m]=w.useState(!1),[p,y]=w.useState(null),[S,b]=w.useState(!1),[N,g]=w.useState({artistName:"",region:"",city:"",roles:{producer:!1,beatmaker:!1,engineer:!1,rapper:!1,vocalist:!1,songwriter:!1},instagram:"",spotify:""}),v=async _=>{_.preventDefault(),m(!0),y(null);try{await Ne.updateUserProfile({displayName:i}),y({type:"success",text:"Profile updated successfully!"}),n(!1)}catch(I){y({type:"error",text:I.message||"Failed to update profile"})}finally{m(!1)}},j=async _=>{if(_.preventDefault(),m(!0),y(null),o!==c){y({type:"error",text:"Passwords do not match"}),m(!1);return}if(o.length<6){y({type:"error",text:"Password must be at least 6 characters"}),m(!1);return}try{await Ne.updateUserPassword(o),y({type:"success",text:"Password updated successfully!"}),l(""),d("")}catch(I){y({type:"error",text:I.message||"Failed to update password"})}finally{m(!1)}},P=async()=>{try{await e()}catch(_){console.error("Sign out error:",_)}},M=async _=>{_.preventDefault(),m(!0),y(null);try{if(!Object.values(N.roles).some(R=>R)){y({type:"error",text:"Please select at least one artist role"}),m(!1);return}await ct(ee(z,"artistRoleRequests"),{userId:t==null?void 0:t.uid,userEmail:t==null?void 0:t.email,artistName:N.artistName,region:N.region,city:N.city,roles:Object.entries(N.roles).filter(([R,k])=>k).map(([R,k])=>R),instagram:N.instagram,spotify:N.spotify,status:"pending",createdAt:ue()}),y({type:"success",text:"Artist role request submitted successfully! We will review your request soon."}),b(!1),g({artistName:"",region:"",city:"",roles:{producer:!1,beatmaker:!1,engineer:!1,rapper:!1,vocalist:!1,songwriter:!1},instagram:"",spotify:""})}catch(I){y({type:"error",text:I.message||"Failed to submit artist role request"})}finally{m(!1)}};return s.jsx(Mt,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 text-center",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4",children:((T=(D=t==null?void 0:t.displayName)==null?void 0:D.charAt(0))==null?void 0:T.toUpperCase())||s.jsx(xn,{size:32,className:"text-white"})}),s.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:(t==null?void 0:t.displayName)||"Customer"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:t==null?void 0:t.email}),s.jsx("div",{className:"inline-block px-3 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs font-semibold border border-blue-700",children:"Customer Account"})]})}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[p&&s.jsx("div",{className:`p-4 rounded-lg border ${p.type==="success"?"bg-green-900/30 border-green-700 text-green-300":"bg-red-900/30 border-red-700 text-red-300"}`,children:p.text}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile Information"}),!r&&s.jsx("button",{onClick:()=>n(!0),className:"text-blue-400 hover:text-blue-300 text-sm font-medium",children:"Edit"})]}),r?s.jsxs("form",{onSubmit:v,children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[s.jsx(xn,{size:16,className:"inline mr-1"})," Display Name"]}),s.jsx("input",{type:"text",value:i,onChange:_=>a(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[s.jsx(Xf,{size:16,className:"inline mr-1"})," Email"]}),s.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-gray-400 opacity-50 cursor-not-allowed",disabled:!0}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[s.jsx(Qr,{size:16})," ",h?"Saving...":"Save Changes"]}),s.jsx("button",{type:"button",onClick:()=>{n(!1),a((t==null?void 0:t.displayName)||"")},className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Cancel"})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Display Name"}),s.jsx("div",{className:"font-semibold text-white",children:(t==null?void 0:t.displayName)||"Not set"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Email"}),s.jsx("div",{className:"font-semibold text-white",children:t==null?void 0:t.email})]})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Change Password"}),s.jsxs("form",{onSubmit:j,children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[s.jsx(xs,{size:16,className:"inline mr-1"})," New Password"]}),s.jsx("input",{type:"password",value:o,onChange:_=>l(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"Enter new password",minLength:6})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[s.jsx(xs,{size:16,className:"inline mr-1"})," Confirm New Password"]}),s.jsx("input",{type:"password",value:c,onChange:_=>d(_.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",placeholder:"Confirm new password",minLength:6})]}),s.jsxs("button",{type:"submit",disabled:h||!o||!c,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[s.jsx(Qr,{size:16})," ",h?"Updating...":"Update Password"]})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(bu,{size:24,className:"text-purple-400"}),"Request Artist Role"]}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Apply to become an artist on the platform"})]}),!S&&s.jsx("button",{onClick:()=>b(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-4 py-2 rounded-lg text-white font-medium transition-all text-sm",children:"Apply Now"})]}),S?s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Artist Name *"}),s.jsx("input",{type:"text",value:N.artistName,onChange:_=>g({...N,artistName:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"Your stage name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Region *"}),s.jsx("input",{type:"text",value:N.region,onChange:_=>g({...N,region:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., North Holland",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"City *"}),s.jsx("input",{type:"text",value:N.city,onChange:_=>g({...N,city:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"e.g., Amsterdam",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[s.jsx(gn,{size:16,className:"inline mr-1"})," Instagram"]}),s.jsx("input",{type:"text",value:N.instagram,onChange:_=>g({...N,instagram:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"@username or full URL"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[s.jsx(Le,{size:16,className:"inline mr-1"})," Spotify Link"]}),s.jsx("input",{type:"url",value:N.spotify,onChange:_=>g({...N,spotify:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",placeholder:"https://open.spotify.com/artist/..."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-3",children:"Artist Roles * (Select all that apply)"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[{key:"producer",label:"Producer"},{key:"beatmaker",label:"Beatmaker"},{key:"engineer",label:"Engineer"},{key:"rapper",label:"Rapper"},{key:"vocalist",label:"Vocalist/Singer"},{key:"songwriter",label:"Songwriter"}].map(_=>s.jsxs("label",{className:"flex items-center space-x-2 p-3 bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:N.roles[_.key],onChange:I=>g({...N,roles:{...N.roles,[_.key]:I.target.checked}}),className:"w-4 h-4 rounded border-gray-600 text-purple-600 focus:ring-purple-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:_.label})]},_.key))})]}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsxs("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[s.jsx(Qr,{size:16})," ",h?"Submitting...":"Submit Request"]}),s.jsx("button",{type:"button",onClick:()=>b(!1),className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Cancel"})]})]}):s.jsxs("div",{className:"text-center py-8 text-gray-400",children:[s.jsx(bu,{size:48,className:"mx-auto mb-4 text-purple-400 opacity-50"}),s.jsx("p",{children:"Become an artist and start collaborating with others!"}),s.jsx("p",{className:"text-sm mt-2",children:'Click "Apply Now" to submit your artist application.'})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Actions"}),s.jsxs("button",{onClick:P,className:"w-full bg-red-600 hover:bg-red-700 py-3 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:[s.jsx(pa,{size:20})," Sign Out"]})]})]})]})]})})},y3=()=>{var g;const{user:t}=ke(),[e,r]=w.useState((t==null?void 0:t.displayName)||""),[n,i]=w.useState(!1),[a,o]=w.useState(null),[l,c]=w.useState(""),[d,h]=w.useState(""),[m,p]=w.useState(!1),[y,S]=w.useState(null),b=async v=>{if(v.preventDefault(),!(!t||!e.trim())){i(!0),o(null);try{await nu(t,{displayName:e.trim()}),o({type:"success",text:" Username updated successfully!"}),setTimeout(()=>{window.location.reload()},1e3)}catch(j){console.error("Failed to update profile:",j),o({type:"error",text:" Failed to update username. Please try again."})}finally{i(!1)}}},N=async v=>{if(v.preventDefault(),!!t){if(l.length<6){S({type:"error",text:" Password must be at least 6 characters long."});return}if(l!==d){S({type:"error",text:" Passwords do not match."});return}p(!0),S(null);try{await af(t,l),S({type:"success",text:" Password updated successfully!"}),c(""),h("")}catch(j){console.error("Failed to update password:",j),j.code==="auth/requires-recent-login"?S({type:"error",text:" For security reasons, please sign out and sign in again before changing your password."}):S({type:"error",text:" Failed to update password. Please try again."})}finally{p(!1)}}};return s.jsx(Mt,{children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsx("div",{className:"pb-6 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center text-white font-semibold text-2xl",children:(e==null?void 0:e[0])||((g=t==null?void 0:t.email)==null?void 0:g[0])||"U"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-semibold text-lg",children:(t==null?void 0:t.displayName)||"User"}),s.jsx("p",{className:"text-gray-400 text-sm",children:t==null?void 0:t.email}),s.jsx("span",{className:"px-2 py-0.5 bg-blue-600 text-blue-100 rounded text-xs mt-1 inline-block",children:"Customer"})]})]})}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Display Name ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:e,onChange:v=>r(v.target.value),placeholder:"Enter your display name",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This name will be displayed across the platform"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",disabled:!0,className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-500 cursor-not-allowed"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),a&&s.jsx("div",{className:`p-4 rounded-lg ${a.type==="success"?"bg-green-900/30 border border-green-700 text-green-300":"bg-red-900/30 border border-red-700 text-red-300"}`,children:a.text}),s.jsx("button",{type:"submit",disabled:n||!e.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?s.jsx(s.Fragment,{children:"Saving..."}):s.jsxs(s.Fragment,{children:[s.jsx(Qr,{size:20}),"Save Changes"]})})]})}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(xs,{size:20}),"Change Password"]}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["New Password ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"password",required:!0,value:l,onChange:v=>c(v.target.value),placeholder:"Enter new password (min. 6 characters)",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Confirm Password ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"password",required:!0,value:d,onChange:v=>h(v.target.value),placeholder:"Confirm new password",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"})]}),y&&s.jsx("div",{className:`p-4 rounded-lg ${y.type==="success"?"bg-green-900/30 border border-green-700 text-green-300":"bg-red-900/30 border border-red-700 text-red-300"}`,children:y.text}),s.jsx("button",{type:"submit",disabled:m||!l||!d,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?s.jsx(s.Fragment,{children:"Changing Password..."}):s.jsxs(s.Fragment,{children:[s.jsx(xs,{size:20}),"Change Password"]})})]})]}),s.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-blue-200",children:[" ",s.jsx("strong",{children:"Note:"})," Changing your display name will update how you appear across all messages, orders, and interactions on the platform."]})})]})})},v3=()=>{const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState(!0),[a,o]=w.useState(null),[l,c]=w.useState({}),[d,h]=w.useState("");w.useEffect(()=>{if(!t)return;const p=ee(z,"collaborations"),y=je(p,ae("clientEmail","==",t.email),Te("createdAt","desc")),S=gt(y,b=>{const N=[];b.forEach(g=>{N.push({id:g.id,...g.data()})}),r(N),i(!1)});return()=>S()},[t]),w.useEffect(()=>{if(!a)return;const p=ee(z,"collaborationMessages"),y=je(p,ae("collaborationId","==",a),Te("createdAt","asc")),S=gt(y,b=>{const N=[];b.forEach(g=>{N.push({id:g.id,...g.data()})}),c(g=>({...g,[a]:N}))});return()=>S()},[a]);const m=async p=>{if(!(!d.trim()||!t))try{await ct(ee(z,"collaborationMessages"),{collaborationId:p,senderId:t.uid,senderName:t.displayName||"Customer",senderEmail:t.email,message:d.trim(),createdAt:ue()}),h("")}catch(y){console.error("Failed to send message:",y)}};return n?s.jsx(Mt,{children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-xl text-white",children:"Loading collaborations..."})})}):s.jsx(Mt,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Collaborations"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Track your collaborations with Jonna Rincon"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:e.length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Active"}),s.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:e.filter(p=>["agreed","contract_sent","signed","in_progress"].includes(p.status)).length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:e.filter(p=>p.status==="completed").length})]})]}),e.length===0?s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(pr,{size:64,className:"mx-auto mb-4 text-gray-600"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No collaborations yet"}),s.jsx("p",{className:"text-gray-400",children:"When you start a collaboration, it will appear here"})]}):s.jsx("div",{className:"space-y-4",children:e.map(p=>{var y,S,b,N;return s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[s.jsx("div",{onClick:()=>o(a===p.id?null:p.id),className:"p-6 cursor-pointer hover:bg-gray-750 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:p.title}),s.jsx("span",{className:`px-2 py-1 rounded text-xs ${p.status==="completed"?"bg-green-600/20 text-green-400":p.status==="in_progress"?"bg-cyan-500/20 text-cyan-400":p.status==="signed"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:p.status.replace("_"," ")})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Type:"}),s.jsx("p",{className:"text-white font-medium capitalize",children:p.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Budget:"}),s.jsx("p",{className:"text-white font-medium",children:p.budget?`${p.budget.toFixed(2)}`:"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Payment:"}),s.jsxs("p",{className:`font-medium ${p.paymentStatus==="paid"?"text-green-400":p.paymentStatus==="partial"?"text-yellow-400":"text-gray-400"}`,children:["",p.paidAmount.toFixed(2)," (",p.paymentStatus,")"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Started:"}),s.jsx("p",{className:"text-white font-medium",children:((b=(S=(y=p.startDate)==null?void 0:y.toDate)==null?void 0:S.call(y))==null?void 0:b.toLocaleDateString())||"TBD"})]})]})]}),s.jsx("button",{className:"text-gray-400 hover:text-white transition ml-4",children:a===p.id?s.jsx(hd,{size:24}):s.jsx(dd,{size:24})})]})}),a===p.id&&s.jsxs("div",{className:"border-t border-gray-700 p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-200",children:p.description})]}),s.jsxs("div",{className:"bg-gray-900 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-4",children:[s.jsx(Ke,{size:20,className:"text-blue-400"}),"Collaboration Chat"]}),s.jsx("div",{className:"bg-gray-800 rounded-lg p-4 max-h-80 overflow-y-auto space-y-3 mb-4",children:!l[p.id]||l[p.id].length===0?s.jsxs("div",{className:"text-center text-gray-400 py-8",children:[s.jsx(Ke,{size:48,className:"mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No messages yet. Start the conversation!"})]}):(N=l[p.id])==null?void 0:N.map(g=>{var v,j,P;return s.jsxs("div",{className:`p-3 rounded-lg ${g.senderId===(t==null?void 0:t.uid)?"bg-blue-900/30 ml-8":"bg-gray-700 mr-8"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:"font-semibold text-sm text-white",children:g.senderId===(t==null?void 0:t.uid)?"You":g.senderName}),s.jsx("span",{className:"text-xs text-gray-400",children:((P=(j=(v=g.createdAt)==null?void 0:v.toDate)==null?void 0:j.call(v))==null?void 0:P.toLocaleString())||"Just now"})]}),s.jsx("p",{className:"text-gray-300 text-sm",children:g.message})]},g.id)})}),s.jsxs("form",{onSubmit:g=>{g.preventDefault(),m(p.id)},className:"flex gap-2",children:[s.jsx("input",{type:"text",value:d,onChange:g=>h(g.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),s.jsxs("button",{type:"submit",disabled:!d.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(er,{size:18}),"Send"]})]})]})]})]},p.id)})})]})})},b3=()=>{const{user:t}=ke(),e=Cr(),[r,n]=w.useState(!1),[i,a]=w.useState({artistName:"",region:"",city:"",roles:[],instagram:"",spotify:"",additionalInfo:""}),o=["Producer","Beatmaker","Engineer","Rapper","Singer/Vocalist","Songwriter"],l=d=>{a(h=>({...h,roles:h.roles.includes(d)?h.roles.filter(m=>m!==d):[...h.roles,d]}))},c=async d=>{if(d.preventDefault(),!!t){n(!0);try{await ct(ee(z,"artistRoleRequests"),{userId:t.uid,userEmail:t.email,userName:t.displayName||"Customer",artistName:i.artistName,region:i.region,city:i.city,roles:i.roles,instagram:i.instagram,spotify:i.spotify,additionalInfo:i.additionalInfo,status:"pending",createdAt:ue()}),alert(" Artist role request submitted! Admin will review it soon."),e("/customer/dashboard")}catch(h){console.error("Failed to submit artist role request:",h),alert(" Failed to submit request. Please try again.")}finally{n(!1)}}};return s.jsx(Mt,{children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4 rounded-full",children:s.jsx(Le,{size:48,className:"text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Request Artist Role"}),s.jsx("p",{className:"text-gray-400",children:"Apply to become an artist on the Jonna Rincon platform"})]}),s.jsxs("form",{onSubmit:c,className:"bg-gray-800 border border-gray-700 rounded-xl p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Artist Name ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:i.artistName,onChange:d=>a({...i,artistName:d.target.value}),placeholder:"Your stage/artist name",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Region ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:i.region,onChange:d=>a({...i,region:d.target.value}),placeholder:"e.g., North Holland",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["City ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:i.city,onChange:d=>a({...i,city:d.target.value}),placeholder:"e.g., Amsterdam",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["What do you do? ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:o.map(d=>s.jsx("button",{type:"button",onClick:()=>l(d),className:`p-3 rounded-lg border transition ${i.roles.includes(d)?"bg-purple-600 border-purple-500 text-white":"bg-gray-700 border-gray-600 text-gray-300 hover:border-purple-500"}`,children:d},d))}),i.roles.length===0&&s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Select at least one role"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Instagram"}),s.jsx("input",{type:"text",value:i.instagram,onChange:d=>a({...i,instagram:d.target.value}),placeholder:"@yourhandle or full URL",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Spotify Link"}),s.jsx("input",{type:"text",value:i.spotify,onChange:d=>a({...i,spotify:d.target.value}),placeholder:"Your Spotify profile URL",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Information"}),s.jsx("textarea",{rows:4,value:i.additionalInfo,onChange:d=>a({...i,additionalInfo:d.target.value}),placeholder:"Tell us more about your music, experience, or why you want to join...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),s.jsx("button",{type:"submit",disabled:r||i.roles.length===0,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-4 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?s.jsx(s.Fragment,{children:"Submitting..."}):s.jsxs(s.Fragment,{children:[s.jsx(er,{size:20}),"Submit Application"]})})]}),s.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-blue-200",children:[" ",s.jsx("strong",{children:"What happens next?"})," Your application will be reviewed by our admin team. We'll notify you via email once your request has been processed."]})})]})})},w3=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(!0),[i,a]=w.useState({sortBy:"newest"});w.useEffect(()=>{o()},[i]);const o=async()=>{try{n(!0);let d=await kn.getPublishedBeats();if(i.genre&&(d=d.filter(h=>h.genre===i.genre)),i.search){const h=i.search.toLowerCase();d=d.filter(m=>m.title.toLowerCase().includes(h)||m.artist.toLowerCase().includes(h)||m.tags.some(p=>p.toLowerCase().includes(h)))}d.sort((h,m)=>{var p,y,S,b;switch(i.sortBy){case"newest":return m.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return m.plays-h.plays;case"price_low":return(((p=h.licenses.basic)==null?void 0:p.price)||0)-(((y=m.licenses.basic)==null?void 0:y.price)||0);case"price_high":return(((S=m.licenses.basic)==null?void 0:S.price)||0)-(((b=h.licenses.basic)==null?void 0:b.price)||0);default:return 0}}),e(d)}catch(c){console.error("Failed to load beats:",c)}finally{n(!1)}},l=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return s.jsx(Mt,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Shop Premium Beats"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Browse and purchase high-quality beats by Jonna Rincon"})]}),s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search beats...",value:i.search||"",onChange:c=>a({...i,search:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),s.jsxs("select",{value:i.genre||"",onChange:c=>a({...i,genre:c.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Genres"}),l.map(c=>s.jsx("option",{value:c,children:c},c))]}),s.jsxs("select",{value:i.sortBy,onChange:c=>a({...i,sortBy:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500",children:[s.jsx("option",{value:"newest",children:"Newest First"}),s.jsx("option",{value:"popular",children:"Most Popular"}),s.jsx("option",{value:"price_low",children:"Price: Low to High"}),s.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(i.genre||i.search)&&s.jsx("button",{onClick:()=>a({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 text-white transition",children:"Clear Filters"})]})}),r?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-xl text-white",children:"Loading beats..."})}):t.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-800 border border-gray-700 rounded-xl",children:[s.jsx(Le,{size:64,className:"mx-auto mb-4 text-gray-600"}),s.jsx("p",{className:"text-xl text-white mb-2",children:"No beats found"}),s.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>{var d;return s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-blue-500/50 transition-all hover:transform hover:scale-105",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:c.artworkUrl||"/placeholder-beat.png",alt:c.title,className:"w-full h-48 object-cover"}),c.featured&&s.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),c.trending&&s.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"}),s.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:s.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 rounded-full p-4 transition-all hover:scale-110",children:s.jsx(Kr,{size:32,className:"text-white"})})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:c.title}),s.jsx("div",{className:"text-sm text-gray-400 mb-3",children:c.artist}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[s.jsxs("span",{children:[c.bpm," BPM"]}),s.jsx("span",{children:""}),s.jsx("span",{children:c.key}),s.jsx("span",{children:""}),s.jsx("span",{children:c.genre})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Kr,{size:12})," ",c.plays.toLocaleString()]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Yf,{size:12})," ",c.likes.toLocaleString()]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(St,{size:12})," ",c.downloads.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),s.jsxs("div",{className:"font-bold text-lg text-white",children:["",((d=c.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),s.jsx(Z,{to:`/customer/shop/${c.id}`,className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all",children:"View Beat"})]})]})]},c.id)})}),!r&&t.length>0&&s.jsxs("div",{className:"text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})})},N3=()=>{var p,y,S;const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState(null),[a,o]=w.useState([]),[l,c]=w.useState(""),[d,h]=w.useState([]);w.useEffect(()=>{if(!t)return;const b=ee(z,"supportMessages"),N=je(b,Kj(ae("senderId","==",t.uid),ae("recipientId","==",t.uid)),Te("createdAt","asc")),g=gt(N,v=>{const j=[];v.forEach(P=>{j.push({id:P.id,...P.data()})}),h(j)});return()=>g()},[t]),w.useEffect(()=>{if(!t||d.length===0)return;const b=new Map;d.forEach(g=>{const v=g.senderId===t.uid?g.recipientId:g.senderId;if(!v)return;const j=g.senderId===t.uid?"Support":g.senderName,P=g.senderId===t.uid?"":g.senderEmail;if(!b.has(v))b.set(v,{userId:v,userName:j,userEmail:P,lastMessage:g.message,lastMessageTime:g.createdAt,unreadCount:0});else{const M=b.get(v);g.createdAt.toMillis()>M.lastMessageTime.toMillis()&&(M.lastMessage=g.message,M.lastMessageTime=g.createdAt)}});const N=Array.from(b.values()).sort((g,v)=>v.lastMessageTime.toMillis()-g.lastMessageTime.toMillis());r(N),!n&&N.length>0&&i(N[0].userId)},[d,t,n]),w.useEffect(()=>{if(!n||!t){o([]);return}const b=d.filter(N=>N.senderId===t.uid&&N.recipientId===n||N.senderId===n&&N.recipientId===t.uid||N.senderId===n&&!N.recipientId||N.senderId===t.uid&&!N.recipientId);o(b)},[n,d,t]);const m=async b=>{if(b.preventDefault(),!(!l.trim()||!t||!n))try{await ct(ee(z,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Customer",senderEmail:t.email,senderRole:"customer",recipientId:n,message:l.trim(),createdAt:ue()}),c("")}catch(N){console.error("Failed to send message:",N)}};return e.length===0?s.jsx(Mt,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Get help from the Jonna Rincon team"})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(Ke,{size:64,className:"mx-auto mb-4 text-gray-600"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No conversations yet"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Start a conversation with our support team by sending a message below"}),s.jsx("form",{onSubmit:async b=>{if(b.preventDefault(),!(!l.trim()||!t))try{await ct(ee(z,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Customer",senderEmail:t.email,senderRole:"customer",message:l.trim(),createdAt:ue()}),c("")}catch(N){console.error("Failed to send message:",N)}},className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Type your message to support...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"}),s.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(er,{size:20}),"Send"]})]})})]})]})}):s.jsx(Mt,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Get help from the Jonna Rincon team"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-700",children:s.jsx("h2",{className:"font-semibold text-white",children:"Conversations"})}),s.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 350px)"},children:e.map(b=>{var N,g,v;return s.jsx("button",{onClick:()=>i(b.userId),className:`w-full p-4 text-left transition border-b border-gray-700 ${n===b.userId?"bg-blue-900/30 border-l-4 border-l-blue-500":"hover:bg-gray-750"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold flex-shrink-0",children:b.userName[0]||"S"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"font-semibold text-white text-sm truncate",children:b.userName}),s.jsx("span",{className:"text-xs text-gray-400",children:((v=(g=(N=b.lastMessageTime)==null?void 0:N.toDate)==null?void 0:g.call(N))==null?void 0:v.toLocaleDateString())||""})]}),s.jsx("p",{className:"text-xs text-gray-400 truncate",children:b.lastMessage})]})]})},b.userId)})})]}),s.jsxs("div",{className:"lg:col-span-2 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 300px)"},children:[s.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-750",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold",children:((p=e.find(b=>b.userId===n))==null?void 0:p.userName[0])||"S"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-white",children:((y=e.find(b=>b.userId===n))==null?void 0:y.userName)||"Support"}),s.jsx("p",{className:"text-xs text-gray-400",children:((S=e.find(b=>b.userId===n))==null?void 0:S.userEmail)||""})]})]})}),s.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:a.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-12",children:[s.jsx(Ke,{size:48,className:"mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No messages yet"})]}):a.map(b=>{var N,g,v;return s.jsxs("div",{className:`p-4 rounded-lg ${b.senderId===(t==null?void 0:t.uid)?"bg-blue-900/30 ml-12":"bg-gray-700 mr-12"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-white",children:b.senderId===(t==null?void 0:t.uid)?"You":b.senderName}),b.senderRole&&b.senderId!==(t==null?void 0:t.uid)&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-600 text-purple-100 rounded text-xs capitalize",children:b.senderRole})]}),s.jsx("span",{className:"text-xs text-gray-400",children:((v=(g=(N=b.createdAt)==null?void 0:N.toDate)==null?void 0:g.call(N))==null?void 0:v.toLocaleString())||"Just now"})]}),s.jsx("p",{className:"text-gray-300",children:b.message})]},b.id)})}),s.jsx("form",{onSubmit:m,className:"p-4 border-t border-gray-700 bg-gray-750",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"}),s.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(er,{size:20}),"Send"]})]})})]})]}),s.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-blue-200",children:[" ",s.jsx("strong",{children:"Support Hours:"}),' Our team typically responds within 24 hours during business days. For urgent matters, please include "URGENT" in your message.']})})]})})},tr=({children:t})=>{var h,m;const[e,r]=w.useState(!0),{user:n,signOut:i}=ke(),a=gr(),o=Cr(),l=async()=>{await i(),o("/")},c=[{name:"Dashboard",href:"/artist/dashboard",icon:md},{name:"Collaborations",href:"/artist/collaborations",icon:pr},{name:"Request Collab",href:"/artist/request-collab",icon:Zf},{name:"Shop Beats",href:"/artist/beats",icon:Le},{name:"My Purchases",href:"/artist/orders",icon:ur},{name:"Free Downloads",href:"/artist/free-downloads",icon:St},{name:"Chat",href:"/artist/chat",icon:Ke},{name:"Profile",href:"/artist/profile",icon:xn},{name:"Settings",href:"/artist/settings",icon:tg}],d=p=>a.pathname===p;return s.jsxs("div",{className:"min-h-screen bg-gray-900",children:[s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Artist"})]}),s.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:s.jsx(Pt,{size:20})})]}),s.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=n==null?void 0:n.displayName)==null?void 0:h[0])||((m=n==null?void 0:n.email)==null?void 0:m[0])||"A"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(n==null?void 0:n.displayName)||"Artist"}),s.jsx("p",{className:"text-xs text-gray-400 truncate",children:n==null?void 0:n.email})]})]})}),s.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:c.map(p=>{const y=p.icon;return s.jsxs(Z,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-orange-600 to-red-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[s.jsx(y,{size:18,className:"flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),s.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:s.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[s.jsx(pa,{size:18,className:"flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),s.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[s.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[s.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:s.jsx(zs,{size:24})}),s.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:s.jsx("div",{className:"text-right hidden sm:block",children:s.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),s.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},j3=()=>{const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState([]),[a,o]=w.useState(!0),[l,c]=w.useState({activeCollaborations:0,completedCollaborations:0,beatsPurchased:0,totalSpent:0});w.useEffect(()=>{if(!t)return;(async()=>{try{const p=(await qo.getAll()).filter(v=>v.clientEmail===t.email||v.assignedTo===t.uid);r(p.slice(0,5));const y=await Xr.getOrdersByCustomer(t.email);i(y);const S=p.filter(v=>v.status==="in_progress"||v.status==="agreed"||v.status==="signed").length,b=p.filter(v=>v.status==="completed").length,N=y.filter(v=>v.status==="completed").reduce((v,j)=>v+j.items.length,0),g=y.filter(v=>v.status==="completed").reduce((v,j)=>v+j.total,0);c({activeCollaborations:S,completedCollaborations:b,beatsPurchased:N,totalSpent:g})}catch(m){console.error("Failed to load dashboard data:",m)}finally{o(!1)}})()},[t]);const d=[{name:"Active Collaborations",value:l.activeCollaborations,icon:pr,change:`${l.completedCollaborations} completed`,changeType:"positive"},{name:"Beats Purchased",value:l.beatsPurchased,icon:Le,change:l.beatsPurchased>0?"From Jonna Rincon":"Browse beats",changeType:"neutral"},{name:"Total Spent",value:`${l.totalSpent.toFixed(2)}`,icon:ta,change:"On beats & licenses",changeType:"neutral"}];return a?s.jsx(tr,{children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-xl text-white",children:"Loading..."})})}):s.jsx(tr,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Artist Dashboard"}),s.jsxs("p",{className:"text-gray-400 mt-2",children:["Welcome back, ",(t==null?void 0:t.displayName)||"Artist","!"]})]}),s.jsxs(Z,{to:"/",className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 px-4 py-2 rounded-lg text-white font-medium transition-all flex items-center gap-2",children:[s.jsx(Jf,{size:18}),"Back to Home"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.map(h=>{const m=h.icon;return s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 hover:border-orange-500/50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:h.name}),s.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:h.value}),s.jsx("p",{className:`text-sm mt-2 ${h.changeType==="positive"?"text-green-400":"text-gray-400"}`,children:h.change})]}),s.jsx("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 p-4 rounded-xl",children:s.jsx(m,{size:32,className:"text-white"})})]})},h.name)})}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Active Collaborations"}),s.jsx(Z,{to:"/artist/collaborations",className:"text-orange-400 hover:text-orange-300 text-sm",children:"View All "})]}),e.filter(h=>h.status==="in_progress"||h.status==="signed").length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("p",{className:"text-xl text-gray-300 mb-2",children:"No active collaborations"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Check your collaboration page for inquiries"}),s.jsx(Z,{to:"/artist/collaborations",className:"inline-block bg-gradient-to-r from-orange-600 to-red-600 px-6 py-3 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"View Collaborations"})]}):s.jsx("div",{className:"space-y-4",children:e.filter(h=>h.status==="in_progress"||h.status==="signed").map(h=>{var m,p,y;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium",children:h.title}),s.jsxs("p",{className:"text-sm text-gray-400 capitalize",children:[h.type,"  ",h.status.replace("_"," ")]})]}),s.jsxs("div",{className:"text-right",children:[h.budget&&s.jsxs("p",{className:"text-white font-semibold",children:["",h.budget.toFixed(2)]}),h.deadline&&s.jsxs("p",{className:"text-xs text-yellow-400",children:["Due: ",((y=(p=(m=h.deadline).toDate)==null?void 0:p.call(m))==null?void 0:y.toLocaleDateString())||"N/A"]})]})]},h.id)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(Z,{to:"/artist/collaborations",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[s.jsx(pr,{size:32,className:"text-white mb-3"}),s.jsx("h3",{className:"text-white font-semibold",children:"Collaborations"}),s.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Manage projects"})]}),s.jsxs(Z,{to:"/artist/beats",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-6 rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[s.jsx(Le,{size:32,className:"text-white mb-3"}),s.jsx("h3",{className:"text-white font-semibold",children:"Browse Beats"}),s.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Shop from Jonna"})]}),s.jsxs(Z,{to:"/artist/orders",className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[s.jsx(ta,{size:32,className:"text-white mb-3"}),s.jsx("h3",{className:"text-white font-semibold",children:"My Purchases"}),s.jsx("p",{className:"text-green-100 text-sm mt-1",children:"View orders"})]}),s.jsxs(Z,{to:"/artist/profile",className:"bg-gradient-to-r from-orange-600 to-red-600 p-6 rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[s.jsx(fl,{size:32,className:"text-white mb-3"}),s.jsx("h3",{className:"text-white font-semibold",children:"Profile"}),s.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Manage account"})]})]}),s.jsx("div",{className:"bg-orange-900/30 border border-orange-700 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"text-3xl",children:""}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg text-white mb-2",children:"Collaborate with Jonna Rincon"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"Work together on exclusive tracks, remixes, and productions. Get access to premium beats and collaborate on exciting projects."}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(Z,{to:"/artist/collaborations",className:"bg-gradient-to-r from-orange-600 to-red-600 px-6 py-2 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"View Collaborations"}),s.jsx(Z,{to:"/artist/beats",className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Browse Beats"})]})]})]})})]})})},_3=()=>{const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState(!0),[a,o]=w.useState("all"),[l,c]=w.useState(null),[d,h]=w.useState({}),[m,p]=w.useState("");w.useEffect(()=>{if(!t)return;(async()=>{try{const g=(await qo.getAll()).filter(v=>v.clientEmail===t.email||v.assignedTo===t.uid);r(g)}catch(N){console.error("Failed to load collaborations:",N)}finally{i(!1)}})()},[t]),w.useEffect(()=>{if(!l)return;const b=ee(z,"collaborationMessages"),N=je(b,ae("collaborationId","==",l),Te("createdAt","asc")),g=gt(N,v=>{const j=[];v.forEach(P=>{j.push({id:P.id,...P.data()})}),h(P=>({...P,[l]:j}))});return()=>g()},[l]);const y=async b=>{if(!(!m.trim()||!t))try{await ct(ee(z,"collaborationMessages"),{collaborationId:b,senderId:t.uid,senderName:t.displayName||"Artist",senderEmail:t.email,message:m.trim(),createdAt:ue()}),p("")}catch(N){console.error("Failed to send message:",N)}},S=e.filter(b=>a==="all"?!0:b.status===a);return n?s.jsx(tr,{children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-xl text-white",children:"Loading collaborations..."})})}):s.jsx(tr,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Collaborations"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your collaboration projects with Jonna Rincon"})]}),s.jsx("div",{className:"flex gap-4 mb-8 border-b border-gray-700",children:["all","inquiry","in_progress","completed"].map(b=>s.jsxs("button",{onClick:()=>o(b),className:`px-4 py-2 capitalize transition ${a===b?"border-b-2 border-purple-500 text-white":"text-gray-400 hover:text-white"}`,children:[b==="all"?"All":b.replace("_"," "),s.jsxs("span",{className:"ml-2 text-sm",children:["(",b==="all"?e.length:e.filter(N=>N.status===b).length,")"]})]},b))}),S.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("p",{className:"text-xl mb-2",children:"No collaborations found"}),s.jsx("p",{className:"text-gray-400 mb-6",children:a==="all"?"Start collaborating with Jonna Rincon today":`No ${a.replace("_"," ")} collaborations`}),s.jsx("a",{href:"mailto:info@jonnarincon.com",className:"inline-block bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition",children:"Contact for Collaboration"})]}):s.jsx("div",{className:"space-y-6",children:S.map(b=>{var N,g,v,j,P,M,D,T,_,I,R,k,A,C,oe;return s.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-700 p-4",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-xl mb-2",children:b.title}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[s.jsx("span",{className:"capitalize",children:b.type}),b.budget&&s.jsxs("span",{children:["Budget: ",b.budget.toFixed(2)]}),b.startDate&&s.jsxs("span",{children:["Started: ",((v=(g=(N=b.startDate).toDate)==null?void 0:g.call(N))==null?void 0:v.toLocaleDateString())||"N/A"]})]})]}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${b.status==="completed"?"bg-green-900 text-green-300":b.status==="in_progress"?"bg-blue-900 text-blue-300":b.status==="signed"?"bg-purple-900 text-purple-300":b.status==="inquiry"?"bg-yellow-900 text-yellow-300":"bg-gray-600 text-gray-300"}`,children:b.status.replace("_"," ")})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Description"}),s.jsx("p",{className:"text-gray-200",children:b.description})]}),(b.startDate||b.endDate||b.deadline)&&s.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Timeline"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[b.startDate&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Start: "}),((M=(P=(j=b.startDate).toDate)==null?void 0:P.call(j))==null?void 0:M.toLocaleDateString())||"N/A"]}),b.deadline&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Deadline: "}),s.jsx("span",{className:"text-yellow-400",children:((_=(T=(D=b.deadline).toDate)==null?void 0:T.call(D))==null?void 0:_.toLocaleDateString())||"N/A"})]}),b.endDate&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"End: "}),((k=(R=(I=b.endDate).toDate)==null?void 0:R.call(I))==null?void 0:k.toLocaleDateString())||"N/A"]})]})]}),b.budget&&s.jsxs("div",{className:"mb-4 pb-4 border-b border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Payment"}),s.jsxs("div",{className:"flex gap-8 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Budget: "}),"",b.budget.toFixed(2)]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400",children:"Paid: "}),"",b.paidAmount.toFixed(2)]}),s.jsx("div",{children:s.jsx("span",{className:`font-semibold ${b.paymentStatus==="paid"?"text-green-400":b.paymentStatus==="partial"?"text-yellow-400":"text-red-400"}`,children:b.paymentStatus==="paid"?"Paid in Full":b.paymentStatus==="partial"?"Partially Paid":"Unpaid"})})]})]}),(b.contractPDF||b.attachments&&b.attachments.length>0)&&s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Documents"}),s.jsxs("div",{className:"flex gap-2",children:[b.contractPDF&&s.jsx("a",{href:b.contractPDF,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm transition",children:" Contract"}),(A=b.attachments)==null?void 0:A.map((B,Ie)=>s.jsxs("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded text-sm transition",children:[" Attachment ",Ie+1]},Ie))]})]}),b.notes&&s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Notes"}),s.jsx("p",{className:"text-sm text-gray-300",children:b.notes})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:l===b.id?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[s.jsx(Ke,{size:20,className:"text-blue-400"}),"Messages"]}),s.jsx("button",{onClick:()=>c(null),className:"text-gray-400 hover:text-white transition",children:s.jsx(Pt,{size:20})})]}),s.jsx("div",{className:"bg-gray-900 rounded-lg p-4 max-h-96 overflow-y-auto space-y-3",children:((C=d[b.id])==null?void 0:C.length)===0?s.jsxs("div",{className:"text-center text-gray-400 py-8",children:[s.jsx(Ke,{size:48,className:"mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No messages yet. Start the conversation!"})]}):(oe=d[b.id])==null?void 0:oe.map(B=>{var Ie,Ce,q;return s.jsxs("div",{className:`p-3 rounded-lg ${B.senderId===(t==null?void 0:t.uid)?"bg-purple-900/30 ml-8":"bg-gray-800 mr-8"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:"font-semibold text-sm text-white",children:B.senderId===(t==null?void 0:t.uid)?"You":B.senderName}),s.jsx("span",{className:"text-xs text-gray-400",children:((q=(Ce=(Ie=B.createdAt)==null?void 0:Ie.toDate)==null?void 0:Ce.call(Ie))==null?void 0:q.toLocaleString())||"Just now"})]}),s.jsx("p",{className:"text-gray-300 text-sm",children:B.message})]},B.id)})}),s.jsxs("form",{onSubmit:B=>{B.preventDefault(),y(b.id)},className:"flex gap-2",children:[s.jsx("input",{type:"text",value:m,onChange:B=>p(B.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),s.jsxs("button",{type:"submit",disabled:!m.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(er,{size:18}),"Send"]})]})]}):s.jsxs("button",{onClick:()=>c(b.id),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-3 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:[s.jsx(Ke,{size:20}),"Open Messages"]})})]})]},b.id)})})]})})},E3=()=>{const{user:t}=ke(),e=Cr(),[r,n]=w.useState(!1),[i,a]=w.useState({title:"",type:"music_video",description:"",budget:"",preferredStartDate:"",message:""}),o=async l=>{if(l.preventDefault(),!!t){n(!0);try{await ct(ee(z,"collabRequests"),{artistId:t.uid,artistName:t.displayName||"Unknown Artist",artistEmail:t.email,title:i.title,type:i.type,description:i.description,budget:i.budget?parseFloat(i.budget):null,preferredStartDate:i.preferredStartDate||null,message:i.message,status:"pending",createdAt:ue()}),alert(" Collaboration request submitted! Admin will review it soon."),e("/artist/collaborations")}catch(c){console.error("Failed to submit collab request:",c),alert(" Failed to submit request. Please try again.")}finally{n(!1)}}};return s.jsx(tr,{children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4 rounded-full",children:s.jsx(pr,{size:48,className:"text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Request Collaboration"}),s.jsx("p",{className:"text-gray-400",children:"Submit a collaboration request to work with Jonna Rincon"})]}),s.jsxs("form",{onSubmit:o,className:"bg-gray-800 border border-gray-700 rounded-xl p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Project Title ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:i.title,onChange:l=>a({...i,title:l.target.value}),placeholder:"e.g., Music Video for Summer Track",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Collaboration Type ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsxs("select",{required:!0,value:i.type,onChange:l=>a({...i,type:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500",children:[s.jsx("option",{value:"music_video",children:"Music Video"}),s.jsx("option",{value:"live_performance",children:"Live Performance"}),s.jsx("option",{value:"studio_session",children:"Studio Session"}),s.jsx("option",{value:"event",children:"Event"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Project Description ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("textarea",{required:!0,rows:5,value:i.description,onChange:l=>a({...i,description:l.target.value}),placeholder:"Describe what you want to collaborate on...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Budget ()"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:i.budget,onChange:l=>a({...i,budget:l.target.value}),placeholder:"e.g., 5000",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Optional - if you have a budget in mind"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Start Date"}),s.jsx("input",{type:"date",value:i.preferredStartDate,onChange:l=>a({...i,preferredStartDate:l.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Message"}),s.jsx("textarea",{rows:3,value:i.message,onChange:l=>a({...i,message:l.target.value}),placeholder:"Any additional information you'd like to share...",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),s.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-4 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?s.jsx(s.Fragment,{children:"Submitting..."}):s.jsxs(s.Fragment,{children:[s.jsx(er,{size:20}),"Submit Request"]})})]}),s.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-blue-200",children:[" ",s.jsx("strong",{children:"What happens next?"})," Your request will be reviewed by the admin team. You'll receive an email once your request is approved or if we need more information."]})})]})})},S3=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(!0),[i,a]=w.useState({sortBy:"newest"});w.useEffect(()=>{o()},[i]);const o=async()=>{try{n(!0);let d=await kn.getPublishedBeats();if(i.genre&&(d=d.filter(h=>h.genre===i.genre)),i.search){const h=i.search.toLowerCase();d=d.filter(m=>m.title.toLowerCase().includes(h)||m.artist.toLowerCase().includes(h)||m.tags.some(p=>p.toLowerCase().includes(h)))}d.sort((h,m)=>{var p,y,S,b;switch(i.sortBy){case"newest":return m.createdAt.toMillis()-h.createdAt.toMillis();case"popular":return m.plays-h.plays;case"price_low":return(((p=h.licenses.basic)==null?void 0:p.price)||0)-(((y=m.licenses.basic)==null?void 0:y.price)||0);case"price_high":return(((S=m.licenses.basic)==null?void 0:S.price)||0)-(((b=h.licenses.basic)==null?void 0:b.price)||0);default:return 0}}),e(d)}catch(c){console.error("Failed to load beats:",c)}finally{n(!1)}},l=["Trap","Hip Hop","Drill","R&B","Pop","Electronic","Afrobeat"];return s.jsx(tr,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Shop Premium Beats"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Browse and license high-quality beats by Jonna Rincon"})]}),s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search beats...",value:i.search||"",onChange:c=>a({...i,search:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500"}),s.jsxs("select",{value:i.genre||"",onChange:c=>a({...i,genre:c.target.value||void 0}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",children:[s.jsx("option",{value:"",children:"All Genres"}),l.map(c=>s.jsx("option",{value:c,children:c},c))]}),s.jsxs("select",{value:i.sortBy,onChange:c=>a({...i,sortBy:c.target.value}),className:"bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",children:[s.jsx("option",{value:"newest",children:"Newest First"}),s.jsx("option",{value:"popular",children:"Most Popular"}),s.jsx("option",{value:"price_low",children:"Price: Low to High"}),s.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),(i.genre||i.search)&&s.jsx("button",{onClick:()=>a({sortBy:"newest"}),className:"bg-gray-700 hover:bg-gray-600 rounded-lg px-4 py-2 text-white transition",children:"Clear Filters"})]})}),r?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-xl text-white",children:"Loading beats..."})}):t.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-800 border border-gray-700 rounded-xl",children:[s.jsx(Le,{size:64,className:"mx-auto mb-4 text-gray-600"}),s.jsx("p",{className:"text-xl text-white mb-2",children:"No beats found"}),s.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(c=>{var d;return s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-orange-500/50 transition-all hover:transform hover:scale-105",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:c.artworkUrl||"/placeholder-beat.png",alt:c.title,className:"w-full h-48 object-cover"}),c.featured&&s.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black px-2 py-1 rounded text-xs font-bold",children:"FEATURED"}),c.trending&&s.jsx("div",{className:"absolute top-2 right-2 bg-red-500 px-2 py-1 rounded text-xs font-bold",children:" TRENDING"}),s.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:s.jsx("button",{className:"bg-orange-600 hover:bg-orange-700 rounded-full p-4 transition-all hover:scale-110",children:s.jsx(Kr,{size:32,className:"text-white"})})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-lg mb-2 text-white",children:c.title}),s.jsx("div",{className:"text-sm text-gray-400 mb-3",children:c.artist}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400 mb-3",children:[s.jsxs("span",{children:[c.bpm," BPM"]}),s.jsx("span",{children:""}),s.jsx("span",{children:c.key}),s.jsx("span",{children:""}),s.jsx("span",{children:c.genre})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Kr,{size:12})," ",c.plays.toLocaleString()]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Yf,{size:12})," ",c.likes.toLocaleString()]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(St,{size:12})," ",c.downloads.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-700",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-gray-400",children:"Starting at"}),s.jsxs("div",{className:"font-bold text-lg text-white",children:["",((d=c.licenses.basic)==null?void 0:d.price.toFixed(2))||"0.00"]})]}),s.jsx(Z,{to:`/artist/shop/${c.id}`,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-4 py-2 rounded-lg text-white font-medium transition-all",children:"View Beat"})]})]})]},c.id)})}),!r&&t.length>0&&s.jsxs("div",{className:"text-center text-gray-400",children:["Showing ",t.length," beat",t.length!==1?"s":""]})]})})},T3=()=>{const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState(!0),[a,o]=w.useState("all");w.useEffect(()=>{if(!t)return;(async()=>{try{const d=await Xr.getOrdersByCustomer(t.email);r(d)}catch(d){console.error("Failed to load orders:",d)}finally{i(!1)}})()},[t]);const l=e.filter(c=>a==="all"?!0:c.status===a);return n?s.jsx(tr,{children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-xl text-white",children:"Loading orders..."})})}):s.jsx(tr,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Purchases"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"View your beat purchases and licenses"})]}),s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:s.jsx("div",{className:"flex gap-4",children:["all","completed","processing","pending"].map(c=>s.jsxs("button",{onClick:()=>o(c),className:`px-4 py-2 rounded-lg capitalize transition ${a===c?"bg-gradient-to-r from-orange-600 to-red-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[c,s.jsxs("span",{className:"ml-2 text-xs",children:["(",c==="all"?e.length:e.filter(d=>d.status===c).length,")"]})]},c))})}),l.length===0?s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(l_,{size:64,className:"mx-auto mb-4 text-gray-600"}),s.jsx("p",{className:"text-xl text-white mb-2",children:"No purchases found"}),s.jsx("p",{className:"text-gray-400 mb-6",children:a==="all"?"You haven't purchased any beats yet":`No ${a} orders`}),s.jsx(Z,{to:"/artist/beats",className:"inline-block bg-gradient-to-r from-orange-600 to-red-600 px-6 py-3 rounded-lg text-white font-medium hover:from-orange-700 hover:to-red-700 transition-all",children:"Browse Beats"})]}):s.jsx("div",{className:"space-y-4",children:l.map(c=>{var d,h,m;return s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-700/50 p-4 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-lg text-white mb-1",children:c.orderNumber}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Placed on ",((m=(h=(d=c.createdAt)==null?void 0:d.toDate)==null?void 0:h.call(d))==null?void 0:m.toLocaleDateString())||"N/A"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2 ${c.status==="completed"?"bg-green-500/20 text-green-400":c.status==="processing"?"bg-blue-500/20 text-blue-400":c.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:c.status}),s.jsxs("div",{className:"font-bold text-white",children:["",c.total.toFixed(2)]})]})]}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"space-y-3",children:c.items.map((p,y)=>{var S;return s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:p.artworkUrl||"/placeholder-beat.png",alt:p.beatTitle,className:"w-16 h-16 rounded object-cover"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-white",children:p.beatTitle}),s.jsxs("div",{className:"text-sm text-gray-400 capitalize",children:[p.licenseType," License"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-semibold text-white",children:["",p.price.toFixed(2)]}),c.status==="completed"&&((S=c.downloadLinks)==null?void 0:S[p.beatId])&&s.jsxs("a",{href:c.downloadLinks[p.beatId],className:"inline-flex items-center gap-1 text-sm text-orange-400 hover:text-orange-300 mt-1",download:!0,children:[s.jsx(St,{size:14}),"Download"]})]})]},y)})})})]},c.id)})})]})})},k3=()=>{const[t,e]=w.useState("all"),r=[{id:"1",title:"Summer Vibes Remix",category:"remix",description:"Tropical house remix with uplifting melodies",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"8.5 MB",releaseDate:"2024-01-15"},{id:"2",title:"Free Type Beat",category:"beat",description:"Trap beat with hard 808s - free for non-profit use",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"12.3 MB",releaseDate:"2024-02-01"},{id:"3",title:"Neon Dreams Wallpaper",category:"wallpaper",description:"iPhone wallpaper with neon aesthetic",imageUrl:"/placeholder-beat.png",downloadUrl:"#",fileSize:"2.1 MB",releaseDate:"2024-01-20"}],n=t==="all"?r:r.filter(o=>o.category===t),i=o=>{switch(o){case"remix":return s.jsx(Le,{size:20});case"beat":return s.jsx(vu,{size:20});case"wallpaper":return s.jsx(ra,{size:20});default:return s.jsx(St,{size:20})}},a=o=>{switch(o){case"remix":return"bg-purple-600/20 text-purple-400";case"beat":return"bg-orange-600/20 text-orange-400";case"wallpaper":return"bg-blue-600/20 text-blue-400";default:return"bg-gray-600/20 text-gray-400"}};return s.jsx(tr,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Free Downloads"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Get free remixes, beats, and wallpapers"})]}),s.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-green-200",children:[" ",s.jsx("strong",{children:"100% Free!"})," Download any of these items for personal use. For commercial use of beats and remixes, please contact us for licensing."]})}),s.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[s.jsx("button",{onClick:()=>e("all"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 ${t==="all"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:"All Downloads"}),s.jsxs("button",{onClick:()=>e("remix"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="remix"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[s.jsx(Le,{size:16}),"Remixes"]}),s.jsxs("button",{onClick:()=>e("beat"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="beat"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[s.jsx(vu,{size:16}),"Beats"]}),s.jsxs("button",{onClick:()=>e("wallpaper"),className:`px-4 py-2 rounded-lg font-medium transition flex-shrink-0 flex items-center gap-2 ${t==="wallpaper"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[s.jsx(ra,{size:16}),"Wallpapers"]})]}),n.length===0?s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(St,{size:64,className:"mx-auto mb-4 text-gray-600"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No downloads available"}),s.jsx("p",{className:"text-gray-400",children:"Check back soon for new free content"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(o=>s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden hover:border-purple-500 transition-all",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:o.imageUrl,alt:o.title,className:"w-full h-48 object-cover"}),s.jsxs("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-lg text-xs font-medium flex items-center gap-1 ${a(o.category)}`,children:[i(o.category),s.jsx("span",{className:"capitalize",children:o.category})]})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:o.title}),s.jsx("p",{className:"text-sm text-gray-400",children:o.description})]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:o.fileSize}),s.jsx("span",{children:new Date(o.releaseDate).toLocaleDateString()})]}),s.jsxs("a",{href:o.downloadUrl,download:!0,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-4 py-3 rounded-lg text-white font-semibold transition-all flex items-center justify-center gap-2",children:[s.jsx(St,{size:18}),"Download Free"]})]})]},o.id))})]})})},I3=()=>{var p,y,S;const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState(null),[a,o]=w.useState([]),[l,c]=w.useState(""),[d,h]=w.useState([]);w.useEffect(()=>{if(!t)return;const b=ee(z,"supportMessages"),N=je(b,Kj(ae("senderId","==",t.uid),ae("recipientId","==",t.uid)),Te("createdAt","asc")),g=gt(N,v=>{const j=[];v.forEach(P=>{j.push({id:P.id,...P.data()})}),h(j)});return()=>g()},[t]),w.useEffect(()=>{if(!t||d.length===0)return;const b=new Map;d.forEach(g=>{const v=g.senderId===t.uid?g.recipientId:g.senderId;if(!v)return;const j=g.senderId===t.uid?"Support":g.senderName,P=g.senderId===t.uid?"":g.senderEmail;if(!b.has(v))b.set(v,{userId:v,userName:j,userEmail:P,lastMessage:g.message,lastMessageTime:g.createdAt,unreadCount:0});else{const M=b.get(v);g.createdAt.toMillis()>M.lastMessageTime.toMillis()&&(M.lastMessage=g.message,M.lastMessageTime=g.createdAt)}});const N=Array.from(b.values()).sort((g,v)=>v.lastMessageTime.toMillis()-g.lastMessageTime.toMillis());r(N),!n&&N.length>0&&i(N[0].userId)},[d,t,n]),w.useEffect(()=>{if(!n||!t){o([]);return}const b=d.filter(N=>N.senderId===t.uid&&N.recipientId===n||N.senderId===n&&N.recipientId===t.uid||N.senderId===n&&!N.recipientId||N.senderId===t.uid&&!N.recipientId);o(b)},[n,d,t]);const m=async b=>{if(b.preventDefault(),!(!l.trim()||!t||!n))try{await ct(ee(z,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Artist",senderEmail:t.email,senderRole:"artist",recipientId:n,message:l.trim(),createdAt:ue()}),c("")}catch(N){console.error("Failed to send message:",N)}};return e.length===0?s.jsx(tr,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Get help from the Jonna Rincon team"})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(Ke,{size:64,className:"mx-auto mb-4 text-gray-600"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No conversations yet"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Start a conversation with our support team"}),s.jsx("form",{onSubmit:async b=>{if(b.preventDefault(),!(!l.trim()||!t))try{await ct(ee(z,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Artist",senderEmail:t.email,senderRole:"artist",message:l.trim(),createdAt:ue()}),c("")}catch(N){console.error("Failed to send message:",N)}},className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Type your message to support...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),s.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(er,{size:20}),"Send"]})]})})]})]})}):s.jsx(tr,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Get help from the Jonna Rincon team"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-700",children:s.jsx("h2",{className:"font-semibold text-white",children:"Conversations"})}),s.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 350px)"},children:e.map(b=>{var N,g,v;return s.jsx("button",{onClick:()=>i(b.userId),className:`w-full p-4 text-left transition border-b border-gray-700 ${n===b.userId?"bg-purple-900/30 border-l-4 border-l-purple-500":"hover:bg-gray-750"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold flex-shrink-0",children:b.userName[0]||"S"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"font-semibold text-white text-sm truncate",children:b.userName}),s.jsx("span",{className:"text-xs text-gray-400",children:((v=(g=(N=b.lastMessageTime)==null?void 0:N.toDate)==null?void 0:g.call(N))==null?void 0:v.toLocaleDateString())||""})]}),s.jsx("p",{className:"text-xs text-gray-400 truncate",children:b.lastMessage})]})]})},b.userId)})})]}),s.jsxs("div",{className:"lg:col-span-2 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 300px)"},children:[s.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-750",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold",children:((p=e.find(b=>b.userId===n))==null?void 0:p.userName[0])||"S"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-white",children:((y=e.find(b=>b.userId===n))==null?void 0:y.userName)||"Support"}),s.jsx("p",{className:"text-xs text-gray-400",children:((S=e.find(b=>b.userId===n))==null?void 0:S.userEmail)||""})]})]})}),s.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:a.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-12",children:[s.jsx(Ke,{size:48,className:"mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No messages yet"})]}):a.map(b=>{var N,g,v;return s.jsxs("div",{className:`p-4 rounded-lg ${b.senderId===(t==null?void 0:t.uid)?"bg-purple-900/30 ml-12":"bg-gray-700 mr-12"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-white",children:b.senderId===(t==null?void 0:t.uid)?"You":b.senderName}),b.senderRole&&b.senderId!==(t==null?void 0:t.uid)&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-600 text-purple-100 rounded text-xs capitalize",children:b.senderRole})]}),s.jsx("span",{className:"text-xs text-gray-400",children:((v=(g=(N=b.createdAt)==null?void 0:N.toDate)==null?void 0:g.call(N))==null?void 0:v.toLocaleString())||"Just now"})]}),s.jsx("p",{className:"text-gray-300",children:b.message})]},b.id)})}),s.jsx("form",{onSubmit:m,className:"p-4 border-t border-gray-700 bg-gray-750",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),s.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(er,{size:20}),"Send"]})]})})]})]}),s.jsx("div",{className:"bg-purple-900/20 border border-purple-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-purple-200",children:[" ",s.jsx("strong",{children:"Support Hours:"})," Our team typically responds within 24 hours during business days."]})})]})})},C3=()=>{var g,v;const{user:t,signOut:e}=ke(),[r,n]=w.useState(!1),[i,a]=w.useState((t==null?void 0:t.displayName)||""),[o,l]=w.useState(""),[c,d]=w.useState(""),[h,m]=w.useState(!1),[p,y]=w.useState(null),S=async j=>{j.preventDefault(),m(!0),y(null);try{await Ne.updateUserProfile({displayName:i}),y({type:"success",text:"Profile updated successfully!"}),n(!1)}catch(P){y({type:"error",text:P.message||"Failed to update profile"})}finally{m(!1)}},b=async j=>{if(j.preventDefault(),m(!0),y(null),o!==c){y({type:"error",text:"Passwords do not match"}),m(!1);return}if(o.length<6){y({type:"error",text:"Password must be at least 6 characters"}),m(!1);return}try{await Ne.updateUserPassword(o),y({type:"success",text:"Password updated successfully!"}),l(""),d("")}catch(P){y({type:"error",text:P.message||"Failed to update password"})}finally{m(!1)}},N=async()=>{try{await e()}catch(j){console.error("Sign out error:",j)}};return s.jsx(tr,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 text-center",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-orange-600 to-red-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4",children:((v=(g=t==null?void 0:t.displayName)==null?void 0:g.charAt(0))==null?void 0:v.toUpperCase())||s.jsx(xn,{size:32,className:"text-white"})}),s.jsx("h3",{className:"font-bold text-xl text-white mb-1",children:(t==null?void 0:t.displayName)||"Artist"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:t==null?void 0:t.email}),s.jsx("div",{className:"inline-block px-3 py-1 bg-orange-900/30 text-orange-300 rounded-full text-xs font-semibold border border-orange-700",children:"Artist Account"})]})}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[p&&s.jsx("div",{className:`p-4 rounded-lg border ${p.type==="success"?"bg-green-900/30 border-green-700 text-green-300":"bg-red-900/30 border-red-700 text-red-300"}`,children:p.text}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Profile Information"}),!r&&s.jsx("button",{onClick:()=>n(!0),className:"text-orange-400 hover:text-orange-300 text-sm font-medium",children:"Edit"})]}),r?s.jsxs("form",{onSubmit:S,children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[s.jsx(xn,{size:16,className:"inline mr-1"})," Display Name"]}),s.jsx("input",{type:"text",value:i,onChange:j=>a(j.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[s.jsx(Xf,{size:16,className:"inline mr-1"})," Email"]}),s.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-gray-400 opacity-50 cursor-not-allowed",disabled:!0}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[s.jsx(Qr,{size:16})," ",h?"Saving...":"Save Changes"]}),s.jsx("button",{type:"button",onClick:()=>{n(!1),a((t==null?void 0:t.displayName)||"")},className:"bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg text-white font-medium transition-all",children:"Cancel"})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Display Name"}),s.jsx("div",{className:"font-semibold text-white",children:(t==null?void 0:t.displayName)||"Not set"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Email"}),s.jsx("div",{className:"font-semibold text-white",children:t==null?void 0:t.email})]})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Change Password"}),s.jsxs("form",{onSubmit:b,children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[s.jsx(xs,{size:16,className:"inline mr-1"})," New Password"]}),s.jsx("input",{type:"password",value:o,onChange:j=>l(j.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"Enter new password",minLength:6})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:[s.jsx(xs,{size:16,className:"inline mr-1"})," Confirm New Password"]}),s.jsx("input",{type:"password",value:c,onChange:j=>d(j.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"Confirm new password",minLength:6})]}),s.jsxs("button",{type:"submit",disabled:h||!o||!c,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-6 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 flex items-center gap-2",children:[s.jsx(Qr,{size:16})," ",h?"Updating...":"Update Password"]})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Account Actions"}),s.jsxs("button",{onClick:N,className:"w-full bg-red-600 hover:bg-red-700 py-3 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:[s.jsx(pa,{size:20})," Sign Out"]})]})]})]})]})})},A3=()=>{var g;const{user:t}=ke(),[e,r]=w.useState((t==null?void 0:t.displayName)||""),[n,i]=w.useState(!1),[a,o]=w.useState(null),[l,c]=w.useState(""),[d,h]=w.useState(""),[m,p]=w.useState(!1),[y,S]=w.useState(null),b=async v=>{if(v.preventDefault(),!(!t||!e.trim())){i(!0),o(null);try{await nu(t,{displayName:e.trim()}),o({type:"success",text:" Username updated successfully!"}),setTimeout(()=>{window.location.reload()},1e3)}catch(j){console.error("Failed to update profile:",j),o({type:"error",text:" Failed to update username. Please try again."})}finally{i(!1)}}},N=async v=>{if(v.preventDefault(),!!t){if(l.length<6){S({type:"error",text:" Password must be at least 6 characters long."});return}if(l!==d){S({type:"error",text:" Passwords do not match."});return}p(!0),S(null);try{await af(t,l),S({type:"success",text:" Password updated successfully!"}),c(""),h("")}catch(j){console.error("Failed to update password:",j),j.code==="auth/requires-recent-login"?S({type:"error",text:" For security reasons, please sign out and sign in again before changing your password."}):S({type:"error",text:" Failed to update password. Please try again."})}finally{p(!1)}}};return s.jsx(tr,{children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your account information"})]}),s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsx("div",{className:"pb-6 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold text-2xl",children:(e==null?void 0:e[0])||((g=t==null?void 0:t.email)==null?void 0:g[0])||"A"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-semibold text-lg",children:(t==null?void 0:t.displayName)||"Artist"}),s.jsx("p",{className:"text-gray-400 text-sm",children:t==null?void 0:t.email}),s.jsx("span",{className:"px-2 py-0.5 bg-purple-600 text-purple-100 rounded text-xs mt-1 inline-block",children:"Artist"})]})]})}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Display Name ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"text",required:!0,value:e,onChange:v=>r(v.target.value),placeholder:"Enter your display name",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This name will be displayed across the platform"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:(t==null?void 0:t.email)||"",disabled:!0,className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-gray-500 cursor-not-allowed"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),a&&s.jsx("div",{className:`p-4 rounded-lg ${a.type==="success"?"bg-green-900/30 border border-green-700 text-green-300":"bg-red-900/30 border border-red-700 text-red-300"}`,children:a.text}),s.jsx("button",{type:"submit",disabled:n||!e.trim(),className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?s.jsx(s.Fragment,{children:"Saving..."}):s.jsxs(s.Fragment,{children:[s.jsx(Qr,{size:20}),"Save Changes"]})})]})}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(xs,{size:20}),"Change Password"]}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["New Password ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"password",required:!0,value:l,onChange:v=>c(v.target.value),placeholder:"Enter new password (min. 6 characters)",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Confirm Password ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"password",required:!0,value:d,onChange:v=>h(v.target.value),placeholder:"Confirm new password",className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"})]}),y&&s.jsx("div",{className:`p-4 rounded-lg ${y.type==="success"?"bg-green-900/30 border border-green-700 text-green-300":"bg-red-900/30 border border-red-700 text-red-300"}`,children:y.text}),s.jsx("button",{type:"submit",disabled:m||!l||!d,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?s.jsx(s.Fragment,{children:"Changing Password..."}):s.jsxs(s.Fragment,{children:[s.jsx(xs,{size:20}),"Change Password"]})})]})]}),s.jsx("div",{className:"bg-purple-900/20 border border-purple-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-purple-200",children:[" ",s.jsx("strong",{children:"Note:"})," Changing your display name will update how you appear in collaborations, messages, and all platform interactions."]})})]})})},nn=({children:t})=>{var h,m;const[e,r]=w.useState(!0),{user:n,signOut:i}=ke(),a=gr(),o=Cr(),l=async()=>{await i(),o("/admin/login")},c=[{name:"Dashboard",href:"/admin/dashboard",icon:md},{name:"Beats",href:"/admin/beats",icon:Le},{name:"Orders",href:"/admin/orders",icon:ur},{name:"Social Media",href:"/admin/content",icon:WP},{name:"Collaborations",href:"/admin/collaborations",icon:pr},{name:"Collab Requests",href:"/admin/collab-requests",icon:_r},{name:"Artist Requests",href:"/admin/artist-role-requests",icon:ng},{name:"Analytics",href:"/admin/analytics",icon:HP},{name:"Chat",href:"/admin/chat",icon:Ke},{name:"Settings",href:"/admin/settings",icon:tg}],d=p=>a.pathname===p;return s.jsxs("div",{className:"min-h-screen bg-gray-900",children:[s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Admin"})]}),s.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:s.jsx(Pt,{size:20})})]}),s.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=n==null?void 0:n.displayName)==null?void 0:h[0])||((m=n==null?void 0:n.email)==null?void 0:m[0])||"A"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(n==null?void 0:n.displayName)||"Admin"}),s.jsx("p",{className:"text-xs text-gray-400 truncate",children:n==null?void 0:n.email})]})]})}),s.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:c.map(p=>{const y=p.icon;return s.jsxs(Z,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[s.jsx(y,{size:18,className:"flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),s.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:s.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[s.jsx(pa,{size:18,className:"flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),s.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[s.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[s.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:s.jsx(zs,{size:24})}),s.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:s.jsx("div",{className:"text-right hidden sm:block",children:s.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),s.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},h_=t=>{const[e,r]=w.useState([]),[n,i]=w.useState(!0),[a,o]=w.useState(null);return w.useEffect(()=>{try{const l=Xr.subscribeToOrders(c=>{r(c),i(!1)},t);return()=>l()}catch(l){o(l.message),i(!1)}},[t==null?void 0:t.status,t==null?void 0:t.customerId]),{orders:e,loading:n,error:a}},R3=()=>{const[t,e]=w.useState({totalOrders:0,totalRevenue:0,pendingOrders:0,completedOrders:0,averageOrderValue:0}),[r,n]=w.useState(!0),[i,a]=w.useState(null);return w.useEffect(()=>{(async()=>{try{const l=await Xr.getOrderStatistics();e(l)}catch(l){a(l.message)}finally{n(!1)}})()},[]),{stats:t,loading:r,error:i,refetch:async()=>{n(!0);const o=await Xr.getOrderStatistics();e(o),n(!1)}}},sg=t=>{const[e,r]=w.useState([]),[n,i]=w.useState(!0),[a,o]=w.useState(null);return w.useEffect(()=>{try{const l=qo.subscribeToCollaborations(c=>{r(c),i(!1)},t);return()=>l()}catch(l){o(l.message),i(!1)}},[t==null?void 0:t.status,t==null?void 0:t.type]),{collaborations:e,loading:n,error:a}},P3=()=>{const[t,e]=w.useState({total:0,active:0,completed:0,totalRevenue:0,pendingRevenue:0}),[r,n]=w.useState(!0),[i,a]=w.useState(null);return w.useEffect(()=>{(async()=>{try{const l=await qo.getCollaborationStats();e(l)}catch(l){a(l.message)}finally{n(!1)}})()},[]),{stats:t,loading:r,error:i,refetch:async()=>{n(!0);const o=await qo.getCollaborationStats();e(o),n(!1)}}},D3=()=>{const{stats:t}=R3(),{stats:e}=P3(),[r,n]=w.useState(0),[i,a]=w.useState([]);w.useEffect(()=>{(async()=>{const c=await kn.getAllBeats();n(c.data.length);const d=await Xr.getRecentOrders(5);a(d)})()},[]);const o=[{name:"Total Revenue",value:`${t.totalRevenue.toFixed(2)}`,icon:ta,change:"+12.5%",changeType:"positive"},{name:"Total Orders",value:t.totalOrders,icon:po,change:`${t.pendingOrders} pending`,changeType:"neutral"},{name:"Total Beats",value:r,icon:Le,change:"In catalog",changeType:"neutral"},{name:"Active Collaborations",value:e.active,icon:pr,change:`${e.completed} completed`,changeType:"positive"},{name:"Avg Order Value",value:`${t.averageOrderValue.toFixed(2)}`,icon:fl,change:"+8.2%",changeType:"positive"},{name:"Pending Revenue",value:`${e.pendingRevenue.toFixed(2)}`,icon:ta,change:"From collaborations",changeType:"neutral"}];return s.jsx(nn,{children:s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Dashboard"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-400 mt-1 sm:mt-2",children:"Welcome back! Here's what's happening today."})]}),s.jsxs(Z,{to:"/",className:"bg-gray-800 hover:bg-gray-700 border border-gray-700 px-3 sm:px-4 py-2 rounded-lg text-white font-medium transition-all flex items-center gap-2 text-sm sm:text-base flex-shrink-0",children:[s.jsx(Jf,{size:18}),s.jsx("span",{className:"hidden sm:inline",children:"Back to Home"}),s.jsx("span",{className:"sm:hidden",children:"Home"})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:o.map(l=>{const c=l.icon;return s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg sm:rounded-xl p-4 sm:p-6 hover:border-purple-500/50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 truncate",children:l.name}),s.jsx("p",{className:"text-xl sm:text-3xl font-bold text-white mt-1 sm:mt-2",children:l.value}),s.jsx("p",{className:`text-xs sm:text-sm mt-1 sm:mt-2 ${l.changeType==="positive"?"text-green-400":l.changeType==="negative"?"text-red-400":"text-gray-400"}`,children:l.change})]}),s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-2 sm:p-4 rounded-lg sm:rounded-xl flex-shrink-0",children:s.jsx(c,{size:20,className:"sm:w-8 sm:h-8 text-white"})})]})},l.name)})}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg sm:rounded-xl p-4 sm:p-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white mb-3 sm:mb-4",children:"Recent Orders"}),s.jsx("div",{className:"space-y-2 sm:space-y-4",children:i.length===0?s.jsx("p",{className:"text-gray-400 text-center py-6 sm:py-8 text-sm sm:text-base",children:"No orders yet"}):i.map(l=>s.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 bg-gray-700/50 rounded hover:bg-gray-700 transition-colors gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-white font-medium text-sm sm:text-base truncate",children:l.orderNumber}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 truncate",children:l.customerEmail})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsxs("p",{className:"text-white font-semibold text-sm sm:text-base",children:["",l.total.toFixed(2)]}),s.jsx("span",{className:`text-xs px-2 py-0.5 sm:py-1 rounded-full inline-block ${l.status==="completed"?"bg-green-500/20 text-green-400":l.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:l.status})]})]},l.id))})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs("a",{href:"/admin/beats",className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all",children:[s.jsx(Le,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),s.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Manage Beats"}),s.jsx("p",{className:"text-purple-100 text-xs sm:text-sm mt-1",children:"Add or edit beats"})]}),s.jsxs("a",{href:"/admin/orders",className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all",children:[s.jsx(po,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),s.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"View Orders"}),s.jsx("p",{className:"text-blue-100 text-xs sm:text-sm mt-1",children:"Process orders"})]}),s.jsxs("a",{href:"/admin/content",className:"bg-gradient-to-r from-green-600 to-teal-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-green-700 hover:to-teal-700 transition-all",children:[s.jsx(ZP,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),s.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Content"}),s.jsx("p",{className:"text-green-100 text-xs sm:text-sm mt-1",children:"Manage content"})]}),s.jsxs("a",{href:"/admin/collaborations",className:"bg-gradient-to-r from-orange-600 to-red-600 p-4 sm:p-6 rounded-lg sm:rounded-xl hover:from-orange-700 hover:to-red-700 transition-all",children:[s.jsx(pr,{size:24,className:"sm:w-8 sm:h-8 text-white mb-2 sm:mb-3"}),s.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base",children:"Collaborations"}),s.jsx("p",{className:"text-orange-100 text-xs sm:text-sm mt-1",children:"Manage deals"})]})]})]})})},pd=t=>{const[e,r]=w.useState([]),[n,i]=w.useState(!0),[a,o]=w.useState(null);return w.useEffect(()=>{const l=kn.subscribeToBeats(c=>{r(c),i(!1)},t);return()=>l()},[t==null?void 0:t.status,t==null?void 0:t.featured,t==null?void 0:t.genre]),{beats:e,loading:n,error:a,setError:o}},M3=()=>{const{beats:t,loading:e}=pd(),[r,n]=w.useState(!1),[i,a]=w.useState(null),[o,l]=w.useState(null),c=()=>{a(null),n(!0)},d=p=>{a(p),n(!0)},h=async p=>{if(confirm("Are you sure you want to delete this beat?"))try{await kn.deleteBeat(p),alert("Beat deleted successfully")}catch(y){alert(y.message)}},m=p=>{l(o===p?null:p)};return s.jsxs(nn,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Beats Management"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your beat catalog"})]}),s.jsxs("button",{onClick:c,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all flex items-center space-x-2",children:[s.jsx(Zf,{size:20}),s.jsx("span",{children:"Add Beat"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Beats"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Published"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(p=>p.status==="published").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Featured"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(p=>p.featured).length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Plays"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.reduce((p,y)=>p+y.plays,0)})]})]}),s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Beat"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Genre"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"BPM / Key"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Plays"}),s.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-700",children:e?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Loading beats..."})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"No beats yet. Create your first beat!"})}):t.map(p=>s.jsxs("tr",{className:"hover:bg-gray-700/50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("img",{src:p.artworkUrl,alt:p.title,className:"w-12 h-12 rounded object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:p.title}),s.jsx("p",{className:"text-sm text-gray-400",children:p.artist})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-sm",children:p.genre})}),s.jsxs("td",{className:"px-6 py-4 text-gray-300",children:[p.bpm," BPM / ",p.key]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded text-sm ${p.status==="published"?"bg-green-500/20 text-green-400":p.status==="draft"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:p.status})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded text-sm capitalize ${p.beatType==="free"?"bg-green-500/20 text-green-400":p.beatType==="exclusive"?"bg-orange-500/20 text-orange-400":p.beatType==="premium"?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:p.beatType||"basic"})}),s.jsx("td",{className:"px-6 py-4 text-gray-300",children:p.plays}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>m(p.id),className:"p-2 text-gray-400 hover:text-purple-400 transition-colors",title:"Play preview",children:o===p.id?s.jsx(_c,{size:18}):s.jsx(Kr,{size:18})}),s.jsx("button",{onClick:()=>d(p),className:"p-2 text-gray-400 hover:text-blue-400 transition-colors",title:"Edit",children:s.jsx(c_,{size:18})}),s.jsx("button",{onClick:()=>h(p.id),className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Delete",children:s.jsx(rg,{size:18})})]})})]},p.id))})]})})})]}),r&&s.jsx(L3,{beat:i,onClose:()=>n(!1),onSave:()=>{n(!1),a(null)}})]})},L3=({beat:t,onClose:e,onSave:r})=>{var h,m,p,y,S,b,N;const[n,i]=w.useState({title:(t==null?void 0:t.title)||"",artist:(t==null?void 0:t.artist)||"Jonna Rincon",bpm:(t==null?void 0:t.bpm)||120,key:(t==null?void 0:t.key)||"",genre:(t==null?void 0:t.genre)||"",tags:((h=t==null?void 0:t.tags)==null?void 0:h.join(", "))||"",audioUrl:(t==null?void 0:t.audioUrl)||"",artworkUrl:(t==null?void 0:t.artworkUrl)||"",slug:(t==null?void 0:t.slug)||"",status:(t==null?void 0:t.status)||"draft",beatType:(t==null?void 0:t.beatType)||"basic",featured:(t==null?void 0:t.featured)||!1,basicPrice:((p=(m=t==null?void 0:t.licenses)==null?void 0:m.basic)==null?void 0:p.price)||29,premiumPrice:((S=(y=t==null?void 0:t.licenses)==null?void 0:y.premium)==null?void 0:S.price)||49,exclusivePrice:((N=(b=t==null?void 0:t.licenses)==null?void 0:b.exclusive)==null?void 0:N.price)||199}),[a,o]=w.useState(!1),[l,c]=w.useState(!1),d=async g=>{g.preventDefault(),c(!0);try{const v={title:n.title,artist:n.artist,bpm:n.bpm,key:n.key,genre:n.genre,tags:n.tags.split(",").map(j=>j.trim()),audioUrl:n.audioUrl,artworkUrl:n.artworkUrl,slug:n.slug||n.title.toLowerCase().replace(/\s+/g,"-"),status:n.status,beatType:n.beatType,featured:n.featured,trending:!1,licenses:{basic:{type:"basic",price:n.basicPrice,features:["MP3 Download","Non-exclusive rights","Personal use"],downloads:1,streams:1e4,videos:1,distribution:!1},premium:{type:"premium",price:n.premiumPrice,features:["WAV + MP3","Non-exclusive rights","Commercial use","Unlimited streams"],downloads:5,streams:1e6,videos:5,distribution:!0},exclusive:{type:"exclusive",price:n.exclusivePrice,features:["All files","Exclusive rights","Full ownership","Unlimited use"],downloads:-1,streams:-1,videos:-1,distribution:!0}}};t?(await kn.updateBeat(t.id,v),alert("Beat updated successfully")):(await kn.createBeat(v),alert("Beat created successfully")),r()}catch(v){alert(v.message)}finally{c(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto",children:s.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full my-8",children:[s.jsx("div",{className:"p-6 border-b border-gray-700",children:s.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Edit Beat":"Add New Beat"})}),s.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),s.jsx("input",{type:"text",value:n.title,onChange:g=>i({...n,title:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Artist"}),s.jsx("input",{type:"text",value:n.artist,onChange:g=>i({...n,artist:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"BPM"}),s.jsx("input",{type:"number",value:n.bpm,onChange:g=>i({...n,bpm:parseInt(g.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key"}),s.jsx("input",{type:"text",value:n.key,onChange:g=>i({...n,key:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Genre"}),s.jsx("input",{type:"text",value:n.genre,onChange:g=>i({...n,genre:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),s.jsxs("select",{value:n.status,onChange:g=>i({...n,status:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"archived",children:"Archived"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Beat Type"}),s.jsxs("select",{value:n.beatType,onChange:g=>i({...n,beatType:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",children:[s.jsx("option",{value:"free",children:"Free"}),s.jsx("option",{value:"basic",children:"Basic"}),s.jsx("option",{value:"premium",children:"Premium"}),s.jsx("option",{value:"exclusive",children:"Exclusive"})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Classify this beat (free beats have no cost, basic/premium/exclusive are paid tiers)"})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),s.jsx("input",{type:"text",value:n.tags,onChange:g=>i({...n,tags:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"trap, dark, atmospheric"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Slug"}),s.jsx("input",{type:"text",value:n.slug,onChange:g=>i({...n,slug:g.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"auto-generated from title"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Basic Price ()"}),s.jsx("input",{type:"number",value:n.basicPrice,onChange:g=>i({...n,basicPrice:parseFloat(g.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Premium Price ()"}),s.jsx("input",{type:"number",value:n.premiumPrice,onChange:g=>i({...n,premiumPrice:parseFloat(g.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Exclusive Price ()"}),s.jsx("input",{type:"number",value:n.exclusivePrice,onChange:g=>i({...n,exclusivePrice:parseFloat(g.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white"})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:n.featured,onChange:g=>i({...n,featured:g.target.checked}),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm text-gray-300",children:"Featured Beat"})]})}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:l||a,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50",children:l?"Saving...":t?"Update Beat":"Create Beat"})]})]})]})})},O3=()=>{const{orders:t,loading:e}=h_(),[r,n]=w.useState("all"),i=r==="all"?t:t.filter(l=>l.status===r),a=async(l,c)=>{try{await Xr.updateOrderStatus(l,c),alert("Order status updated")}catch(d){alert(d.message)}},o=l=>({pending:"bg-yellow-500/20 text-yellow-400",processing:"bg-blue-500/20 text-blue-400",completed:"bg-green-500/20 text-green-400",failed:"bg-red-500/20 text-red-400",refunded:"bg-gray-500/20 text-gray-400",cancelled:"bg-gray-500/20 text-gray-400"})[l];return s.jsx(nn,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Orders Management"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage and process customer orders"})]})}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("select",{value:r,onChange:l=>n(l.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white",children:[s.jsx("option",{value:"all",children:"All Orders"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"processing",children:"Processing"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"failed",children:"Failed"}),s.jsx("option",{value:"refunded",children:"Refunded"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Orders"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:t.filter(l=>l.status==="pending").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(l=>l.status==="completed").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["",t.reduce((l,c)=>c.status==="completed"?l+c.total:l,0).toFixed(2)]})]})]}),s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Order Number"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Customer"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Items"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Total"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Date"}),s.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-700",children:e?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"Loading orders..."})}):i.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:"No orders found"})}):i.map(l=>s.jsxs("tr",{className:"hover:bg-gray-700/50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("p",{className:"font-medium text-white",children:l.orderNumber})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-white",children:l.customerName||"Guest"}),s.jsx("p",{className:"text-sm text-gray-400",children:l.customerEmail})]})}),s.jsxs("td",{className:"px-6 py-4 text-gray-300",children:[l.items.length," item(s)"]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("p",{className:"font-semibold text-white",children:["",l.total.toFixed(2)]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("select",{value:l.status,onChange:c=>a(l.id,c.target.value),className:`px-2 py-1 rounded text-sm ${o(l.status)} bg-transparent border-0`,children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"processing",children:"Processing"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"failed",children:"Failed"}),s.jsx("option",{value:"refunded",children:"Refunded"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),s.jsx("td",{className:"px-6 py-4 text-gray-300 text-sm",children:l.createdAt&&new Date(l.createdAt.seconds*1e3).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex items-center justify-end space-x-2",children:s.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-400 transition-colors",title:"View details",children:s.jsx(Qf,{size:18})})})})]},l.id))})]})})})]})})},m_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InRlY2huaWVrQGpvbm5hcmluY29uLm5sIiwiZXhwIjo0OTI0NDk3Nzc0LCJqdGkiOiIwZjY2YjZmNS01OTg2LTRmMzYtYTVlMy01Yzc4MTFhYjJiOGUifQ.o_SjqVg7uIvu5TL9hsjkPD6_Io5CODTMi9XY7kM-f-0",p_="/api/upload-post",V3="jonnarincon",Eh=async(t,e)=>{const r=await fetch(`${p_}${t}`,{...e,headers:{Authorization:`Apikey ${m_}`,...(e==null?void 0:e.headers)||{}}});if(!r.ok){const n=await r.json().catch(()=>({message:"Request failed"}));throw new Error(n.message||`API error ${r.status}`)}return r.json()},F3=()=>{const[t,e]=w.useState("calendar"),[r,n]=w.useState(new Date),[i,a]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState(!0),[h,m]=w.useState(!1),[p,y]=w.useState(null),[S,b]=w.useState(!1),N=w.useCallback(async()=>{try{b(!0);const k=await Eh("/uploadposts/schedule").catch(()=>({scheduled:[]})),A=(k.scheduled||k.data||[]).map(B=>({id:B.id||B.job_id||B._id||String(Math.random()),jobId:B.job_id||B.id||B._id,title:B.title||B.caption||"Untitled",platforms:B.platforms||[],scheduledDate:B.scheduled_date||B.scheduledDate||B.date||"",status:B.status||"scheduled",mediaType:B.media_type||B.type||"photo",mediaUrl:B.media_url||B.file_url||"",thumbnailUrl:B.thumbnail_url||B.cover_url||""}));a(A);const C=await Eh("/uploadposts/history?limit=50").catch(()=>({uploads:[]})),oe=(C.uploads||C.data||[]).map(B=>({id:B.id||B.request_id||B._id||String(Math.random()),title:B.title||B.caption||"Untitled",platforms:B.platforms||[],createdAt:B.created_at||B.createdAt||B.date||"",status:B.status||"completed",mediaType:B.media_type||B.type||"photo",request_id:B.request_id}));l(oe)}catch(k){console.error("Failed to fetch social media data:",k)}finally{d(!1),b(!1)}},[]);w.useEffect(()=>{N()},[N]);const g=()=>{const k=r.getFullYear(),A=r.getMonth(),C=new Date(k,A,1),oe=new Date(k,A+1,0),B=C.getDay()===0?6:C.getDay()-1,Ie=new Date;Ie.setHours(0,0,0,0);const Ce=[];for(let K=B-1;K>=0;K--){const X=new Date(k,A,-K);Ce.push({date:X,isCurrentMonth:!1,isToday:!1,posts:[]})}for(let K=1;K<=oe.getDate();K++){const X=new Date(k,A,K),be=X.toISOString().split("T")[0],Q=X.getTime()===Ie.getTime(),se=[];i.forEach(xe=>{xe.scheduledDate&&xe.scheduledDate.startsWith(be)&&se.push(xe)}),o.forEach(xe=>{xe.createdAt&&xe.createdAt.startsWith(be)&&se.push(xe)}),Ce.push({date:X,isCurrentMonth:!0,isToday:Q,posts:se})}const q=42-Ce.length;for(let K=1;K<=q;K++){const X=new Date(k,A+1,K);Ce.push({date:X,isCurrentMonth:!1,isToday:!1,posts:[]})}return Ce},v=()=>n(new Date(r.getFullYear(),r.getMonth()-1,1)),j=()=>n(new Date(r.getFullYear(),r.getMonth()+1,1)),P=()=>n(new Date),M=async k=>{if(confirm("Cancel this scheduled post?"))try{await Eh(`/uploadposts/schedule/${k}`,{method:"DELETE"}),await N()}catch(A){alert("Failed to cancel: "+A.message)}},D=k=>{k.isCurrentMonth&&(y(k.date),m(!0))},T=r.toLocaleDateString("en-US",{month:"long",year:"numeric"}),_=g(),I=k=>{switch(k.toLowerCase()){case"instagram":return s.jsx(gn,{size:14,className:"text-pink-400"});case"youtube":return s.jsx(ei,{size:14,className:"text-red-400"});default:return s.jsx(er,{size:14,className:"text-gray-400"})}},R=k=>{switch(k){case"completed":case"published":return s.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-400",children:[s.jsx(_h,{size:12})," Published"]});case"scheduled":case"pending":return s.jsxs("span",{className:"flex items-center gap-1 text-xs text-blue-400",children:[s.jsx(_r,{size:12})," Scheduled"]});case"failed":case"error":return s.jsxs("span",{className:"flex items-center gap-1 text-xs text-red-400",children:[s.jsx(qP,{size:12})," Failed"]});default:return s.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-400",children:[s.jsx(_r,{size:12})," ",k]})}};return s.jsxs(nn,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Social Media Planner"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Schedule and manage posts for Instagram & YouTube"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:N,disabled:S,className:"p-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-400 hover:text-white transition disabled:opacity-50",title:"Refresh",children:s.jsx(Wm,{size:20,className:S?"animate-spin":""})}),s.jsxs("button",{onClick:()=>{y(null),m(!0)},className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all flex items-center space-x-2",children:[s.jsx(Zf,{size:20}),s.jsx("span",{children:"Create Post"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Scheduled"}),s.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:i.length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Published"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:o.filter(k=>k.status==="completed"||k.status==="published").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 flex items-center gap-3",children:[s.jsx(gn,{size:24,className:"text-pink-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Instagram"}),s.jsx("p",{className:"text-white font-bold",children:"Connected"})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4 flex items-center gap-3",children:[s.jsx(ei,{size:24,className:"text-red-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"YouTube"}),s.jsx("p",{className:"text-white font-bold",children:"Connected"})]})]})]}),s.jsxs("div",{className:"flex gap-2 border-b border-gray-700",children:[s.jsxs("button",{onClick:()=>e("calendar"),className:`px-4 py-2 font-medium transition flex items-center gap-2 ${t==="calendar"?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-gray-300"}`,children:[s.jsx(Hm,{size:18})," Calendar"]}),s.jsxs("button",{onClick:()=>e("scheduled"),className:`px-4 py-2 font-medium transition flex items-center gap-2 ${t==="scheduled"?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-gray-300"}`,children:[s.jsx(_r,{size:18})," Scheduled (",i.length,")"]}),s.jsxs("button",{onClick:()=>e("history"),className:`px-4 py-2 font-medium transition flex items-center gap-2 ${t==="history"?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-gray-300"}`,children:[s.jsx(_h,{size:18})," History (",o.length,")"]})]}),t==="calendar"&&s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[s.jsx("button",{onClick:v,className:"p-2 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white transition",children:s.jsx(n_,{size:20})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:T}),s.jsx("button",{onClick:P,className:"text-xs px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition",children:"Today"})]}),s.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-700 rounded-lg text-gray-400 hover:text-white transition",children:s.jsx(s_,{size:20})})]}),s.jsx("div",{className:"grid grid-cols-7 bg-gray-700/50",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(k=>s.jsx("div",{className:"p-2 text-center text-xs font-semibold text-gray-400 uppercase",children:k},k))}),s.jsx("div",{className:"grid grid-cols-7",children:_.map((k,A)=>s.jsxs("div",{onClick:()=>D(k),className:`min-h-[100px] border-t border-r border-gray-700/50 p-1.5 transition cursor-pointer ${k.isCurrentMonth?k.isToday?"bg-purple-900/20 border-l-2 border-l-purple-500":"hover:bg-gray-700/30":"bg-gray-900/30 opacity-40"}`,children:[s.jsx("div",{className:`text-xs font-medium mb-1 ${k.isToday?"text-purple-400 font-bold":k.isCurrentMonth?"text-gray-300":"text-gray-600"}`,children:k.date.getDate()}),s.jsxs("div",{className:"space-y-0.5",children:[k.posts.slice(0,3).map((C,oe)=>{var Ie;const B="scheduledDate"in C;return s.jsx("div",{className:`text-[10px] px-1 py-0.5 rounded truncate ${B?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-green-500/20 text-green-300 border border-green-500/30"}`,title:C.title,children:s.jsxs("div",{className:"flex items-center gap-0.5",children:[(Ie=C.platforms)==null?void 0:Ie.slice(0,2).map((Ce,q)=>s.jsx("span",{children:I(typeof Ce=="string"?Ce:Ce.name)},q)),s.jsx("span",{className:"truncate",children:C.title})]})},oe)}),k.posts.length>3&&s.jsxs("div",{className:"text-[10px] text-gray-500 text-center",children:["+",k.posts.length-3," more"]})]})]},A))})]}),t==="scheduled"&&s.jsx("div",{className:"space-y-3",children:c?s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading scheduled posts..."}):i.length===0?s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(_r,{size:48,className:"mx-auto mb-4 text-gray-600"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No scheduled posts"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Create your first scheduled post to get started"}),s.jsx("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Schedule Post"})]}):i.map(k=>s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-700 flex items-center justify-center flex-shrink-0",children:k.mediaType==="video"?s.jsx(a_,{size:20,className:"text-red-400"}):k.mediaType==="photo"?s.jsx(ra,{size:20,className:"text-blue-400"}):s.jsx(u_,{size:20,className:"text-green-400"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"font-bold text-white truncate",children:k.title}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[s.jsx("div",{className:"flex items-center gap-1",children:k.platforms.map((A,C)=>s.jsx("span",{children:I(A)},C))}),s.jsxs("span",{className:"text-xs text-gray-400",children:[s.jsx(Hm,{size:12,className:"inline mr-1"}),new Date(k.scheduledDate).toLocaleString()]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[R(k.status),k.jobId&&s.jsx("button",{onClick:()=>M(k.jobId),className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Cancel scheduled post",children:s.jsx(rg,{size:18})})]})]})},k.id))}),t==="history"&&s.jsx("div",{className:"space-y-3",children:c?s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading history..."}):o.length===0?s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(_h,{size:48,className:"mx-auto mb-4 text-gray-600"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No posts yet"}),s.jsx("p",{className:"text-gray-400",children:"Your published posts will appear here"})]}):o.map(k=>s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"font-bold text-white truncate",children:k.title}),s.jsxs("div",{className:"flex items-center gap-3 mt-1 flex-wrap",children:[s.jsx("div",{className:"flex items-center gap-1",children:k.platforms.map((A,C)=>{const oe=typeof A=="string"?A:A.name,B=typeof A=="string"?void 0:A.url;return s.jsxs("span",{className:"flex items-center gap-0.5",children:[I(oe),B&&s.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-purple-400 hover:underline",children:"View"})]},C)})}),s.jsx("span",{className:"text-xs text-gray-400",children:k.createdAt?new Date(k.createdAt).toLocaleString():"N/A"})]})]})}),s.jsx("div",{className:"flex-shrink-0",children:R(k.status)})]})},k.id))})]}),h&&s.jsx(U3,{onClose:()=>{m(!1),y(null)},onSave:()=>{m(!1),y(null),N()},preselectedDate:p})]})},U3=({onClose:t,onSave:e,preselectedDate:r})=>{const[n,i]=w.useState("photo"),[a,o]=w.useState(["instagram"]),[l,c]=w.useState(""),[d,h]=w.useState(""),[m,p]=w.useState(null),[y,S]=w.useState(""),[b,N]=w.useState(""),[g,v]=w.useState(!!r),[j,P]=w.useState(r?`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}T12:00`:""),[M,D]=w.useState(!1),[T,_]=w.useState(""),[I,R]=w.useState("IMAGE"),[k,A]=w.useState("public"),[C,oe]=w.useState(""),[B,Ie]=w.useState("22"),Ce=Q=>{o(se=>se.includes(Q)?se.filter(xe=>xe!==Q):[...se,Q])},q=Q=>{var xe;const se=(xe=Q.target.files)==null?void 0:xe[0];se&&(p(se),S(URL.createObjectURL(se)),se.type.startsWith("video/")?i("video"):se.type.startsWith("image/")&&i("photo"))},K=async Q=>{if(Q.preventDefault(),!!l.trim()){if(n!=="text"&&!m&&!b){alert("Please upload a file or provide a media URL");return}if(a.length===0){alert("Please select at least one platform");return}D(!0),_("Preparing upload...");try{const se=new FormData;if(se.append("user",V3),se.append("title",l),a.forEach(xt=>se.append("platform[]",xt)),d&&se.append("description",d),g&&j){const xt=new Date(j).toISOString();se.append("scheduled_date",xt),se.append("timezone",Intl.DateTimeFormat().resolvedOptions().timeZone)}a.includes("instagram")&&(n==="video"?se.append("media_type",I==="IMAGE"?"REELS":I):n==="photo"&&se.append("media_type",I==="REELS"?"IMAGE":I)),a.includes("youtube")&&(se.append("privacyStatus",k),C&&C.split(",").map(xt=>xt.trim()).filter(Boolean).forEach(xt=>se.append("tags[]",xt)),se.append("categoryId",B),d&&se.append("youtube_description",d));let xe="/upload";n==="photo"?(xe="/upload_photos",m?se.append("photos[]",m):b&&se.append("photos[]",b)):n==="video"?(xe="/upload",m?se.append("video",m):b&&se.append("video",b)):xe="/upload_text",_("Uploading to platforms...");const xr=await fetch(`${p_}${xe}`,{method:"POST",headers:{Authorization:`Apikey ${m_}`},body:se}),It=await xr.json();if(!xr.ok)throw new Error(It.message||`Upload failed (${xr.status})`);if(It.success===!1)throw new Error(It.message||"Upload failed");_(""),alert(g?"Post scheduled successfully!":"Post published successfully!"),e()}catch(se){console.error("Upload failed:",se),_(""),alert("Upload failed: "+se.message)}finally{D(!1)}}},X=n==="text"?[{id:"instagram",label:"Instagram",icon:gn,color:"pink"}]:[{id:"instagram",label:"Instagram",icon:gn,color:"pink"},{id:"youtube",label:"YouTube",icon:ei,color:"red"}],be=n==="photo"?X.filter(Q=>Q.id!=="youtube"):X;return s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 overflow-y-auto",children:s.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full my-8",children:[s.jsxs("div",{className:"p-6 border-b border-gray-700 flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:g?"Schedule Post":"Create Post"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition",children:s.jsx(Pt,{size:24})})]}),s.jsxs("form",{onSubmit:K,className:"p-6 space-y-5 max-h-[calc(100vh-200px)] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Content Type"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>i("photo"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${n==="photo"?"bg-blue-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:[s.jsx(ra,{size:18})," Photo"]}),s.jsxs("button",{type:"button",onClick:()=>i("video"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${n==="video"?"bg-red-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:[s.jsx(a_,{size:18})," Video"]}),s.jsxs("button",{type:"button",onClick:()=>i("text"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${n==="text"?"bg-green-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,children:[s.jsx(u_,{size:18})," Text"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Post to Platforms"}),s.jsx("div",{className:"flex gap-2",children:be.map(Q=>{const se=Q.icon,xe=a.includes(Q.id);return s.jsxs("button",{type:"button",onClick:()=>Ce(Q.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition border ${xe?`bg-${Q.color}-600/20 border-${Q.color}-500 text-${Q.color}-400`:"bg-gray-700 border-gray-600 text-gray-400 hover:bg-gray-600"}`,style:xe?{backgroundColor:Q.color==="pink"?"rgba(236,72,153,0.2)":"rgba(239,68,68,0.2)",borderColor:Q.color==="pink"?"#ec4899":"#ef4444",color:Q.color==="pink"?"#f472b6":"#f87171"}:{},children:[s.jsx(se,{size:18}),Q.label]},Q.id)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Caption / Title *"}),s.jsx("textarea",{value:l,onChange:Q=>c(Q.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500 resize-none",rows:3,placeholder:"Write your caption or title...",required:!0}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.length," characters"]})]}),a.includes("youtube")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"YouTube Description"}),s.jsx("textarea",{value:d,onChange:Q=>h(Q.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500 resize-none",rows:3,placeholder:"YouTube video description..."})]}),n!=="text"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:n==="video"?"Upload Video":"Upload Photo"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center justify-center gap-2 px-4 py-4 bg-gray-700 border-2 border-dashed border-gray-600 rounded-lg text-gray-400 hover:border-purple-500 hover:text-purple-400 cursor-pointer transition",children:[s.jsx(XP,{size:20}),s.jsx("span",{children:m?m.name:`Choose ${n==="video"?"video":"image"} file`}),s.jsx("input",{type:"file",accept:n==="video"?"video/*":"image/*",onChange:q,className:"hidden"})]}),s.jsx("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:s.jsx("span",{children:"or"})}),s.jsx("input",{type:"url",value:b,onChange:Q=>N(Q.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",placeholder:"Paste media URL..."}),y&&s.jsx("div",{className:"mt-2",children:n==="video"?s.jsx("video",{src:y,controls:!0,className:"w-full h-48 rounded-lg object-cover"}):s.jsx("img",{src:y,alt:"Preview",className:"w-full h-48 rounded-lg object-cover"})})]})]}),a.includes("instagram")&&n!=="text"&&s.jsxs("div",{className:"bg-gradient-to-r from-pink-900/20 to-purple-900/20 border border-pink-700/30 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-pink-400 flex items-center gap-2 mb-3",children:[s.jsx(gn,{size:16})," Instagram Options"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Media Type"}),s.jsx("select",{value:I,onChange:Q=>R(Q.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-pink-500",children:n==="video"?s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"REELS",children:"Reels"}),s.jsx("option",{value:"STORIES",children:"Story"})]}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"IMAGE",children:"Feed Post"}),s.jsx("option",{value:"STORIES",children:"Story"})]})})]})]}),a.includes("youtube")&&n==="video"&&s.jsxs("div",{className:"bg-red-900/20 border border-red-700/30 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-red-400 flex items-center gap-2 mb-3",children:[s.jsx(ei,{size:16})," YouTube Options"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Privacy"}),s.jsxs("select",{value:k,onChange:Q=>A(Q.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-red-500",children:[s.jsx("option",{value:"public",children:"Public"}),s.jsx("option",{value:"unlisted",children:"Unlisted"}),s.jsx("option",{value:"private",children:"Private"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Category"}),s.jsxs("select",{value:B,onChange:Q=>Ie(Q.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-red-500",children:[s.jsx("option",{value:"10",children:"Music"}),s.jsx("option",{value:"22",children:"People & Blogs"}),s.jsx("option",{value:"24",children:"Entertainment"}),s.jsx("option",{value:"26",children:"Howto & Style"}),s.jsx("option",{value:"20",children:"Gaming"}),s.jsx("option",{value:"1",children:"Film & Animation"})]})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Tags (comma separated)"}),s.jsx("input",{type:"text",value:C,onChange:Q=>oe(Q.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:border-red-500",placeholder:"music, beats, producer"})]})]}),s.jsxs("div",{className:"bg-gray-900/50 border border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[s.jsx(_r,{size:16})," Schedule Post"]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:g,onChange:Q=>v(Q.target.checked),className:"w-4 h-4 rounded"}),s.jsx("span",{className:"text-sm text-gray-300",children:"Schedule for later"})]})]}),g&&s.jsx("input",{type:"datetime-local",value:j,onChange:Q=>P(Q.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-purple-500",required:g})]}),T&&s.jsxs("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-3 flex items-center gap-2",children:[s.jsx(Wm,{size:16,className:"animate-spin text-blue-400"}),s.jsx("span",{className:"text-blue-300 text-sm",children:T})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 text-gray-400 hover:text-white transition",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:M||!l.trim()||a.length===0,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:M?s.jsxs(s.Fragment,{children:[s.jsx(Wm,{size:18,className:"animate-spin"})," Uploading..."]}):g?s.jsxs(s.Fragment,{children:[s.jsx(_r,{size:18})," Schedule Post"]}):s.jsxs(s.Fragment,{children:[s.jsx(er,{size:18})," Publish Now"]})})]})]})]})})},z3=t=>{const[e,r]=w.useState([]),[n,i]=w.useState(!0);return w.useEffect(()=>{const a=OP.subscribeToContent(o=>{r(o),i(!1)},t);return()=>a()},[t==null?void 0:t.type,t==null?void 0:t.status,t==null?void 0:t.featured]),{content:e,loading:n}},B3=()=>{const{beats:t}=pd(),{orders:e,statistics:r}=h_(),{content:n}=z3(),{collaborations:i,statistics:a}=sg(),[o,l]=w.useState("30d"),c=(r==null?void 0:r.totalRevenue)||0,d=e.length,h=t.length,m=n.reduce((D,T)=>D+T.views,0),p=t.reduce((D,T)=>D+T.plays,0),y=t.reduce((D,T)=>D+T.downloads,0),S=[...t].sort((D,T)=>T.plays-D.plays).slice(0,5),b=[...n].sort((D,T)=>T.views-D.views).slice(0,5),N=[...e].sort((D,T)=>{var R,k,A,C;const _=((k=(R=D.createdAt)==null?void 0:R.toDate)==null?void 0:k.call(R))||new Date(0);return(((C=(A=T.createdAt)==null?void 0:A.toDate)==null?void 0:C.call(A))||new Date(0)).getTime()-_.getTime()}).slice(0,5),g=12.5,v=t.filter(D=>D.status==="published").length,j=t.filter(D=>D.featured).length,P=n.filter(D=>D.status==="published").length,M=i.filter(D=>D.status==="active").length;return s.jsx(nn,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Overview of your platform performance"})]}),s.jsx("div",{children:s.jsxs("select",{value:o,onChange:D=>l(D.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:border-purple-500",children:[s.jsx("option",{value:"7d",children:"Last 7 days"}),s.jsx("option",{value:"30d",children:"Last 30 days"}),s.jsx("option",{value:"90d",children:"Last 90 days"}),s.jsx("option",{value:"all",children:"All time"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),s.jsx(ta,{className:"text-green-400",size:20})]}),s.jsxs("p",{className:"text-3xl font-bold text-white",children:["",c.toLocaleString()]}),s.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[s.jsx(fl,{className:"text-green-400 mr-1",size:16}),s.jsxs("span",{className:"text-green-400",children:["+",g,"%"]}),s.jsx("span",{className:"text-gray-500 ml-1",children:"vs last period"})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Orders"}),s.jsx(ur,{className:"text-blue-400",size:20})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:d}),s.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[e.filter(D=>D.status==="completed").length," completed"]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Beats"}),s.jsx(Le,{className:"text-purple-400",size:20})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:h}),s.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[v," published  ",j," featured"]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Content Views"}),s.jsx(Qf,{className:"text-pink-400",size:20})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:m.toLocaleString()}),s.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:[P," published articles"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Beat Performance"}),s.jsx(Le,{className:"text-purple-400",size:20})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Total Plays"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:p.toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Total Downloads"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:y.toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Avg Plays per Beat"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:h>0?Math.round(p/h):0})]})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Content Engagement"}),s.jsx(GP,{className:"text-blue-400",size:20})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Total Articles"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:n.length})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Total Likes"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:n.reduce((D,T)=>D+T.likes,0).toLocaleString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Total Shares"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:n.reduce((D,T)=>D+T.shares,0).toLocaleString()})]})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Collaborations"}),s.jsx(pr,{className:"text-green-400",size:20})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Total Collaborations"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:i.length})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Active"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:M})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-white",children:["",((a==null?void 0:a.totalRevenue)||0).toLocaleString()]})]})]})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Performing Beats"}),s.jsx("div",{className:"space-y-3",children:S.length===0?s.jsx("p",{className:"text-gray-400 text-center py-4",children:"No beats available"}):S.map((D,T)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg hover:bg-gray-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("span",{className:"text-2xl font-bold text-gray-500",children:["#",T+1]}),s.jsx("img",{src:D.artworkUrl,alt:D.title,className:"w-12 h-12 rounded object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:D.title}),s.jsx("p",{className:"text-sm text-gray-400",children:D.artist})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-white",children:[D.plays.toLocaleString()," plays"]}),s.jsxs("p",{className:"text-sm text-gray-400",children:[D.downloads," downloads"]})]})]},D.id))})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Content by Views"}),s.jsx("div",{className:"space-y-3",children:b.length===0?s.jsx("p",{className:"text-gray-400 text-center py-4",children:"No content available"}):b.map((D,T)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[s.jsxs("span",{className:"text-lg font-bold text-gray-500",children:["#",T+1]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"font-medium text-white truncate",children:D.title}),s.jsx("p",{className:"text-xs text-gray-400 capitalize",children:D.type})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold text-white",children:D.views.toLocaleString()}),s.jsx("p",{className:"text-xs text-gray-400",children:"views"})]})]},D.id))})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Orders"}),s.jsx("div",{className:"space-y-3",children:N.length===0?s.jsx("p",{className:"text-gray-400 text-center py-4",children:"No orders yet"}):N.map(D=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"font-medium text-white",children:["Order #",D.id.slice(0,8)]}),s.jsx("p",{className:"text-sm text-gray-400",children:D.customerEmail})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-white",children:["",D.totalAmount]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded ${D.status==="completed"?"bg-green-500/20 text-green-400":D.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:D.status})]})]},D.id))})]})]})]})})},$3=()=>{const{collaborations:t,loading:e}=sg(),{user:r}=ke(),[n,i]=w.useState(null),[a,o]=w.useState({}),[l,c]=w.useState(""),d=m=>({inquiry:"bg-gray-500/20 text-gray-400",negotiating:"bg-yellow-500/20 text-yellow-400",agreed:"bg-blue-500/20 text-blue-400",contract_sent:"bg-purple-500/20 text-purple-400",signed:"bg-green-500/20 text-green-400",in_progress:"bg-cyan-500/20 text-cyan-400",completed:"bg-green-600/20 text-green-500",cancelled:"bg-red-500/20 text-red-400"})[m];w.useEffect(()=>{if(!n)return;const m=ee(z,"collaborationMessages"),p=je(m,ae("collaborationId","==",n),Te("createdAt","asc")),y=gt(p,S=>{const b=[];S.forEach(N=>{b.push({id:N.id,...N.data()})}),o(N=>({...N,[n]:b}))});return()=>y()},[n]);const h=async m=>{if(!(!l.trim()||!r))try{await ct(ee(z,"collaborationMessages"),{collaborationId:m,senderId:r.uid,senderName:r.displayName||"Admin",senderEmail:r.email,message:l.trim(),createdAt:ue()}),c("")}catch(p){console.error("Failed to send message:",p)}};return s.jsx(nn,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Collaborations & Contracts"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage partnerships and deals"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Active"}),s.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:t.filter(m=>["agreed","contract_sent","signed","in_progress"].includes(m.status)).length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(m=>m.status==="completed").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["",t.reduce((m,p)=>m+p.paidAmount,0).toFixed(2)]})]})]}),s.jsx("div",{className:"space-y-4",children:e?s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading..."}):t.length===0?s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"No collaborations yet"}):t.map(m=>{var p;return s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[s.jsx("div",{onClick:()=>i(n===m.id?null:m.id),className:"p-4 cursor-pointer hover:bg-gray-750 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-bold text-white truncate",children:m.title}),s.jsx("span",{className:`px-2 py-1 rounded text-xs flex-shrink-0 ${d(m.status)}`,children:m.status.replace("_"," ")})]}),s.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[s.jsx("div",{className:"text-sm text-gray-400 hidden md:block",children:s.jsx("span",{className:"text-white font-medium",children:m.clientName})}),s.jsx("button",{className:"text-gray-400 hover:text-white transition",children:n===m.id?s.jsx(hd,{size:20}):s.jsx(dd,{size:20})})]})]})}),n===m.id&&s.jsxs("div",{className:"border-t border-gray-700 p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Client:"}),s.jsx("p",{className:"text-white font-medium",children:m.clientName}),s.jsx("p",{className:"text-gray-400 text-xs",children:m.clientEmail})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Type:"}),s.jsx("p",{className:"text-white font-medium capitalize",children:m.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Budget:"}),s.jsx("p",{className:"text-white font-medium",children:m.budget?`${m.budget.toFixed(2)}`:"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Payment:"}),s.jsxs("p",{className:`font-medium ${m.paymentStatus==="paid"?"text-green-400":m.paymentStatus==="partial"?"text-yellow-400":"text-gray-400"}`,children:["",m.paidAmount.toFixed(2)," (",m.paymentStatus,")"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-200",children:m.description})]}),s.jsxs("div",{className:"bg-gray-900 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-4",children:[s.jsx(Ke,{size:20,className:"text-blue-400"}),"Messages"]}),s.jsx("div",{className:"bg-gray-800 rounded-lg p-4 max-h-80 overflow-y-auto space-y-3 mb-4",children:!a[m.id]||a[m.id].length===0?s.jsxs("div",{className:"text-center text-gray-400 py-8",children:[s.jsx(Ke,{size:48,className:"mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No messages yet. Start the conversation!"})]}):(p=a[m.id])==null?void 0:p.map(y=>{var S,b,N;return s.jsxs("div",{className:`p-3 rounded-lg ${y.senderId===(r==null?void 0:r.uid)?"bg-purple-900/30 ml-8":"bg-gray-700 mr-8"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:"font-semibold text-sm text-white",children:y.senderId===(r==null?void 0:r.uid)?"You (Admin)":y.senderName}),s.jsx("span",{className:"text-xs text-gray-400",children:((N=(b=(S=y.createdAt)==null?void 0:S.toDate)==null?void 0:b.call(S))==null?void 0:N.toLocaleString())||"Just now"})]}),s.jsx("p",{className:"text-gray-300 text-sm",children:y.message})]},y.id)})}),s.jsxs("form",{onSubmit:y=>{y.preventDefault(),h(m.id)},className:"flex gap-2",children:[s.jsx("input",{type:"text",value:l,onChange:y=>c(y.target.value),placeholder:"Type your message to the artist...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-500"}),s.jsxs("button",{type:"submit",disabled:!l.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(er,{size:18}),"Send"]})]})]})]})]},m.id)})})]})})},q3=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(!0),[i,a]=w.useState("pending");w.useEffect(()=>{const h=ee(z,"collabRequests"),m=je(h,Te("createdAt","desc")),p=gt(m,y=>{const S=[];y.forEach(b=>{S.push({id:b.id,...b.data()})}),e(S),n(!1)});return()=>p()},[]);const o=async h=>{try{await ct(ee(z,"collaborations"),{clientName:h.artistName,clientEmail:h.artistEmail,assignedTo:h.artistId,title:h.title,type:h.type,description:h.description,budget:h.budget||0,paidAmount:0,paymentStatus:"unpaid",status:"inquiry",startDate:h.preferredStartDate?new Date(h.preferredStartDate):null,deadline:null,endDate:null,contractPDF:null,attachments:[],notes:h.message||"",createdAt:ue(),updatedAt:ue()}),await Ve(ce(z,"collabRequests",h.id),{status:"approved"}),alert(" Request approved and collaboration created!")}catch(m){console.error("Failed to approve request:",m),alert(" Failed to approve request")}},l=async h=>{if(confirm("Are you sure you want to reject this request?"))try{await Ve(ce(z,"collabRequests",h),{status:"rejected"}),alert(" Request rejected")}catch(m){console.error("Failed to reject request:",m),alert(" Failed to reject request")}},c=async h=>{if(confirm("Are you sure you want to permanently delete this request?"))try{await pl(ce(z,"collabRequests",h)),alert(" Request deleted")}catch(m){console.error("Failed to delete request:",m),alert(" Failed to delete request")}},d=t.filter(h=>i==="all"?!0:h.status===i);return s.jsx(nn,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Collaboration Requests"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Review and approve collaboration requests from artists"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Requests"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),s.jsxs("div",{className:"bg-gray-800 border border-yellow-600 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:t.filter(h=>h.status==="pending").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-green-600 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Approved"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(h=>h.status==="approved").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-red-600 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Rejected"}),s.jsx("p",{className:"text-2xl font-bold text-red-400 mt-1",children:t.filter(h=>h.status==="rejected").length})]})]}),s.jsx("div",{className:"flex gap-4 border-b border-gray-700",children:["all","pending","approved","rejected"].map(h=>s.jsxs("button",{onClick:()=>a(h),className:`px-4 py-2 capitalize transition ${i===h?"border-b-2 border-purple-500 text-white":"text-gray-400 hover:text-white"}`,children:[h,s.jsxs("span",{className:"ml-2 text-sm",children:["(",h==="all"?t.length:t.filter(m=>m.status===h).length,")"]})]},h))}),s.jsx("div",{className:"space-y-4",children:r?s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading requests..."}):d.length===0?s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(pr,{size:48,className:"mx-auto mb-4 text-gray-600"}),s.jsxs("p",{className:"text-gray-400",children:["No ",i!=="all"?i:""," requests found"]})]}):d.map(h=>{var m,p,y;return s.jsxs("div",{className:`bg-gray-800 border rounded-xl p-6 ${h.status==="pending"?"border-yellow-600":h.status==="approved"?"border-green-600":"border-red-600"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:h.title}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h.status==="pending"?"bg-yellow-900 text-yellow-300":h.status==="approved"?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:[h.status==="pending"&&s.jsx(_r,{size:12,className:"inline mr-1"}),h.status]})]}),s.jsxs("div",{className:"text-sm text-gray-400",children:[s.jsx("p",{className:"font-medium text-white",children:h.artistName}),s.jsx("p",{children:h.artistEmail}),s.jsxs("p",{className:"text-xs mt-1",children:["Submitted: ",((y=(p=(m=h.createdAt)==null?void 0:m.toDate)==null?void 0:p.call(m))==null?void 0:y.toLocaleString())||"Unknown"]})]})]}),h.status==="pending"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>o(h),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-white font-medium transition flex items-center gap-2",children:[s.jsx(r_,{size:18}),"Approve"]}),s.jsxs("button",{onClick:()=>l(h.id),className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-white font-medium transition flex items-center gap-2",children:[s.jsx(Pt,{size:18}),"Reject"]})]}),h.status!=="pending"&&s.jsx("button",{onClick:()=>c(h.id),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-white text-sm transition",children:"Delete"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 p-4 bg-gray-900 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Type:"}),s.jsx("p",{className:"text-white font-medium capitalize",children:h.type.replace("_"," ")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Budget:"}),s.jsx("p",{className:"text-white font-medium",children:h.budget?`${h.budget.toFixed(2)}`:"Not specified"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Preferred Start:"}),s.jsx("p",{className:"text-white font-medium",children:h.preferredStartDate?new Date(h.preferredStartDate).toLocaleDateString():"Flexible"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Artist ID:"}),s.jsxs("p",{className:"text-white font-mono text-xs",children:[h.artistId.slice(0,8),"..."]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-200 bg-gray-900 p-4 rounded-lg",children:h.description})]}),h.message&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Additional Message"}),s.jsx("p",{className:"text-gray-200 bg-gray-900 p-4 rounded-lg",children:h.message})]})]},h.id)})})]})})},H3=()=>{const[t,e]=w.useState([]),[r,n]=w.useState(!0),[i,a]=w.useState("pending");w.useEffect(()=>{const h=ee(z,"artistRoleRequests"),m=je(h,Te("createdAt","desc")),p=gt(m,y=>{const S=[];y.forEach(b=>{S.push({id:b.id,...b.data()})}),e(S),n(!1)});return()=>p()},[]);const o=async h=>{if(confirm(`Approve ${h.artistName} as an artist?`))try{await Ve(ce(z,"artistRoleRequests",h.id),{status:"approved"}),await Ve(ce(z,"users",h.userId),{role:"artist",artistName:h.artistName,region:h.region,city:h.city,artistRoles:h.roles,instagram:h.instagram,spotify:h.spotify}),alert(" Request approved! User role has been updated to artist. User needs to log out and log back in to see changes.")}catch(m){console.error("Failed to approve request:",m),alert(" Failed to approve request. Make sure the user document exists in Firestore.")}},l=async h=>{if(confirm("Are you sure you want to reject this request?"))try{await Ve(ce(z,"artistRoleRequests",h),{status:"rejected"}),alert(" Request rejected")}catch(m){console.error("Failed to reject request:",m),alert(" Failed to reject request")}},c=async h=>{if(confirm("Are you sure you want to permanently delete this request?"))try{await pl(ce(z,"artistRoleRequests",h)),alert(" Request deleted")}catch(m){console.error("Failed to delete request:",m),alert(" Failed to delete request")}},d=t.filter(h=>i==="all"?!0:h.status===i);return s.jsx(nn,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Artist Role Requests"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Review and approve artist role applications"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Requests"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),s.jsxs("div",{className:"bg-gray-800 border border-yellow-600 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-1",children:t.filter(h=>h.status==="pending").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-green-600 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Approved"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(h=>h.status==="approved").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-red-600 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Rejected"}),s.jsx("p",{className:"text-2xl font-bold text-red-400 mt-1",children:t.filter(h=>h.status==="rejected").length})]})]}),s.jsx("div",{className:"flex gap-4 border-b border-gray-700",children:["all","pending","approved","rejected"].map(h=>s.jsxs("button",{onClick:()=>a(h),className:`px-4 py-2 capitalize transition ${i===h?"border-b-2 border-purple-500 text-white":"text-gray-400 hover:text-white"}`,children:[h,s.jsxs("span",{className:"ml-2 text-sm",children:["(",h==="all"?t.length:t.filter(m=>m.status===h).length,")"]})]},h))}),s.jsx("div",{className:"space-y-4",children:r?s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading requests..."}):d.length===0?s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center",children:[s.jsx(ng,{size:48,className:"mx-auto mb-4 text-gray-600"}),s.jsxs("p",{className:"text-gray-400",children:["No ",i!=="all"?i:""," requests found"]})]}):d.map(h=>{var m,p,y;return s.jsxs("div",{className:`bg-gray-800 border rounded-xl p-6 ${h.status==="pending"?"border-yellow-600":h.status==="approved"?"border-green-600":"border-red-600"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:h.artistName}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h.status==="pending"?"bg-yellow-900 text-yellow-300":h.status==="approved"?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:[h.status==="pending"&&s.jsx(_r,{size:12,className:"inline mr-1"}),h.status]})]}),s.jsxs("div",{className:"text-sm text-gray-400",children:[s.jsx("p",{className:"font-medium text-white",children:h.userName}),s.jsx("p",{children:h.userEmail}),s.jsxs("p",{className:"text-xs mt-1",children:["Submitted: ",((y=(p=(m=h.createdAt)==null?void 0:m.toDate)==null?void 0:p.call(m))==null?void 0:y.toLocaleString())||"Unknown"]})]})]}),h.status==="pending"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>o(h),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg text-white font-medium transition flex items-center gap-2",children:[s.jsx(r_,{size:18}),"Approve"]}),s.jsxs("button",{onClick:()=>l(h.id),className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg text-white font-medium transition flex items-center gap-2",children:[s.jsx(Pt,{size:18}),"Reject"]})]}),h.status!=="pending"&&s.jsx("button",{onClick:()=>c(h.id),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg text-white text-sm transition",children:"Delete"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 p-4 bg-gray-900 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Location:"}),s.jsxs("p",{className:"text-white font-medium",children:[h.city,", ",h.region]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Instagram:"}),s.jsx("p",{className:"text-white font-medium",children:h.instagram||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Spotify:"}),s.jsx("p",{className:"text-white font-medium truncate",title:h.spotify,children:h.spotify?"Yes":"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"User ID:"}),s.jsxs("p",{className:"text-white font-mono text-xs",children:[h.userId.slice(0,8),"..."]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Artist Roles"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:h.roles.map(S=>s.jsx("span",{className:"px-3 py-1 bg-purple-600/30 text-purple-300 rounded-full text-sm",children:S},S))})]}),h.additionalInfo&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Additional Information"}),s.jsx("p",{className:"text-gray-200 bg-gray-900 p-4 rounded-lg",children:h.additionalInfo})]})]},h.id)})})]})})},W3=()=>{const[t,e]=w.useState("shop"),[r,n]=w.useState(!0),[i,a]=w.useState({storeName:"",storeDescription:"",heroTitle:"",heroSubtitle:"",featuredEnabled:!0,trendingEnabled:!0,genres:[],currency:"EUR",taxRate:21,enableDownloads:!0,watermarkPreviews:!0}),[o,l]=w.useState({emailOrderNotifications:!0,emailCollaborationNotifications:!0,emailAnalyticsReports:!1,emailSecurityAlerts:!0,emailNewFeatures:!1,pushNotifications:!0}),[c,d]=w.useState({twoFactorEnabled:!1,passwordMinLength:12,sessionTimeout:30,enableAutoBackup:!0,backupFrequency:"daily"}),[h,m]=w.useState(null);w.useEffect(()=>{(async()=>{try{n(!0);const[g,v,j]=await Promise.all([hi.getShopSettings(),hi.getNotificationSettings(),hi.getSecuritySettings()]);g&&a(g),v&&l(v),j&&d(j)}catch(g){console.error("Failed to load settings:",g)}finally{n(!1)}})()},[]);const p=async()=>{try{await hi.saveShopSettings(i),m({type:"success",text:"Shop settings saved successfully!"}),setTimeout(()=>m(null),3e3)}catch(N){console.error("Failed to save shop settings:",N),m({type:"error",text:"Failed to save settings. Please try again."})}},y=async()=>{try{await hi.saveNotificationSettings(o),m({type:"success",text:"Notification settings saved successfully!"}),setTimeout(()=>m(null),3e3)}catch(N){console.error("Failed to save notification settings:",N),m({type:"error",text:"Failed to save settings. Please try again."})}},S=async()=>{try{await hi.saveSecuritySettings(c),m({type:"success",text:"Security settings saved successfully!"}),setTimeout(()=>m(null),3e3)}catch(N){console.error("Failed to save security settings:",N),m({type:"error",text:"Failed to save settings. Please try again."})}},b=[{id:"shop",name:"Shop Settings",icon:JP},{id:"notifications",name:"Notifications",icon:Xy},{id:"security",name:"Security",icon:Zy}];return s.jsx(nn,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Settings"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your platform configuration and preferences"})]}),r&&s.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:s.jsx("p",{className:"text-blue-300",children:"Loading settings..."})}),s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:s.jsx("div",{className:"flex gap-2 overflow-x-auto",children:b.map(N=>{const g=N.icon;return s.jsxs("button",{onClick:()=>e(N.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition ${t===N.id?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[s.jsx(g,{size:18}),s.jsx("span",{className:"font-medium",children:N.name})]},N.id)})})}),h&&s.jsx("div",{className:`p-4 rounded-lg border ${h.type==="success"?"bg-green-900/20 border-green-700 text-green-400":"bg-red-900/20 border-red-700 text-red-400"}`,children:h.text}),t==="shop"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Shop Features"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Featured Beats"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Show featured badge on selected beats"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.featuredEnabled,onChange:N=>a({...i,featuredEnabled:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Trending Beats"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Show trending badge on popular beats"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.trendingEnabled,onChange:N=>a({...i,trendingEnabled:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Enable Downloads"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Allow customers to download purchased beats"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.enableDownloads,onChange:N=>a({...i,enableDownloads:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Watermark Previews"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Add watermark to preview audio files"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.watermarkPreviews,onChange:N=>a({...i,watermarkPreviews:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Payment Settings"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),s.jsxs("select",{value:i.currency,onChange:N=>a({...i,currency:N.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500",children:[s.jsx("option",{value:"EUR",children:"EUR ()"}),s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"GBP",children:"GBP ()"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tax Rate (%)"}),s.jsx("input",{type:"number",value:i.taxRate,onChange:N=>a({...i,taxRate:parseFloat(N.target.value)}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-purple-500"})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:p,className:"flex items-center gap-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[s.jsx(Qr,{size:20}),"Save Shop Settings"]})})]}),t==="notifications"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(Xy,{size:24,className:"text-yellow-400"}),"Notification Settings"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Email on New Orders"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Get notified when customers place orders"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.emailOrderNotifications,onChange:N=>l({...o,emailOrderNotifications:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Email on Collaborations"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Get notified about collaboration requests"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.emailCollaborationNotifications,onChange:N=>l({...o,emailCollaborationNotifications:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Email Analytics Reports"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Receive weekly analytics reports"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.emailAnalyticsReports,onChange:N=>l({...o,emailAnalyticsReports:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Email Security Alerts"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Important security notifications"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.emailSecurityAlerts,onChange:N=>l({...o,emailSecurityAlerts:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Email New Features"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Learn about new features and updates"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.emailNewFeatures,onChange:N=>l({...o,emailNewFeatures:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Push Notifications"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Receive browser push notifications"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o.pushNotifications,onChange:N=>l({...o,pushNotifications:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-600"})]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[s.jsx(Qr,{size:20}),"Save Notification Settings"]})})]}),t==="security"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(Zy,{size:24,className:"text-red-400"}),"Security Settings"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Require 2FA for admin accounts"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c.twoFactorEnabled,onChange:N=>d({...c,twoFactorEnabled:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Minimum Password Length"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"range",min:"8",max:"20",value:c.passwordMinLength,onChange:N=>d({...c,passwordMinLength:parseInt(N.target.value)}),className:"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),s.jsx("span",{className:"text-white font-medium w-12 text-center",children:c.passwordMinLength})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Timeout (minutes)"}),s.jsx("input",{type:"number",min:"5",max:"480",value:c.sessionTimeout,onChange:N=>d({...c,sessionTimeout:parseInt(N.target.value)}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-red-500"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Users will be logged out after this period of inactivity"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:"Enable Auto Backup"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Automatically backup database daily"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c.enableAutoBackup,onChange:N=>d({...c,enableAutoBackup:N.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Backup Frequency"}),s.jsxs("select",{value:c.backupFrequency,onChange:N=>d({...c,backupFrequency:N.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-red-500",children:[s.jsx("option",{value:"daily",children:"Daily"}),s.jsx("option",{value:"weekly",children:"Weekly"}),s.jsx("option",{value:"monthly",children:"Monthly"})]})]})]})]}),s.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-blue-300",children:[" ",s.jsx("strong",{children:"Tip:"})," Strong security settings protect your platform and user data. We recommend enabling 2FA and auto-backups."]})}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:S,className:"flex items-center gap-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all",children:[s.jsx(Qr,{size:20}),"Save Security Settings"]})})]})]})})},G3=()=>{var N;const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState([]),[a,o]=w.useState(null),[l,c]=w.useState([]),[d,h]=w.useState(""),[m,p]=w.useState(""),[y,S]=w.useState("all");w.useEffect(()=>{const g=ee(z,"supportMessages"),v=je(g,Te("createdAt","desc")),j=gt(v,P=>{const M=[];P.forEach(D=>{M.push({id:D.id,...D.data()})}),r(M)});return()=>j()},[]),w.useEffect(()=>{if(e.length===0)return;const g=new Map;e.forEach(j=>{if(j.senderRole==="admin")return;const P=j.senderId;if(!g.has(P))g.set(P,{userId:P,userName:j.senderName,userEmail:j.senderEmail,userRole:j.senderRole,lastMessage:j.message,lastMessageTime:j.createdAt,unreadCount:0});else{const M=g.get(P);j.createdAt.toMillis()>M.lastMessageTime.toMillis()&&(M.lastMessage=j.message,M.lastMessageTime=j.createdAt)}});let v=Array.from(g.values()).sort((j,P)=>P.lastMessageTime.toMillis()-j.lastMessageTime.toMillis());y!=="all"&&(v=v.filter(j=>j.userRole===y)),m&&(v=v.filter(j=>j.userName.toLowerCase().includes(m.toLowerCase())||j.userEmail.toLowerCase().includes(m.toLowerCase())||j.lastMessage.toLowerCase().includes(m.toLowerCase()))),i(v)},[e,y,m]),w.useEffect(()=>{if(!a){c([]);return}const g=e.filter(v=>v.senderId===a||v.recipientId===a&&v.senderRole==="admin").sort((v,j)=>v.createdAt.toMillis()-j.createdAt.toMillis());c(g)},[a,e]);const b=async g=>{if(g.preventDefault(),!(!d.trim()||!t||!a))try{await ct(ee(z,"supportMessages"),{senderId:t.uid,senderName:t.displayName||"Admin",senderEmail:t.email,senderRole:"admin",recipientId:a,message:d.trim(),createdAt:ue()}),h("")}catch(v){console.error("Failed to send message:",v)}};return s.jsx(nn,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Support Chat"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage customer, artist, and manager communications"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Messages"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:e.length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Customers"}),s.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:e.filter(g=>g.senderRole==="customer").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Artists"}),s.jsx("p",{className:"text-2xl font-bold text-purple-400 mt-1",children:e.filter(g=>g.senderRole==="artist").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Managers"}),s.jsx("p",{className:"text-2xl font-bold text-cyan-400 mt-1",children:e.filter(g=>g.senderRole==="manager").length})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(eg,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",value:m,onChange:g=>p(g.target.value),placeholder:"Search conversations...",className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(o_,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsxs("select",{value:y,onChange:g=>S(g.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-purple-500 appearance-none",children:[s.jsx("option",{value:"all",children:"All Roles"}),s.jsx("option",{value:"customer",children:"Customers"}),s.jsx("option",{value:"artist",children:"Artists"}),s.jsx("option",{value:"manager",children:"Managers"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-700",children:s.jsxs("h2",{className:"font-semibold text-white",children:["Conversations (",n.length,")"]})}),s.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"calc(100vh - 450px)"},children:n.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-400",children:[s.jsx(Ke,{size:48,className:"mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No conversations found"})]}):n.map(g=>{var v,j,P;return s.jsx("button",{onClick:()=>o(g.userId),className:`w-full p-4 text-left transition border-b border-gray-700 ${a===g.userId?"bg-purple-900/30 border-l-4 border-l-purple-500":"hover:bg-gray-750"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold flex-shrink-0 ${g.userRole==="customer"?"bg-gradient-to-r from-blue-500 to-cyan-500":g.userRole==="artist"?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-gradient-to-r from-green-500 to-teal-500"}`,children:g.userName[0]||"U"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"font-semibold text-white text-sm truncate",children:g.userName}),s.jsx("span",{className:"text-xs text-gray-400",children:((P=(j=(v=g.lastMessageTime)==null?void 0:v.toDate)==null?void 0:j.call(v))==null?void 0:P.toLocaleDateString())||""})]}),s.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-xs capitalize ${g.userRole==="customer"?"bg-blue-900 text-blue-300":g.userRole==="artist"?"bg-purple-900 text-purple-300":"bg-cyan-900 text-cyan-300"}`,children:g.userRole})}),s.jsx("p",{className:"text-xs text-gray-400 truncate",children:g.lastMessage})]})]})},g.userId)})})]}),s.jsx("div",{className:"lg:col-span-2 bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 450px)"},children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-750",children:s.jsx("div",{className:"flex items-center gap-3",children:(()=>{const g=n.find(v=>v.userId===a);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold ${(g==null?void 0:g.userRole)==="customer"?"bg-gradient-to-r from-blue-500 to-cyan-500":(g==null?void 0:g.userRole)==="artist"?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-gradient-to-r from-green-500 to-teal-500"}`,children:(g==null?void 0:g.userName[0])||"U"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-white",children:(g==null?void 0:g.userName)||"User"}),s.jsx("p",{className:"text-xs text-gray-400",children:(g==null?void 0:g.userEmail)||""})]}),s.jsx("span",{className:`ml-auto px-3 py-1 rounded text-xs capitalize ${(g==null?void 0:g.userRole)==="customer"?"bg-blue-900 text-blue-300":(g==null?void 0:g.userRole)==="artist"?"bg-purple-900 text-purple-300":"bg-cyan-900 text-cyan-300"}`,children:g==null?void 0:g.userRole})]})})()})}),s.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:l.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-12",children:[s.jsx(Ke,{size:48,className:"mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No messages yet"})]}):l.map(g=>{var v,j,P;return s.jsxs("div",{className:`p-4 rounded-lg ${g.senderRole==="admin"?"bg-purple-900/30 ml-12":"bg-gray-700 mr-12"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-white",children:g.senderRole==="admin"?"You (Admin)":g.senderName}),s.jsx("span",{className:`ml-2 px-2 py-0.5 rounded text-xs capitalize ${g.senderRole==="customer"?"bg-blue-600 text-blue-100":g.senderRole==="artist"?"bg-purple-600 text-purple-100":g.senderRole==="manager"?"bg-cyan-600 text-cyan-100":"bg-gray-600 text-gray-100"}`,children:g.senderRole})]}),s.jsx("span",{className:"text-xs text-gray-400",children:((P=(j=(v=g.createdAt)==null?void 0:v.toDate)==null?void 0:j.call(v))==null?void 0:P.toLocaleString())||"Just now"})]}),s.jsx("p",{className:"text-gray-300",children:g.message})]},g.id)})}),s.jsxs("form",{onSubmit:b,className:"p-4 border-t border-gray-700 bg-gray-750",children:[s.jsxs("div",{className:"mb-2 text-sm text-gray-400",children:["Replying to:"," ",s.jsx("span",{className:"text-white font-semibold",children:(N=n.find(g=>g.userId===a))==null?void 0:N.userName})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:d,onChange:g=>h(g.target.value),placeholder:"Type your reply...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500"}),s.jsxs("button",{type:"submit",disabled:!d.trim(),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(er,{size:20}),"Send"]})]})]})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ke,{size:64,className:"mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-xl",children:"Select a conversation to start chatting"})]})})})]})]})})},fd=({children:t})=>{var h,m;const[e,r]=w.useState(!0),{user:n,signOut:i}=ke(),a=gr(),o=Cr(),l=async()=>{await i(),o("/")},c=[{name:"Dashboard",href:"/manager/dashboard",icon:md},{name:"Beats",href:"/manager/beats",icon:Le},{name:"Collaborations",href:"/manager/collaborations",icon:pr},{name:"Chat",href:"/manager/chat",icon:Ke}],d=p=>a.pathname===p;return s.jsxs("div",{className:"min-h-screen bg-gray-900",children:[s.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-56 sm:w-64 bg-gray-800 border-r border-gray-700 transform transition-transform duration-300 overflow-hidden flex flex-col ${e?"translate-x-0":"-translate-x-full"}`,children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white truncate",children:"Jonna Rincon"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Manager"})]}),s.jsx("button",{onClick:()=>r(!1),className:"lg:hidden text-gray-400 hover:text-white flex-shrink-0 ml-2",children:s.jsx(Pt,{size:20})})]}),s.jsx("div",{className:"px-3 py-3 sm:px-4 sm:py-4 border-b border-gray-700 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:((h=n==null?void 0:n.displayName)==null?void 0:h[0])||((m=n==null?void 0:n.email)==null?void 0:m[0])||"M"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:(n==null?void 0:n.displayName)||"Manager"}),s.jsx("p",{className:"text-xs text-gray-400 truncate",children:n==null?void 0:n.email})]})]})}),s.jsx("nav",{className:"flex-1 px-2 py-2 sm:px-4 sm:py-4 space-y-1 overflow-y-auto",children:c.map(p=>{const y=p.icon;return s.jsxs(Z,{to:p.href,onClick:S=>{window.innerWidth<1024&&r(!1)},className:`flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-colors text-sm sm:text-base ${d(p.href)?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white":"text-gray-400 hover:bg-gray-700 hover:text-white"}`,children:[s.jsx(y,{size:18,className:"flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:p.name})]},p.name)})}),s.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-4 border-t border-gray-700 flex-shrink-0",children:s.jsxs("button",{onClick:l,className:"flex items-center space-x-2 sm:space-x-3 w-full px-3 sm:px-4 py-2 sm:py-3 text-gray-400 hover:bg-gray-700 hover:text-white rounded-lg transition-colors text-sm sm:text-base",children:[s.jsx(pa,{size:18,className:"flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})})]}),s.jsxs("div",{className:`transition-all duration-300 ${e?"lg:pl-64":"pl-0"}`,children:[s.jsx("div",{className:"sticky top-0 z-40 bg-gray-800 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 sm:py-4",children:[s.jsx("button",{onClick:()=>r(!e),className:"text-gray-400 hover:text-white lg:hidden",children:s.jsx(zs,{size:24})}),s.jsx("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 lg:flex-none",children:s.jsx("div",{className:"text-right hidden sm:block",children:s.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:new Date().toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})})})]})}),s.jsx("main",{className:"px-3 py-4 sm:px-6 sm:py-6 lg:px-6 lg:py-6",children:t})]}),e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>r(!1)})]})},K3=()=>{const{beats:t}=pd(),e={totalBeats:t.length,publishedBeats:t.filter(r=>r.status==="published").length,totalPlays:t.reduce((r,n)=>r+n.plays,0),featuredBeats:t.filter(r=>r.featured).length};return s.jsx(fd,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Manager Dashboard"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Overview of beats and platform activity"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-cyan-600 rounded-xl p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Beats"}),s.jsx("p",{className:"text-3xl font-bold mt-2",children:e.totalBeats})]}),s.jsx(Le,{size:40,className:"opacity-20"})]})}),s.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Published"}),s.jsx("p",{className:"text-3xl font-bold mt-2",children:e.publishedBeats})]}),s.jsx(fl,{size:40,className:"opacity-20"})]})}),s.jsx("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Total Plays"}),s.jsx("p",{className:"text-3xl font-bold mt-2",children:e.totalPlays.toLocaleString()})]}),s.jsx(Qf,{size:40,className:"opacity-20"})]})}),s.jsx("div",{className:"bg-gradient-to-br from-yellow-600 to-orange-600 rounded-xl p-6 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Featured"}),s.jsx("p",{className:"text-3xl font-bold mt-2",children:e.featuredBeats})]}),s.jsx(Le,{size:40,className:"opacity-20"})]})})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("a",{href:"/manager/beats",className:"flex items-center gap-3 p-4 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-colors group",children:[s.jsx("div",{className:"p-3 bg-blue-600 rounded-lg group-hover:bg-blue-500 transition-colors",children:s.jsx(Le,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-white",children:"Manage Beats"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Edit and update beat information"})]})]}),s.jsxs("a",{href:"/manager/chat",className:"flex items-center gap-3 p-4 bg-gray-700/50 hover:bg-gray-700 rounded-lg transition-colors group",children:[s.jsx("div",{className:"p-3 bg-cyan-600 rounded-lg group-hover:bg-cyan-500 transition-colors",children:s.jsx(Ke,{size:24,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-white",children:"Chat"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Communicate with team and artists"})]})]})]})]}),s.jsxs("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-2",children:"Manager Access"}),s.jsx("p",{className:"text-blue-200 text-sm",children:"As a manager, you have access to edit beats and communicate via chat. You can view all platform data but cannot delete or modify other settings."})]})]})})},Q3=()=>{const{beats:t,loading:e}=pd(),[r,n]=w.useState("all"),[i,a]=w.useState(null),o=t.filter(d=>r==="all"?!0:d.status===r),l=d=>{a(d)},c=async(d,h)=>{try{await kn.updateBeat(d,h),alert("Beat updated successfully!"),a(null)}catch(m){alert("Failed to update beat: "+m.message)}};return s.jsx(fd,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Beats Management"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"View and edit beat information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Beats"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Published"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(d=>d.status==="published").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Featured"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.filter(d=>d.featured).length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Plays"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.reduce((d,h)=>d+h.plays,0).toLocaleString()})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Filter by Status"}),s.jsxs("select",{value:r,onChange:d=>n(d.target.value),className:"bg-gray-800 border border-gray-700 text-white rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"archived",children:"Archived"})]})]}),s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Beat"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Genre"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"BPM"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-300",children:"Stats"}),s.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-300",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-700",children:e?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"Loading beats..."})}):o.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"No beats found"})}):o.map(d=>s.jsxs("tr",{className:"hover:bg-gray-700/50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("img",{src:d.artworkUrl,alt:d.title,className:"w-12 h-12 rounded object-cover"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-white",children:d.title}),s.jsx("p",{className:"text-sm text-gray-400",children:d.artist}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.featured&&s.jsx("span",{className:"px-2 py-0.5 bg-yellow-500/20 text-yellow-400 rounded text-xs",children:"Featured"}),d.trending&&s.jsx("span",{className:"px-2 py-0.5 bg-pink-500/20 text-pink-400 rounded text-xs",children:"Trending"})]})]})]})}),s.jsx("td",{className:"px-6 py-4 text-gray-300",children:d.genre}),s.jsx("td",{className:"px-6 py-4 text-gray-300",children:d.bpm}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded text-sm capitalize ${d.status==="published"?"bg-green-500/20 text-green-400":d.status==="draft"?"bg-gray-500/20 text-gray-400":"bg-orange-500/20 text-orange-400"}`,children:d.status})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-400",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Kr,{size:14}),s.jsx("span",{children:d.plays})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(St,{size:14}),s.jsx("span",{children:d.downloads})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Yf,{size:14}),s.jsx("span",{children:d.likes})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("button",{onClick:()=>l(d),className:"p-2 text-blue-400 hover:bg-blue-500/20 rounded transition-colors",title:"Edit",children:s.jsx(c_,{size:18})})})})]},d.id))})]})})}),i&&s.jsx(Y3,{beat:i,onClose:()=>a(null),onSave:c})]})})},Y3=({beat:t,onClose:e,onSave:r})=>{const[n,i]=w.useState({title:t.title,genre:t.genre,bpm:t.bpm,key:t.key,tags:t.tags.join(", "),featured:t.featured,trending:t.trending,status:t.status}),a=o=>{o.preventDefault(),r(t.id,{...n,tags:n.tags.split(",").map(l=>l.trim()).filter(l=>l)})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-xl max-w-2xl w-full p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Edit Beat"}),s.jsxs("form",{onSubmit:a,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),s.jsx("input",{type:"text",value:n.title,onChange:o=>i({...n,title:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Genre"}),s.jsx("input",{type:"text",value:n.genre,onChange:o=>i({...n,genre:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"BPM"}),s.jsx("input",{type:"number",value:n.bpm,onChange:o=>i({...n,bpm:parseInt(o.target.value)}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key"}),s.jsx("input",{type:"text",value:n.key,onChange:o=>i({...n,key:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),s.jsx("input",{type:"text",value:n.tags,onChange:o=>i({...n,tags:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),s.jsxs("select",{value:n.status,onChange:o=>i({...n,status:o.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"archived",children:"Archived"})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:n.featured,onChange:o=>i({...n,featured:o.target.checked}),className:"w-4 h-4 rounded"}),s.jsx("span",{className:"text-sm text-gray-300",children:"Featured"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:n.trending,onChange:o=>i({...n,trending:o.target.checked}),className:"w-4 h-4 rounded"}),s.jsx("span",{className:"text-sm text-gray-300",children:"Trending"})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-700",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-blue-700 hover:to-cyan-700 transition-all",children:"Save Changes"})]})]})]})})},J3=()=>{const{collaborations:t,loading:e}=sg(),{user:r}=ke(),[n,i]=w.useState(null),[a,o]=w.useState({}),l=c=>({inquiry:"bg-gray-500/20 text-gray-400",negotiating:"bg-yellow-500/20 text-yellow-400",agreed:"bg-blue-500/20 text-blue-400",contract_sent:"bg-purple-500/20 text-purple-400",signed:"bg-green-500/20 text-green-400",in_progress:"bg-cyan-500/20 text-cyan-400",completed:"bg-green-600/20 text-green-500",cancelled:"bg-red-500/20 text-red-400"})[c];return w.useEffect(()=>{if(!n)return;const c=ee(z,"collaborationMessages"),d=je(c,ae("collaborationId","==",n),Te("createdAt","asc")),h=gt(d,m=>{const p=[];m.forEach(y=>{p.push({id:y.id,...y.data()})}),o(y=>({...y,[n]:p}))});return()=>h()},[n]),s.jsx(fd,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Collaborations & Contracts"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"View partnerships and deals (Read-Only)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:t.length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Active"}),s.jsx("p",{className:"text-2xl font-bold text-blue-400 mt-1",children:t.filter(c=>["agreed","contract_sent","signed","in_progress"].includes(c.status)).length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-green-400 mt-1",children:t.filter(c=>c.status==="completed").length})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-4",children:[s.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:["",t.reduce((c,d)=>c+d.paidAmount,0).toFixed(2)]})]})]}),s.jsx("div",{className:"space-y-4",children:e?s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"Loading..."}):t.length===0?s.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-12 text-center text-gray-400",children:"No collaborations yet"}):t.map(c=>{var d;return s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden",children:[s.jsx("div",{onClick:()=>i(n===c.id?null:c.id),className:"p-4 cursor-pointer hover:bg-gray-750 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-bold text-white truncate",children:c.title}),s.jsx("span",{className:`px-2 py-1 rounded text-xs flex-shrink-0 ${l(c.status)}`,children:c.status.replace("_"," ")})]}),s.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[s.jsx("div",{className:"text-sm text-gray-400 hidden md:block",children:s.jsx("span",{className:"text-white font-medium",children:c.clientName})}),s.jsx("button",{className:"text-gray-400 hover:text-white transition",children:n===c.id?s.jsx(hd,{size:20}):s.jsx(dd,{size:20})})]})]})}),n===c.id&&s.jsxs("div",{className:"border-t border-gray-700 p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Client:"}),s.jsx("p",{className:"text-white font-medium",children:c.clientName}),s.jsx("p",{className:"text-gray-400 text-xs",children:c.clientEmail})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Type:"}),s.jsx("p",{className:"text-white font-medium capitalize",children:c.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Budget:"}),s.jsx("p",{className:"text-white font-medium",children:c.budget?`${c.budget.toFixed(2)}`:"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Payment:"}),s.jsxs("p",{className:`font-medium ${c.paymentStatus==="paid"?"text-green-400":c.paymentStatus==="partial"?"text-yellow-400":"text-gray-400"}`,children:["",c.paidAmount.toFixed(2)," (",c.paymentStatus,")"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-300 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-200",children:c.description})]}),s.jsxs("div",{className:"bg-gray-900 rounded-lg p-4",children:[s.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-4",children:[s.jsx(Ke,{size:20,className:"text-blue-400"}),"Messages"]}),s.jsx("div",{className:"bg-gray-800 rounded-lg p-4 max-h-80 overflow-y-auto space-y-3",children:!a[c.id]||a[c.id].length===0?s.jsxs("div",{className:"text-center text-gray-400 py-8",children:[s.jsx(Ke,{size:48,className:"mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No messages yet"})]}):(d=a[c.id])==null?void 0:d.map(h=>{var m,p,y;return s.jsxs("div",{className:`p-3 rounded-lg ${h.senderId===(r==null?void 0:r.uid)?"bg-purple-900/30 ml-8":"bg-gray-700 mr-8"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:"font-semibold text-sm text-white",children:h.senderName}),s.jsx("span",{className:"text-xs text-gray-400",children:((y=(p=(m=h.createdAt)==null?void 0:m.toDate)==null?void 0:p.call(m))==null?void 0:y.toLocaleString())||"Just now"})]}),s.jsx("p",{className:"text-gray-300 text-sm",children:h.message})]},h.id)})})]})]})]},c.id)})})]})})},X3=()=>{const{user:t}=ke(),[e,r]=w.useState([]),[n,i]=w.useState(""),[a,o]=w.useState("");w.useEffect(()=>{const d=ee(z,"collaborationMessages"),h=je(d,Te("createdAt","desc")),m=gt(h,p=>{const y=[];p.forEach(S=>{y.push({id:S.id,...S.data()})}),r(y)});return()=>m()},[]);const l=async d=>{if(d.preventDefault(),!(!n.trim()||!t))try{await ct(ee(z,"collaborationMessages"),{senderId:t.uid,senderName:t.displayName||"Manager",senderEmail:t.email,senderRole:"manager",message:n.trim(),createdAt:ue()}),i("")}catch(h){console.error("Failed to send message:",h)}},c=e.filter(d=>d.message.toLowerCase().includes(a.toLowerCase())||d.senderName.toLowerCase().includes(a.toLowerCase()));return s.jsx(fd,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Chat"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Communicate with artists and team"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(eg,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",value:a,onChange:d=>o(d.target.value),placeholder:"Search messages...",className:"w-full pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500"})]}),s.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-xl overflow-hidden flex flex-col",style:{height:"calc(100vh - 400px)"},children:[s.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:c.length===0?s.jsxs("div",{className:"text-center text-gray-400 py-12",children:[s.jsx(Ke,{size:48,className:"mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No messages yet"})]}):c.map(d=>{var h,m,p;return s.jsxs("div",{className:`p-4 rounded-lg ${d.senderId===(t==null?void 0:t.uid)?"bg-blue-900/30 ml-12":"bg-gray-700 mr-12"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-white",children:d.senderId===(t==null?void 0:t.uid)?"You":d.senderName}),d.senderRole&&s.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-600 text-gray-300 rounded text-xs capitalize",children:d.senderRole})]}),s.jsx("span",{className:"text-xs text-gray-400",children:((p=(m=(h=d.createdAt)==null?void 0:h.toDate)==null?void 0:m.call(h))==null?void 0:p.toLocaleString())||"Just now"})]}),s.jsx("p",{className:"text-gray-300",children:d.message})]},d.id)})}),s.jsx("form",{onSubmit:l,className:"p-4 border-t border-gray-700 bg-gray-750",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:n,onChange:d=>i(d.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-blue-500"}),s.jsxs("button",{type:"submit",disabled:!n.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(er,{size:20}),"Send"]})]})})]}),s.jsx("div",{className:"bg-blue-900/20 border border-blue-700 rounded-xl p-4",children:s.jsxs("p",{className:"text-sm text-blue-200",children:[" ",s.jsx("strong",{children:"Manager Chat Access:"})," You can view and send messages across all collaborations. Use this to coordinate with artists and the team."]})})]})})},Z3=()=>s.jsx(UP,{children:s.jsx(RS,{children:s.jsxs(cS,{children:[s.jsx(le,{path:"/",element:s.jsx(c3,{})}),s.jsx(le,{path:"/login",element:s.jsx(u3,{})}),s.jsx(le,{path:"/register",element:s.jsx(d3,{})}),s.jsx(le,{path:"/shop/beats",element:s.jsx(h3,{})}),s.jsx(le,{path:"/customer/dashboard",element:s.jsx(ye,{allowedRoles:["user"],children:s.jsx(m3,{})})}),s.jsx(le,{path:"/customer/shop",element:s.jsx(ye,{allowedRoles:["user"],children:s.jsx(w3,{})})}),s.jsx(le,{path:"/customer/orders",element:s.jsx(ye,{allowedRoles:["user"],children:s.jsx(p3,{})})}),s.jsx(le,{path:"/customer/downloads",element:s.jsx(ye,{allowedRoles:["user"],children:s.jsx(f3,{})})}),s.jsx(le,{path:"/customer/free-downloads",element:s.jsx(ye,{allowedRoles:["user"],children:s.jsx(g3,{})})}),s.jsx(le,{path:"/customer/profile",element:s.jsx(ye,{allowedRoles:["user"],children:s.jsx(x3,{})})}),s.jsx(le,{path:"/customer/collaborations",element:s.jsx(ye,{allowedRoles:["user"],children:s.jsx(v3,{})})}),s.jsx(le,{path:"/customer/chat",element:s.jsx(ye,{allowedRoles:["user"],children:s.jsx(N3,{})})}),s.jsx(le,{path:"/customer/settings",element:s.jsx(ye,{allowedRoles:["user"],children:s.jsx(y3,{})})}),s.jsx(le,{path:"/customer/request-artist-role",element:s.jsx(ye,{allowedRoles:["user"],children:s.jsx(b3,{})})}),s.jsx(le,{path:"/artist/dashboard",element:s.jsx(ye,{allowedRoles:["artist"],children:s.jsx(j3,{})})}),s.jsx(le,{path:"/artist/collaborations",element:s.jsx(ye,{allowedRoles:["artist"],children:s.jsx(_3,{})})}),s.jsx(le,{path:"/artist/request-collab",element:s.jsx(ye,{allowedRoles:["artist"],children:s.jsx(E3,{})})}),s.jsx(le,{path:"/artist/beats",element:s.jsx(ye,{allowedRoles:["artist"],children:s.jsx(S3,{})})}),s.jsx(le,{path:"/artist/orders",element:s.jsx(ye,{allowedRoles:["artist"],children:s.jsx(T3,{})})}),s.jsx(le,{path:"/artist/free-downloads",element:s.jsx(ye,{allowedRoles:["artist"],children:s.jsx(k3,{})})}),s.jsx(le,{path:"/artist/chat",element:s.jsx(ye,{allowedRoles:["artist"],children:s.jsx(I3,{})})}),s.jsx(le,{path:"/artist/profile",element:s.jsx(ye,{allowedRoles:["artist"],children:s.jsx(C3,{})})}),s.jsx(le,{path:"/artist/settings",element:s.jsx(ye,{allowedRoles:["artist"],children:s.jsx(A3,{})})}),s.jsx(le,{path:"/admin/dashboard",element:s.jsx(ye,{allowedRoles:["admin"],children:s.jsx(D3,{})})}),s.jsx(le,{path:"/admin/beats",element:s.jsx(ye,{allowedRoles:["admin"],children:s.jsx(M3,{})})}),s.jsx(le,{path:"/admin/orders",element:s.jsx(ye,{allowedRoles:["admin"],children:s.jsx(O3,{})})}),s.jsx(le,{path:"/admin/content",element:s.jsx(ye,{allowedRoles:["admin"],children:s.jsx(F3,{})})}),s.jsx(le,{path:"/admin/analytics",element:s.jsx(ye,{allowedRoles:["admin"],children:s.jsx(B3,{})})}),s.jsx(le,{path:"/admin/collaborations",element:s.jsx(ye,{allowedRoles:["admin"],children:s.jsx($3,{})})}),s.jsx(le,{path:"/admin/collab-requests",element:s.jsx(ye,{allowedRoles:["admin"],children:s.jsx(q3,{})})}),s.jsx(le,{path:"/admin/artist-role-requests",element:s.jsx(ye,{allowedRoles:["admin"],children:s.jsx(H3,{})})}),s.jsx(le,{path:"/admin/settings",element:s.jsx(ye,{allowedRoles:["admin"],children:s.jsx(W3,{})})}),s.jsx(le,{path:"/admin/chat",element:s.jsx(ye,{allowedRoles:["admin"],children:s.jsx(G3,{})})}),s.jsx(le,{path:"/admin",element:s.jsx(ao,{to:"/admin/dashboard",replace:!0})}),s.jsx(le,{path:"/manager/dashboard",element:s.jsx(ye,{allowedRoles:["manager"],children:s.jsx(K3,{})})}),s.jsx(le,{path:"/manager/beats",element:s.jsx(ye,{allowedRoles:["manager"],children:s.jsx(Q3,{})})}),s.jsx(le,{path:"/manager/collaborations",element:s.jsx(ye,{allowedRoles:["manager"],children:s.jsx(J3,{})})}),s.jsx(le,{path:"/manager/chat",element:s.jsx(ye,{allowedRoles:["manager"],children:s.jsx(X3,{})})}),s.jsx(le,{path:"/manager",element:s.jsx(ao,{to:"/manager/dashboard",replace:!0})}),s.jsx(le,{path:"*",element:s.jsx(ao,{to:"/",replace:!0})})]})})}),ev=new URLSearchParams(window.location.search).get("redirect");if(ev){const t=decodeURIComponent(ev);window.history.replaceState(null,"",t)}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("Service Worker registered successfully:",t.scope)}).catch(t=>{console.log("Service Worker registration failed:",t)})});mw(document.getElementById("root")).render(s.jsx(w.StrictMode,{children:s.jsx(Z3,{})}));
